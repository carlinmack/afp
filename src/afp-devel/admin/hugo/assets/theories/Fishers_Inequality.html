<div id='Fishers_Inequality_Root'>>


<body>
<div class="head">
<h1>Theory Set_Multiset_Extras</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Set_Multiset_Extras.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Micellaneous Multset/Set Extras</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Set_Multiset_Extras</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../Design_Theory/Multisets_Extras.html"><span>Design_Theory.Multisets_Extras</span></a><span> </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html"><span>HOL-Combinatorics.Multiset_Permutations</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Set extras</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Minor set extras on cardinality and filtering</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.equal_card_inter_fin_eq_sets|fact"><span class="entity_def" id="Set_Multiset_Extras.equal_card_inter_fin_eq_sets|thm"><span>equal_card_inter_fin_eq_sets</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>finite</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
  </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_lower1</span><span> </span><span>Int_lower2</span><span> </span><span>card_subset_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.insert_filter_set_true|fact"><span class="entity_def" id="Set_Multiset_Extras.insert_filter_set_true|thm"><span>insert_filter_set_true</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.insert_filter_set_false|fact"><span class="entity_def" id="Set_Multiset_Extras.insert_filter_set_false|thm"><span>insert_filter_set_false</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>  


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Multiset Extras</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Minor multiset extras on size and element reasoning</span><span> </span><span>âº</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_756..761">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.obtain_two_items_mset|fact"><span class="entity_def" id="Set_Multiset_Extras.obtain_two_items_mset|thm"><span>obtain_two_items_mset</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_756..761"><span>assms</span></a><span> </span><span>gr_implies_not_zero</span><span> </span><span>multiset_nonemptyE</span><span> </span><span>size_empty</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_756..761"><span>assms</span></a><span> </span><span>insert_DiffM</span><span> </span><span>less_irrefl_nat</span><span> </span><span>nonempty_has_size</span><span> </span><span>size_single</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>less_not_refl</span><span> </span><span>multiset_nonemptyE</span><span> </span><span>size_empty</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_756..761"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1240..1245">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.obtain_two_items_mset_filter|fact"><span class="entity_def" id="Set_Multiset_Extras.obtain_two_items_mset_filter|thm"><span>obtain_two_items_mset_filter</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>xin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_1447..1450">yin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.obtain_two_items_mset|fact"><span>obtain_two_items_mset</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1240..1245"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1544..1549">xdets</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1586..1590">yin2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1447..1450"><span>yin</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>multiset_partition</span><span> </span><span>union_iff</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1586..1590"><span>yin2</span></a><span> </span><span>filter_mset_eq_conv</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1544..1549"><span>xdets</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1240..1245"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1812..1817">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.size_count_mset_ss|fact"><span class="entity_def" id="Set_Multiset_Extras.size_count_mset_ss|thm"><span>size_count_mset_ss</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>C</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_1955..1959">cdef</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1812..1817"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2015..2018">fin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1812..1817"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2069..2071">un</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>(</span></span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Diff_partition</span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>C</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1812..1817"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2165..2169">disj</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="main"><span>(</span></span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>C</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2242..2246">zero</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>count</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>count_eq_zero_iff</span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_2165..2169"><span>disj</span></a><span> </span><span>disjoint_iff_not_equal</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_2069..2071"><span>un</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_2165..2169"><span>disj</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_2015..2018"><span>fin</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1812..1817"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_1955..1959"><span>cdef</span></a><span> </span><span>sum.subset_diff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_2069..2071"><span>un</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set_mset</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_2242..2246"><span>zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>size_multiset_overloaded_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.mset_list_by_index|fact"><span class="entity_def" id="Set_Multiset_Extras.mset_list_by_index|thm"><span>mset_list_by_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span>length</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>map_nth</span><span> </span><span>mset_map</span><span> </span><span>mset_set_upto_eq_mset_upto</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2918..2923">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.count_mset_split_image_filter|fact"><span class="entity_def" id="Set_Multiset_Extras.count_mset_split_image_filter|thm"><span>count_mset_split_image_filter</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>filter_mset</span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>image_mset_If</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.image_mset_filter_swap|fact"><span>image_mset_filter_swap</span></a><span> </span><span>size_image_mset</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_2918..2923"><span>assms</span></a><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.count_size_set_repr|fact"><span>count_size_set_repr</span></a><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.filter_mset_cong|fact"><span>filter_mset_cong</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3203..3208">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.count_mset_split_image_filter_not|fact"><span class="entity_def" id="Set_Multiset_Extras.count_mset_split_image_filter_not|thm"><span>count_mset_split_image_filter_not</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>image_mset_If</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.image_mset_filter_swap|fact"><span>image_mset_filter_swap</span></a><span> </span><span>size_image_mset</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_3203..3208"><span>assms</span></a><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.count_size_set_repr|fact"><span>count_size_set_repr</span></a><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.filter_mset_cong|fact"><span>filter_mset_cong</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.removeAll_size_lt|fact"><span class="entity_def" id="Set_Multiset_Extras.removeAll_size_lt|thm"><span>removeAll_size_lt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.removeAll_mset|const"><span>removeAll_mset</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>size</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>size_mset_mono</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.mset_image_eq_filter_eq|fact"><span class="entity_def" id="Set_Multiset_Extras.mset_image_eq_filter_eq|thm"><span>mset_image_eq_filter_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
  </span><span>filter_mset</span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.filter_mset_image_mset|fact"><span>filter_mset_image_mset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Permutation on Sets and Multisets</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.elem_permutation_of_set_empty_iff|fact"><span class="entity_def" id="Set_Multiset_Extras.elem_permutation_of_set_empty_iff|thm"><span>elem_permutation_of_set_empty_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_setD|fact"><span>permutations_of_setD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.elem_permutation_of_mset_empty_iff|fact"><span class="entity_def" id="Set_Multiset_Extras.elem_permutation_of_mset_empty_iff|thm"><span>elem_permutation_of_mset_empty_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multisetD|fact"><span>permutations_of_multisetD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Lists</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Further lemmas on the relationship between lists and multisets</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.count_distinct_mset_list_index|fact"><span class="entity_def" id="Set_Multiset_Extras.count_distinct_mset_list_index|thm"><span>count_distinct_mset_list_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>â¹</span></span><span>
    </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Duplicate_Free_Multiset.html#Duplicate_Free_Multiset.distinct_mset|const"><span>distinct_mset</span></a><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><span>nth_eq_iff_index_eq</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4368..4373">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.index_remove1_mset_ne|fact"><span class="entity_def" id="Set_Multiset_Extras.index_remove1_mset_ne|thm"><span>index_remove1_mset_ne</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset|const"><span>remove1_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_4615..4619">True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>count_eq_zero_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4719..4722">crm</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset|const"><span>remove1_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4615..4619"><span>True</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>count_greater_eq_one_iff</span><span class="main"><span>)</span></span><span>  
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ys</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>zs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_4842..4846">xseq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>zs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_4873..4877">yseq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_4901..4905">zseq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>zs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span>id_take_nth_drop</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_mset_conv_nth|fact"><span>in_mset_conv_nth</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>zs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4842..4846"><span>xseq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset|const"><span>remove1_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>zs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>zs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4719..4722"><span>crm</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4615..4619"><span>True</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset|const"><span>remove1_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>zs</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5316..5321">yinor</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>zs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>yeq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_5472..5476">j2lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_mset_conv_nth|fact"><span>in_mset_conv_nth</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5543..5544">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4873..4877"><span>yseq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>j1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4873..4877"><span>yseq</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_5472..5476"><span>j2lt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_5543..5544"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_5472..5476"><span>j2lt</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4842..4846"><span>xseq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>zs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_5316..5321"><span>yinor</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_5772..5775">zsy</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>zs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_5795..5799">j2lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>zs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_mset_conv_nth|fact"><span>in_mset_conv_nth</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5867..5868">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="skolem"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4901..4905"><span>zseq</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_5772..5775"><span>zsy</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>zs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4901..4905"><span>zseq</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4842..4846"><span>xseq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_diff_Suc</span><span> </span><span>add_Suc_shift</span><span> </span><span>add_diff_inverse_nat</span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>length_drop</span><span> </span><span>less_imp_not_less</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_5795..5799"><span>j2lt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_5867..5868"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>that</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_4368..4373"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>in_diffD</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_mset_conv_nth|fact"><span>in_mset_conv_nth</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.count_list_mset|fact"><span class="entity_def" id="Set_Multiset_Extras.count_list_mset|thm"><span>count_list_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count_list</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_6444..6448">Cons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_6504..6508">True</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>mset_add_split</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>add_mset</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6504..6508"><span>True</span></a><span> </span><span>Suc_eq_plus1</span><span> </span><span>count_add_mset</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6504..6508"><span>True</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6444..6448"><span>Cons.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6444..6448"><span>Cons.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6852..6857">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.count_min_2_indices_lt|fact"><span class="entity_def" id="Set_Multiset_Extras.count_min_2_indices_lt|thm"><span>count_min_2_indices_lt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xs1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xs2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_7058..7061">xse</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>xs1</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="skolem"><span>xs2</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7084..7087">xs1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xs1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take</span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>xs2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xs2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>drop</span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>xs1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6852..6857"><span>assms</span></a><span> </span><span>length_take</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6852..6857"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>xs1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take</span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="free"><span>xs</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7257..7262">xs1in</span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>xs1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>nth_append</span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_7058..7061"><span>xse</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>xs1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6852..6857"><span>assms</span></a><span> </span><span>length_take</span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_7084..7087"><span>xs1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7395..7400">xs2in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="skolem"><span>xs2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_7058..7061"><span>xse</span></a><span> </span><span>nth_append</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6852..6857"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_mset_conv_nth|fact"><span>in_mset_conv_nth</span></a><span> </span><span>leD</span><span> </span><span>leI</span><span> </span><span>take_all_iff</span><span> </span><span>take_append</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="skolem"><span>xs1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="skolem"><span>xs2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_7058..7061"><span>xse</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="skolem"><span>xs1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="skolem"><span>xs2</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_7257..7262"><span>xs1in</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_7395..7400"><span>xs2in</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add_mono</span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6852..6857"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_6852..6857"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>count_greater_eq_one_iff</span><span> </span><span>nat_1_add_1</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.count_min_2_indices|fact"><span class="entity_def" id="Set_Multiset_Extras.count_min_2_indices|thm"><span>count_min_2_indices</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
  </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.count_min_2_indices_lt|fact"><span>count_min_2_indices_lt</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.count_min_2_indices_lt|fact"><span>count_min_2_indices_lt</span></a><span> </span><span>linorder_cases</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8065..8070">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.obtain_set_list_item|fact"><span class="entity_def" id="Set_Multiset_Extras.obtain_set_list_item|thm"><span>obtain_set_list_item</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_8065..8070"><span>assms</span></a><span> </span><span>in_set_conv_nth</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Summation Rules</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Some lemmas to make it simpler to work with double and triple summations</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span>comm_monoid_add</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add_class.sum_reorder_triple|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add.sum_reorder_triple|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add_class.sum_reorder_triple|thm"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add.sum_reorder_triple|thm"><span>sum_reorder_triple</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>  </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.swap</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.swap</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add_class.double_sum_mult_hom|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add.double_sum_mult_hom|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add_class.double_sum_mult_hom|thm"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add.double_sum_mult_hom|thm"><span>double_sum_mult_hom</span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>comm_ring_1</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>comm_monoid_add_class.sum.cong</span><span> </span><span>sum_distrib_left</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9000..9005">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add_class.double_sum_split_case|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add.double_sum_split_case|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add_class.double_sum_split_case|thm"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add.double_sum_split_case|thm"><span class="entity_def" id="offset_9006..9027">double_sum_split_case</span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.remove</span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_9000..9005"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum.distrib</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
               
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add_class.double_sum_split_case2|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add.double_sum_split_case2|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add_class.double_sum_split_case2|thm"><span class="entity_def" id="Set_Multiset_Extras.comm_monoid_add.double_sum_split_case2|thm"><span>double_sum_split_case2</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9560..9564">part</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>empt</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_9560..9564"><span>part</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>finite_Un</span><span> </span><span>local.sum.cong</span><span> </span><span>local.sum.infinite</span><span> </span><span>local.sum.union_disjoint</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>local.sum.distrib</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span>comm_ring_1</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10101..10106">lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.comm_ring_1_class.double_sum_split_case_square|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_ring_1.double_sum_split_case_square|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_ring_1_class.double_sum_split_case_square|thm"><span class="entity_def" id="Set_Multiset_Extras.comm_ring_1.double_sum_split_case_square|thm"><span class="entity_def" id="offset_10107..10135">double_sum_split_case_square</span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>power2_eq_square</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10471..10472">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum_distrib_right</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10560..10561">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span>  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum_distrib_left</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_10101..10106"><span>assms</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_9006..9027"><span>double_sum_split_case</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_10471..10472"><span>1</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_10560..10561"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>power2_eq_square</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Set_Multiset_Extras.comm_ring_1_class.double_sum_split_square_diff|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_ring_1.double_sum_split_square_diff|fact"><span class="entity_def" id="Set_Multiset_Extras.comm_ring_1_class.double_sum_split_square_diff|thm"><span class="entity_def" id="Set_Multiset_Extras.comm_ring_1.double_sum_split_square_diff|thm"><span>double_sum_split_square_diff</span></span></span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#offset_10107..10135"><span>double_sum_split_case_square</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>d>


<body>
<div class="head">
<h1>Theory Matrix_Vector_Extras</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Matrix_Vector_Extras.thy 
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Matrix and Vector Additions</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Matrix_Vector_Extras</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Set_Multiset_Extras.html"><span>Set_Multiset_Extras</span></a><span> </span><a href="../Jordan_Normal_Form/Matrix.html"><span>Jordan_Normal_Form.Matrix</span></a><span> 
</span><a href="../Design_Theory/Multisets_Extras.html"><span>Design_Theory.Multisets_Extras</span></a><span> </span><span class="quoted"><span>"</span><a href="../Groebner_Bases/Macaulay_Matrix.html"><span>Groebner_Bases.Macaulay_Matrix</span></a><span>"</span></span><span> </span><span class="quoted"><span>"</span><a href="../Polynomial_Factorization/Missing_List.html"><span>Polynomial_Factorization.Missing_List</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Vector Extras</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>For ease of use, a number of additions to the existing vector library as initially developed
</span><span>in the JNF AFP Entry, are given below</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We define the concept of summing up elements of a vector</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add.sum_vec_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add.sum_vec_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add.sum_vec_def_raw|axiom"><span>definition</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>comm_monoid_add</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_dict|fact"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add.sum_vec.cong|fact"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_dict|thm"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add.sum_vec.cong|thm"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_dict|axiom"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span class="entity_def" id="Matrix_Vector_Extras.comm_monoid_add.sum_vec|const"><span>sum_vec</span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sum_vec</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_vNil|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_vNil|thm"><span>sum_vec_vNil</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span>vNil</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_vCons|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_vCons|thm"><span>sum_vec_vCons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_796..797">0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span>Suc</span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>sum.shift_bounds_Suc_ivl</span><span class="main"><span>)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1132..1135">sum</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>{</span></span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dim_vec_vCons</span><span> </span><span>sum.atLeast_Suc_lessThan</span><span> </span><span>zero_less_Suc</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_1132..1135"><span>sum</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_796..797"><span>0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_list|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_list|thm"><span>sum_vec_list</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sum_list</span><span> </span><span class="main"><span>(</span></span><span>list_of_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.sum_vec_vCons|fact"><span>sum_vec_vCons</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_mset|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_mset|thm"><span>sum_vec_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>list_of_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.sum_vec_list|fact"><span>sum_vec_list</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.dim_vec_vCons_ne_0|fact"><span class="entity_def" id="Matrix_Vector_Extras.dim_vec_vCons_ne_0|thm"><span>dim_vec_vCons_ne_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1839..1844">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_vCons_lt|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_vCons_lt|thm"><span>sum_vec_vCons_lt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2014..2019">split</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.sum_vec_vCons|fact"><span>sum_vec_vCons</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2095..2096">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.dim_vec_vCons_ne_0|fact"><span>dim_vec_vCons_ne_0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_1839..1844"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_2095..2096"><span>a</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_2014..2019"><span>split</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_1839..1844"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>add_mono</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2312..2317">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_one_zero|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_vec_one_zero|thm"><span>sum_vec_one_zero</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>int</span><span> </span><span>vec</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_2312..2317"><span>assms</span></a><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>vNil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_2516..2521">vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>::</span></span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_2516..2521"><span>vCons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2625..2627">lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span>dim_vec</span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_2516..2521"><span>vCons.hyps</span></a><span class="main"><span>)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.sum_vec_vCons_lt|fact"><span>sum_vec_vCons_lt</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_2625..2627"><span>lt</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_2516..2521"><span>vCons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Definition to convert a vector to a multiset</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>multiset</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vec_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span>vec_index</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_elem_exists_mset|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_elem_exists_mset|thm"><span>vec_elem_exists_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_def|fact"><span>vec_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.mset_vec_same_size|fact"><span class="entity_def" id="Matrix_Vector_Extras.mset_vec_same_size|thm"><span>mset_vec_same_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_def|fact"><span>vec_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.mset_vec_eq_mset_list|fact"><span class="entity_def" id="Matrix_Vector_Extras.mset_vec_eq_mset_list|thm"><span>mset_vec_eq_mset_list</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>list_of_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_def|fact"><span>vec_mset_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>list_of_vec_map</span><span> </span><span>mset_map</span><span> </span><span>mset_set_upto_eq_mset_upto</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_img_map|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_img_map|thm"><span>vec_mset_img_map</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>image_mset</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>list_vec</span><span> </span><span>mset_map</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_eq_mset_list|fact"><span>mset_vec_eq_mset_list</span></a><span> </span><span>vec_of_list_map</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_vNil|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_vNil|thm"><span>vec_mset_vNil</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span>vNil</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{#}</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_def|fact"><span>vec_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_vCons|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_vCons|thm"><span>vec_mset_vCons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>add_mset</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>list_of_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_eq_mset_list|fact"><span>mset_vec_eq_mset_list</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>list_of_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>add_mset</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>list_of_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_eq_mset_list|fact"><span>mset_vec_eq_mset_list</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_set|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_mset_set|thm"><span>vec_mset_set</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec_set</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>set_mset</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_eq_mset_list|fact"><span>mset_vec_eq_mset_list</span></a><span> </span><span>set_list_of_vec</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vCons_set_contains_in|fact"><span class="entity_def" id="Matrix_Vector_Extras.vCons_set_contains_in|thm"><span>vCons_set_contains_in</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remdups_mset_singleton_sum|fact"><span>remdups_mset_singleton_sum</span></a><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.set_mset_remdups_mset|fact"><span>set_mset_remdups_mset</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_set|fact"><span>vec_mset_set</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_vCons|fact"><span>vec_mset_vCons</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vCons_set_contains_add|fact"><span class="entity_def" id="Matrix_Vector_Extras.vCons_set_contains_add|thm"><span>vCons_set_contains_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_set|fact"><span>vec_mset_set</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_vCons|fact"><span>vec_mset_vCons</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Un_insert_right</span><span> </span><span>set_mset_add_mset_insert</span><span> </span><span>sup_bot_right</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.setv_vec_mset_not_in_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.setv_vec_mset_not_in_iff|thm"><span>setv_vec_mset_not_in_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_set|fact"><span>vec_mset_set</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Abbreviation for counting occurrences of an element in a vector</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_count_lt_dim|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_count_lt_dim|thm"><span>vec_count_lt_dim</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_same_size|fact"><span>mset_vec_same_size</span></a><span> </span><span>order_refl</span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.set_count_size_min|fact"><span>set_count_size_min</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_empty|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_empty|thm"><span>count_vec_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_same_size|fact"><span>mset_vec_same_size</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_vNil|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_vNil|thm"><span>count_vec_vNil</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span>vNil</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_def|fact"><span>vec_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_vCons|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_vCons|thm"><span>count_vec_vCons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>aa</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>aa</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_vCons|fact"><span>vec_mset_vCons</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.elem_exists_count_min|fact"><span class="entity_def" id="Matrix_Vector_Extras.elem_exists_count_min|thm"><span>elem_exists_count_min</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_elem_exists_mset|fact"><span>vec_elem_exists_mset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_count_mset|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_count_mset|thm"><span>count_vec_count_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_alt_list|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_alt_list|thm"><span>count_vec_alt_list</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><span>filter</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>list_of_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_eq_mset_list|fact"><span>mset_vec_eq_mset_list</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>count_mset</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_alt|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_alt|thm"><span>count_vec_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>($)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_def|fact"><span>vec_mset_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>($)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.filter_mset_eq|fact"><span>filter_mset_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.filter_mset_image_mset|fact"><span>filter_mset_image_mset</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Collect_cong</span><span> </span><span>lessThan_iff</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5937..5942">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_sum_ones|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_sum_ones|thm"><span>count_vec_sum_ones</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_5937..5942"><span>assms</span></a><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>vNil</span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
     </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_vNil|fact"><span>vec_mset_vNil</span></a><span class="main"><span>)</span></span><span>  
 </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_6211..6216">vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>lim</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_6211..6216"><span>vCons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6374..6377">hyp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_6211..6216"><span>vCons.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>($)</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>sv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>($)</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.sum_vec_vCons|fact"><span>sum_vec_vCons</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.dim_vec_vCons_ne_0|fact"><span>dim_vec_vCons_ne_0</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.sum_vec_vCons|fact"><span>sum_vec_vCons</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_6211..6216"><span>vCons.prems</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add.commute</span><span> </span><span>add_0</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_6374..6377"><span>hyp</span></a><span> </span><span>of_nat_1</span><span> </span><span>of_nat_add</span><span> </span><span>vec_index_vCons_0</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6841..6846">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_two_elems|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_two_elems|thm"><span>count_vec_two_elems</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7031..7033">ss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec_set</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_6841..6846"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>vec_set_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_same_size|fact"><span>mset_vec_same_size</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>vec_set</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_set|fact"><span>vec_mset_set</span></a><span> </span><span>size_multiset_overloaded_eq</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7313..7317">also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.size_count_mset_ss|fact"><span>size_count_mset_ss</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_7031..7033"><span>ss</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_7313..7317"><span>calculation</span></a><span> </span><span>finite.emptyI</span><span> </span><span>finite.insertI</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_set|fact"><span>vec_mset_set</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7632..7637">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_sum_zeros|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_sum_zeros|thm"><span>count_vec_sum_zeros</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_two_elems|fact"><span>count_vec_two_elems</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_7632..7637"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_sum_ones|fact"><span>count_vec_sum_ones</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add_diff_cancel_left'</span><span> </span><span>of_nat_add</span><span class="main"><span>)</span></span><span>  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7917..7922">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.count_vec_sum_ones_alt|fact"><span class="entity_def" id="Matrix_Vector_Extras.count_vec_sum_ones_alt|thm"><span>count_vec_sum_ones_alt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec_set</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_7917..7922"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>insertE</span><span> </span><span>singletonD</span><span> </span><span>subsetD</span><span> </span><span>vec_setI</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_sum_ones|fact"><span>count_vec_sum_ones</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.setv_not_in_count0_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.setv_not_in_count0_iff|thm"><span>setv_not_in_count0_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.setv_vec_mset_not_in_iff|fact"><span>setv_vec_mset_not_in_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>count_eq_zero_iff</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8372..8377">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_count_vec|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_count_vec|thm"><span>sum_count_vec</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8372..8377"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>vNil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_empty|fact"><span>count_vec_empty</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_8586..8591">vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_8652..8656">True</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8666..8668">cv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>DiffD2</span><span> </span><span>singletonI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_in|fact"><span>vCons_set_contains_in</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8652..8656"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.remove</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8652..8656"><span>True</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8586..8591"><span>vCons.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_in|fact"><span>vCons_set_contains_in</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8666..8668"><span>cv</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>sum.cong</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.remove</span><span> </span><span>add.commute</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8586..8591"><span>vCons.prems</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_in|fact"><span>vCons_set_contains_in</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8652..8656"><span>True</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>ab_semigroup_add_class.add_ac</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>dim_vec</span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8586..8591"><span>vCons.hyps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8652..8656"><span>True</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8586..8591"><span>vCons.prems</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_in|fact"><span>vCons_set_contains_in</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_9619..9624">False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9639..9641">cv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9755..9756">f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8586..8591"><span>vCons.prems</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_9619..9624"><span>False</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_add|fact"><span>vCons_set_contains_add</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Un_infinite</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
        </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_9619..9624"><span>False</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_add|fact"><span>vCons_set_contains_add</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Un_insert_right</span><span> </span><span>finite_Un</span><span> </span><span>sum.insert</span><span> </span><span>sup_bot_right</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8586..8591"><span>vCons.prems</span></a><span> </span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_9639..9641"><span>cv</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>sum.cong</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_9619..9624"><span>False</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.setv_not_in_count0_iff|fact"><span>setv_not_in_count0_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add_0</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_8586..8591"><span>vCons.hyps</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_9755..9756"><span>f</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10417..10422">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_setv_subset_eq|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_setv_subset_eq|thm"><span>sum_setv_subset_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10572..10574">ni</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.setv_not_in_count0_iff|fact"><span>setv_not_in_count0_iff</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.subset_diff</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_10417..10422"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_10572..10574"><span>ni</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.sum_count_vec_subset|fact"><span class="entity_def" id="Matrix_Vector_Extras.sum_count_vec_subset|thm"><span>sum_count_vec_subset</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.sum_setv_subset_eq|fact"><span>sum_setv_subset_eq</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.sum_count_vec|fact"><span>sum_count_vec</span></a><span> </span><span>finite_subset</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>An abbreviation for checking if an element is in a vector</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Vector_Extras.vec_contains|const"><span>vec_contains</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>â$</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span class="free"><span>â$</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_set_mset_contains_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_set_mset_contains_iff|thm"><span>vec_set_mset_contains_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_def|fact"><span>vec_mset_def</span></a><span> </span><span>vec_set_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_count_gt1_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_count_gt1_iff|thm"><span>vec_contains_count_gt1_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_set_mset_contains_iff|fact"><span>vec_set_mset_contains_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11386..11391">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_obtains_index|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_obtains_index|thm"><span>vec_contains_obtains_index</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_11386..11391"><span>assms</span></a><span> </span><span>vec_setE</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_count_eq_list_count|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_count_eq_list_count|thm"><span>vec_count_eq_list_count</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>list_vec</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_eq_mset_list|fact"><span>mset_vec_eq_mset_list</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11651..11656">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_col_elements_mat|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_col_elements_mat|thm"><span>vec_contains_col_elements_mat</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_11846..11849">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_setE</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_11651..11656"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_11651..11656"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_11651..11656"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_11846..11849"><span>ilt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12042..12047">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_row_elements_mat|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_row_elements_mat|thm"><span>vec_contains_row_elements_mat</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_12237..12240">jlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_setE</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_12042..12047"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_12042..12047"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_12042..12047"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_12237..12240"><span>jlt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_img|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_contains_img|thm"><span>vec_contains_img</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>index_map_vec</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_map_vec</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains_obtains_index|fact"><span>vec_contains_obtains_index</span></a><span> </span><span>vec_setI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>The existing vector library contains the identity and zero vectors, but no definition 
</span><span>of a vector where all elements are 1, as defined below</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_vec_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_vec_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_vec_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_vec|const"><span>all_ones_vec</span></span></span><span> </span><span class="main"><span>::</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero</span><span class="main"><span>,</span></span><span>one</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>u<span class="hidden">â©</span><sub>v</sub></span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>u<span class="hidden">â©</span><sub>v</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>vec</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.dim_vec_all_ones|fact"><span class="entity_def" id="Matrix_Vector_Extras.dim_vec_all_ones|thm"><span>dim_vec_all_ones</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec_def|fact"><span>all_ones_vec_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.all_ones_index|fact"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_index|thm"><span>all_ones_index</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec_def|fact"><span>all_ones_vec_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.dim_vec_mult_vec_mat|fact"><span class="entity_def" id="Matrix_Vector_Extras.dim_vec_mult_vec_mat|thm"><span>dim_vec_mult_vec_mat</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat_def|fact"><span>mult_vec_mat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.all_ones_vec_smult|fact"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_vec_smult|thm"><span>all_ones_vec_smult</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>one</span><span class="main"><span>,</span></span><span> </span><span>zero</span><span class="main"><span>,</span></span><span> </span><span>monoid_mult</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>smult_vec_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Extra lemmas on existing vector operations</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13291..13296">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.smult_scalar_prod_sum|fact"><span class="entity_def" id="Matrix_Vector_Extras.smult_scalar_prod_sum|thm"><span>smult_scalar_prod_sum</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>comm_ring_1</span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vx</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vy</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>vx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>vy</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vx</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>vy</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>vx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>vy</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vx</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vy</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_13291..13296"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>vx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>vy</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vx</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vy</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vx</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vy</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vx</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vy</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult.assoc</span><span> </span><span>sum.cong</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>vx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>vy</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>vx</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>vy</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>scalar_prod_def</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_13291..13296"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>carrier_vecD</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14134..14139">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.scalar_prod_double_sum_fn_vec|fact"><span class="entity_def" id="Matrix_Vector_Extras.scalar_prod_double_sum_fn_vec|thm"><span>scalar_prod_double_sum_fn_vec</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>comm_semiring_0</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>vec</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>vec</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14546..14554">sum_simp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span>  </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>j1</span></span><span> </span><span class="skolem"><span>j2</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j1</span></span><span>  </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mult.commute</span><span> </span><span>sum.cong</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>ab_semigroup_mult_class.mult_ac</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> SLOW </span><span>*</span><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
        </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span>  </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>j2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult.assoc</span><span> </span><span>sum.cong</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>vec</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>vec</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
       </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>scalar_prod_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span>  </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>sum_product</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.comm_monoid_add_class.sum_reorder_triple|fact"><span>sum_reorder_triple</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>.</span></span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_14546..14554"><span>sum_simp</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>scalar_prod_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_14134..14139"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.comm_monoid_add_class.double_sum_split_case|fact"><span>double_sum_split_case</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.vec_prod_zero|fact"><span class="entity_def" id="Matrix_Vector_Extras.vec_prod_zero|thm"><span>vec_prod_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.map_vec_compose|fact"><span class="entity_def" id="Matrix_Vector_Extras.map_vec_compose|thm"><span>map_vec_compose</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Matrix Extras</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>As with vectors, the all ones mat definition defines the concept of a matrix where all 
</span><span>elements are 1</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat|const"><span>all_ones_mat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero</span><span class="main"><span>,</span></span><span>one</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>J<span class="hidden">â©</span><sub>m</sub></span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>J<span class="hidden">â©</span><sub>m</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>mat</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_index|fact"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_index|thm"><span>all_ones_mat_index</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat_def|fact"><span>all_ones_mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_dim_row|fact"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_dim_row|thm"><span>all_ones_mat_dim_row</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat_def|fact"><span>all_ones_mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_dim_col|fact"><span class="entity_def" id="Matrix_Vector_Extras.all_ones_mat_dim_col|thm"><span>all_ones_mat_dim_col</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat_def|fact"><span>all_ones_mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Basic lemmas on existing matrix operations</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.index_mult_vec_mat|fact"><span class="entity_def" id="Matrix_Vector_Extras.index_mult_vec_mat|thm"><span>index_mult_vec_mat</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat_def|fact"><span>mult_vec_mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.transpose_mat_mult_entries|fact"><span class="entity_def" id="Matrix_Vector_Extras.transpose_mat_mult_entries|thm"><span>transpose_mat_mult_entries</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>times_mat_def</span><span> </span><span>scalar_prod_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.transpose_mat_elems|fact"><span class="entity_def" id="Matrix_Vector_Extras.transpose_mat_elems|thm"><span>transpose_mat_elems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>A</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>transpose_mat_def</span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>elements_matD</span><span> </span><span>elements_matI</span><span> </span><span>index_transpose_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mat_carrier</span><span> </span><span>transpose_mat_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.row_elems_subset_mat|fact"><span class="entity_def" id="Matrix_Vector_Extras.row_elems_subset_mat|thm"><span>row_elems_subset_mat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>vec_set</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>vec_set_def</span><span> </span><span>elements_matI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.col_elems_subset_mat|fact"><span class="entity_def" id="Matrix_Vector_Extras.col_elems_subset_mat|thm"><span>col_elems_subset_mat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>vec_set</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>vec_set_def</span><span> </span><span>elements_matI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17765..17770">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.obtain_row_index|fact"><span class="entity_def" id="Matrix_Vector_Extras.obtain_row_index|thm"><span>obtain_row_index</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_17765..17770"><span>assms</span></a><span> </span><span>in_set_conv_nth</span><span> </span><span>length_rows</span><span> </span><span>nth_rows</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.row_prop_cond|fact"><span class="entity_def" id="Matrix_Vector_Extras.row_prop_cond|thm"><span>row_prop_cond</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.obtain_row_index|fact"><span>obtain_row_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18047..18052">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.obtain_col_index|fact"><span class="entity_def" id="Matrix_Vector_Extras.obtain_col_index|thm"><span>obtain_col_index</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_18047..18052"><span>assms</span></a><span> </span><span>cols_length</span><span> </span><span>cols_nth</span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.obtain_set_list_item|fact"><span>obtain_set_list_item</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.col_prop_cond|fact"><span class="entity_def" id="Matrix_Vector_Extras.col_prop_cond|thm"><span>col_prop_cond</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.obtain_col_index|fact"><span>obtain_col_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>  

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Lemmas on the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span>map_mat</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> definition</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18388..18393">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.row_map_mat|fact"><span class="entity_def" id="Matrix_Vector_Extras.row_map_mat|thm"><span>row_map_mat</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>row</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>map_mat_def</span><span> </span><span>map_vec_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_18388..18393"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.map_vec_mat_rows|fact"><span class="entity_def" id="Matrix_Vector_Extras.map_vec_mat_rows|thm"><span>map_vec_mat_rows</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map</span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>rows</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>map_nth_eq_conv</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.map_vec_mat_cols|fact"><span class="entity_def" id="Matrix_Vector_Extras.map_vec_mat_cols|thm"><span>map_vec_mat_cols</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map</span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>cols</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>map_nth_eq_conv</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.map_mat_compose|fact"><span class="entity_def" id="Matrix_Vector_Extras.map_mat_compose|thm"><span>map_mat_compose</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_mat</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.map_mat_elements|fact"><span class="entity_def" id="Matrix_Vector_Extras.map_mat_elements|thm"><span>map_mat_elements</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span>elements_mat</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>xa</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xa</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>xa</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>xa</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Reasoning on sets and multisets of matrix elements</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.set_cols_carrier|fact"><span class="entity_def" id="Matrix_Vector_Extras.set_cols_carrier|thm"><span>set_cols_carrier</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>cols_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.mset_cols_index_map|fact"><span class="entity_def" id="Matrix_Vector_Extras.mset_cols_index_map|thm"><span>mset_cols_index_map</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>cols_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.mset_rows_index_map|fact"><span class="entity_def" id="Matrix_Vector_Extras.mset_rows_index_map|thm"><span>mset_rows_index_map</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>rows_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19782..19787">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.index_to_col_card_size_prop|fact"><span class="entity_def" id="Matrix_Vector_Extras.index_to_col_card_size_prop|thm"><span>index_to_col_card_size_prop</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>j</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>j</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_19782..19787"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>lessThan_atLeast0</span><span> </span><span>lessThan_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.image_mset_filter_swap|fact"><span>image_mset_filter_swap</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Q</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_cols_index_map|fact"><span>mset_cols_index_map</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>  
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20696..20701">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.index_to_row_card_size_prop|fact"><span class="entity_def" id="Matrix_Vector_Extras.index_to_row_card_size_prop|thm"><span>index_to_row_card_size_prop</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_20696..20701"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>lessThan_atLeast0</span><span> </span><span>lessThan_iff</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.image_mset_filter_swap|fact"><span>image_mset_filter_swap</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Q</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_rows_index_map|fact"><span>mset_rows_index_map</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>  
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21611..21616">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.setv_row_subset_mat_elems|fact"><span class="entity_def" id="Matrix_Vector_Extras.setv_row_subset_mat_elems|thm"><span>setv_row_subset_mat_elems</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_21611..21616"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.obtain_row_index|fact"><span>obtain_row_index</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="free"><span>v</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains_row_elements_mat|fact"><span>vec_contains_row_elements_mat</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21944..21949">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.setv_col_subset_mat_elems|fact"><span class="entity_def" id="Matrix_Vector_Extras.setv_col_subset_mat_elems|thm"><span>setv_col_subset_mat_elems</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_21944..21949"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.obtain_col_index|fact"><span>obtain_col_index</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="free"><span>v</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains_col_elements_mat|fact"><span>vec_contains_col_elements_mat</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Vector and Matrix Homomorphism</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We extend on the existing lemmas on homomorphism mappings as applied to vectors and matrices</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span>semiring_hom</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22454..22459">lemma</span></span></span><span>  </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_smult2|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_smult2|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_smult2|fact"><span class="entity_def" id="Matrix_Vector_Extras.semiring_hom.vec_hom_smult2|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_smult2|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_smult2|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_smult2|thm"><span class="entity_def" id="Matrix_Vector_Extras.semiring_hom.vec_hom_smult2|thm"><span>vec_hom_smult2</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>hom</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>v2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>vec<span class="hidden">â©</span><sub>h</sub></span></span><span> </span><span class="free"><span>v1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>vec<span class="hidden">â©</span><sub>h</sub></span></span><span> </span><span class="free"><span>v2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>scalar_prod_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>index_map_vec</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_22454..22459"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>hom_distribs</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.map_vec_vCons|fact"><span class="entity_def" id="Matrix_Vector_Extras.map_vec_vCons|thm"><span>map_vec_vCons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vCons</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>vec_index_vCons</span><span class="main"><span>)</span></span><span>
          
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span>inj_zero_hom</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="offset_22825..22841">vec_hom_zero_iff</span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>index_map_vec</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>i</span></span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_23042..23043">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_23049..23053">main</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_23042..23043"><span>this</span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>vec_eq_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_23049..23053"><span>main</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.mat_hom_inj|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.mat_hom_inj|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.mat_hom_inj|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.mat_hom_inj|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.mat_hom_inj|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.mat_hom_inj|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.mat_hom_inj|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.mat_hom_inj|thm"><span>mat_hom_inj</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_mat</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_mat</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>mat_eq_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_inj|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_inj|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_inj|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_inj|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_inj|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_inj|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_inj|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_inj|thm"><span class="entity_def" id="offset_23230..23241">vec_hom_inj</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>w</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>vec_eq_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_set_distinct_iff|thm"><span>vec_hom_set_distinct_iff</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_23230..23241"><span>vec_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_mset|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_mset|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_mset|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_mset|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_mset|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_mset|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_mset|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_mset|thm"><span>vec_hom_mset</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>image_mset</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>mset.simps</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_img_map|fact"><span>vec_mset_img_map</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_vNil|fact"><span>vec_mset_vNil</span></a><span> </span><span>vec_of_list_Nil</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.mset_vec_eq_mset_list|fact"><span>mset_vec_eq_mset_list</span></a><span> </span><span>vec_list</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_img_map|fact"><span>vec_mset_img_map</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_set|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_set|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_set|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_set|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_set|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_set|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_set|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_zero_hom.vec_hom_set|thm"><span>vec_hom_set</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>hom</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>vNil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>image_mset_empty</span><span> </span><span>set_image_mset</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_22825..22841"><span>vec_hom_zero_iff</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_set|fact"><span>vec_mset_set</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_vNil|fact"><span>vec_mset_vNil</span></a><span> </span><span>zero_vec_zero</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_23935..23940">vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>hom</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Un_commute</span><span> </span><span>insert_absorb</span><span> </span><span>insert_is_Un</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_add|fact"><span>vCons_set_contains_add</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_in|fact"><span>vCons_set_contains_in</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>hom</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>hom</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>hom</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_23935..23940"><span>vCons.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>hom</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Un_commute</span><span> </span><span>insert_absorb</span><span> </span><span>insert_is_Un</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_add|fact"><span>vCons_set_contains_add</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_in|fact"><span>vCons_set_contains_in</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.map_vec_vCons|fact"><span>map_vec_vCons</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Zero One injections and homomorphisms</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Define a locale to encapsulate when a function is injective on a certain set (i.e. not
</span><span>a universal homomorphism for the type</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.intro|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.intro|thm"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.injective_lim|locale"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim|const"><span>injective_lim</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.injectivity_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.injectivity_lim|thm"><span class="entity_def" id="offset_24721..24736">injectivity_lim</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.eq_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.eq_iff|thm"><span class="entity_def" id="offset_24794..24800">eq_iff</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_24721..24736"><span>injectivity_lim</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.inj_on_f|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.inj_on_f|thm"><span>inj_on_f</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>inj_onI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.inj_on_f|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.eq_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.injectivity_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.injective_lim_axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.inj_on_f|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.eq_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.injectivity_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.injective_lim_axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.inj_on_f|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.eq_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.injectivity_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.injective_lim_axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.inj_on_f|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.injectivity_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.inj_on_f|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.injectivity_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.inj_on_f|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.injectivity_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.eq_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.injective_lim_axioms|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.eq_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.injective_lim_axioms|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.eq_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.injective_lim_axioms|thm"><span>sublocale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span>injective</span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.injective_lim|locale"><span>injective_lim</span></a><span> </span><span class="quoted"><span class="free"><span>Univ</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.injective_lim|locale"><span>injective_lim</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25031..25036">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.mat_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.mat_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.mat_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.mat_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.mat_hom_inj_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.mat_hom_inj_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.mat_hom_inj_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.mat_hom_inj_lim|thm"><span>mat_hom_inj_lim</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>mat_eq_iff</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25031..25036"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_24721..24736"><span>injectivity_lim</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25229..25234">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.vec_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_inj_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_inj_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_inj_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.vec_hom_inj_lim|thm"><span class="entity_def" id="offset_25235..25250">vec_hom_inj_lim</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>w</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>vec_eq_iff</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_setI</span><span> </span><span>in_mono</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25229..25234"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_24721..24736"><span>injectivity_lim</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25426..25431">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.lim_inj_hom_count_vec|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.lim_inj_hom_count_vec|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.lim_inj_hom_count_vec|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.lim_inj_hom_count_vec|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.lim_inj_hom_count_vec|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.lim_inj_hom_count_vec|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.lim_inj_hom_count_vec|thm"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.lim_inj_hom_count_vec|thm"><span>lim_inj_hom_count_vec</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25426..25431"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>vNil</span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span>vNil</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>vNil</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vNil|fact"><span>count_vec_vNil</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25703..25708">vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_25721..25722">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>vCons</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.map_vec_vCons|fact"><span>map_vec_vCons</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_25859..25863">True</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25859..25863"><span>True</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Un_subset_iff</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25721..25722"><span>1</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25703..25708"><span>vCons.hyps</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25703..25708"><span>vCons.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> 
          </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25703..25708"><span>vCons.prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_add|fact"><span>vCons_set_contains_add</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_in|fact"><span>vCons_set_contains_in</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>vCons</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25721..25722"><span>1</span></a><span>"</span></span><span> </span><span>Un_empty_right</span><span> </span><span>Un_insert_right</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_vCons|fact"><span>count_vec_vCons</span></a><span> </span><span>insert_absorb</span><span> </span><span>insert_subset</span><span> 
          </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25703..25708"><span>vCons.hyps</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25703..25708"><span>vCons.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25703..25708"><span>vCons.prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_add|fact"><span>vCons_set_contains_add</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vCons_set_contains_in|fact"><span>vCons_set_contains_in</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_24721..24736"><span>injectivity_lim</span></a><span class="main"><span>)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26519..26524">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_lim_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_lim_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_lim_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.vec_hom_lim_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.vec_hom_lim_set_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.vec_hom_lim_set_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.vec_hom_lim_set_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.vec_hom_lim_set_distinct_iff|thm"><span class="entity_def" id="offset_26525..26553">vec_hom_lim_set_distinct_iff</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_26519..26524"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_25235..25250"><span>vec_hom_inj_lim</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>image_iff</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26778..26783">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.mat_rows_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.mat_rows_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.mat_rows_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.mat_rows_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.mat_rows_hom_lim_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.mat_rows_hom_lim_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.mat_rows_hom_lim_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.mat_rows_hom_lim_distinct_iff|thm"><span>mat_rows_hom_lim_distinct_iff</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>rows</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_26525..26553"><span>vec_hom_lim_set_distinct_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.setv_row_subset_mat_elems|fact"><span>setv_row_subset_mat_elems</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_26778..26783"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27009..27014">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.mat_cols_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.mat_cols_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.mat_cols_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.mat_cols_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_int_hom.mat_cols_hom_lim_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_rat_hom.mat_cols_hom_lim_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_real_hom.mat_cols_hom_lim_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.injective_lim.mat_cols_hom_lim_distinct_iff|thm"><span>mat_cols_hom_lim_distinct_iff</span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_26525..26553"><span>vec_hom_lim_set_distinct_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.setv_col_subset_mat_elems|fact"><span>setv_col_subset_mat_elems</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_27009..27014"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.intro|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.axioms(3)|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.axioms(2)|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.axioms(1)|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.intro|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom|locale"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom|const"><span>inj_on_01_hom</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>zero_hom</span><span> </span><span class="main"><span>+</span></span><span> </span><span>one_hom</span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.injective_lim|locale"><span>injective_lim</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>hom</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.inj_0_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.inj_0_iff|thm"><span class="entity_def" id="offset_27329..27338">inj_0_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>hom_zero</span><span> </span><span>insertI1</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_24794..24800"><span>local.eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.inj_1_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.inj_on_01_hom.inj_1_iff|thm"><span>inj_1_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_27329..27338"><span>inj_0_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span>zero_neq_one</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_def_raw|axiom"><span class="entity_def" id="offset_27535..27545">definition</span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_dict|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one.cong|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_dict|thm"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one.cong|thm"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_dict|axiom"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one|const"><span>of_zero_neq_one</span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>of_zero_neq_one</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_1|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_1|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_1|thm"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_1|thm"><span>of_zero_neq_one_1</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_27535..27545"><span>of_zero_neq_one_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_0|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_0|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_0|thm"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_0|thm"><span>of_zero_neq_one_0</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_27535..27545"><span>of_zero_neq_one_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_0_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_0_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_0_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_0_iff|thm"><span>of_zero_neq_one_0_iff</span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_27535..27545"><span>of_zero_neq_one_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_lim_eq|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_lim_eq|fact"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_lim_eq|thm"><span class="entity_def" id="Matrix_Vector_Extras.zero_neq_one.of_zero_neq_one_lim_eq|thm"><span>of_zero_neq_one_lim_eq</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_27535..27545"><span>of_zero_neq_one_def</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.hom_0_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.hom_0|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.zero_hom_0_axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.hom_zero|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.zero_hom_axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.hom_0|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.hom_0_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.zero_hom_0_axioms|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.hom_zero|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_zero_hom.zero_hom_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span><span> of_zero_hom</span><span class="main"><span>:</span></span><span> </span><span>zero_hom_0</span><span> </span><span class="quoted"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.mat_cols_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.mat_rows_hom_lim_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.vec_hom_lim_set_distinct_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.lim_inj_hom_count_vec|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.vec_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.mat_hom_inj_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.inj_on_f|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.eq_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.injectivity_lim|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.injective_lim_axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.mat_rows_hom_lim_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.vec_hom_lim_set_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.vec_hom_inj_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.mat_hom_inj_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.inj_on_f|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.injectivity_lim|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.mat_cols_hom_lim_distinct_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.lim_inj_hom_count_vec|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.eq_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_injective_lim.injective_lim_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> of_injective_lim</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.injective_lim|locale"><span>injective_lim</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_lim_eq|fact"><span>of_zero_neq_one_lim_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.inj_1_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.inj_0_iff|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.inj_on_01_hom_axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.hom_one|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.one_hom_axioms|fact"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.inj_1_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.inj_0_iff|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.inj_on_01_hom_axioms|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.hom_one|thm"><span class="entity_def" id="Matrix_Vector_Extras.of_inj_on_01_hom.one_hom_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span><span> of_inj_on_01_hom</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|locale"><span>inj_on_01_hom</span></a><span> </span><span class="quoted"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_lim_eq|fact"><span>of_zero_neq_one_lim_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We want the ability to transform any 0-1 vector or matrix to another </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>zero_neq_one</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> type</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec|const"><span>lift_01_vec</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lift_01_vec</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>map_vec</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec_simp|fact"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec_simp(2)|thm"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec_simp(1)|thm"><span>lift_01_vec_simp</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_vec|const"><span>lift_01_vec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_vec|const"><span>lift_01_vec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_vec_def|fact"><span>lift_01_vec_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_28850..28855">lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec_count|fact"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_vec_count|thm"><span>lift_01_vec_count</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_vec|const"><span>lift_01_vec</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.of_injective_lim.lim_inj_hom_count_vec|fact"><span>of_injective_lim.lim_inj_hom_count_vec</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_28850..28855"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#offset_28850..28855"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_vec_def|fact"><span>lift_01_vec_def</span></a><span class="main"><span>)</span></span><span>  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_def|fact"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_def|thm"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lift_01_mat</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>map_mat</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_simp|fact"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_simp(3)|thm"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_simp(2)|thm"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_simp(1)|thm"><span>lift_01_mat_simp</span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_def|fact"><span>lift_01_mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_carrier|fact"><span class="entity_def" id="Matrix_Vector_Extras.lift_01_mat_carrier|thm"><span>lift_01_mat_carrier</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_def|fact"><span>lift_01_mat_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>ody>
<div class="head">
<h1>Theory Design_Extras</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Design Extras.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Micellaneous Design Extras</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Extension's to the author's previous entry on Design Theory</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Design_Extras</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Set_Multiset_Extras.html"><span>Set_Multiset_Extras</span></a><span> </span><a href="../Design_Theory/BIBD.html"><span>Design_Theory.BIBD</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Extensions to existing Locales and Properties</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Extend lemmas on intersection number</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_349..354">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.inter_num_max_bound|fact"><span class="entity_def" id="Design_Extras.inter_num_max_bound(2)|thm"><span class="entity_def" id="Design_Extras.inter_num_max_bound(1)|thm"><span>inter_num_max_bound</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>b1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>b2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>b1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>b2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_349..354"><span>assms</span></a><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number_def|fact"><span>intersection_number_def</span></a><span> </span><span>card_mono</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.inter_eq_blocks_eq_card|fact"><span class="entity_def" id="Design_Extras.inter_eq_blocks_eq_card|thm"><span>inter_eq_blocks_eq_card</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>finite</span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>finite</span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>b1</span></span><span> 
    </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>b2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.equal_card_inter_fin_eq_sets|fact"><span>equal_card_inter_fin_eq_sets</span></a><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number_def|fact"><span>intersection_number_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.inter_num_of_eq_blocks|fact"><span class="entity_def" id="Design_Extras.inter_num_of_eq_blocks|thm"><span>inter_num_of_eq_blocks</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>b1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number_def|fact"><span>intersection_number_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.intersect_num_same_eq_size|fact"><span class="entity_def" id="Design_Extras.intersect_num_same_eq_size|thm"><span>intersect_num_same_eq_size</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number_def|fact"><span>intersection_number_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.index_lt_rep_general|fact"><span class="entity_def" id="Design_Extras.index_lt_rep_general|thm"><span>index_lt_rep_general</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index_def|fact"><span>points_index_def</span></a><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number_def|fact"><span>point_replication_number_def</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.filter_filter_mset_cond_simp|fact"><span>filter_filter_mset_cond_simp</span></a><span> </span><span>size_filter_mset_lesseq</span><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1119..1126">context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.incidence_system|locale"><span>incidence_system</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1152..1157">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.incidence_system.block_size_alt|fact"><span class="entity_def" id="Design_Extras.incidence_system.block_size_alt|thm"><span>block_size_alt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_1152..1157"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Collect_cong</span><span> </span><span>Collect_mem_eq</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.incidence_system.complement_image|fact"><span class="entity_def" id="Design_Extras.incidence_system.complement_image|thm"><span>complement_image</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â¬<span class="hidden">â§</span><sup>C</sup></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span>block_complement</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_1119..1126"><span>complement_blocks_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.incidence_system.point_in_block_rep_min_iff|fact"><span class="entity_def" id="Design_Extras.incidence_system.point_in_block_rep_min_iff|thm"><span>point_in_block_rep_min_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.rep_number_g0_exists|fact"><span>rep_number_g0_exists</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>block_complement_elem_iff</span><span> </span><span>block_complement_inv</span><span> </span><span>wellformed</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1695..1700">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.incidence_system.points_inter_num_rep|fact"><span class="entity_def" id="Design_Extras.incidence_system.points_inter_num_rep|thm"><span>points_inter_num_rep</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>b2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>b2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_1695..1700"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>b2</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>b2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>b2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>b2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_1695..1700"><span>assms</span></a><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number_def|fact"><span>intersection_number_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Extensions on design operation lemmas</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.incidence_system.del_block_b|fact"><span class="entity_def" id="Design_Extras.incidence_system.del_block_b(2)|thm"><span class="entity_def" id="Design_Extras.incidence_system.del_block_b(1)|thm"><span class="entity_def" id="offset_2150..2161">del_block_b</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_1119..1126"><span>del_block_def</span></a><span> </span><span>size_Diff_singleton</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2300..2305">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.incidence_system.del_block_points_index|fact"><span class="entity_def" id="Design_Extras.incidence_system.del_block_points_index(2)|thm"><span class="entity_def" id="Design_Extras.incidence_system.del_block_points_index(1)|thm"><span class="entity_def" id="offset_2306..2328">del_block_points_index</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="free"><span>ps</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_index_diff|fact"><span>point_index_diff</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_1119..1126"><span>del_block_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_2300..2305"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>insert_DiffM2</span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index_singleton|fact"><span>points_index_singleton</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_index_diff|fact"><span>point_index_diff</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_1119..1126"><span>del_block_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_1119..1126"><span>add_block_def</span></a><span> </span><span>add_block_index_not_in</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_2300..2305"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>insert_DiffM2</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Extensions to properties of design sub types</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|locale"><span>finite_incidence_system</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.finite_incidence_system.complete_block_size_eq_points|fact"><span class="entity_def" id="Design_Extras.finite_incidence_system.complete_block_size_eq_points|thm"><span class="entity_def" id="offset_3044..3073">complete_block_size_eq_points</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><span>card_subset_eq</span><span> </span><span>finite_sets</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.finite_incidence_system.complete_block_all_subsets|fact"><span class="entity_def" id="Design_Extras.finite_incidence_system.complete_block_all_subsets|thm"><span>complete_block_all_subsets</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_3044..3073"><span>complete_block_size_eq_points</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.finite_incidence_system.del_block_complete_points_index|fact"><span class="entity_def" id="Design_Extras.finite_incidence_system.del_block_complete_points_index|thm"><span class="entity_def" id="offset_3302..3333">del_block_complete_points_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> 
  </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_3044..3073"><span>complete_block_size_eq_points</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_2306..2328"><span>del_block_points_index</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.design|locale"><span>design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.design.block_num_rep_bound|fact"><span class="entity_def" id="Design_Extras.design.block_num_rep_bound|thm"><span class="entity_def" id="offset_3549..3568">block_num_rep_bound</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3610..3616">exists</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>blocks_nempty</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3739..3742">bss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>â<span class="hidden">â©</span><sub>#</sub></span></span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span>  </span><span>mset_subset_eqI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>bl</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â#</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>.</span></span><span> </span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>bl</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_3993..3996">xin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>blin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_3610..3616"><span>exists</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4083..4085">eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â#</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>.</span></span><span> </span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â#</span></span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>.</span></span><span> </span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_3993..3996"><span>xin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_sets</span><span> </span><span>mset_set.remove</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â#</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>.</span></span><span> </span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>bl</span></span><span> 
        </span><span class="main"><span>+</span></span><span>  </span><span>count</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â#</span></span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>.</span></span><span> </span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(â)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>bl</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_4083..4085"><span>eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>count_eq_zero_iff</span><span> </span><span>le0</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>.</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number_def|fact"><span>point_replication_number_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum_unfold_sum_mset</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>size</span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â<span class="hidden">â©</span><sub>#</sub></span></span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.size_big_union_sum|fact"><span>size_big_union_sum</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_3739..3742"><span>bss</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>size_mset_mono</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|locale"><span>proper_design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5247..5252">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.proper_design.del_block_proper|fact"><span class="entity_def" id="Design_Extras.proper_design.del_block_proper|thm"><span class="entity_def" id="offset_5253..5269">del_block_proper</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|const"><span>proper_design</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> d</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.design|locale"><span>design</span></a><span> </span><span class="quoted"><span class="keyword1"><span class="free"><span>ð±</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>delete_block_design</span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5410..5412">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Design_Extras.html#offset_5410..5412"><span>d.ð»</span></a><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_2150..2161"><span>del_block_b</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5247..5252"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>b_positive</span><span> </span><span>zero_less_diff</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|locale"><span>simple_design</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5587..5592">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.simple_design.inter_num_lt_block_size_strict|fact"><span class="entity_def" id="Design_Extras.simple_design.inter_num_lt_block_size_strict(2)|thm"><span class="entity_def" id="Design_Extras.simple_design.inter_num_lt_block_size_strict(1)|thm"><span>inter_num_lt_block_size_strict</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>bl2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5795..5797">lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>finite_blocks</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.inter_num_max_bound|fact"><span>inter_num_max_bound</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5916..5918">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl1</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5587..5592"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.inter_eq_blocks_eq_card|fact"><span>inter_eq_blocks_eq_card</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5587..5592"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5587..5592"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>finite_blocks</span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5587..5592"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5795..5797"><span>lt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5916..5918"><span>ne</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5587..5592"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5795..5797"><span>lt</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5587..5592"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.simple_design.block_mset_distinct|fact"><span class="entity_def" id="Design_Extras.simple_design.block_mset_distinct|thm"><span>block_mset_distinct</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Duplicate_Free_Multiset.html#Duplicate_Free_Multiset.distinct_mset|const"><span>distinct_mset</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>simple</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Duplicate_Free_Multiset.html#Duplicate_Free_Multiset.distinct_mset_def|fact"><span>distinct_mset_def</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.constant_rep_design|locale"><span>constant_rep_design</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6497..6502">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.constant_rep_design.index_lt_const_rep|fact"><span class="entity_def" id="Design_Extras.constant_rep_design.index_lt_const_rep|thm"><span class="entity_def" id="offset_6503..6521">index_lt_const_rep</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_6613..6616">xin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>ps</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6497..6502"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6497..6502"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>in_mono</span><span> </span><span>rep_number_alt_def_all</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.index_lt_rep_general|fact"><span>index_lt_rep_general</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6613..6616"><span>xin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.t_wise_balance|locale"><span>t_wise_balance</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6823..6828">lemma</span></span></span><span>  </span><span class="entity_def" id="Design_Extras.t_wise_balance.obtain_t_subset_with_point|fact"><span class="entity_def" id="Design_Extras.t_wise_balance.obtain_t_subset_with_point|thm"><span class="entity_def" id="offset_6830..6856">obtain_t_subset_with_point</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>ps</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>ð</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_6965..6969">True</span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6823..6828"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6965..6969"><span>True</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6823..6828"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>ð</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6823..6828"><span>assms</span></a><span> </span><span>diff_le_mono</span><span> </span><span>finite_sets</span><span> </span><span>t_lt_order</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ps'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_7226..7230">psss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7254..7257">psc</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>ps'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>obtain_subset_with_card_n</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7332..7334">xs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>ps'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6823..6828"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>xnotin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>ps'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_7226..7230"><span>psss</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>ps'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>ps'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>ps'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>âº</span></span></span><span> </span><span>finite_insert</span><span> </span><span>card_insert_disjoint</span><span> </span><span>finite_sets</span><span> </span><span>finite_subset</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>ps'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>ps'</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7660..7662">xc</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>ps'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_7254..7257"><span>psc</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>add.commute</span><span> </span><span>add_diff_inverse</span><span> </span><span>t_non_zero</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>ps'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_7332..7334"><span>xs</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_7660..7662"><span>xc</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6823..6828"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7851..7856">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.t_wise_balance.const_index_lt_rep|fact"><span class="entity_def" id="Design_Extras.t_wise_balance.const_index_lt_rep|thm"><span class="entity_def" id="offset_7857..7875">const_index_lt_rep</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î<span class="hidden">â©</span><sub>t</sub></span></span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>psin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7983..7986">xin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>ps</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_7851..7856"><span>assms</span></a><span> </span><span>t_lt_order</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6830..6856"><span>obtain_t_subset_with_point</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>Î<span class="hidden">â©</span><sub>t</sub></span></span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>balanced</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.index_lt_rep_general|fact"><span>index_lt_rep_general</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_7983..7986"><span>xin</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|locale"><span>pairwise_balance</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.index_zero_iff|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.index_zero_iff|thm"><span>index_zero_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_8307..8309">l0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_8326..8330">blin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>block_size_gt_0</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_1</span><span> </span><span>Suc_leI</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8326..8330"><span>blin</span></a><span> </span><span>less_one</span><span> </span><span>nat_neq_iff</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_8543..8547">psss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_8563..8569">pscard</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>obtain_subset_with_card_n</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8642..8646">psin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8326..8330"><span>blin</span></a><span> </span><span>points_index_count_min</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8543..8547"><span>psss</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8326..8330"><span>blin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>balanced</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8307..8309"><span>l0</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8642..8646"><span>psin</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8563..8569"><span>pscard</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_8879..8880">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>bl</span></span><span class="main"><span>â#</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_8926..8930">psss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_8945..8948">ps2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>obtain_t_subset_points</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8879..8880"><span>a</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9086..9090">cond</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>Â¬</span></span><span class="main"><span>(</span></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span>  </span><span class="bound"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>card_mono</span><span> </span><span>finite_blocks</span><span> </span><span>le_antisym</span><span> </span><span>less_imp_le_nat</span><span> </span><span>less_not_refl3</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index_def|fact"><span>points_index_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_9086..9090"><span>cond</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index_0_iff|fact"><span>points_index_0_iff</span></a><span> </span><span>size_empty</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8926..8930"><span>psss</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_8945..8948"><span>ps2</span></a><span> </span><span>balanced</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.count_complete_lt_balance|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.count_complete_lt_balance|thm"><span>count_complete_lt_balance</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_9510..9511">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>assm</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9589..9591">gt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.count_size_set_repr|fact"><span>count_size_set_repr</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_9684..9688">psss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_9703..9709">pscard</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>t_lt_order</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>obtain_t_subset_points</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_9510..9511"><span>a</span></a><span> </span><span>balanced</span><span> </span><span>le_refl</span><span> </span><span>points_index_count_min</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index_def|fact"><span>points_index_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="keyword1"><span class="free"><span>â¬</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>ps</span></span></span><span class="main"><span>]</span></span><span> </span><span>size_mset_mono</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_9703..9709"><span>pscard</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_9684..9688"><span>psss</span></a><span> </span><span>balanced</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_9589..9591"><span>gt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10073..10078">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.eq_index_rep_imp_complete|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.eq_index_rep_imp_complete|thm"><span class="entity_def" id="offset_10079..10104">eq_index_rep_imp_complete</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10073..10078"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10309..10316">size_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number_def|fact"><span>point_replication_number_def</span></a><span> </span><span>balanced</span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index_def|fact"><span>points_index_def</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10073..10078"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â¶</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.multiset_filter_mono2|fact"><span>multiset_filter_mono2</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10073..10078"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10689..10696">eq_sets</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10309..10316"><span>size_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Diff_eq_empty_iff_mset</span><span> </span><span>cancel_comm_monoid_add_class.diff_cancel</span><span> 
        </span><span>size_Diff_submset</span><span> </span><span>size_empty</span><span> </span><span>size_eq_0_iff_empty</span><span> </span><span>subset_mset.antisym</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10073..10078"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10689..10696"><span>eq_sets</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Multiset.set_mset_filter</span><span> </span><span>mem_Collect_eq</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10073..10078"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10073..10078"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11277..11282">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.incomplete_index_strict_lt_rep|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.incomplete_index_strict_lt_rep|thm"><span>incomplete_index_strict_lt_rep</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>incomplete_block</span><span> </span><span class="bound"><span>bl</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_7857..7875"><span>const_index_lt_rep</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_11277..11282"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>le_antisym</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>xin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>blin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_11277..11282"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.rep_number_g0_exists|fact"><span>rep_number_g0_exists</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_11277..11282"><span>assms</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_10079..10104"><span>eq_index_rep_imp_complete</span></a><span> </span><span>incomplete_alt_size</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>âº</span></span></span><span> </span><span>nat_less_le</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Construct new PBD's from existing PBD's</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11876..11881">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.remove_complete_block_pbd|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.remove_complete_block_pbd|thm"><span class="entity_def" id="offset_11882..11907">remove_complete_block_pbd</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|const"><span>pairwise_balance</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> pd</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|locale"><span>proper_design</span></a><span> </span><span class="quoted"><span class="keyword1"><span class="free"><span>ð±</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_11876..11881"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_5253..5269"><span>del_block_proper</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>t_lt_order</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_11876..11881"><span>assms</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_3302..3333"><span>del_block_complete_points_index</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12232..12237">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.remove_complete_block_pbd_alt|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.remove_complete_block_pbd_alt|thm"><span>remove_complete_block_pbd_alt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|const"><span>pairwise_balance</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>(</span></span><span>del_block</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_11882..11907"><span>remove_complete_block_pbd</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_12232..12237"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.b_gt_index|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.b_gt_index|thm"><span class="entity_def" id="offset_12436..12446">b_gt_index</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_12484..12487">blt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>t_lt_order</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>obtain_t_subset_points</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>balanced</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index_def|fact"><span>points_index_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_12484..12487"><span>blt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12728..12733">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.remove_complete_blocks_set_pbd|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.remove_complete_blocks_set_pbd|thm"><span class="entity_def" id="offset_12734..12764">remove_complete_blocks_set_pbd</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|const"><span>pairwise_balance</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_12728..12733"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12968..12971">beq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|const"><span>pairwise_balance</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_12968..12971"><span>beq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_13094..13097">Suc</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?A'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13165..13167">ss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A'</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>diff_subset_eq_self</span><span> </span><span>subset_mset.le_less_trans</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13267..13269">sx</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="var"><span>?A'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Suc_inject</span><span> </span><span>size_Suc_Diff1</span><span> </span><span>size_eq_Suc_imp_elem</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13381..13384">xlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Suc_lessD</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>av</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="var"><span>?A'</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_remove1_mset_neq|fact"><span>in_remove1_mset_neq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13533..13542">interpret</span></span></span><span> pbd</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|locale"><span>pairwise_balance</span></a><span> </span><span class="quoted"><span class="keyword1"><span class="free"><span>ð±</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="var"><span>?A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.hyps</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13267..13269"><span>sx</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13165..13167"><span>ss</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13381..13384"><span>xlt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Suc</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mset_subset_size</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13759..13762">bgt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="var"><span>?A'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13165..13167"><span>ss</span></a><span> </span><span>size_Diff_submset</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.subset_msetE|fact"><span>subset_msetE</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13267..13269"><span>sx</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13850..13852">ar</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>add_mset</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset|const"><span>remove1_mset</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>insert_DiffM</span><span> </span><span>size_eq_Suc_imp_elem</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13984..13986">db</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Design_Extras.html#offset_13533..13542"><span>pbd.del_block</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13533..13542"><span>pbd.del_block_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="var"><span>?A'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>{#</span></span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13094..13097"><span>Suc.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13850..13852"><span>ar</span></a><span> </span><span>add_diff_cancel_left'</span><span> </span><span>add_mset_add_single</span><span> </span><span>add_right_cancel</span><span> 
        </span><a class="entity_ref" href="Design_Extras.html#offset_13533..13542"><span>pbd.del_block_def</span></a><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove_1_mset_id_iff_notin|fact"><span>remove_1_mset_id_iff_notin</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13165..13167"><span>ss</span></a><span> </span><span>subset_mset.lessE</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.trivial_add_mset_remove_iff|fact"><span>trivial_add_mset_remove_iff</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="var"><span>?A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|const"><span>pairwise_balance</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13984..13986"><span>db</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13759..13762"><span>bgt</span></a><span> </span><span>diff_Suc_eq_diff_pred</span><span> 
      </span><span>diff_commute</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_13533..13542"><span>pbd.remove_complete_block_pbd_alt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14557..14562">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.pairwise_balance.remove_all_complete_blocks_pbd|fact"><span class="entity_def" id="Design_Extras.pairwise_balance.remove_all_complete_blocks_pbd|thm"><span>remove_all_complete_blocks_pbd</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|const"><span>pairwise_balance</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.removeAll_mset|const"><span>removeAll_mset</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|const"><span>pairwise_balance</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="var"><span>?B</span></span><span> </span><span class="var"><span>?Î</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>replicate_mset</span><span> </span><span class="main"><span>(</span></span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?x</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="var"><span>?A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14799..14802">blt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â </span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_12436..12446"><span>b_gt_index</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_14557..14562"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14867..14870">xeq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14904..14906">av</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>in_replicate_mset</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>count_le_replicate_mset_subset_eq</span><span> </span><span>le_eq_less_or_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_14799..14802"><span>blt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>subset_mset.nless_le</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_14867..14870"><span>xeq</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_14557..14562"><span>assms</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_14904..14906"><span>av</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_14867..14870"><span>xeq</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_12734..12764"><span>remove_complete_blocks_set_pbd</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/BIBD.html#BIBD.bibd|locale"><span>bibd</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.bibd.symmetric_bibdIII|fact"><span class="entity_def" id="Design_Extras.bibd.symmetric_bibdIII|thm"><span>symmetric_bibdIII</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../Design_Theory/BIBD.html#BIBD.symmetric_bibd|const"><span>symmetric_bibd</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>necessary_condition_one</span><span> </span><span>symmetric_condition_1</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>New Design Locales</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>We establish a number of new locales and link them to the existing locale hierarchy
</span><span>in order to reason in contexts requiring specific combinations of contexts</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Regular t-wise balance</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Design_Extras.regular_t_wise_balance.axioms|fact"><span class="entity_def" id="Design_Extras.regular_t_wise_balance.intro|fact"><span class="entity_def" id="Design_Extras.regular_t_wise_balance_def|fact"><span class="entity_def" id="Design_Extras.regular_t_wise_balance.axioms(2)|thm"><span class="entity_def" id="Design_Extras.regular_t_wise_balance.axioms(1)|thm"><span class="entity_def" id="Design_Extras.regular_t_wise_balance.intro|thm"><span class="entity_def" id="Design_Extras.regular_t_wise_balance_def|thm"><span class="entity_def" id="Design_Extras.regular_t_wise_balance_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Design_Extras.regular_t_wise_balance|locale"><span class="entity_def" id="Design_Extras.regular_t_wise_balance|const"><span>regular_t_wise_balance</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.t_wise_balance|locale"><span>t_wise_balance</span></a><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.constant_rep_design|locale"><span>constant_rep_design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.regular_t_wise_balance.reg_index_lt_rep|fact"><span class="entity_def" id="Design_Extras.regular_t_wise_balance.reg_index_lt_rep|thm"><span>reg_index_lt_rep</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>Î<span class="hidden">â©</span><sub>t</sub></span></span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_15756..15760">psin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_15775..15778">pst</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>obtain_t_subset_points</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15845..15847">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>t_non_zero</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>Î<span class="hidden">â©</span><sub>t</sub></span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>balanced</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_15775..15778"><span>pst</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_15756..15760"><span>psin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_6503..6521"><span>index_lt_const_rep</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_15845..15847"><span>ne</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_15756..15760"><span>psin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Design_Extras.regular_pairwise_balance.axioms|fact"><span class="entity_def" id="Design_Extras.regular_pairwise_balance.intro|fact"><span class="entity_def" id="Design_Extras.regular_pairwise_balance_def|fact"><span class="entity_def" id="Design_Extras.regular_pairwise_balance.axioms(2)|thm"><span class="entity_def" id="Design_Extras.regular_pairwise_balance.axioms(1)|thm"><span class="entity_def" id="Design_Extras.regular_pairwise_balance.intro|thm"><span class="entity_def" id="Design_Extras.regular_pairwise_balance_def|thm"><span class="entity_def" id="Design_Extras.regular_pairwise_balance_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Design_Extras.regular_pairwise_balance|locale"><span class="entity_def" id="Design_Extras.regular_pairwise_balance|const"><span>regular_pairwise_balance</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.regular_t_wise_balance|locale"><span>regular_t_wise_balance</span></a><span> </span><span class="quoted"><span class="free"><span>ð±</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬</span></span></span><span> </span><span class="quoted"><span class="numeral"><span>2</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|locale"><span>pairwise_balance</span></a><span> </span><span class="quoted"><span class="free"><span>ð±</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ð</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Const Intersect Design</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>This is the dual of a balanced design, and used extensively in the remaining formalisation</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Design_Extras.const_intersect_design.axioms|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.intro|fact"><span class="entity_def" id="Design_Extras.const_intersect_design_def|fact"><span class="entity_def" id="Design_Extras.const_intersect_design_axioms.intro|fact"><span class="entity_def" id="Design_Extras.const_intersect_design_axioms_def|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.axioms(2)|thm"><span class="entity_def" id="Design_Extras.const_intersect_design.axioms(1)|thm"><span class="entity_def" id="Design_Extras.const_intersect_design.intro|thm"><span class="entity_def" id="Design_Extras.const_intersect_design_def|thm"><span class="entity_def" id="Design_Extras.const_intersect_design_axioms.intro|thm"><span class="entity_def" id="Design_Extras.const_intersect_design_axioms_def|thm"><span class="entity_def" id="Design_Extras.const_intersect_design_def|axiom"><span class="entity_def" id="Design_Extras.const_intersect_design_axioms_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design|locale"><span class="entity_def" id="Design_Extras.const_intersect_design|const"><span class="entity_def" id="Design_Extras.const_intersect_design_axioms|const"><span>const_intersect_design</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|locale"><span>proper_design</span></a><span> </span><span class="main"><span>+</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design.const_intersect|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.const_intersect|thm"><span class="entity_def" id="offset_16352..16367">const_intersect</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b1</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>b2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/BIBD.html#BIBD.symmetric_bibd|locale"><span>symmetric_bibd</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.const_intersect_design|locale"><span>const_intersect_design</span></a><span> </span><span class="quoted"><span class="keyword1"><span class="free"><span>ð±</span></span></span></span><span> </span><span class="quoted"><span class="keyword1"><span class="free"><span>â¬</span></span></span></span><span> </span><span class="quoted"><span class="keyword1"><span class="free"><span>Î</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.const_intersect_design|locale"><span>const_intersect_design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16541..16546">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design.inter_num_le_block_size|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.inter_num_le_block_size|thm"><span class="entity_def" id="offset_16547..16570">inter_num_le_block_size</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_16662..16663">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_16702..16706">blin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl'</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>bl</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16541..16546"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add_mset_add_single</span><span> </span><span>diff_add_inverse2</span><span> </span><span>diff_is_0_eq'</span><span> </span><span>multiset_nonemptyE</span><span> 
        </span><span>nat_1_add_1</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset_eqE|fact"><span>remove1_mset_eqE</span></a><span> </span><span>size_single</span><span> </span><span>zero_neq_one</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>const</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="skolem"><span>bl'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16352..16367"><span>const_intersect</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16541..16546"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.inter_num_max_bound|fact"><span>inter_num_max_bound</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>finite_blocks</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16662..16663"><span>a</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16702..16706"><span>blin</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16541..16546"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>finite_blocks</span><span> </span><span>in_diffD</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17078..17083">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design.const_inter_multiplicity_one|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.const_inter_multiplicity_one|thm"><span class="entity_def" id="offset_17084..17112">const_inter_multiplicity_one</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>multiplicity</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>multiplicity</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>multiplicity</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_17078..17083"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>le_neq_implies_less</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl2</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>bl</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>count_single</span><span> </span><span>in_diff_count</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.inter_num_of_eq_blocks|fact"><span>inter_num_of_eq_blocks</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_17078..17083"><span>assms</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16352..16367"><span>const_intersect</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset|const"><span>remove1_mset</span></a><span> </span><span class="free"><span>bl</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17598..17603">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design.mult_blocks_const_inter|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.mult_blocks_const_inter|thm"><span>mult_blocks_const_inter</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>multiplicity</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16547..16570"><span>inter_num_le_block_size</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_17598..17603"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>nat_less_le</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>multiplicity</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_17084..17112"><span>const_inter_multiplicity_one</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_17598..17603"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_17598..17603"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design.simple_const_inter_block_size|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.simple_const_inter_block_size|thm"><span>simple_const_inter_block_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|const"><span>simple_design</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_17084..17112"><span>const_inter_multiplicity_one</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18137..18142">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design.simple_const_inter_iff|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.simple_const_inter_iff|thm"><span>simple_const_inter_iff</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>  </span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|const"><span>simple_design</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_18281..18282">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|const"><span>simple_design</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_18391..18395">blin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>multiplicity</span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_18481..18485">True</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18502..18503">m</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>multiplicity</span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.count_size_set_repr|fact"><span>count_size_set_repr</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_18481..18485"><span>True</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mset_subset_eqI</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>size_mset_mono</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_18281..18282"><span>a</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_18391..18395"><span>blin</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>count_eq_zero_iff</span><span> </span><span>le_neq_implies_less</span><span> </span><span>le_trans</span><span> </span><span>less_one</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_18502..18503"><span>m</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_18137..18142"><span>assms</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_18391..18395"><span>blin</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16547..16570"><span>inter_num_le_block_size</span></a><span> </span><span>le_neq_implies_less</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_17084..17112"><span>const_inter_multiplicity_one</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_18391..18395"><span>blin</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>simp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|const"><span>simple_design</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19233..19237">mult</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>multiplicity</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design.axioms|fact"><span>simple_design.axioms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_incidence_system.simple_alt_def_all|fact"><span>simple_incidence_system.simple_alt_def_all</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_19570..19574">blin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_19591..19596">bl2in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 
        </span><span class="entity_def" id="offset_19632..19637">card1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_19658..19663">card2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.obtain_two_items_mset_filter|fact"><span>obtain_two_items_mset_filter</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16352..16367"><span>const_intersect</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_19570..19574"><span>blin</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_19591..19596"><span>bl2in</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_19632..19637"><span>card1</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_19658..19663"><span>card2</span></a><span> </span><span>finite_blocks</span><span> </span><span>in_diffD</span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.inter_eq_blocks_eq_card|fact"><span>inter_eq_blocks_eq_card</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>multiplicity</span><span> </span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset|const"><span>remove1_mset</span></a><span> </span><span class="skolem"><span>bl1</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>âº</span></span></span><span> </span><span>count_eq_zero_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_19233..19237"><span>mult</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_19570..19574"><span>blin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20061..20066">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design.empty_inter_implies_rep_one|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.empty_inter_implies_rep_one|thm"><span class="entity_def" id="offset_20067..20094">empty_inter_implies_rep_one</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_20184..20185">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20215..20218">gt1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_20266..20271">blin1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_20288..20292">xin1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>gr_implies_not0</span><span> </span><span>linorder_neqE_nat</span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.rep_number_g0_exists|fact"><span>rep_number_g0_exists</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20215..20218"><span>gt1</span></a><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_rep_number_split|fact"><span>point_rep_number_split</span></a><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_rep_singleton_val|fact"><span>point_rep_singleton_val</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20184..20185"><span>a</span></a><span> </span><span>add_0</span><span> </span><span>eq_imp_le</span><span> </span><span>neq0_conv</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset_eqE|fact"><span>remove1_mset_eqE</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_20555..20560">blin2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>xin2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl2</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.rep_number_g0_exists|fact"><span>rep_number_g0_exists</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="skolem"><span>bl2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20288..20292"><span>xin1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20266..20271"><span>blin1</span></a><span> </span><span>empty_iff</span><span> </span><span>finite_blocks</span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number_empty_iff|fact"><span>intersection_number_empty_iff</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_16352..16367"><span>const_intersect</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20061..20066"><span>assms</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20266..20271"><span>blin1</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20555..20560"><span>blin2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20864..20869">lemma</span></span></span><span> </span><span class="entity_def" id="Design_Extras.const_intersect_design.empty_inter_implies_b_lt_v|fact"><span class="entity_def" id="Design_Extras.const_intersect_design.empty_inter_implies_b_lt_v|thm"><span>empty_inter_implies_b_lt_v</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20948..20951">le1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20067..20094"><span>empty_inter_implies_rep_one</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20864..20869"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21035..21039">disj</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21113..21116">eqv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_3549..3568"><span>block_num_rep_bound</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21263..21264">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_21113..21116"><span>eqv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.union_disjoint</span><span> </span><span>finite_sets</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_21113..21116"><span>eqv</span></a><span> </span><a class="entity_ref" href="Design_Extras.html#offset_21035..21039"><span>disj</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_21263..21264"><span>1</span></a><span> </span><span>finite_Un</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_20948..20951"><span>le1</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mem_Collect_eq</span><span> </span><span>sum_mono</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>finite_sets</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>card_mono</span><span> </span><a class="entity_ref" href="Design_Extras.html#offset_21113..21116"><span>eqv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Design_Extras.simple_const_intersect_design.axioms|fact"><span class="entity_def" id="Design_Extras.simple_const_intersect_design.intro|fact"><span class="entity_def" id="Design_Extras.simple_const_intersect_design_def|fact"><span class="entity_def" id="Design_Extras.simple_const_intersect_design.axioms(2)|thm"><span class="entity_def" id="Design_Extras.simple_const_intersect_design.axioms(1)|thm"><span class="entity_def" id="Design_Extras.simple_const_intersect_design.intro|thm"><span class="entity_def" id="Design_Extras.simple_const_intersect_design_def|thm"><span class="entity_def" id="Design_Extras.simple_const_intersect_design_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Design_Extras.simple_const_intersect_design|locale"><span class="entity_def" id="Design_Extras.simple_const_intersect_design|const"><span>simple_const_intersect_design</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.const_intersect_design|locale"><span>const_intersect_design</span></a><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|locale"><span>simple_design</span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>


<body>
<div class="head">
<h1>Theory Incidence_Matrices</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Chelsea Edmonds
Theory: Incidence_Matrices.thy 
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Incidence Vectors and Matrices</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Incidence Matrices are an important representation for any incidence set system. The majority
</span><span>of basic definitions and properties proved in this theory are based on Stinson \cite{stinsonCombinatorialDesignsConstructions2004}
</span><span>and Colbourn \cite{colbournHandbookCombinatorialDesigns2007}.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Incidence_Matrices</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="Design_Extras.html"><span>Design_Extras</span></a><span>"</span></span><span> </span><a href="Matrix_Vector_Extras.html"><span>Matrix_Vector_Extras</span></a><span> </span><span class="quoted"><span>"</span><a href="../List-Index/List_Index.html"><span>List-Index.List_Index</span></a><span>"</span></span><span>
 </span><span class="quoted"><span>"</span><a href="../Design_Theory/Design_Isomorphisms.html"><span>Design_Theory.Design_Isomorphisms</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Incidence Vectors</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A function which takes an ordered list of points, and a block, 
</span><span>returning a 0-1 vector $v$ where there is a 1 in the ith position if point i is in that block</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.inc_vec_of_def|fact"><span class="entity_def" id="Incidence_Matrices.inc_vec_of_def|thm"><span class="entity_def" id="Incidence_Matrices.inc_vec_of_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>vec</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inc_vec_of</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Vs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bl</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>vec</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Vs</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>Vs</span></span></span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bl</span></span></span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_vec_one_zero_elems|fact"><span class="entity_def" id="Incidence_Matrices.inc_vec_one_zero_elems|thm"><span>inc_vec_one_zero_elems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>vec_set_def</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of_def|fact"><span>inc_vec_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.finite_inc_vec_elems|fact"><span class="entity_def" id="Incidence_Matrices.finite_inc_vec_elems|thm"><span>finite_inc_vec_elems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>finite_subset</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_one_zero_elems|fact"><span>inc_vec_one_zero_elems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_vec_elems_max_two|fact"><span class="entity_def" id="Incidence_Matrices.inc_vec_elems_max_two|thm"><span>inc_vec_elems_max_two</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>card_mono</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_one_zero_elems|fact"><span>inc_vec_one_zero_elems</span></a><span> </span><span>finite.insertI</span><span> </span><span>card_0_eq</span><span> </span><span>card_2_iff</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span>  </span><span>insert_absorb2</span><span> </span><span>linorder_le_cases</span><span> </span><span>linordered_nonzero_semiring_class.zero_le_one</span><span> 
      </span><span>obtain_subset_with_card_n</span><span> </span><span>one_add_one</span><span> </span><span>subset_singletonD</span><span> </span><span>trans_le_add1</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_vec_dim|fact"><span class="entity_def" id="Incidence_Matrices.inc_vec_dim|thm"><span>inc_vec_dim</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of_def|fact"><span>inc_vec_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_vec_index|fact"><span class="entity_def" id="Incidence_Matrices.inc_vec_index|thm"><span>inc_vec_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of_def|fact"><span>inc_vec_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_vec_index_one_iff|fact"><span class="entity_def" id="Incidence_Matrices.inc_vec_index_one_iff|thm"><span>inc_vec_index_one_iff</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of_def|fact"><span>inc_vec_of_def</span></a><span> </span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_vec_index_zero_iff|fact"><span class="entity_def" id="Incidence_Matrices.inc_vec_index_zero_iff|thm"><span>inc_vec_index_zero_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of_def|fact"><span>inc_vec_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1920..1925">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_vec_of_bij_betw|fact"><span class="entity_def" id="Incidence_Matrices.inc_vec_of_bij_betw|thm"><span>inc_vec_of_bij_betw</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_dim|fact"><span>inc_vec_dim</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_1920..1925"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_1920..1925"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>inj_on_image_mem_iff</span><span> </span><span>nth_map</span><span> </span><span>nth_mem</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_index|fact"><span>inc_vec_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span>âº</span></span></span><span> </span><span>length_map</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Incidence Matrices</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>A function which takes a list of points, and list of sets of points, and returns 
</span><span>a $v \times b$ 0-1 matrix $M$, where $v$ is the number of points, and $b$ the number of sets, such 
</span><span>that there is a 1 in the i, j position if and only if point i is in block j. The matrix has 
</span><span>type </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>ring_1</span><span class="main"><span>)</span></span><span> </span><span>mat</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> to allow for operations commonly used on matrices \cite{stinsonCombinatorialDesignsConstructions2004}</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.inc_mat_of_def|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_of_def|thm"><span class="entity_def" id="Incidence_Matrices.inc_mat_of_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inc_mat_of</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Vs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Bs</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Vs</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Bs</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>Vs</span></span></span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>Bs</span></span></span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Basic lemmas on the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> matrix result (elements/dimensions/indexing)</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_one_zero_elems|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_one_zero_elems|thm"><span>inc_mat_one_zero_elems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span> </span><span>elements_mat_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.fin_incidence_mat_elems|fact"><span class="entity_def" id="Incidence_Matrices.fin_incidence_mat_elems|thm"><span>fin_incidence_mat_elems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>finite_subset</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_one_zero_elems|fact"><span>inc_mat_one_zero_elems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_elems_max_two|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_elems_max_two|thm"><span>inc_matrix_elems_max_two</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_one_zero_elems|fact"><span>inc_mat_one_zero_elems</span></a><span> </span><span>order_trans</span><span> </span><span>card_2_iff</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>antisym</span><span> </span><span>bot.extremum</span><span> </span><span>card.empty</span><span> </span><span>insert_commute</span><span> </span><span>insert_subsetI</span><span> 
      </span><span>is_singletonI</span><span> </span><span>is_singleton_altdef</span><span> </span><span>linorder_le_cases</span><span> </span><span>not_one_le_zero</span><span> </span><span>one_le_numeral</span><span>  </span><span>subset_insert</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_of_index|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_of_index|thm"><span>inc_mat_of_index</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
  </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_dim_row|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_dim_row|thm"><span>inc_mat_dim_row</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_dim_vec_row|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_dim_vec_row|thm"><span>inc_mat_dim_vec_row</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_dim_col|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_dim_col|thm"><span>inc_mat_dim_col</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_dim_vec_col|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_dim_vec_col|thm"><span>inc_mat_dim_vec_col</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_in_block_one|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_in_block_one|thm"><span>inc_matrix_point_in_block_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>
    </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>   

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_not_in_block_zero|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_not_in_block_zero|thm"><span>inc_matrix_point_not_in_block_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_in_block|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_in_block|thm"><span>inc_matrix_point_in_block</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> 
    </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block_zero|fact"><span>inc_matrix_point_not_in_block_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>zero_neq_one</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_not_in_block|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_not_in_block|thm"><span>inc_matrix_point_not_in_block</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_one|fact"><span>inc_matrix_point_in_block_one</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>zero_neq_one</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_not_in_block_iff|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_not_in_block_iff|thm"><span>inc_matrix_point_not_in_block_iff</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block|fact"><span>inc_matrix_point_not_in_block</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block_zero|fact"><span>inc_matrix_point_not_in_block_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_in_block_iff|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_point_in_block_iff|thm"><span>inc_matrix_point_in_block_iff</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span>
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block|fact"><span>inc_matrix_point_in_block</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_one|fact"><span>inc_matrix_point_in_block_one</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5464..5469">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_subset_implies_one|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_subset_implies_one|thm"><span>inc_matrix_subset_implies_one</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5669..5672">iin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_5464..5469"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_5464..5469"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_5464..5469"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_5464..5469"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_5669..5672"><span>iin</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_iff|fact"><span>inc_matrix_point_in_block_iff</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_5464..5469"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_one_implies_membership|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_one_implies_membership|thm"><span>inc_matrix_one_implies_membership</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block|fact"><span>inc_matrix_point_in_block</span></a><span> </span><span>subset_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_matrix_elems_one_zero|fact"><span class="entity_def" id="Incidence_Matrices.inc_matrix_elems_one_zero|thm"><span>inc_matrix_elems_one_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_one|fact"><span>inc_matrix_point_in_block_one</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block_zero|fact"><span>inc_matrix_point_not_in_block_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Reasoning on Rows/Columns of the incidence matrix</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_col_def|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_col_def|thm"><span>inc_mat_col_def</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_col_list_map_elem|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_col_list_map_elem|thm"><span>inc_mat_col_list_map_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span> </span><span>index_vec_of_list</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_col_list_map|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_col_list_map|thm"><span>inc_mat_col_list_map</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_row|fact"><span>inc_mat_dim_row</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_col_list_map_elem|fact"><span>inc_mat_col_list_map_elem</span></a><span> </span><span>index_vec_of_list</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_row_def|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_row_def|thm"><span>inc_mat_row_def</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_row_list_map_elem|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_row_list_map_elem|thm"><span>inc_mat_row_list_map_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span>row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span> </span><span>vec_of_list_index</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_row_list_map|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_row_list_map|thm"><span>inc_mat_row_list_map</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span>row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_row|fact"><span>inc_mat_dim_row</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_row_list_map_elem|fact"><span>inc_mat_row_list_map_elem</span></a><span> </span><span>index_vec_of_list</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Connecting </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_col_inc_vec|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_col_inc_vec|thm"><span>inc_mat_col_inc_vec</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of_def|fact"><span>inc_vec_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_of_cols_inc_vecs|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_of_cols_inc_vecs|thm"><span>inc_mat_of_cols_inc_vecs</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>cols</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>nth_equalityI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8003..8005">l1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8095..8097">l2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>length_map</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_8003..8005"><span>l1</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_8095..8097"><span>l2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_col_inc_vec|fact"><span>inc_mat_col_inc_vec</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_8003..8005"><span>l1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>cols_nth</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><span>nth_map</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8498..8503">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_of_bij_betw|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_of_bij_betw|thm"><span>inc_mat_of_bij_betw</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>Vs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_row|fact"><span>inc_mat_dim_row</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_8771..8774">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_8796..8799">jlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_8498..8503"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_8498..8503"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_8771..8774"><span>ilt</span></a><span> </span><span>inj_on_image_mem_iff</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_8796..8799"><span>jlt</span></a><span> </span><span>nth_mem</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Definitions for the incidence matrix representation of common incidence system properties</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.non_empty_col_def|fact"><span class="entity_def" id="Incidence_Matrices.non_empty_col_def|thm"><span class="entity_def" id="Incidence_Matrices.non_empty_col_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>non_empty_col</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.proper_inc_mat_def|fact"><span class="entity_def" id="Incidence_Matrices.proper_inc_mat_def|thm"><span class="entity_def" id="Incidence_Matrices.proper_inc_mat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.proper_inc_mat|const"><span>proper_inc_mat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>proper_inc_mat</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Matrix version of the representation number property </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>point_replication_number</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.mat_rep_num_def|fact"><span class="entity_def" id="Incidence_Matrices.mat_rep_num_def|thm"><span class="entity_def" id="Incidence_Matrices.mat_rep_num_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mat_rep_num</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Matrix version of the points index property </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.mat_point_index_def|fact"><span class="entity_def" id="Incidence_Matrices.mat_point_index_def|thm"><span class="entity_def" id="Incidence_Matrices.mat_point_index_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mat_point_index</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.mat_inter_num_def|fact"><span class="entity_def" id="Incidence_Matrices.mat_inter_num_def|thm"><span class="entity_def" id="Incidence_Matrices.mat_inter_num_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mat_inter_num</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j1</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j2</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j1</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span>  </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j2</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Matrix version of the block size property</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.mat_block_size_def|fact"><span class="entity_def" id="Incidence_Matrices.mat_block_size_def|thm"><span class="entity_def" id="Incidence_Matrices.mat_block_size_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mat_block_size</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10091..10096">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.non_empty_col_obtains|fact"><span class="entity_def" id="Incidence_Matrices.non_empty_col_obtains|thm"><span>non_empty_col_obtains</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10224..10225">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_10091..10096"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col_def|fact"><span>non_empty_col_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains_obtains_index|fact"><span>vec_contains_obtains_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_10224..10225"><span>d</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_10091..10096"><span>that</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10441..10446">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.non_empty_col_alt_def|fact"><span class="entity_def" id="Incidence_Matrices.non_empty_col_alt_def|thm"><span>non_empty_col_alt_def</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span class="main"><span>&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_10441..10446"><span>assms</span></a><span> </span><span>index_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col_obtains|fact"><span>non_empty_col_obtains</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span class="main"><span>&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_10792..10794">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10835..10839">ilt2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_10792..10794"><span>ne</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_10441..10446"><span>assms</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col_def|fact"><span>non_empty_col_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_10835..10839"><span>ilt2</span></a><span> </span><span>vec_setI</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.proper_inc_mat_map|fact"><span class="entity_def" id="Incidence_Matrices.proper_inc_mat_map|thm"><span>proper_inc_mat_map</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.proper_inc_mat|const"><span>proper_inc_mat</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.proper_inc_mat|const"><span>proper_inc_mat</span></a><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.proper_inc_mat_def|fact"><span>proper_inc_mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.mat_point_index_alt|fact"><span class="entity_def" id="Incidence_Matrices.mat_point_index_alt|thm"><span>mat_point_index_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>j</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index_def|fact"><span>mat_point_index_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.mat_block_size_sum_alt|fact"><span class="entity_def" id="Incidence_Matrices.mat_block_size_sum_alt|thm"><span>mat_block_size_sum_alt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_def|fact"><span>mat_block_size_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_sum_ones_alt|fact"><span>count_vec_sum_ones_alt</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.col_elems_subset_mat|fact"><span>col_elems_subset_mat</span></a><span> </span><span>subset_trans</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>  

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.mat_rep_num_sum_alt|fact"><span class="entity_def" id="Incidence_Matrices.mat_rep_num_sum_alt|thm"><span>mat_rep_num_sum_alt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_sum_ones_alt|fact"><span>count_vec_sum_ones_alt</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_def|fact"><span>mat_rep_num_def</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.row_elems_subset_mat|fact"><span>row_elems_subset_mat</span></a><span> </span><span>subset_trans</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11881..11886">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.mat_point_index_two_alt|fact"><span class="entity_def" id="Incidence_Matrices.mat_point_index_two_alt|thm"><span>mat_point_index_two_alt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?I</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12105..12107">ss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_11881..11886"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12165..12171">filter</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="var"><span>?I</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_11881..11886"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_11881..11886"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_12165..12171"><span>filter</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_12105..12107"><span>ss</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index_def|fact"><span>mat_point_index_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Transpose symmetries</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.trans_mat_rep_block_size_sym|fact"><span class="entity_def" id="Incidence_Matrices.trans_mat_rep_block_size_sym(2)|thm"><span class="entity_def" id="Incidence_Matrices.trans_mat_rep_block_size_sym(1)|thm"><span>trans_mat_rep_block_size_sym</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_def|fact"><span>mat_block_size_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_def|fact"><span>mat_rep_num_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.trans_mat_point_index_inter_sym|fact"><span class="entity_def" id="Incidence_Matrices.trans_mat_point_index_inter_sym(2)|thm"><span class="entity_def" id="Incidence_Matrices.trans_mat_point_index_inter_sym(1)|thm"><span>trans_mat_point_index_inter_sym</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>j1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num_def|fact"><span>mat_inter_num_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index_two_alt|fact"><span>mat_point_index_two_alt</span></a><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_transpose_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_transpose_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>0-1 Matrices</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Incidence matrices contain only two elements: 0 and 1. We define a locale which provides
</span><span>a context to work in for matrices satisfying this condition for any </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>zero_neq_one</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> type.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.intro|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_def|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.intro|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_def|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix|locale"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix|const"><span>zero_one_matrix</span></span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>matrix</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>M</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.elems01|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.elems01|thm"><span class="entity_def" id="offset_13382..13389">elems01</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Row and Column Properties of the Matrix</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.row_elems_ss01|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.row_elems_ss01|thm"><span class="entity_def" id="offset_13480..13494">row_elems_ss01</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>vec_set</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.row_elems_subset_mat|fact"><span>row_elems_subset_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13587..13592">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.col_elems_ss01|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.col_elems_ss01|thm"><span class="entity_def" id="offset_13593..13607">col_elems_ss01</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec_set</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec_set</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13587..13592"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.col_elems_subset_mat|fact"><span>col_elems_subset_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13587..13592"><span>assms</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13828..13833">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.col_nth_0_or_1_iff|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.col_nth_0_or_1_iff|thm"><span class="entity_def" id="offset_13834..13852">col_nth_0_or_1_iff</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13977..13979">dv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13828..13833"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14032..14034">sv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13593..13607"><span>col_elems_ss01</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13828..13833"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13977..13979"><span>dv</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13977..13979"><span>dv</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_14032..14034"><span>sv</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>insertE</span><span> </span><span>singletonD</span><span> </span><span>subset_eq</span><span> </span><span>vec_setI</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14277..14282">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.row_nth_0_or_1_iff|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.row_nth_0_or_1_iff|thm"><span>row_nth_0_or_1_iff</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14426..14428">dv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_14277..14282"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14481..14483">sv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13480..13494"><span>row_elems_ss01</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_14277..14282"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_14426..14428"><span>dv</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_14481..14483"><span>sv</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>insertE</span><span> </span><span>singletonD</span><span> </span><span>subset_eq</span><span> </span><span>vec_setI</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.transpose_entries|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.transpose_entries|thm"><span>transpose_entries</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.transpose_mat_elems|fact"><span>transpose_mat_elems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.M_not_zero_simp|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.M_not_zero_simp|thm"><span class="entity_def" id="offset_14825..14840">M_not_zero_simp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.M_not_one_simp|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.M_not_one_simp|thm"><span>M_not_one_simp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Definition for mapping a column to a block</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_def|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_def|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_def_raw|axiom"><span class="entity_def" id="offset_15101..15111">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>zero_neq_one</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>  </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>map_col_to_block</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_alt|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_alt|thm"><span class="entity_def" id="offset_15240..15260">map_col_to_block_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15101..15111"><span>map_col_to_block_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_elem|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_elem|thm"><span class="entity_def" id="offset_15361..15382">map_col_to_block_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â·</span></span><span>  </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15240..15260"><span>map_col_to_block_alt</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.in_map_col_valid_index|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.in_map_col_valid_index|thm"><span class="entity_def" id="offset_15483..15505">in_map_col_valid_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15240..15260"><span>map_col_to_block_alt</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_size|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_size|thm"><span class="entity_def" id="offset_15593..15614">map_col_to_block_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_def|fact"><span>mat_block_size_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15240..15260"><span>map_col_to_block_alt</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_alt|fact"><span>count_vec_alt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span>Collect_cong</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.in_map_col_valid_index_M|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.in_map_col_valid_index_M|thm"><span>in_map_col_valid_index_M</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15483..15505"><span>in_map_col_valid_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dim_col</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_elem_not|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_elem_not|thm"><span class="entity_def" id="offset_15981..16006">map_col_to_block_elem_not</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15240..15260"><span>map_col_to_block_alt</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13834..13852"><span>col_nth_0_or_1_iff</span></a><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.obtain_col_index|fact"><span>obtain_col_index</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16199..16204">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.obtain_block_index_map_block_set|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.obtain_block_index_map_block_set|thm"><span class="entity_def" id="offset_16205..16237">obtain_block_index_map_block_set</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>c</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_16400..16404">bleq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="skolem"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_16199..16204"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_16400..16404"><span>bleq</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.obtain_col_index|fact"><span>obtain_col_index</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_16199..16204"><span>that</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_ord_inc_sys_point|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_ord_inc_sys_point|thm"><span class="entity_def" id="offset_16595..16616">mat_ord_inc_sys_point</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_ord_inc_sys_block|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_ord_inc_sys_block|thm"><span>mat_ord_inc_sys_block</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> 
  </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.ordered_to_mset_col_blocks|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.ordered_to_mset_col_blocks|thm"><span class="entity_def" id="offset_16819..16845">ordered_to_mset_col_blocks</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Lemmas on incidence matrix properties</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16995..17000">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.non_empty_col_01|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.non_empty_col_01|thm"><span>non_empty_col_01</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_17159..17162">kn0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_17176..17179">kin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col_def|fact"><span>non_empty_col_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains_col_elements_mat|fact"><span>vec_contains_col_elements_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_16995..17000"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_17159..17162"><span>kn0</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_17176..17179"><span>kin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col_def|fact"><span>non_empty_col_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>zero_neq_one</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17538..17543">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_rep_num_alt|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_rep_num_alt|thm"><span class="entity_def" id="offset_17544..17559">mat_rep_num_alt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_def|fact"><span>mat_rep_num_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17700..17702">eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_17538..17543"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span>  </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_alt|fact"><span>count_vec_alt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_17700..17702"><span>eq</span></a><span> </span><span>Collect_cong</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_rep_num_alt_col|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_rep_num_alt_col|thm"><span>mat_rep_num_alt_col</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_17544..17559"><span>mat_rep_num_alt</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.index_to_col_card_size_prop|fact"><span>index_to_col_card_size_prop</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><span class="keyword1"><span class="free"><span>M</span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>A zero one matrix is an incidence system</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_wf|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_wf|thm"><span class="entity_def" id="offset_18295..18314">map_col_to_block_wf</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>c</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15101..15111"><span>map_col_to_block_def</span></a><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.obtain_col_index|fact"><span>obtain_col_index</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.one_implies_block_nempty|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.one_implies_block_nempty|thm"><span class="entity_def" id="offset_18460..18484">one_implies_block_nempty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15101..15111"><span>map_col_to_block_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_setE</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18612..18626">interpretation</span></span></span><span> incidence_sys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.incidence_system|locale"><span>incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_18295..18314"><span>map_col_to_block_wf</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword1"><span class="command"><span>interpretation</span></span></span><span> fin_incidence_sys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|locale"><span>finite_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.block_nempty_implies_all_zeros|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.block_nempty_implies_all_zeros|thm"><span>block_nempty_implies_all_zeros</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13834..13852"><span>col_nth_0_or_1_iff</span></a><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_18460..18484"><span>one_implies_block_nempty</span></a><span> </span><span>vec_setI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.block_nempty_implies_no_one|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.block_nempty_implies_no_one|thm"><span>block_nempty_implies_no_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_18460..18484"><span>one_implies_block_nempty</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19293..19298">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_is_design|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_is_design|thm"><span class="entity_def" id="offset_19299..19312">mat_is_design</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.design|const"><span>design</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>bl</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>map</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_16205..16237"><span>obtain_block_index_map_block_set</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_19293..19298"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_18460..18484"><span>one_implies_block_nempty</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19737..19742">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_is_proper_design|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_is_proper_design|thm"><span>mat_is_proper_design</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|const"><span>proper_design</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> des</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.design|locale"><span>design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_19299..19312"><span>mat_is_design</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_19737..19742"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_19737..19742"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_18612..18626"><span>incidence_sys.ð»</span></a><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Show the 01 injective function preserves system properties</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20353..20358">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.inj_on_01_hom_index|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.inj_on_01_hom_index(2)|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.inj_on_01_hom_index(1)|thm"><span class="entity_def" id="offset_20359..20378">inj_on_01_hom_index</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|const"><span>inj_on_01_hom</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>  </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>  </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> hom</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|locale"><span>inj_on_01_hom</span></a><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20353..20358"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20617..20619">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>  </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20353..20358"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13834..13852"><span>col_nth_0_or_1_iff</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20617..20619"><span>hom.inj_1_iff</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>  </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20353..20358"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13834..13852"><span>col_nth_0_or_1_iff</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20617..20619"><span>hom.inj_0_iff</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20881..20886">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_non_empty|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_non_empty|thm"><span>preserve_non_empty</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|const"><span>inj_on_01_hom</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col_def|fact"><span>non_empty_col_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> hom</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|locale"><span>inj_on_01_hom</span></a><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20881..20886"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21119..21121">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_21185..21189">kneq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_21203..21206">kin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains_img|fact"><span>vec_contains_img</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20881..20886"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>col_map_mat</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20881..20886"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_21185..21189"><span>kneq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_21203..21206"><span>kin</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20881..20886"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13593..13607"><span>col_elems_ss01</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_21119..21121"><span>hom.inj_0_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> hom</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|locale"><span>inj_on_01_hom</span></a><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20881..20886"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21573..21575">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_21651..21655">kneq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>kin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>map_vec</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20881..20886"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>col_map_mat</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>image_eqI</span><span> </span><span>index_map_vec</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_map_vec</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>vec_setE</span><span> </span><span>vec_setI</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>keq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_21949..21953">kin2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20881..20886"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_21651..21655"><span>kneq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_21573..21575"><span>hom.inj_0_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_21949..21953"><span>kin2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22116..22121">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_mat_rep_num|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_mat_rep_num|thm"><span class="entity_def" id="offset_22122..22142">preserve_mat_rep_num</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|const"><span>inj_on_01_hom</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_def|fact"><span>mat_rep_num_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.injective_lim.lim_inj_hom_count_vec|fact"><span>injective_lim.lim_inj_hom_count_vec</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom_def|fact"><span>inj_on_01_hom_def</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.row_map_mat|fact"><span>row_map_mat</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_22116..22121"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_22116..22121"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom.inj_1_iff|fact"><span>inj_on_01_hom.inj_1_iff</span></a><span> </span><span>insert_iff</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13480..13494"><span>row_elems_ss01</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22436..22441">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_mat_block_size|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_mat_block_size|thm"><span>preserve_mat_block_size</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|const"><span>inj_on_01_hom</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_def|fact"><span>mat_block_size_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.injective_lim.lim_inj_hom_count_vec|fact"><span>injective_lim.lim_inj_hom_count_vec</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom_def|fact"><span>inj_on_01_hom_def</span></a><span> </span><span>col_map_mat</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_22436..22441"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_22436..22441"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom.inj_1_iff|fact"><span>inj_on_01_hom.inj_1_iff</span></a><span> </span><span>insert_iff</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13593..13607"><span>col_elems_ss01</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22770..22775">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_mat_point_index|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_mat_point_index|thm"><span>preserve_mat_point_index</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|const"><span>inj_on_01_hom</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> 
      </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_22770..22775"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20359..20378"><span>inj_on_01_hom_index</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_22770..22775"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>index_map_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index_def|fact"><span>mat_point_index_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_map_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_23253..23258">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_mat_inter_num|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.preserve_mat_inter_num|thm"><span>preserve_mat_inter_num</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_on_01_hom|const"><span>inj_on_01_hom</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num_def|fact"><span>mat_inter_num_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_23253..23258"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_map_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_20359..20378"><span>inj_on_01_hom_index</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_mat_01_index_iff|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_mat_01_index_iff(2)|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_mat_01_index_iff(1)|thm"><span class="entity_def" id="offset_23554..23575">lift_mat_01_index_iff</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13834..13852"><span>col_nth_0_or_1_iff</span></a><span> </span><span>index_col</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_simp|fact"><span>lift_01_mat_simp</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_def|fact"><span>of_zero_neq_one_def</span></a><span> </span><span>zero_neq_one</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_mat_elems|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_mat_elems|thm"><span class="entity_def" id="offset_23856..23870">lift_mat_elems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span>elements_mat</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_def|fact"><span>lift_01_mat_def</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.map_mat_elements|fact"><span>map_mat_elements</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one|const"><span>of_zero_neq_one</span></a><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_mat_is_0_1|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_mat_is_0_1|thm"><span>lift_mat_is_0_1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix|const"><span>zero_one_matrix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_23856..23870"><span>lift_mat_elems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_01_mat_distinct_cols|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.lift_01_mat_distinct_cols|thm"><span class="entity_def" id="offset_24289..24314">lift_01_mat_distinct_cols</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.of_injective_lim.mat_cols_hom_lim_distinct_iff|fact"><span>of_injective_lim.mat_cols_hom_lim_distinct_iff</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_def|fact"><span>lift_01_mat_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.map_vec_mat_cols|fact"><span>map_vec_mat_cols</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Some properties must be further restricted to matrices having a </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>ring_1</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> type</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.axioms|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.intro|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1_def|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.axioms|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.intro|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1_def|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1_def|axiom"><span class="entity_def" id="offset_24585..24591">locale</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1|locale"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1|const"><span>zero_one_matrix_ring_1</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix|locale"><span>zero_one_matrix</span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24672..24677">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.map_col_block_eq|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.map_col_block_eq|thm"><span>map_col_block_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>c</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_24585..24591"><span>map_col_to_block_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of_def|fact"><span>inc_vec_of_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_24672..24677"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15361..15382"><span>map_col_to_block_elem</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15981..16006"><span>map_col_to_block_elem_not</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_vec</span><span> </span><span class="free"><span>c</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of_def|fact"><span>inc_vec_of_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.inc_mat_of_map_rev|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.inc_mat_of_map_rev|thm"><span class="entity_def" id="offset_25120..25138">inc_mat_of_map_rev</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><span>conjI</span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15361..15382"><span>map_col_to_block_elem</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13834..13852"><span>col_nth_0_or_1_iff</span></a><span> </span><span>dim_col</span><span> </span><span>index_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15361..15382"><span>map_col_to_block_elem</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.M_index_square_itself|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.M_index_square_itself|thm"><span class="entity_def" id="offset_25593..25614">M_index_square_itself</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_14825..14840"><span>M_not_zero_simp</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><span>power_one</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.M_col_index_square_itself|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.M_col_index_square_itself|thm"><span class="entity_def" id="offset_25768..25793">M_col_index_square_itself</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>index_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_25593..25614"><span>M_index_square_itself</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Scalar Prod Alternative definitions for matrix properties</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25982..25987">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.scalar_prod_inc_vec_block_size_mat|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.scalar_prod_inc_vec_block_size_mat|thm"><span>scalar_prod_inc_vec_block_size_mat</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
     </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_25982..25987"><span>assms</span></a><span>  </span><span>scalar_prod_def</span><span> </span><span>sum.cong</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>dim_col</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>power2_eq_square</span><span> </span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_25768..25793"><span>M_col_index_square_itself</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_25982..25987"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_sum_alt|fact"><span>mat_block_size_sum_alt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_25982..25987"><span>assms</span></a><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26616..26621">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.scalar_prod_inc_vec_mat_inter_num|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.scalar_prod_inc_vec_mat_inter_num|thm"><span>scalar_prod_inc_vec_mat_inter_num</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_26784..26789">split</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> 
    </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_26616..26621"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_14825..14840"><span>M_not_zero_simp</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_26986..26991">inter</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â©</span></span><span> 
    </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_26616..26621"><span>assms</span></a><span> </span><span>scalar_prod_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>dim_col</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_26616..26621"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_26784..26789"><span>split</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_26986..26991"><span>inter</span></a><span> </span><span>sum.union_disjoint</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>finite_Un</span><span> </span><span>finite_atLeastLessThan</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.cong</span><span> </span><span>mem_Collect_eq</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult.right_neutral</span><span> </span><span>mult_not_zero</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num_def|fact"><span>mat_inter_num_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quoted"><span class="free"><span>j1</span></span></span><span> </span><span class="quoted"><span class="free"><span>j2</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Any matrix generated by </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> is a 0-1 matrix.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_mat_of_01_mat|fact"><span class="entity_def" id="Incidence_Matrices.inc_mat_of_01_mat|thm"><span>inc_mat_of_01_mat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix_ring_1|const"><span>zero_one_matrix_ring_1</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_one_zero_elems|fact"><span>inc_mat_one_zero_elems</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Ordered Incidence Systems</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We impose an arbitrary ordering on the point set and block collection to enable
</span><span>matrix reasoning. Note that this is also common in computer algebra representations of designs</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system|locale"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system|const"><span class="entity_def" id="offset_28818..28842">ordered_incidence_system</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.wf_list|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.wf_list|thm"><span class="entity_def" id="offset_28903..28910">wf_list</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.distinct|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.distinct|thm"><span class="entity_def" id="offset_28952..28960">distinct</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>An ordered incidence system, as it is defined on lists, can only represent finite incidence systems</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|locale"><span>finite_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28903..28910"><span>wf_list</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_29212..29217">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_sysI|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_sysI|thm"><span>ordered_incidence_sysI</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|const"><span>finite_incidence_system</span></a><span> </span><span class="free"><span>ð±</span></span><span> </span><span class="free"><span>â¬</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="free"><span>ð±</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="free"><span>â¬</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_29417..29420">veq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29212..29217"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_setD|fact"><span>permutations_of_setD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_29487..29490">beq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29212..29217"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multisetD|fact"><span>permutations_of_multisetD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> fisys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|locale"><span>finite_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29212..29217"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29417..29420"><span>veq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29487..29490"><span>beq</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_29637..29639">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29637..29639"><span>fisys.wellformed</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29212..29217"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_setD|fact"><span>permutations_of_setD</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_29840..29845">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_sysII|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_sysII|thm"><span>ordered_incidence_sysII</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|const"><span>finite_incidence_system</span></a><span> </span><span class="free"><span>ð±</span></span><span> </span><span class="free"><span>â¬</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð±</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>â¬</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> fisys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|locale"><span>finite_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29840..29845"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30088..30090">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30088..30090"><span>fisys.wellformed</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_29840..29845"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30176..30183">context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>For ease of notation, establish the same notation as for incidence systems</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.\&lt;V&gt;|const"><span class="entity_def" id="offset_30314..30315">ð±</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.\&lt;B&gt;|const"><span class="entity_def" id="offset_30340..30341">â¬</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Basic properties on ordered lists</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_indexing|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_indexing|thm"><span class="entity_def" id="offset_30402..30417">points_indexing</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set_def|fact"><span>permutations_of_set_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28952..28960"><span>distinct</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_indexing|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_indexing|thm"><span class="entity_def" id="offset_30505..30520">blocks_indexing</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset_def|fact"><span>permutations_of_multiset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_list_empty_iff|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_list_empty_iff|thm"><span class="entity_def" id="offset_30609..30630">points_list_empty_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>finite_sets</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30402..30417"><span>points_indexing</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.elem_permutation_of_set_empty_iff|fact"><span>elem_permutation_of_set_empty_iff</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_indexing_inj|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_indexing_inj|thm"><span class="entity_def" id="offset_30746..30765">points_indexing_inj</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28952..28960"><span>distinct</span></a><span> </span><span>inj_on_nth</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_list_empty_iff|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_list_empty_iff|thm"><span>blocks_list_empty_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30505..30520"><span>blocks_indexing</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_list_nempty|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_list_nempty|thm"><span>blocks_list_nempty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|const"><span>proper_design</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mset.simps</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design.design_blocks_nempty|fact"><span>proper_design.design_blocks_nempty</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_list_nempty|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_list_nempty|thm"><span>points_list_nempty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|const"><span>proper_design</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design.design_points_nempty|fact"><span>proper_design.design_points_nempty</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30609..30630"><span>points_list_empty_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_list_length|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_list_length|thm"><span class="entity_def" id="offset_31196..31214">points_list_length</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30402..30417"><span>points_indexing</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.length_finite_permutations_of_set|fact"><span>length_finite_permutations_of_set</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_list_length|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_list_length|thm"><span class="entity_def" id="offset_31315..31333">blocks_list_length</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30505..30520"><span>blocks_indexing</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.length_finite_permutations_of_multiset|fact"><span>length_finite_permutations_of_multiset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_points_index|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_points_index|thm"><span class="entity_def" id="offset_31430..31448">valid_points_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_points_index_cons|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_points_index_cons|thm"><span class="entity_def" id="offset_31514..31537">valid_points_index_cons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>in_set_conv_nth</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31637..31642">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_points_index_obtains|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_points_index_obtains|thm"><span class="entity_def" id="offset_31643..31669">valid_points_index_obtains</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31637..31642"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_blocks_index|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_blocks_index|thm"><span class="entity_def" id="offset_31782..31800">valid_blocks_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>nth_mem_mset</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_blocks_index_cons|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_blocks_index_cons|thm"><span class="entity_def" id="offset_31882..31905">valid_blocks_index_cons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>in_set_conv_nth</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31984..31989">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_blocks_index_obtains|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.valid_blocks_index_obtains|thm"><span>valid_blocks_index_obtains</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31984..31989"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31882..31905"><span>valid_blocks_index_cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32127..32132">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_points_valid_point_index|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_points_valid_point_index|thm"><span>block_points_valid_point_index</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31643..31669"><span>valid_points_index_obtains</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_32127..32132"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><span>wf_invalid_point</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_set_index_img|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.points_set_index_img|thm"><span class="entity_def" id="offset_32351..32371">points_set_index_img</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>image</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31430..31448"><span>valid_points_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_mset_image|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_mset_image|thm"><span class="entity_def" id="offset_32476..32493">blocks_mset_image</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.mset_list_by_index|fact"><span>mset_list_by_index</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.incidence_cond_indexed|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.incidence_cond_indexed|thm"><span class="entity_def" id="offset_32590..32612">incidence_cond_indexed</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>incident</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>incidence_alt_def</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31430..31448"><span>valid_points_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.bij_betw_points_index|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.bij_betw_points_index|thm"><span class="entity_def" id="offset_32766..32787">bij_betw_points_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bij_betw</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>bij_betw_def</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30746..30765"><span>points_indexing_inj</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>subset_antisym</span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31430..31448"><span>valid_points_index</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span>ð</span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Some lemmas on cardinality due to different set descriptor filters</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.card_filter_point_indices|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.card_filter_point_indices|thm"><span class="entity_def" id="offset_33454..33479">card_filter_point_indices</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>}</span></span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Compr_image_eq</span><span> </span><span>lessThan_atLeast0</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_32351..32371"><span>points_set_index_img</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>inj_on_nth</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>card_image</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28952..28960"><span>distinct</span></a><span> </span><span>lessThan_atLeast0</span><span> </span><span>lessThan_iff</span><span> </span><span>mem_Collect_eq</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33837..33842">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.card_block_points_filter|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.card_block_points_filter|thm"><span>card_block_points_filter</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_33995..33999">blis</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_33837..33842"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_34051..34054">cbl</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>block_size_alt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_32766..32787"><span>bij_betw_points_index</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>lessThan_atLeast0</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_32351..32371"><span>points_set_index_img</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Set.filter</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>Set.filter</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_33454..33479"><span>card_filter_point_indices</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34051..34054"><span>cbl</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_33995..33999"><span>blis</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34518..34523">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.obtains_two_diff_block_indexes|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.obtains_two_diff_block_indexes|thm"><span class="entity_def" id="offset_34524..34554">obtains_two_diff_block_indexes</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>bl1</span></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>bl1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_34748..34752">j1lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>min</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_34819..34824">bl1in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_34841..34846">bl1eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_34923..34928">split</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>!</span></span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>assms</span></a><span> </span><span>id_take_nth_drop</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_35029..35032">lj1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34748..34752"><span>j1lt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>length_take</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>j1</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>@</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>!</span></span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34923..34928"><span>split</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>bsplit</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34841..34846"><span>bl1eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_35317..35322">btake</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>j1</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_35440..35444">True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35029..35032"><span>lj1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_35530..35535">bl2eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_35585..35591">bl2eq2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35440..35444"><span>True</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35317..35322"><span>btake</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35530..35535"><span>bl2eq</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><span>take</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span> </span><span>nth_mem_mset</span><span> </span><span>union_iff</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35585..35591"><span>bl2eq2</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34819..34824"><span>bl1in</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34841..34846"><span>bl1eq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_35853..35857">j2gt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_35917..35920">ieq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_35969..35973">j2eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35853..35857"><span>j2gt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35917..35920"><span>ieq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>diff_less_mono</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35853..35857"><span>j2gt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_36259..36264">bl2eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_36319..36324">bl2in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35317..35322"><span>btake</span></a><span> </span><span>nth_mem_mset</span><span> </span><span>union_iff</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><span>drop</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_36259..36264"><span>bl2eq</span></a><span> </span><span>nth_drop</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_35969..35973"><span>j2eq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_leI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34819..34824"><span>bl1in</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34841..34846"><span>bl1eq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_36319..36324"><span>bl2in</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34518..34523"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.filter_size_blocks_eq_card_indexes|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.filter_size_blocks_eq_card_indexes|thm"><span class="entity_def" id="offset_36614..36648">filter_size_blocks_eq_card_indexes</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>j</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span class="main"><span>(</span></span><span>ð»</span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span class="main"><span>(</span></span><span>ð»</span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_32476..32493"><span>blocks_mset_image</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_36826..36832">helper</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.filter_mset_image_mset|fact"><span>filter_mset_image_mset</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>j</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Multisets_Extras.html#Multisets_Extras.card_size_filter_eq|fact"><span>card_size_filter_eq</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_36826..36832"><span>helper</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37149..37154">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_index_ne_belong|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.blocks_index_ne_belong|thm"><span class="entity_def" id="offset_37155..37177">blocks_index_ne_belong</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_37334..37338">True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.count_min_2_indices|fact"><span>count_min_2_indices</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_37149..37154"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Nat.le_diff_conv2</span><span> </span><span>add_leD2</span><span> </span><span>count_diff</span><span> </span><span>count_single</span><span> </span><span>nat_1_add_1</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_37334..37338"><span>True</span></a><span> </span><span>count_inI</span><span> </span><span>not_one_le_zero</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_37647..37652">False</span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_37149..37154"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_37647..37652"><span>False</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_remove1_mset_neq|fact"><span>in_remove1_mset_neq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37772..37777">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.inter_num_points_filter_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.inter_num_points_filter_def|thm"><span>inter_num_points_filter_def</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>inter</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_38082..38087">bl1in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_38104..38109">bl1eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_38131..38136">bl2in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_38168..38173">bl2eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl2</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_37772..37777"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34524..34554"><span>obtains_two_diff_block_indexes</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_37155..37177"><span>blocks_index_ne_belong</span></a><span> </span><span>size_mset</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_33454..33479"><span>card_filter_point_indices</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>v</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38104..38109"><span>bl1eq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38168..38173"><span>bl2eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>points_inter_num_rep</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38082..38087"><span>bl1in</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38131..38136"><span>bl2in</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38104..38109"><span>bl1eq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38168..38173"><span>bl2eq</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Define an incidence matrix for this ordering of an incidence system</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N|const"><span class="entity_def" id="offset_38751..38752">N</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_38796..38805">sublocale</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix_ring_1|locale"><span>zero_one_matrix_ring_1</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_01_mat|fact"><span>inc_mat_of_01_mat</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_alt_def_dim|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_alt_def_dim|thm"><span class="entity_def" id="offset_38868..38881">N_alt_def_dim</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>mat</span><span> </span><span>ð</span><span> </span><span>ð»</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span>incident</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_32590..32612"><span>incidence_cond_indexed</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_row|fact"><span>inc_mat_dim_row</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_one|fact"><span>inc_matrix_point_in_block_one</span></a><span> 
      </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block_zero|fact"><span>inc_matrix_point_not_in_block_zero</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Matrix Dimension related lemmas</span><span> </span><span>âº</span></span></span><span>
 
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_carrier_mat|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_carrier_mat|thm"><span class="entity_def" id="offset_39213..39226">N_carrier_mat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span>ð</span><span> </span><span>ð»</span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38868..38881"><span>N_alt_def_dim</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_row_is_v|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_row_is_v|thm"><span class="entity_def" id="offset_39289..39301">dim_row_is_v</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38868..38881"><span>N_alt_def_dim</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_col_is_b|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_col_is_b|thm"><span class="entity_def" id="offset_39363..39375">dim_col_is_b</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38868..38881"><span>N_alt_def_dim</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_vec_row_N|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_vec_row_N|thm"><span>dim_vec_row_N</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38868..38881"><span>N_alt_def_dim</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_vec_col_N|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_vec_col_N|thm"><span class="entity_def" id="offset_39516..39529">dim_vec_col_N</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_39565..39570">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_vec_N_col|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.dim_vec_N_col|thm"><span>dim_vec_N_col</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>cols</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39565..39570"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39565..39570"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_carrier_mat_01_lift|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_carrier_mat_01_lift|thm"><span>N_carrier_mat_01_lift</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span>ð</span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Transpose properties</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.transpose_N_mult_dim|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.transpose_N_mult_dim(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.transpose_N_mult_dim(1)|thm"><span class="entity_def" id="offset_39935..39955">transpose_N_mult_dim</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_trans_index_val|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_trans_index_val|thm"><span>N_trans_index_val</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Matrix element and index related lemmas</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_row_elems|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_row_elems|thm"><span class="entity_def" id="offset_40228..40241">mat_row_elems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>vec_set</span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38796..38805"><span>row_elems_ss01</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_col_elems|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_col_elems|thm"><span class="entity_def" id="offset_40347..40360">mat_col_elems</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>vec_set</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38796..38805"><span>col_elems_ss01</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_elems_one_zero|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_elems_one_zero|thm"><span class="entity_def" id="offset_40472..40493">matrix_elems_one_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_elems_one_zero|fact"><span>inc_matrix_elems_one_zero</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_in_block_one|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_in_block_one|thm"><span class="entity_def" id="offset_40631..40656">matrix_point_in_block_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_one|fact"><span>inc_matrix_point_in_block_one</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><span class="main"><span>)</span></span><span>   

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_not_in_block_zero|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_not_in_block_zero|thm"><span class="entity_def" id="offset_40804..40834">matrix_point_not_in_block_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block_zero|fact"><span>inc_matrix_point_not_in_block_zero</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_in_block|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_in_block|thm"><span>matrix_point_in_block</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block|fact"><span>inc_matrix_point_in_block</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_not_in_block|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_not_in_block|thm"><span>matrix_point_not_in_block</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block|fact"><span>inc_matrix_point_not_in_block</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_not_in_block_iff|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_not_in_block_iff|thm"><span>matrix_point_not_in_block_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block_iff|fact"><span>inc_matrix_point_not_in_block_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_in_block_iff|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_point_in_block_iff|thm"><span class="entity_def" id="offset_41482..41507">matrix_point_in_block_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_iff|fact"><span>inc_matrix_point_in_block_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_subset_implies_one|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_subset_implies_one|thm"><span class="entity_def" id="offset_41649..41674">matrix_subset_implies_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
  </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_subset_implies_one|fact"><span>inc_matrix_subset_implies_one</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_one_implies_membership|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_one_implies_membership|thm"><span class="entity_def" id="offset_41837..41866">matrix_one_implies_membership</span></span></span><span class="main"><span>:</span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>size</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="free"><span>I</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_41482..41507"><span>matrix_point_in_block_iff</span></a><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Incidence Vector's of Incidence Matrix columns</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.col_inc_vec_of|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.col_inc_vec_of|thm"><span>col_inc_vec_of</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_col_inc_vec|fact"><span>inc_mat_col_inc_vec</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_42169..42174">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.inc_vec_eq_iff_blocks|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.inc_vec_eq_iff_blocks|thm"><span class="entity_def" id="offset_42175..42196">inc_vec_eq_iff_blocks</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl'</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>bl'</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl'</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_dim|fact"><span>inc_vec_dim</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_42169..42174"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_42360..42366">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v1</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_42426..42432">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v2</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>vec</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>bl'</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_42500..42501">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="skolem"><span>v1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_vec</span><span> </span><span class="skolem"><span>v2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_dim|fact"><span>inc_vec_dim</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="skolem"><span>v1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>v1</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v2</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_42500..42501"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>v1</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v2</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_42360..42366"><span>v1_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_dim|fact"><span>inc_vec_dim</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_index_one_iff|fact"><span>inc_vec_index_one_iff</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_42360..42366"><span>v1_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_42426..42432"><span>v2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_42169..42174"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>subset_antisym</span><span> </span><span>subset_eq</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Incidence matrix column properties</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_def|thm"><span class="entity_def" id="offset_43107..43116">N_col_def</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_col_def|fact"><span>inc_mat_col_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_def_indiv|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_def_indiv(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_def_indiv(1)|thm"><span class="entity_def" id="offset_43264..43279">N_col_def_indiv</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
     </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_one|fact"><span>inc_matrix_point_in_block_one</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_not_in_block_zero|fact"><span>inc_matrix_point_not_in_block_zero</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_list_map_elem|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_list_map_elem|thm"><span>N_col_list_map_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_col_list_map_elem|fact"><span>inc_mat_col_list_map_elem</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_list_map|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_list_map|thm"><span class="entity_def" id="offset_43717..43731">N_col_list_map</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_col_list_map|fact"><span>inc_mat_col_list_map</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_mset_point_set_img|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_col_mset_point_set_img|thm"><span class="entity_def" id="offset_43879..43903">N_col_mset_point_set_img</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_img_map|fact"><span>vec_mset_img_map</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_43717..43731"><span>N_col_list_map</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30402..30417"><span>points_indexing</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>finite_sets</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multisetD|fact"><span>permutations_of_multisetD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set_altdef|fact"><span>permutations_of_set_altdef</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44160..44165">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_col_to_block|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_col_to_block|thm"><span class="entity_def" id="offset_44166..44185">matrix_col_to_block</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>subset_antisym</span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_44328..44333">assm1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44160..44165"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_44442..44444">vs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_44526..44531">inset</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44328..44333"><span>assm1</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_43107..43116"><span>N_col_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44160..44165"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44442..44444"><span>vs</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44526..44531"><span>inset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span>  </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44442..44444"><span>vs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>assm2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_44938..44943">inner</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_45008..45011">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44938..44943"><span>inner</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_43107..43116"><span>N_col_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44160..44165"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_41482..41507"><span>matrix_point_in_block_iff</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_40804..40834"><span>matrix_point_not_in_block_zero</span></a><span> </span><span>mem_Collect_eq</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_45008..45011"><span>ilt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>k</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44160..44165"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_41482..41507"><span>matrix_point_in_block_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_col_to_block_v2|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_col_to_block_v2|thm"><span class="entity_def" id="offset_45297..45319">matrix_col_to_block_v2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44166..44185"><span>matrix_col_to_block</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38796..38805"><span>map_col_to_block_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_col_in_blocks|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.matrix_col_in_blocks|thm"><span class="entity_def" id="offset_45453..45473">matrix_col_in_blocks</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_45297..45319"><span>matrix_col_to_block_v2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_45609..45614">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.inc_matrix_col_block|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.inc_matrix_col_block|thm"><span>inc_matrix_col_block</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_45609..45614"><span>assms</span></a><span> </span><span>cols_length</span><span> </span><span>cols_nth</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_mset_conv_nth|fact"><span>in_mset_conv_nth</span></a><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28818..28842"><span>ordered_incidence_system_axioms</span></a><span> </span><span>set_mset_mset</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span class="main"><span>)</span></span><span>  
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_45453..45473"><span>matrix_col_in_blocks</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Incidence Matrix Row Definitions</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_row_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_row_def|thm"><span>N_row_def</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_row_def|fact"><span>inc_mat_row_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_row_list_map_elem|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_row_list_map_elem|thm"><span>N_row_list_map_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_row_list_map_elem|fact"><span>inc_mat_row_list_map_elem</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_row_list_map|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_row_list_map|thm"><span class="entity_def" id="offset_46377..46391">N_row_list_map</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>vec_of_list</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_row_list_map|fact"><span>inc_mat_row_list_map</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_row_mset_blocks_img|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.N_row_mset_blocks_img|thm"><span class="entity_def" id="offset_46569..46590">N_row_mset_blocks_img</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset_img_map|fact"><span>vec_mset_img_map</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_46377..46391"><span>N_row_list_map</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Alternate Block representations</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_46772..46777">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_mat_cond_rep|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_mat_cond_rep|thm"><span class="entity_def" id="offset_46778..46796">block_mat_cond_rep</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_46906..46910">cond</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_46772..46777"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_44166..44185"><span>matrix_col_to_block</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_46772..46777"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Collect_cong</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_46906..46910"><span>cond</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_mat_cond_rep&apos;|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_mat_cond_rep&apos;|thm"><span class="entity_def" id="offset_47338..47357">block_mat_cond_rep'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_46778..46796"><span>block_mat_cond_rep</span></a><span> </span><span>setcompr_eq_image</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_47492..47497">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_mat_cond_rev|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_mat_cond_rev|thm"><span class="entity_def" id="offset_47498..47516">block_mat_cond_rev</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>Set.set_eqI</span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>a1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_47735..47739">ilt1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>Ni1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_47492..47497"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block|fact"><span>inc_matrix_point_in_block</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28952..28960"><span>distinct</span></a><span>  </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index_nth_id|fact"><span>index_nth_id</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_47735..47739"><span>ilt1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>âº</span></span></span><span> </span><span>imageI</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>a2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_48141..48144">ieq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_48178..48181">xin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span class="free"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_48221..48224">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_47492..47497"><span>assms</span></a><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index_first|fact"><span>index_first</span></a><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index_le_size|fact"><span>index_le_size</span></a><span> </span><span>nat_less_le</span><span> </span><span>nth_mem_mset</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> 
        </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><span>wf_invalid_point</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_48178..48181"><span>xin</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_one|fact"><span>inc_matrix_point_in_block_one</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_48141..48144"><span>ieq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_47492..47497"><span>assms</span></a><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index_conv_size_if_notin|fact"><span>index_conv_size_if_notin</span></a><span> </span><span>less_irrefl_nat</span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.nth_index|fact"><span>nth_index</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_48221..48224"><span>ilt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Incidence Matrix incidence system properties</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_48663..48668">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.incomplete_block_col|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.incomplete_block_col|thm"><span class="entity_def" id="offset_48669..48689">incomplete_block_col</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>incomplete_block</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Diff_iff</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_48663..48668"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>incomplete_block_proper_subset</span><span> </span><span>psubset_imp_ex_mem</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_48663..48668"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_40804..40834"><span>matrix_point_not_in_block_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_43107..43116"><span>N_col_def</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_48663..48668"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_setI</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>âº</span></span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>dim_row_is_v</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_49291..49296">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_rep_num_N_row|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_rep_num_N_row|thm"><span class="entity_def" id="offset_49297..49314">mat_rep_num_N_row</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>int</span><span> </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.count_mset_split_image_filter|fact"><span>count_mset_split_image_filter</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>int</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>int</span><span> </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span>
    </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>point_rep_number_alt_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_46569..46590"><span>N_row_mset_blocks_img</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_49291..49296"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_def|fact"><span>mat_rep_num_def</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.point_rep_mat_row_sum|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.point_rep_mat_row_sum|thm"><span class="entity_def" id="offset_49861..49882">point_rep_mat_row_sum</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_sum_ones_alt|fact"><span>count_vec_sum_ones_alt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_49297..49314"><span>mat_rep_num_N_row</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_40228..40241"><span>mat_row_elems</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_def|fact"><span>mat_rep_num_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50020..50025">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_block_size_N_col|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_block_size_N_col|thm"><span class="entity_def" id="offset_50026..50046">mat_block_size_N_col</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_50127..50132">val_b</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50020..50025"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset_set</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>zero_neq_one</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>filter_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.count_mset_split_image_filter|fact"><span>count_mset_split_image_filter</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset_set</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>int</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50127..50132"><span>val_b</span></a><span> </span><span>block_size_alt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_sets</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_43879..43903"><span>N_col_mset_point_set_img</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50020..50025"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_def|fact"><span>mat_block_size_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_size_mat_rep_sum|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.block_size_mat_rep_sum|thm"><span class="entity_def" id="offset_50804..50826">block_size_mat_rep_sum</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec_sum_ones_alt|fact"><span>count_vec_sum_ones_alt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50026..50046"><span>mat_block_size_N_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_def|fact"><span>mat_block_size_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_40347..40360"><span>mat_col_elems</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50975..50980">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_point_index_rep|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_point_index_rep|thm"><span class="entity_def" id="offset_50981..51000">mat_point_index_rep</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50975..50980"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31430..31448"><span>valid_points_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_51180..51183">eqP</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span> </span><span>subsetI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
        </span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="free"><span>I</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_41649..41674"><span>matrix_subset_implies_one</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50975..50980"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span>  </span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="free"><span>I</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span> 
        </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50975..50980"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_41837..41866"><span>matrix_one_implies_membership</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_51180..51183"><span>eqP</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>size</span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_36614..36648"><span>filter_size_blocks_eq_card_indexes</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index_def|fact"><span>points_index_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index_def|fact"><span>mat_point_index_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.incidence_mat_two_index|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.incidence_mat_two_index|thm"><span class="entity_def" id="offset_52315..52338">incidence_mat_two_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index_two_alt|fact"><span>mat_point_index_two_alt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span>  </span><span class="quoted"><span class="free"><span>i1</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a></span><span> </span><span class="quoted"><span class="free"><span>i2</span></span></span><span> </span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50981..51000"><span>mat_point_index_rep</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>dim_row_is_v</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>empty_subsetI</span><span> </span><span>image_empty</span><span> </span><span>image_insert</span><span> </span><span>insert_subset</span><span> </span><span>lessThan_iff</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_52616..52621">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.ones_incidence_mat_block_size|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.ones_incidence_mat_block_size|thm"><span class="entity_def" id="offset_52622..52651">ones_incidence_mat_block_size</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_52616..52621"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>scalar_prod_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>dim_row_is_v</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50804..50826"><span>block_size_mat_rep_sum</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_52616..52621"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_block_size_conv|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_block_size_conv|thm"><span>mat_block_size_conv</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50026..50046"><span>mat_block_size_N_col</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_53234..53239">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_inter_num_conv|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.mat_inter_num_conv|thm"><span class="entity_def" id="offset_53240..53258">mat_inter_num_conv</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_53378..53385">eq_sets</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>P</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Compr_image_eq</span><span> </span><span>lessThan_atLeast0</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_32351..32371"><span>points_set_index_img</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_53529..53532">bin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_53234..53239"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number_def|fact"><span>intersection_number_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Int_def</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_53529..53532"><span>bin</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>wf_invalid_point</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_53378..53385"><span>eq_sets</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30746..30765"><span>points_indexing_inj</span></a><span> </span><span>card_image</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>lessThan_atLeast0</span><span> </span><span>lessThan_iff</span><span> </span><span>mem_Collect_eq</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_53234..53239"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_iff|fact"><span>inc_matrix_point_in_block_iff</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>dim_row_is_v</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_53234..53239"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num_def|fact"><span>mat_inter_num_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54813..54818">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.non_empty_col_map_conv|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.non_empty_col_map_conv|thm"><span class="entity_def" id="offset_54819..54841">non_empty_col_map_conv</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_54982..54985">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col_obtains|fact"><span>non_empty_col_obtains</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_54813..54818"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_54813..54818"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_43264..43279"><span>N_col_def_indiv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_43264..43279"><span>N_col_def_indiv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>dim_row_is_v</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_54813..54818"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_54982..54985"><span>ilt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_col_def|fact"><span>inc_mat_col_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_row|fact"><span>inc_mat_dim_row</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_55375..55376">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_54813..54818"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_55375..55376"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>dim_row_is_v</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_54813..54818"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_index|fact"><span>inc_mat_of_index</span></a><span class="main"><span>)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col_alt_def|fact"><span>non_empty_col_alt_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>âº</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_54813..54818"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_55829..55834">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.scalar_prod_inc_vec_inter_num|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.scalar_prod_inc_vec_inter_num|thm"><span class="entity_def" id="offset_55835..55864">scalar_prod_inc_vec_inter_num</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38796..38805"><span>scalar_prod_inc_vec_mat_inter_num</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_55829..55834"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39213..39226"><span>N_carrier_mat</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_53240..53258"><span>mat_inter_num_conv</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56054..56059">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.scalar_prod_block_size_lift_01|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.scalar_prod_block_size_lift_01|thm"><span>scalar_prod_block_size_lift_01</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> z1</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix_ring_1|locale"><span>zero_one_matrix_ring_1</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56289..56291">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38796..38805"><span>lift_mat_is_0_1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_56054..56059"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_56289..56291"><span>z1.scalar_prod_inc_vec_block_size_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38796..38805"><span>preserve_mat_block_size</span></a><span> 
      </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50026..50046"><span>mat_block_size_N_col</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_def|fact"><span>lift_01_mat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_simp|fact"><span>lift_01_mat_simp</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.of_inj_on_01_hom.inj_on_01_hom_axioms|fact"><span>of_inj_on_01_hom.inj_on_01_hom_axioms</span></a><span> </span><span>size_mset</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56573..56578">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.scalar_prod_inter_num_lift_01|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.scalar_prod_inter_num_lift_01|thm"><span>scalar_prod_inter_num_lift_01</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> z1</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix_ring_1|locale"><span>zero_one_matrix_ring_1</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56829..56831">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38796..38805"><span>lift_mat_is_0_1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_56573..56578"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_56829..56831"><span>z1.scalar_prod_inc_vec_mat_inter_num</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38796..38805"><span>preserve_mat_inter_num</span></a><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#offset_53240..53258"><span>mat_inter_num_conv</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_def|fact"><span>lift_01_mat_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span>  </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_simp|fact"><span>lift_01_mat_simp</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.of_inj_on_01_hom.inj_on_01_hom_axioms|fact"><span>of_inj_on_01_hom.inj_on_01_hom_axioms</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>The System complement's incidence matrix flips 0's and 1's</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.map_block_complement_entry|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.map_block_complement_entry|thm"><span class="entity_def" id="offset_57192..57218">map_block_complement_entry</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>block_complement</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>block_complement</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>nth_map</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_57336..57341">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.complement_mat_entries|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.complement_mat_entries|thm"><span class="entity_def" id="offset_57342..57364">complement_mat_entries</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>block_complement</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_57336..57341"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30176..30183"><span>block_complement_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_57192..57218"><span>map_block_complement_entry</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31430..31448"><span>valid_points_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.length_blocks_complement|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.length_blocks_complement|thm"><span>length_blocks_complement</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>block_complement</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.ordered_complement|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.ordered_complement|thm"><span class="entity_def" id="offset_57647..57665">ordered_complement</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>block_complement</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> inc</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|locale"><span>finite_incidence_system</span></a><span> </span><span class="quoted"><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>complement_blocks</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_57798..57800">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>complement_finite</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_57798..57800"><span>inc.block_complement</span></a><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span>complement_blocks</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>complement_image</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset_def|fact"><span>permutations_of_multiset_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_sysI|fact"><span>ordered_incidence_sysI</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>complement_blocks</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><span>block_complement</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_57798..57800"><span>inc.finite_incidence_system_axioms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30402..30417"><span>points_indexing</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_58170..58184">interpretation</span></span></span><span> ordered_comp</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><span>block_complement</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_57647..57665"><span>ordered_complement</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_58293..58298">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.complement_mat_entries_val|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.complement_mat_entries_val|thm"><span class="entity_def" id="offset_58299..58325">complement_mat_entries_val</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_58170..58184"><span>ordered_comp.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_58445..58449">cond</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>block_complement</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_57342..57364"><span>complement_mat_entries</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_58293..58298"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_58170..58184"><span>ordered_comp.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span>block_complement</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_58293..58298"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_58170..58184"><span>ordered_comp.matrix_point_in_block_one</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_58170..58184"><span>ordered_comp.matrix_point_not_in_block_iff</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_58445..58449"><span>cond</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.ordered_complement_mat|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.ordered_complement_mat|thm"><span>ordered_complement_mat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_58170..58184"><span>ordered_comp.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>mat</span><span> </span><span>ð</span><span> </span><span>ð»</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_58299..58325"><span>complement_mat_entries_val</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.ordered_complement_mat_map|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.ordered_complement_mat_map|thm"><span>ordered_complement_mat_map</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_58170..58184"><span>ordered_comp.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>map_mat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system.matrix_point_in_block_iff|fact"><span>ordered_incidence_system.matrix_point_in_block_iff</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28818..28842"><span>ordered_incidence_system_axioms</span></a><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#offset_58299..58325"><span>complement_mat_entries_val</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>blocks_list_length</span></a><span class="main"><span>)</span></span><span> 


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Establishing connection between incidence system and ordered incidence system locale</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.incidence_system|locale"><span>incidence_system</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Incidence_Matrices.incidence_system.alt_ordering_sysI|fact"><span class="entity_def" id="Incidence_Matrices.incidence_system.alt_ordering_sysI|thm"><span class="entity_def" id="offset_59399..59416">alt_ordering_sysI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multisetD|fact"><span>permutations_of_multisetD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_setD|fact"><span>permutations_of_setD</span></a><span> </span><span>wellformed</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|locale"><span>finite_incidence_system</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Incidence_Matrices.finite_incidence_system.exists_ordering_sysI|fact"><span class="entity_def" id="Incidence_Matrices.finite_incidence_system.exists_ordering_sysI|thm"><span>exists_ordering_sysI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â§</span></span><span> 
  </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Vs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>all_not_in_conv</span><span> </span><span>finite_sets</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set_empty_iff|fact"><span>permutations_of_set_empty_iff</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Bs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>all_not_in_conv</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset_not_empty|fact"><span>permutations_of_multiset_not_empty</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_59399..59416"><span>alt_ordering_sysI</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_60118..60123">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.inc_sys_orderedI|fact"><span class="entity_def" id="Incidence_Matrices.inc_sys_orderedI|thm"><span>inc_sys_orderedI</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.incidence_system|const"><span>incidence_system</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>V</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="free"><span>Vs</span></span><span> </span><span class="free"><span>Bs</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> inc</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.incidence_system|locale"><span>incidence_system</span></a><span> </span><span class="quoted"><span class="free"><span>V</span></span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_60118..60123"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_60329..60331">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_60329..60331"><span>inc.wellformed</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_60118..60123"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>Vs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_60118..60123"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_setD|fact"><span>permutations_of_setD</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Generalise the idea of an incidence matrix to an unordered context</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.is_incidence_matrix_def|fact"><span class="entity_def" id="Incidence_Matrices.is_incidence_matrix_def|thm"><span class="entity_def" id="Incidence_Matrices.is_incidence_matrix_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span>multiset</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_incidence_matrix</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>V</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>â·</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>V</span></span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.incidence_system|locale"><span>incidence_system</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Incidence_Matrices.incidence_system.is_incidence_mat_alt|fact"><span class="entity_def" id="Incidence_Matrices.incidence_system.is_incidence_mat_alt|thm"><span>is_incidence_mat_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â·</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span>mset</span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix_def|fact"><span>is_incidence_matrix_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>Vs</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>Bs</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Vs</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Bs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="skolem"><span>Vs</span></span><span> </span><span class="skolem"><span>Bs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>Vs</span></span><span class="main"><span>.</span></span><span> </span><span>set</span><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>Bs</span></span><span class="main"><span>.</span></span><span> </span><span>mset</span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.incidence_system.alt_ordering_sysI|fact"><span>incidence_system.alt_ordering_sysI</span></a><span> </span><span>incidence_system_axioms</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multisetD|fact"><span>permutations_of_multisetD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_setD|fact"><span>permutations_of_setD</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span class="main"><span>.</span></span><span> </span><span>set</span><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span>mset</span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="bound"><span>Vs</span></span><span> </span><span class="bound"><span>Bs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Vs</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Bs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_61673..61674">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="skolem"><span>Vs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_61693..61695">ms</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="skolem"><span>Bs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="skolem"><span>Vs</span></span><span> </span><span class="skolem"><span>Bs</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_61757..61758">n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="skolem"><span>Vs</span></span><span> </span><span class="skolem"><span>Bs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> ois</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="skolem"><span>Vs</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Bs</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_61845..61847">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_61861..61863">vs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_61845..61847"><span>ois.points_indexing</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_61673..61674"><span>s</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_61845..61847"><span>ois.blocks_indexing</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_61693..61695"><span>ms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_61757..61758"><span>n</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_61861..61863"><span>vs</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix_def|fact"><span>is_incidence_matrix_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.is_incidence_mat_true|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incidence_system.is_incidence_mat_true|thm"><span>is_incidence_mat_true</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>True</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30505..30520"><span>blocks_indexing</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix_def|fact"><span>is_incidence_matrix_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30402..30417"><span>points_indexing</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Incidence Matrices on Design Subtypes</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_design.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_design.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_design_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_design.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_design.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_design.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_design_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_design_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_design|locale"><span class="entity_def" id="Incidence_Matrices.ordered_design|const"><span>ordered_design</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.design|locale"><span>design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_62443..62448">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_design.incidence_mat_non_empty_blocks|fact"><span class="entity_def" id="Incidence_Matrices.ordered_design.incidence_mat_non_empty_blocks|thm"><span>incidence_mat_non_empty_blocks</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_62552..62556">isbl</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_62443..62448"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_62668..62672">inbl</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>blocks_nempty</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_62738..62741">isx</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_62760..62764">vali</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>âº</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31514..31537"><span>valid_points_index_cons</span></a><span> </span><span>wf_invalid_point</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_62443..62448"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_40631..40656"><span>matrix_point_in_block_one</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_setI</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_43107..43116"><span>N_col_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_62738..62741"><span>isx</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_62760..62764"><span>vali</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_62552..62556"><span>isbl</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_62668..62672"><span>inbl</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_62443..62448"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39516..39529"><span>dim_vec_col_N</span></a><span> </span><span>of_nat_less_imp_less</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_design.all_cols_non_empty|fact"><span class="entity_def" id="Incidence_Matrices.ordered_design.all_cols_non_empty|thm"><span>all_cols_non_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>blocks_nempty</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_54819..54841"><span>non_empty_col_map_conv</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design_def|axiom"><span class="entity_def" id="offset_63219..63225">locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design|locale"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design|const"><span>ordered_simple_design</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_design|locale"><span>ordered_design</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|locale"><span>simple_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>â¬s</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.block_list_distinct|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.block_list_distinct|thm"><span class="entity_def" id="offset_63331..63350">block_list_distinct</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>block_mset_distinct</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.distinct_cols_N|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.distinct_cols_N|thm"><span class="entity_def" id="offset_63411..63426">distinct_cols_N</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_vec_of|const"><span>inc_vec_of</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_42175..42196"><span>inc_vec_eq_iff_blocks</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_42175..42196"><span>inc_vec_eq_iff_blocks</span></a><span> </span><span>inj_on_def</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>distinct_map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_cols_inc_vecs|fact"><span>inc_mat_of_cols_inc_vecs</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_63331..63350"><span>block_list_distinct</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>distinct_map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_cols_inc_vecs|fact"><span>inc_mat_of_cols_inc_vecs</span></a><span> </span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.simp_blocks_length_card|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.simp_blocks_length_card|thm"><span class="entity_def" id="offset_63743..63766">simp_blocks_length_card</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_63219..63225"><span>design_support_def</span></a><span> </span><span>simple_block_size_eq_card</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.blocks_index_inj_on|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.blocks_index_inj_on|thm"><span class="entity_def" id="offset_63869..63888">blocks_index_inj_on</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>inj_on_def</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_63743..63766"><span>simp_blocks_length_card</span></a><span> </span><span>card_distinct</span><span> </span><span>nth_eq_iff_index_eq</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_64030..64035">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.x_in_block_set_img|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.x_in_block_set_img|thm"><span class="entity_def" id="offset_64036..64054">x_in_block_set_img</span></span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_64030..64035"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>in_set_conv_nth</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.blocks_index_simp_bij_betw|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.blocks_index_simp_bij_betw|thm"><span>blocks_index_simp_bij_betw</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bij_betw</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_63869..63888"><span>blocks_index_inj_on</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_64036..64054"><span>x_in_block_set_img</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>bij_betw_def</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.blocks_index_simp_unique|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.blocks_index_simp_unique|thm"><span>blocks_index_simp_unique</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_63331..63350"><span>block_list_distinct</span></a><span> </span><span>nth_eq_iff_index_eq</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.lift_01_distinct_cols_N|fact"><span class="entity_def" id="Incidence_Matrices.ordered_simple_design.lift_01_distinct_cols_N|thm"><span>lift_01_distinct_cols_N</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#offset_24289..24314"><span>lift_01_mat_distinct_cols</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_63411..63426"><span>distinct_cols_N</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_proper_design|locale"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design|const"><span>ordered_proper_design</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_design|locale"><span>ordered_design</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|locale"><span>proper_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_proper_design.mat_is_proper|fact"><span class="entity_def" id="Incidence_Matrices.ordered_proper_design.mat_is_proper|thm"><span>mat_is_proper</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.proper_inc_mat|const"><span>proper_inc_mat</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>design_blocks_nempty</span><span> </span><span>v_non_zero</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.proper_inc_mat_def|fact"><span>proper_inc_mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep|locale"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep|const"><span>ordered_constant_rep</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_proper_design|locale"><span>ordered_proper_design</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.constant_rep_design|locale"><span>constant_rep_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ð</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.incidence_mat_rep_num|fact"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.incidence_mat_rep_num|thm"><span class="entity_def" id="offset_65074..65095">incidence_mat_rep_num</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_49297..49314"><span>mat_rep_num_N_row</span></a><span> </span><span>rep_number</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31430..31448"><span>valid_points_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.incidence_mat_rep_num_sum|fact"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.incidence_mat_rep_num_sum|thm"><span class="entity_def" id="offset_65199..65224">incidence_mat_rep_num_sum</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65074..65095"><span>incidence_mat_rep_num</span></a><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#offset_49297..49314"><span>mat_rep_num_N_row</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_49861..49882"><span>point_rep_mat_row_sum</span></a><span class="main"><span>)</span></span><span>  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_65349..65354">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.transpose_N_mult_diag|fact"><span class="entity_def" id="Incidence_Matrices.ordered_constant_rep.transpose_N_mult_diag|thm"><span class="entity_def" id="offset_65355..65376">transpose_N_mult_diag</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_65471..65475">unsq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65349..65354"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_40472..40493"><span>matrix_elems_one_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65349..65354"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65349..65354"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.transpose_mat_mult_entries|fact"><span>transpose_mat_mult_entries</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65349..65354"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>power2_eq_square</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>sum.cong</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65471..65475"><span>unsq</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65349..65354"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>dim_row_is_v</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65199..65224"><span>incidence_mat_rep_num_sum</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65349..65354"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_block_design_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_block_design_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_block_design_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_block_design|locale"><span class="entity_def" id="Incidence_Matrices.ordered_block_design|const"><span>ordered_block_design</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_proper_design|locale"><span>ordered_proper_design</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.block_design|locale"><span>block_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ð</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span> 

</span><span class="comment1"><span>(</span><span>*</span><span> Every col has k ones </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_block_design.incidence_mat_block_size|fact"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.incidence_mat_block_size|thm"><span class="entity_def" id="offset_66379..66403">incidence_mat_block_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50026..50046"><span>mat_block_size_N_col</span></a><span> </span><span>uniform</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_block_design.incidence_mat_block_size_sum|fact"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.incidence_mat_block_size_sum|thm"><span>incidence_mat_block_size_sum</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_66379..66403"><span>incidence_mat_block_size</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50804..50826"><span>block_size_mat_rep_sum</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_block_design.ones_mult_incidence_mat_k_index|fact"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.ones_mult_incidence_mat_k_index|thm"><span class="entity_def" id="offset_66654..66685">ones_mult_incidence_mat_k_index</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_52622..52651"><span>ones_incidence_mat_block_size</span></a><span> </span><span>uniform</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_66379..66403"><span>incidence_mat_block_size</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_block_design.ones_mult_incidence_mat_k|fact"><span class="entity_def" id="Incidence_Matrices.ordered_block_design.ones_mult_incidence_mat_k|thm"><span>ones_mult_incidence_mat_k</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span>ð»</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_66654..66685"><span>ones_mult_incidence_mat_k_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>dim_col_is_b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design|locale"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design|const"><span>ordered_incomplete_design</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_block_design|locale"><span>ordered_block_design</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.incomplete_design|locale"><span>incomplete_design</span></a><span> </span><span class="quoted"><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ð</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design.incidence_mat_incomplete|fact"><span class="entity_def" id="Incidence_Matrices.ordered_incomplete_design.incidence_mat_incomplete|thm"><span>incidence_mat_incomplete</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31782..31800"><span>valid_blocks_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_48669..48689"><span>incomplete_block_col</span></a><span> </span><span>incomplete_imp_incomp_block</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance|locale"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance|const"><span>ordered_t_wise_balance</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_proper_design|locale"><span>ordered_proper_design</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.t_wise_balance|locale"><span>t_wise_balance</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î<span class="hidden">â©</span><sub>t</sub></span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Î<span class="hidden">â©</span><sub>t</sub></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_67370..67375">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance.incidence_mat_des_index|fact"><span class="entity_def" id="Incidence_Matrices.ordered_t_wise_balance.incidence_mat_des_index|thm"><span class="entity_def" id="offset_67376..67399">incidence_mat_des_index</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î<span class="hidden">â©</span><sub>t</sub></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_67500..67504">card</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_67370..67375"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30746..30765"><span>points_indexing_inj</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>card_image</span><span> </span><span>ex_nat_less_eq</span><span> </span><span>not_le</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_67370..67375"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>image_subset_iff</span><span> </span><span>subsetD</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31430..31448"><span>valid_points_index</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(!)</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î<span class="hidden">â©</span><sub>t</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>balanced</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_67370..67375"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_67500..67504"><span>card</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_50981..51000"><span>mat_point_index_rep</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_67370..67375"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>lessThan_atLeast0</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance|locale"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance|const"><span>ordered_pairwise_balance</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_t_wise_balance|locale"><span>ordered_t_wise_balance</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="quoted"><span class="numeral"><span>2</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|locale"><span>pairwise_balance</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Î</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_68086..68091">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.incidence_mat_des_two_index|fact"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.incidence_mat_des_two_index|thm"><span class="entity_def" id="offset_68092..68119">incidence_mat_des_two_index</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_67376..67399"><span>incidence_mat_des_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_52315..52338"><span>incidence_mat_two_index</span></a><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68086..68091"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68086..68091"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68086..68091"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28952..28960"><span>distinct</span></a><span> </span><span>nth_eq_iff_index_eq</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>points_list_length</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_68426..68430">pair</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>card_2_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68086..68091"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31430..31448"><span>valid_points_index</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68426..68430"><span>pair</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>balanced</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_52315..52338"><span>incidence_mat_two_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68086..68091"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_68720..68725">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.transpose_N_mult_off_diag|fact"><span class="entity_def" id="Incidence_Matrices.ordered_pairwise_balance.transpose_N_mult_off_diag|thm"><span class="entity_def" id="offset_68726..68751">transpose_N_mult_off_diag</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_68845..68848">rev</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68720..68725"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_40472..40493"><span>matrix_elems_one_zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_69003..69008">split</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> 
      </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_69149..69153">zero</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_69262..69266">djnt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â©</span></span><span> 
    </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68845..68848"><span>rev</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_69405..69409">fin1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_69484..69488">fin2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68720..68725"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68720..68725"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.transpose_mat_mult_entries|fact"><span>transpose_mat_mult_entries</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> 
    </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_69003..69008"><span>split</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_69405..69409"><span>fin1</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_69484..69488"><span>fin2</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_69262..69266"><span>djnt</span></a><span> </span><span>sum.union_disjoint</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_69149..69153"><span>zero</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>{</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68720..68725"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index_two_alt|fact"><span>mat_point_index_two_alt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68092..68119"><span>incidence_mat_des_two_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68720..68725"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|locale"><span>pairwise_balance</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_70474..70479">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.pairwise_balance.ordered_pbdI|fact"><span class="entity_def" id="Incidence_Matrices.pairwise_balance.ordered_pbdI|thm"><span>ordered_pbdI</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>â¬</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>ð±</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_pairwise_balance|const"><span>ordered_pairwise_balance</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword1"><span class="free"><span>Î</span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> ois</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_sysII|fact"><span>ordered_incidence_sysII</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_70474..70479"><span>assms</span></a><span> </span><span>finite_incidence_system_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>b_non_zero</span><span> </span><span>blocks_nempty</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_70474..70479"><span>assms</span></a><span> </span><span>t_lt_order</span><span> </span><span>balanced</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance|locale"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance|const"><span>ordered_regular_pairwise_balance</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_pairwise_balance|locale"><span>ordered_pairwise_balance</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>+</span></span><span> 
  </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.regular_pairwise_balance|locale"><span>regular_pairwise_balance</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ð</span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_regular_pairwise_balance|locale"><span>ordered_regular_pairwise_balance</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_constant_rep|locale"><span>ordered_constant_rep</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_regular_pairwise_balance|locale"><span>ordered_regular_pairwise_balance</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Stinson's Theorem 1.15. Stinson \cite{stinsonCombinatorialDesignsConstructions2004} 
</span><span>gives an iff condition for incidence matrices of regular pairwise 
</span><span>balanced designs. The other direction is proven in the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix|const"><span>zero_one_matrix</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> context</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance.rpbd_incidence_matrix_cond|fact"><span class="entity_def" id="Incidence_Matrices.ordered_regular_pairwise_balance.rpbd_incidence_matrix_cond|thm"><span>rpbd_incidence_matrix_cond</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_71520..71523">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_71590..71593">jlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_71812..71817">split</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71520..71523"><span>ilt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71590..71593"><span>jlt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_71972..71975">lhs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71520..71523"><span>ilt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71590..71593"><span>jlt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_72148..72152">True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_72167..72170">rhs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71520..71523"><span>ilt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_72148..72152"><span>True</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71590..71593"><span>jlt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>reg_index_lt_rep</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>nat_diff_split</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71972..71975"><span>lhs</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71812..71817"><span>split</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_72167..72170"><span>rhs</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_72148..72152"><span>True</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_65355..65376"><span>transpose_N_mult_diag</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71520..71523"><span>ilt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71590..71593"><span>jlt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_72581..72586">False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71520..71523"><span>ilt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71590..71593"><span>jlt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71520..71523"><span>ilt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71590..71593"><span>jlt</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71972..71975"><span>lhs</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_68726..68751"><span>transpose_N_mult_off_diag</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71520..71523"><span>ilt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_71590..71593"><span>jlt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_72581..72586"><span>False</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39935..39955"><span>transpose_N_mult_dim</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39935..39955"><span>transpose_N_mult_dim</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_bibd.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_bibd.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_bibd_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_bibd.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_bibd.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_bibd.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_bibd_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_bibd_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_bibd|locale"><span class="entity_def" id="Incidence_Matrices.ordered_bibd|const"><span>ordered_bibd</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_proper_design|locale"><span>ordered_proper_design</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/BIBD.html#BIBD.bibd|locale"><span>bibd</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Î</span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_bibd|locale"><span>ordered_bibd</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incomplete_design|locale"><span>ordered_incomplete_design</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_bibd|locale"><span>ordered_bibd</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_constant_rep|locale"><span>ordered_constant_rep</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="quoted"><span>ð</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_bibd|locale"><span>ordered_bibd</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_pairwise_balance|locale"><span>ordered_pairwise_balance</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd|locale"><span class="entity_def" id="Incidence_Matrices.ordered_sym_bibd|const"><span>ordered_sym_bibd</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_bibd|locale"><span>ordered_bibd</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../Design_Theory/BIBD.html#BIBD.symmetric_bibd|locale"><span>symmetric_bibd</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Î</span></span><span>


</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_sym_bibd|locale"><span>ordered_sym_bibd</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_simple_design|locale"><span>ordered_simple_design</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design.axioms|fact"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design.intro|fact"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design_def|fact"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design.intro|thm"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design_def|thm"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design|locale"><span class="entity_def" id="Incidence_Matrices.ordered_const_intersect_design|const"><span>ordered_const_intersect_design</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_proper_design|locale"><span>ordered_proper_design</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.const_intersect_design|locale"><span>const_intersect_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>ð</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="free"><span>ð</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.axioms|fact"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.intro|fact"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design_def|fact"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.intro|thm"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design_def|thm"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design|locale"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design|const"><span>simp_ordered_const_intersect_design</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_const_intersect_design|locale"><span>ordered_const_intersect_design</span></a><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_simple_design|locale"><span>ordered_simple_design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_73862..73867">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.max_one_block_size_inter|fact"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.max_one_block_size_inter|thm"><span class="entity_def" id="offset_73868..73892">max_one_block_size_inter</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>bl</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl2</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_74025..74027">sd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|const"><span>simple_design</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>simple_design_axioms</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_74097..74102">bl2in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_73862..73867"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>in_diffD</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_74161..74165">blin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_73862..73867"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_73862..73867"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>slt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>simple_const_inter_iff</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_74025..74027"><span>sd</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_73862..73867"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>count_empty</span><span> </span><span>count_eq_zero_iff</span><span> </span><span>less_one</span><span> </span><span>nat_less_le</span><span> </span><span>size_eq_0_iff_empty</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>bl</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_74161..74165"><span>blin</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>add_mset_eq_singleton_iff</span><span> </span><span>count_eq_zero_iff</span><span> </span><span>count_filter_mset</span><span> 
        </span><span>filter_mset_add_mset</span><span> </span><span>insert_DiffM</span><span> </span><span>size_1_singleton_mset</span><span> </span><span>size_eq_0_iff_empty</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_73862..73867"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.filter_mset_empty_conv|fact"><span>filter_mset_empty_conv</span></a><span> </span><span>size_eq_0_iff_empty</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>inter_num_le_block_size</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_73862..73867"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_74097..74102"><span>bl2in</span></a><span> </span><span>nat_less_le</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_74864..74869">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.block_size_inter_num_cases|fact"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.block_size_inter_num_cases|thm"><span>block_size_inter_num_cases</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl'</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>bl</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_75050..75054">True</span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl'</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>bl</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_73868..73892"><span>max_one_block_size_inter</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75050..75054"><span>True</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_74864..74869"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75050..75054"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_74864..74869"><span>assms</span></a><span> </span><span>inter_num_le_block_size</span><span> </span><span>nat_less_le</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75340..75345">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.indexed_const_intersect|fact"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.indexed_const_intersect|thm"><span class="entity_def" id="offset_75346..75369">indexed_const_intersect</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl2</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34524..34554"><span>obtains_two_diff_block_indexes</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75340..75345"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>const_intersect</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75688..75693">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.const_intersect_block_size_diff|fact"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.const_intersect_block_size_diff|thm"><span>const_intersect_block_size_diff</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>â¬</span></a><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>bl1</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75688..75693"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75688..75693"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75688..75693"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_34524..34554"><span>obtains_two_diff_block_indexes</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>bl2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_73868..73892"><span>max_one_block_size_inter</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75688..75693"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75688..75693"><span>assms</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl2</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_76178..76183">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.scalar_prod_inc_vec_const_inter|fact"><span class="entity_def" id="Incidence_Matrices.simp_ordered_const_intersect_design.scalar_prod_inc_vec_const_inter|thm"><span>scalar_prod_inc_vec_const_inter</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>N</span></a><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_55835..55864"><span>scalar_prod_inc_vec_inter_num</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_75346..75369"><span>indexed_const_intersect</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_76178..76183"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Zero One Matrix Incidence System Existence</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We prove 0-1 matrices with certain properties imply the existence of an incidence system
</span><span>with particular properties. This leads to Stinson's theorem in the other direction \cite{stinsonCombinatorialDesignsConstructions2004}</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix|locale"><span>zero_one_matrix</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_is_ordered_incidence_sys|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_is_ordered_incidence_sys|thm"><span class="entity_def" id="offset_76704..76732">mat_is_ordered_incidence_sys</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_18295..18314"><span>map_col_to_block_wf</span></a><span> </span><span>atLeastLessThan_upt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_76906..76920">interpretation</span></span></span><span> mat_ord_inc_sys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_76704..76732"><span>mat_is_ordered_incidence_sys</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_ord_inc_sys_N|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.mat_ord_inc_sys_N|thm"><span class="entity_def" id="offset_77072..77089">mat_ord_inc_sys_N</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_76906..76920"><span>mat_ord_inc_sys.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_def|fact"><span>inc_mat_of_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15361..15382"><span>map_col_to_block_elem</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_simp|fact"><span>lift_01_mat_simp</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_23554..23575"><span>lift_mat_01_index_iff</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.zero_neq_one_class.of_zero_neq_one_def|fact"><span>of_zero_neq_one_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_77280..77285">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_mat_rep_num|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix.map_col_to_block_mat_rep_num|thm"><span class="entity_def" id="offset_77286..77314">map_col_to_block_mat_rep_num</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span>dim_row</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_22122..22142"><span>preserve_mat_rep_num</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_77072..77089"><span>mat_ord_inc_sys_N</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_77280..77285"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat_def|fact"><span>lift_01_mat_def</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.of_inj_on_01_hom.inj_on_01_hom_axioms|fact"><span>of_inj_on_01_hom.inj_on_01_hom_axioms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_76906..76920"><span>mat_ord_inc_sys.N</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_77072..77089"><span>mat_ord_inc_sys_N</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="keyword1"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_77280..77285"><span>assms</span></a><span> </span><span>atLeastLessThan_upt</span><span> </span><span>card_atLeastLessThan</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_76906..76920"><span>mat_ord_inc_sys.mat_rep_num_N_row</span></a><span> 
      </span><a class="entity_ref" href="Incidence_Matrices.html#offset_16595..16616"><span>mat_ord_inc_sys_point</span></a><span> </span><span>minus_nat.diff_0</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_16819..16845"><span>ordered_to_mset_col_blocks</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix_ring_1|locale"><span>zero_one_matrix_ring_1</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_78057..78062">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.transpose_cond_index_vals|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.transpose_cond_index_vals(2)|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_ring_1.transpose_cond_index_vals(1)|thm"><span class="entity_def" id="offset_78063..78088">transpose_cond_index_vals</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78057..78062"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.axioms|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.intro|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int_def|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.axioms|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.intro|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int_def|thm"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int|locale"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int|const"><span>zero_one_matrix_int</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix_ring_1|locale"><span>zero_one_matrix_ring_1</span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>mat</span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Some useful conditions on the transpose product for matrix system properties</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_78516..78521">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.transpose_cond_diag_r|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.transpose_cond_diag_r|thm"><span class="entity_def" id="offset_78522..78543">transpose_cond_diag_r</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_78677..78680">eqr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78516..78521"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_78742..78746">unsq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78516..78521"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78516..78521"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78516..78521"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>sum.cong</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78742..78746"><span>unsq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78516..78521"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>power2_eq_square</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78516..78521"><span>assms</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.transpose_mat_mult_entries|fact"><span>transpose_mat_mult_entries</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78677..78680"><span>eqr</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_sum_alt|fact"><span>mat_rep_num_sum_alt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78516..78521"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span>index_mult_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>of_nat_eq_iff</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_79542..79547">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.transpose_cond_non_diag|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.transpose_cond_non_diag|thm"><span class="entity_def" id="offset_79548..79571">transpose_cond_non_diag</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_79828..79831">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79542..79547"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79542..79547"><span>assms</span></a><span> </span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_79911..79914">rev</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
      </span><span class="main"><span>Â¬</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79542..79547"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_80080..80085">split</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> 
      </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_80254..80258">zero</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_80379..80383">djnt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â©</span></span><span> 
      </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79911..79914"><span>rev</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_80549..80553">fin1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_80638..80642">fin2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index_two_alt|fact"><span>mat_point_index_two_alt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79828..79831"><span>ilt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79542..79547"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_80254..80258"><span>zero</span></a><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> Odd behaviour if I use also have here </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> 
    </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>k'</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_80549..80553"><span>fin1</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_80638..80642"><span>fin2</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_80379..80383"><span>djnt</span></a><span> </span><span>sum.union_disjoint</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i2</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_80080..80085"><span>split</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79542..79547"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79542..79547"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.transpose_mat_mult_entries|fact"><span>transpose_mat_mult_entries</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79542..79547"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_81759..81764">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.trans_cond_implies_map_rep_num|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.trans_cond_implies_map_rep_num|thm"><span class="entity_def" id="offset_81765..81795">trans_cond_implies_map_rep_num</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> ois</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_76704..76732"><span>mat_is_ordered_incidence_sys</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_82108..82110">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_82123..82125">eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_82108..82110"><span>ois.â¬</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82108..82110"><span>ois.point_rep_mat_row_sum</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_81759..81764"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_25120..25138"><span>inc_mat_of_map_rev</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_81759..81764"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78063..78088"><span>transpose_cond_index_vals</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_81759..81764"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_mult_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_mult_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_transpose_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82123..82125"><span>eq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_78522..78543"><span>transpose_cond_diag_r</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_81759..81764"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>index_mult_mat</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_77286..77314"><span>map_col_to_block_mat_rep_num</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_82542..82547">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.trans_cond_implies_map_index|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.trans_cond_implies_map_index|thm"><span class="entity_def" id="offset_82548..82576">trans_cond_implies_map_index</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> ois</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_76704..76732"><span>mat_is_ordered_incidence_sys</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_82924..82926">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_82953..82957">i1in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_82979..82983">i2in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_83005..83009">psis</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>i2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_83031..83035">neqi</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="skolem"><span>i2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82542..82547"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82542..82547"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span>card_2_iff</span><span> </span><span>insert_subset</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_iff</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_83139..83143">cond</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82542..82547"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>ps</span></span><span>"</span></span></span><span>
     </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82924..82926"><span>ois.incidence_mat_two_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83005..83009"><span>psis</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82953..82957"><span>i1in</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82979..82983"><span>i2in</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83031..83035"><span>neqi</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_25120..25138"><span>inc_mat_of_map_rev</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83139..83143"><span>cond</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_79548..79571"><span>transpose_cond_non_diag</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>i1</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>i2</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82953..82957"><span>i1in</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82979..82983"><span>i2in</span></a><span> </span><span>index_mult_mat</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> 
       </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83031..83035"><span>neqi</span></a><span> </span><span>of_nat_eq_iff</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83005..83009"><span>psis</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Stinson Theorem 1.15 existence direction</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_83651..83656">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.rpbd_exists|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.rpbd_exists|thm"><span class="entity_def" id="offset_83657..83668">rpbd_exists</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>Min two points</span><span>âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>Min one block</span><span>âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>no empty blocks</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_regular_pairwise_balance|const"><span>ordered_regular_pairwise_balance</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> ois</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_76704..76732"><span>mat_is_ordered_incidence_sys</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_84143..84145">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> pdes</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_design|locale"><span>ordered_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83651..83656"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_19299..19312"><span>mat_is_design</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83651..83656"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_design_def|fact"><span>ordered_design_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84143..84145"><span>ois.ordered_incidence_system_axioms</span></a><span class="main"><span>)</span></span><span>  
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83651..83656"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_82548..82576"><span>trans_cond_implies_map_index</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_81765..81795"><span>trans_cond_implies_map_rep_num</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_84482..84487">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.vec_k_uniform_mat_block_size|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.vec_k_uniform_mat_block_size|thm"><span class="entity_def" id="offset_84488..84516">vec_k_uniform_mat_block_size</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec|const"><span>sum_vec</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84482..84487"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_13382..13389"><span>elems01</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_sum_alt|fact"><span>mat_block_size_sum_alt</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84482..84487"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.comm_monoid_add_class.sum_vec_def|fact"><span>sum_vec_def</span></a><span> </span><span>scalar_prod_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84482..84487"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84482..84487"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_84940..84945">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.vec_k_impl_uniform_block_size|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.vec_k_impl_uniform_block_size|thm"><span class="entity_def" id="offset_84946..84975">vec_k_impl_uniform_block_size</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_85153..85156">jlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_85178..85182">bleq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84940..84945"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_16205..16237"><span>obtain_block_index_map_block_set</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_15593..15614"><span>map_col_to_block_size</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84488..84516"><span>vec_k_uniform_mat_block_size</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84940..84945"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_85178..85182"><span>bleq</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_85153..85156"><span>jlt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85474..85479">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.bibd_exists|fact"><span class="entity_def" id="Incidence_Matrices.zero_one_matrix_int.bibd_exists|thm"><span>bibd_exists</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>Min one block</span><span>âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_contains|const"><span>â$</span></a></span><span> </span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>no empty blocks</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_mat|const"><span>J<span class="hidden">â©</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Groebner_Bases/Macaulay_Matrix.html#Macaulay_Matrix.mult_vec_mat|const"><span><span class="hidden">â©</span><sub>v</sub>*</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.all_ones_vec|const"><span>u<span class="hidden">â©</span><sub>v</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_bibd|const"><span>ordered_bibd</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> ipbd</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_regular_pairwise_balance|locale"><span>ordered_regular_pairwise_balance</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.map_col_to_block|const"><span>map_col_to_block</span></a><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_83657..83668"><span>rpbd_exists</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_85474..85479"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_84946..84975"><span>vec_k_impl_uniform_block_size</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_85474..85479"><span>assms</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Isomorphisms and Incidence Matrices</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>If two incidence systems have the same incidence matrix, they are isomorphic. Similarly
</span><span>if two incidence systems are isomorphic there exists an ordering such that they have the same
</span><span>incidence matrix</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.axioms|fact"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.intro|fact"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys_def|fact"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.axioms(2)|thm"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.axioms(1)|thm"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.intro|thm"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys_def|thm"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.two_ordered_sys|locale"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys|const"><span>two_ordered_sys</span></span></span><span> </span><span class="main"><span>=</span></span><span> D1</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span> </span><span class="main"><span>+</span></span><span> D2</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s'</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s'</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span>"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span>"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>ð±s'</span></span><span>"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>â¬s'</span></span><span>"</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_86542..86547">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.equal_inc_mat_isomorphism|fact"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.equal_inc_mat_isomorphism|thm"><span class="entity_def" id="offset_86548..86573">equal_inc_mat_isomorphism</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D1.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D2.N</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Isomorphisms.html#Design_Isomorphisms.incidence_system_isomorphism|const"><span>incidence_system_isomorphism</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>D1.ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>D1.â¬</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>D2.ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>D2.â¬</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bij_betw</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>D1.ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>D2.ð±</span></a><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_86802..86806">comp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>comp_def</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_86932..86935">leq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s'</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86542..86547"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>D1.dim_row_is_v</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>D1.points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>D2.dim_row_is_v</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>D2.points_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_87076..87080">bij1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bij_betw</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>ð±s'</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86932..86935"><span>leq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>bij_betw_nth</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28952..28960"><span>D2.distinct</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bij_betw</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_28952..28960"><span>D1.distinct</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.bij_betw_index|fact"><span>bij_betw_index</span></a><span> </span><span>lessThan_atLeast0</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>bij_betw_trans</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86802..86806"><span>comp</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_87076..87080"><span>bij1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_87403..87406">len</span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>length_map</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86542..86547"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>D1.dim_col_is_b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_87540..87546">mat_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D1.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D2.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86542..86547"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_87622..87627">vslen</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86542..86547"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>D1.dim_row_is_v</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>D1.points_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39289..39301"><span>D2.dim_row_is_v</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31196..31214"><span>D2.points_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s'</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>â¬s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_87885..87886">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s'</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>D1.blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>D1.dim_col_is_b</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>D2.blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>D2.dim_col_is_b</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86542..86547"><span>assms</span></a><span> </span><span>nth_map</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D1.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_47498..47516"><span>D1.block_mat_cond_rev</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_87885..87886"><span>a</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86542..86547"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>D1.blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>D1.dim_col_is_b</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_31315..31333"><span>D2.blocks_list_length</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_39363..39375"><span>D2.dim_col_is_b</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D2.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_87622..87627"><span>vslen</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_87540..87546"><span>mat_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_47338..47357"><span>D2.block_mat_cond_rep'</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_87885..87886"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>â¬s'</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_87403..87406"><span>len</span></a><span> </span><span>nth_equalityI</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s'</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ð±s'</span></span><span> </span><span class="main"><span>!</span></span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>D1.â¬</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>D2.â¬</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mset_map</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.equal_inc_mat_isomorphism_ex|fact"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.equal_inc_mat_isomorphism_ex|thm"><span>equal_inc_mat_isomorphism_ex</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D1.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D2.N</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>Ï</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Isomorphisms.html#Design_Isomorphisms.incidence_system_isomorphism|const"><span>incidence_system_isomorphism</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>D1.ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>D1.â¬</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>D2.ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>D2.â¬</span></a><span> </span><span class="bound"><span>Ï</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86548..86573"><span>equal_inc_mat_isomorphism</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_89244..89249">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.equal_inc_mat_isomorphism_obtain|fact"><span class="entity_def" id="Incidence_Matrices.two_ordered_sys.equal_inc_mat_isomorphism_obtain|thm"><span>equal_inc_mat_isomorphism_obtain</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D1.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_38751..38752"><span>D2.N</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>Ï</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Isomorphisms.html#Design_Isomorphisms.incidence_system_isomorphism|const"><span>incidence_system_isomorphism</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>D1.ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>D1.â¬</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30314..30315"><span>D2.ð±</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_30340..30341"><span>D2.â¬</span></a><span> </span><span class="free"><span>Ï</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_86548..86573"><span>equal_inc_mat_isomorphism</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89244..89249"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Isomorphisms.html#Design_Isomorphisms.incidence_system_isomorphism|locale"><span>incidence_system_isomorphism</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_89479..89484">lemma</span></span></span><span> </span><span class="entity_def" id="Incidence_Matrices.incidence_system_isomorphism.exists_eq_inc_mats|fact"><span class="entity_def" id="Incidence_Matrices.incidence_system_isomorphism.exists_eq_inc_mats|thm"><span>exists_eq_inc_mats</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>ð±</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>ð±'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>ð±</span></span><span> </span><span class="free"><span>â¬</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>ð±'</span></span><span> </span><span class="free"><span>â¬'</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Vs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_89644..89648">vsis</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="free"><span>ð±</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89479..89484"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>all_not_in_conv</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set_empty_iff|fact"><span>permutations_of_set_empty_iff</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Bs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_89771..89775">bsis</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="free"><span>â¬</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>all_not_in_conv</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset_not_empty|fact"><span>permutations_of_multiset_not_empty</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_89885..89888">inj</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="keyword1"><span class="free"><span>Ï</span></span></span><span> </span><span class="free"><span>ð±</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>bij</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>bij_betw_imp_inj_on</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_89965..89970">mapvs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map</span><span> </span><span class="keyword1"><span class="free"><span>Ï</span></span></span><span> </span><span class="skolem"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="free"><span>ð±'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set_image_inj|fact"><span>permutations_of_set_image_inj</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>Vs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_set|const"><span>permutations_of_set</span></a><span> </span><span class="free"><span>ð±</span></span><span>âº</span></span></span><span> </span><span>iso_points_map</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span class="keyword1"><span class="free"><span>Ï</span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>â¬</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="keyword1"><span class="free"><span>Ï</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="free"><span>â¬</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>block_img</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset_image|fact"><span>permutations_of_multiset_image</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_90280..90285">mapbs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="keyword1"><span class="free"><span>Ï</span></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>Bs</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_multiset|const"><span>permutations_of_multiset</span></a><span> </span><span class="free"><span>â¬'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89771..89775"><span>bsis</span></a><span> </span><span>block_img</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_90367..90373">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>ring_1</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="skolem"><span>Vs</span></span><span> </span><span class="skolem"><span>Bs</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></a><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="free"><span>ð±</span></span><span> </span><span class="free"><span>â¬</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_90367..90373"><span>N_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89771..89775"><span>bsis</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix_def|fact"><span>is_incidence_matrix_def</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89644..89648"><span>vsis</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="skolem"><span>Bs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="skolem"><span>Vs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89771..89775"><span>bsis</span></a><span> </span><span>in_multiset_in_set</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system.wf_list|fact"><span>ordered_incidence_system.wf_list</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_59399..59416"><span>source.alt_ordering_sysI</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89644..89648"><span>vsis</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="keyword1"><span class="free"><span>Ï</span></span></span><span> </span><span class="skolem"><span>Vs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(`)</span></span><span> </span><span class="keyword1"><span class="free"><span>Ï</span></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>Bs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of_bij_betw|fact"><span>inc_mat_of_bij_betw</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89885..89888"><span>inj</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_90367..90373"><span>N_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Combinatorics/Multiset_Permutations.html#Multiset_Permutations.permutations_of_setD|fact"><span>permutations_of_setD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89644..89648"><span>vsis</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></a><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="free"><span>ð±'</span></span><span> </span><span class="free"><span>â¬'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_90280..90285"><span>mapbs</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89965..89970"><span>mapvs</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix_def|fact"><span>is_incidence_matrix_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.is_incidence_matrix|const"><span>is_incidence_matrix</span></a><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="free"><span>ð±</span></span><span> </span><span class="free"><span>â¬</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#offset_89479..89484"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>dy>
<div class="head">
<h1>Theory Dual_Systems</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Dual_Systems.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Dual Systems</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The concept of a dual incidence system \cite{colbournHandbookCombinatorialDesigns2007}
</span><span> is an important property in design theory. It enables us to reason on the existence of several 
</span><span>different types of design constructs through dual properties \cite{stinsonCombinatorialDesignsConstructions2004}</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Dual_Systems</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Incidence_Matrices.html"><span>Incidence_Matrices</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Dual Blocks</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A dual design of $(\mathcal{V}, \mathcal{B})$, is the design where each block in $\mathcal{B}$
</span><span>represents a point $x$, and a block in a dual design is a set of blocks which $x$ is in from the original design. 
</span><span>It is important to note that if a block repeats in $\mathcal{B}$, each instance of the block is a distinct point. 
</span><span>As such the definition below uses each block's list index as its identifier. The list of points would simply be the 
</span><span>indices $0..&lt;$length $Bs$</span><span> </span><span>âº</span></span></span><span>   

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Dual_Systems.dual_blocks_def|fact"><span class="entity_def" id="Dual_Systems.dual_blocks_def|thm"><span class="entity_def" id="Dual_Systems.dual_blocks_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Dual_Systems.dual_blocks|const"><span>dual_blocks</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span>set</span><span> </span><span>multiset</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>dual_blocks</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ð±</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>â¬s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>â¬s</span></span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>â¬s</span></span></span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ð±</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.dual_blocks_wf|fact"><span class="entity_def" id="Dual_Systems.dual_blocks_wf|thm"><span>dual_blocks_wf</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>Bs</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>Bs</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks_def|fact"><span>dual_blocks_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ordered_def|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ordered_def|thm"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ordered_def_raw|axiom"><span class="entity_def" id="offset_1250..1260">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ordered.cong|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ordered.cong|thm"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ordered|const"><span class="entity_def" id="offset_1261..1280">dual_blocks_ordered</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span>set</span><span> </span><span>list</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>â¬s*</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>dual_blocks_ordered</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ordered_eq|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ordered_eq|thm"><span class="entity_def" id="offset_1392..1414">dual_blocks_ordered_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>distinct</span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks_def|fact"><span>dual_blocks_def</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1250..1260"><span>dual_blocks_ordered_def</span></a><span> </span><span>mset_set_set</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_len|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_len|thm"><span class="entity_def" id="offset_1538..1553">dual_blocks_len</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ð±s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1250..1260"><span>dual_blocks_ordered_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A dual system is an incidence system</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1667..1676">sublocale</span></span></span><span> dual_sys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.finite_incidence_system|locale"><span>finite_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks_wf|fact"><span>dual_blocks_wf</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_is_ordered_inc_sys|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_is_ordered_inc_sys|thm"><span class="entity_def" id="offset_1804..1827">dual_is_ordered_inc_sys</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_sys_orderedI|fact"><span>inc_sys_orderedI</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_upt</span><span> </span><span>distinct_upt</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1667..1676"><span>dual_sys.incidence_system_axioms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2004..2018">interpretation</span></span></span><span> ordered_dual_sys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1804..1827"><span>dual_is_ordered_inc_sys</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Basic Dual Properties</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.ord_dual_blocks_b|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.ord_dual_blocks_b|thm"><span class="entity_def" id="offset_2169..2186">ord_dual_blocks_b</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.ð»</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>points_list_length</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_b|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_b|thm"><span class="entity_def" id="offset_2279..2292">dual_blocks_b</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_1667..1676"><span>dual_sys.ð»</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>points_list_length</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_v|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_v|thm"><span class="entity_def" id="offset_2402..2415">dual_blocks_v</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_1667..1676"><span>dual_sys.ð</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.ord_dual_blocks_v|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.ord_dual_blocks_v|thm"><span class="entity_def" id="offset_2456..2473">ord_dual_blocks_v</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.ð</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_point_block|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_point_block|thm"><span class="entity_def" id="offset_2522..2538">dual_point_block</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1250..1260"><span>dual_blocks_ordered_def</span></a><span> </span><span>points_list_length</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_incidence_iff|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_incidence_iff|thm"><span class="entity_def" id="offset_2666..2684">dual_incidence_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2522..2538"><span>dual_point_block</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_incidence_iff2|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_incidence_iff2|thm"><span class="entity_def" id="offset_2812..2831">dual_incidence_iff2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>  </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2666..2684"><span>dual_incidence_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_point_exists|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_point_exists|thm"><span>dual_blocks_point_exists</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks_def|fact"><span>dual_blocks_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ne_index_ne|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_ne_index_ne|thm"><span>dual_blocks_ne_index_ne</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_list_index_img|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_list_index_img|thm"><span>dual_blocks_list_index_img</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>mset</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>lessThan_atLeast0</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.blocks_list_length</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.blocks_mset_image</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3401..3406">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_elem_iff|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_elem_iff|thm"><span>dual_blocks_elem_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>iffI</span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3401..3406"><span>assms</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.ordered_incidence_system.dual_point_block|fact"><span>ordered_incidence_system.dual_point_block</span></a><span> </span><span>ordered_incidence_system_axioms</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3401..3406"><span>assms</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1250..1260"><span>dual_blocks_ordered_def</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2522..2538"><span>dual_point_block</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3401..3406"><span>assms</span></a><span> </span><span>blocks_list_length</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2666..2684"><span>dual_incidence_iff</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The incidence matrix of the dual of a design is just the transpose</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_incidence_mat_eq_trans|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_incidence_mat_eq_trans|thm"><span class="entity_def" id="offset_3973..4000">dual_incidence_mat_eq_trans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="entity_def" id="offset_4058..4062">dimr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2402..2415"><span>dual_blocks_v</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span>dimc</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2169..2186"><span>ord_dual_blocks_b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_4354..4357">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span>"</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_4384..4387">jlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>ilt2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4058..4062"><span>dimr</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>blocks_list_length</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2456..2473"><span>ord_dual_blocks_v</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4354..4357"><span>ilt</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.dim_row_is_v</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4562..4566">ilt3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4593..4597">jlt2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4384..4387"><span>jlt</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dim_row_is_v</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4058..4062"><span>dimr</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4354..4357"><span>ilt</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4384..4387"><span>jlt</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_elems_one_zero|fact"><span>inc_matrix_elems_one_zero</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span>  </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_row|fact"><span>inc_mat_dim_row</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_matrix_point_in_block_iff|fact"><span>inc_matrix_point_in_block_iff</span></a><span> </span><span>index_transpose_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4562..4566"><span>ilt3</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4593..4597"><span>jlt2</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2812..2831"><span>dual_incidence_iff2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4562..4566"><span>ilt3</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_4593..4597"><span>jlt2</span></a><span> </span><span>dim_row_is_v</span><span> </span><span>dim_col_is_b</span><span> </span><span>N_trans_index_val</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_incidence_mat_eq_trans_rev|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_incidence_mat_eq_trans_rev|thm"><span class="entity_def" id="offset_5189..5220">dual_incidence_mat_eq_trans_rev</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span class="main"><span>)</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>N</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3973..4000"><span>dual_incidence_mat_eq_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Incidence System Dual Properties</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Many common design properties have a dual in the dual design which enables extensive reasoning
</span><span>Using incidence matrices and the transpose property these are easy to prove. We leave examples of 
</span><span>counting proofs (commented out), to demonstrate how incidence matrices can significantly simplify 
</span><span>reasoning</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5655..5660">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_nempty|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_nempty|thm"><span class="entity_def" id="offset_5661..5679">dual_blocks_nempty</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span>ð±</span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5655..5660"><span>assms</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks_def|fact"><span>dual_blocks_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span>ð±</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_5944..5949">blval</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>bl'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>bl'</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>â¬</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_6044..6047">xin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>bl'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5655..5660"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>point_in_block_rep_min_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>bl'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>valid_blocks_index_cons</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_6044..6047"><span>xin</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5944..5949"><span>blval</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_size_is_rep|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_size_is_rep|thm"><span class="entity_def" id="offset_6306..6329">dual_blocks_size_is_rep</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3973..4000"><span>dual_incidence_mat_eq_trans</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.trans_mat_rep_block_size_sym|fact"><span>trans_mat_rep_block_size_sym</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1804..1827"><span>dual_is_ordered_inc_sys</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_row|fact"><span>inc_mat_dim_row</span></a><span> </span><span>mat_rep_num_N_row</span><span> 
      </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system.mat_block_size_N_col|fact"><span>ordered_incidence_system.mat_block_size_N_col</span></a><span> </span><span>points_list_length</span><span> </span><span>size_mset</span><span class="main"><span>)</span></span><span> 

</span><span class="comment1"><span>(</span><span>*</span><span> Old Counting proof 
proof -
  have 1: "card (â¬s* ! j) = card {y . y &lt; length â¬s â§ (ð±s ! j) â â¬s ! y}"
    using assms dual_blocks_len dual_point_block points_list_length by force
  also have 2: "... = card {y â {0..&lt;length â¬s} . (ð±s ! j) â â¬s ! y}" by simp
  also have "... = size (mset_set {y â {0..&lt;length â¬s} . (ð±s ! j) â â¬s ! y})" by simp
  also have "... = size {# y â# mset_set {0..&lt; length â¬s} . (ð±s ! j) â â¬s ! y #}" 
    using filter_mset_mset_set by simp 
  finally have "card (â¬s* ! j) = size {# bl â# â¬ . (ð±s ! j) â bl #}"
    by (metis 1 2 filter_size_blocks_eq_card_indexes lessThan_atLeast0 size_mset) 
  thus ?thesis by (simp add: point_replication_number_def)
qed
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7309..7314">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_size_is_rep_obtain|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_size_is_rep_obtain|thm"><span class="entity_def" id="offset_7315..7345">dual_blocks_size_is_rep_obtain</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_7458..7462">jlt1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7485..7489">bleq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>bl</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7309..7314"><span>assms</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_mset_conv_nth|fact"><span>in_mset_conv_nth</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7580..7583">jlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><span>points_list_length</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?x</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7675..7678">xin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7580..7583"><span>jlt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>valid_points_index</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="var"><span>?x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_6306..6329"><span>dual_blocks_size_is_rep</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7458..7462"><span>jlt1</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7485..7489"><span>bleq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7675..7678"><span>xin</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7309..7314"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7858..7863">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_rep_is_size|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_rep_is_size|thm"><span class="entity_def" id="offset_7864..7887">dual_blocks_rep_is_size</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7858..7863"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.mat_rep_num_N_row</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7858..7863"><span>assms</span></a><span> </span><span>length_upt</span><span> </span><span>minus_nat.diff_0</span><span> 
      </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.points_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span class="main"><span>)</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3973..4000"><span>dual_incidence_mat_eq_trans</span></a><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.trans_mat_rep_block_size_sym|fact"><span>trans_mat_rep_block_size_sym</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7858..7863"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span> </span><span>index_transpose_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5189..5220"><span>dual_incidence_mat_eq_trans_rev</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7858..7863"><span>assms</span></a><span> </span><span>blocks_list_length</span><span> </span><span>mat_block_size_N_col</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Counting Proof
proof -
  have "(mset â¬s* ) rep i = size {# bl â# (mset â¬s* ) . i â bl #}" 
    by (simp add: point_replication_number_def)
  also have 1: "... = size {# bl â# {# {y . y &lt; length â¬s â§ x â â¬s ! y} . x â# (mset_set ð±)#} . i â bl #}" 
    using dual_blocks_ordered_eq dual_blocks_def by metis 
  also have "... = size (filter_mset (Î» bl . i â bl) 
      (image_mset (Î» x . {y . y &lt; length â¬s â§ x â â¬s ! y}) (mset_set ð±)))" by simp
  finally have "(mset â¬s* ) rep i = size (image_mset (Î» x . {y . y &lt; length â¬s â§ x â â¬s ! y}) 
      (filter_mset (Î» bl . i â {y . y &lt; length â¬s â§ bl â â¬s ! y}) (mset_set ð±)))"
    using filter_mset_image_mset by (metis 1 ordered_dual_sys.point_rep_number_alt_def) 
  then have "(mset â¬s* ) rep i = size (filter_mset (Î» bl . i â {y . y &lt; length â¬s â§ bl â â¬s ! y}) 
      (mset_set ð±))"
    by fastforce
  then have "(mset â¬s* ) rep i = size (filter_mset (Î» bl . bl â â¬s ! i) (mset_set ð±))" 
    using assms by simp
  then have "(mset â¬s* ) rep i =  card {x â ð± . x â (â¬s ! i)}" by simp
  thus ?thesis using assms block_size_alt by auto
qed
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9627..9632">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_inter_index|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_inter_index|thm"><span class="entity_def" id="offset_9633..9656">dual_blocks_inter_index</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span>â¬</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9792..9798">assms2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_9627..9632"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><span>points_list_length</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_9627..9632"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_9627..9632"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.mat_inter_num_conv</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span>N</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>j1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5189..5220"><span>dual_incidence_mat_eq_trans_rev</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.trans_mat_point_index_inter_sym|fact"><span>trans_mat_point_index_inter_sym</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_9627..9632"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_dim_col|fact"><span>inc_mat_dim_col</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_9792..9798"><span>assms2</span></a><span> </span><span>incidence_mat_two_index</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> Counting Proof 
  have fin: "finite {0..&lt;length â¬s}"
    by auto 
  have j1lt: "j1 &lt; ð" using assms
    using dual_blocks_len points_list_length by auto 
  have j2lt: "j2 &lt; ð" using assms dual_blocks_len points_list_length by auto
  have iff: "â x. (x â(â¬s* ! j1) â§ x â (â¬s* ! j2)) â· (ð±s ! j1 â â¬s ! x â§ x &lt; ð» â§ ð±s ! j2 â â¬s ! x)" 
    by (auto simp add: dual_blocks_elem_iff j1lt j2lt)
  have pi: "points_index â¬ {ð±s ! j1, ð±s ! j2} = size {# bl â# â¬ . ð±s !j1 â bl â§ ð±s ! j2 â bl#}" 
    by (auto simp add: points_index_def)
  have "(â¬s* ! j1) |â©| (â¬s* ! j2) = card ({x . x &lt;length â¬s â§ x â (â¬s* ! j1) â§ x â (â¬s* ! j2)})"
    apply (auto simp add: intersection_number_def)
    by (smt (verit) Collect_cong Int_Collect blocks_list_length dual_blocks_elem_iff inf.idem inf_set_def j2lt mem_Collect_eq)
  then have "(â¬s* ! j1) |â©| (â¬s* ! j2) = card ({x . x &lt;length â¬s â§ ð±s ! j1 â â¬s ! x â§ ð±s ! j2 â â¬s ! x})" using iff
    size_mset by (smt (verit, best) Collect_cong) 
  then have "(â¬s* ! j1) |â©| (â¬s* ! j2) = size (mset_set {x â {0..&lt;length â¬s}. ð±s ! j1 â â¬s ! x â§ ð±s ! j2 â â¬s ! x})" by simp
  then have "(â¬s* ! j1) |â©| (â¬s* ! j2) = size ({#x â# mset_set {0..&lt;length â¬s}. ð±s ! j1 â â¬s ! x â§ ð±s ! j2 â â¬s ! x#})" using fin by simp
  then have "(â¬s* ! j1) |â©| (â¬s* ! j2) = size (filter_mset (Î» x . ð±s ! j1 â â¬s ! x â§ ð±s ! j2 â â¬s ! x) (mset_set {0..&lt;length â¬s}))" by simp
  then have "(â¬s* ! j1) |â©| (â¬s* ! j2) = size (image_mset (Î» i. â¬s ! i) (filter_mset (Î» x . ð±s ! j1 â â¬s ! x â§ ð±s ! j2 â â¬s ! x) (mset_set {0..&lt;length â¬s})))"
    by simp
  then have "(â¬s* ! j1) |â©| (â¬s* ! j2) = size (filter_mset (Î» x . ð±s ! j1 â x â§ ð±s ! j2 â x) (image_mset (Î» i. â¬s ! i) (mset_set {0..&lt;length â¬s})))"
    by (simp add: filter_mset_image_mset)
  then have "(â¬s* ! j1) |â©| (â¬s* ! j2) = size {# bl â# â¬ . ð±s !j1 â bl â§ ð±s ! j2 â bl#}"
    by (metis blocks_list_length blocks_mset_image lessThan_atLeast0) 
  thus ?thesis using pi by simp
qed
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12214..12219">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_points_index_inter|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.dual_blocks_points_index_inter|thm"><span class="entity_def" id="offset_12220..12250">dual_blocks_points_index_inter</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.N</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_12214..12219"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_12214..12219"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>blocks_list_length</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2456..2473"><span>ord_dual_blocks_v</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.dim_row_is_v</span></a><span> 
      </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.incidence_mat_two_index</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.mat_ord_inc_sys_point</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span>N</span><span> </span><span class="free"><span>i1</span></span><span> </span><span class="free"><span>i2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3973..4000"><span>dual_incidence_mat_eq_trans</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.trans_mat_point_index_inter_sym|fact"><span>trans_mat_point_index_inter_sym</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_12214..12219"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_12214..12219"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5189..5220"><span>dual_incidence_mat_eq_trans_rev</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2456..2473"><span>ord_dual_blocks_v</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2004..2018"><span>ordered_dual_sys.dim_row_is_v</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mat_inter_num_conv</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_12214..12219"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_12214..12219"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Counting Proof 
proof - 
  have "â j . j â# mset_set {0..&lt;length â¬s*} â¹ j &lt; ð"
    by (metis atLeastLessThan_iff atLeastLessThan_upt dual_blocks_len mset_upt points_list_length set_mset_mset) 
  then have iff: "â j i. j â# mset_set {0..&lt;length â¬s*} â¹ i &lt; ð» â¹ i â (â¬s* ! j) â· (ð±s ! j) â (â¬s ! i)" 
    using assms dual_incidence_iff2 by simp 
  then have iff2: "â j . j â# mset_set {0..&lt;length â¬s*} â¹ i1 â (â¬s* ! j) â§ i2 â (â¬s* ! j) â· (ð±s ! j) â (â¬s ! i1) â§ (ð±s ! j) â (â¬s ! i2)"
    using assms by auto
  have ss2: "(â¬s ! i2) â ð±" using wellformed assms by auto
  then have ss: "{x . x â (â¬s ! i1) â§ x â (â¬s ! i2)} â ð±"
    by auto 
  then have inter:  "(â¬s ! i1) |â©| (â¬s ! i2) = card {x â ð±. x â (â¬s ! i1) â§ x â (â¬s ! i2)}"
    using intersection_number_def by (metis Collect_conj_eq Collect_mem_eq Int_absorb1)
  have inj: "inj_on (Î» j. ð±s ! j) {j â {0..&lt;length ð±s} . (ð±s ! j) â (â¬s ! i1) â§ (ð±s ! j) â (â¬s ! i2)}"
    by (simp add: inj_on_nth distinct) 
  have init: "(mset â¬s* ) index {i1, i2} = size {#bl â# (mset â¬s* ) . i1 â bl â§ i2 â bl#}"
    by (simp add: points_index_def)
  then have "size {#bl â# (mset â¬s* ) . i1 â bl â§ i2 â bl#} = size {#j â# mset_set {0..&lt;length â¬s*} . i1 â (â¬s* ! j) â§ i2 â (â¬s* ! j)#}"
  proof - 
    have "size {#j â# mset_set {0..&lt;length â¬s*} . i1 â (â¬s* ! j) â§ i2 â (â¬s* ! j)#} 
      = size (filter_mset (Î» j. i1 â (â¬s* ! j) â§ i2 â (â¬s* ! j)) (mset_set {0..&lt;length â¬s*})) " by simp
    also have s1: "... = size (image_mset (Î»x . â¬s* ! x) (filter_mset (Î» j. i1 â (â¬s* ! j) â§ i2 â (â¬s* ! j)) (mset_set {0..&lt;length â¬s*})))" by fastforce
    also have s2: "... = size (filter_mset (Î» j. i1 â j â§ i2 â j) (image_mset (Î»x . â¬s* ! x) (mset_set {0..&lt;length â¬s*})))"
      by (simp add: filter_mset_image_mset) 
    finally have "size {#j â# mset_set {0..&lt;length â¬s*} . i1 â (â¬s* ! j) â§ i2 â (â¬s* ! j)#} = size (filter_mset (Î» j. i1 â j â§ i2 â j) (mset â¬s* ))"
      using dual_blocks_list_index_img s2 s1 by presburger 
    thus ?thesis by simp
  qed
  then have "size {#bl â# (mset â¬s* ) . i1 â bl â§ i2 â bl#} = size {#j â# mset_set {0..&lt;length â¬s*} . (ð±s ! j) â (â¬s ! i1) â§ (ð±s ! j) â (â¬s ! i2)#}" using iff2
    by (smt (verit, ccfv_SIG) filter_mset_cong) 
  then have "size {#bl â# (mset â¬s* ) . i1 â bl â§ i2 â bl#} = 
    card ({j â {0..&lt;length â¬s*} . (ð±s ! j) â (â¬s ! i1) â§ (ð±s ! j) â (â¬s ! i2)})" by simp
  then have "size {#bl â# (mset â¬s* ) . i1 â bl â§ i2 â bl#} = 
    card ({j â {0..&lt;length ð±s} . (ð±s ! j) â (â¬s ! i1) â§ (ð±s ! j) â (â¬s ! i2)})" using dual_blocks_len by presburger 
  then have "size {#bl â# (mset â¬s* ) . i1 â bl â§ i2 â bl#} = 
    card (image (Î» j. ð±s ! j) {j â {0..&lt;length ð±s} . (ð±s ! j) â (â¬s ! i1) â§ (ð±s ! j) â (â¬s ! i2)})"  
    using inj card_image[of "(Î» j. ð±s ! j)" "{j â {0..&lt;length ð±s} . (ð±s ! j) â (â¬s ! i1) â§ (ð±s ! j) â (â¬s ! i2)}"] by simp
  then have "size {#bl â# (mset â¬s* ) . i1 â bl â§ i2 â bl#} = 
    card {j â image (Î» j. ð±s ! j) {0..&lt;length ð±s}. j â (â¬s ! i1) â§ j â (â¬s ! i2)}" 
    using Compr_image_eq[of "(Î» j. ð±s ! j)" "{0..&lt;length ð±s}" "(Î» j . j â (â¬s ! i1) â§ j â (â¬s ! i2))"] by simp
  then have "size {#bl â# (mset â¬s* ) . i1 â bl â§ i2 â bl#} = 
    card {j â ð±. j â (â¬s ! i1) â§ j â (â¬s ! i2)}"
    using lessThan_atLeast0 points_list_length points_set_index_img by presburger 
  thus ?thesis using init inter by simp
qed</span><span>*</span><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Dual Properties for Design sub types</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_design|locale"><span>ordered_design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16346..16351">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_design.dual_is_design|fact"><span class="entity_def" id="Dual_Systems.ordered_design.dual_is_design|thm"><span>dual_is_design</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>Required to ensure no blocks are empty</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.design|const"><span>design</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5661..5679"><span>dual_blocks_nempty</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_16346..16351"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_proper_design|locale"><span>ordered_proper_design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_proper_design.dual_sys_b_non_zero|fact"><span class="entity_def" id="Dual_Systems.ordered_proper_design.dual_sys_b_non_zero|thm"><span class="entity_def" id="offset_16615..16634">dual_sys_b_non_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dual_sys.ð»</span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>v_non_zero</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2279..2292"><span>dual_blocks_b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16695..16700">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_proper_design.dual_is_proper_design|fact"><span class="entity_def" id="Dual_Systems.ordered_proper_design.dual_is_proper_design|thm"><span class="entity_def" id="offset_16701..16722">dual_is_proper_design</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  </span><span class="comment1"><span>â â¹ </span><span>Required to ensure no blocks are empty</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|const"><span>proper_design</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5661..5679"><span>dual_blocks_nempty</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_16615..16634"><span>dual_sys_b_non_zero</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_16695..16700"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_block_design|locale"><span>ordered_block_design</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_block_design.dual_blocks_const_rep|fact"><span class="entity_def" id="Dual_Systems.ordered_block_design.dual_blocks_const_rep|thm"><span class="entity_def" id="offset_17003..17024">dual_blocks_const_rep</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7864..7887"><span>dual_blocks_rep_is_size</span></a><span> </span><span>uniform</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>nth_mem_mset</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17157..17162">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_block_design.dual_blocks_constant_rep_design|fact"><span class="entity_def" id="Dual_Systems.ordered_block_design.dual_blocks_constant_rep_design|thm"><span>dual_blocks_constant_rep_design</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.constant_rep_design|const"><span>constant_rep_design</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> des</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|locale"><span>proper_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_16701..16722"><span>dual_is_proper_design</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_17157..17162"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_17003..17024"><span>dual_blocks_const_rep</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_constant_rep|locale"><span>ordered_constant_rep</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_constant_rep.dual_blocks_const_size|fact"><span class="entity_def" id="Dual_Systems.ordered_constant_rep.dual_blocks_const_size|thm"><span class="entity_def" id="offset_17573..17595">dual_blocks_const_size</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7864..7887"><span>dual_blocks_rep_is_size</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_6306..6329"><span>dual_blocks_size_is_rep</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_constant_rep.dual_is_block_design|fact"><span class="entity_def" id="Dual_Systems.ordered_constant_rep.dual_is_block_design|thm"><span class="entity_def" id="offset_17729..17749">dual_is_block_design</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.block_design|const"><span>block_design</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>r_gzero</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>rep_number</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> pdes</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|locale"><span>proper_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_16701..16722"><span>dual_is_proper_design</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_17573..17595"><span>dual_blocks_const_size</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span> </span><span>in_set_conv_nth</span><span> </span><span>set_mset_mset</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_pairwise_balance|locale"><span>ordered_pairwise_balance</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18281..18286">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_pairwise_balance.dual_blocks_const_intersect|fact"><span class="entity_def" id="Dual_Systems.ordered_pairwise_balance.dual_blocks_const_intersect|thm"><span class="entity_def" id="offset_18287..18314">dual_blocks_const_intersect</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18281..18286"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18281..18286"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18281..18286"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>distinct</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><span>nth_eq_iff_index_eq</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18567..18568">c</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>card_2_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18638..18640">ss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18281..18286"><span>assms</span></a><span> </span><span>points_list_length</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1538..1553"><span>dual_blocks_len</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>points_index</span></a><span> </span><span>â¬</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j1</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_9633..9656"><span>dual_blocks_inter_index</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18281..18286"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18638..18640"><span>ss</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18567..18568"><span>c</span></a><span> </span><span>balanced</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18906..18911">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_pairwise_balance.dual_is_const_intersect_des|fact"><span class="entity_def" id="Dual_Systems.ordered_pairwise_balance.dual_is_const_intersect_des|thm"><span class="entity_def" id="offset_18912..18939">dual_is_const_intersect_des</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Design_Extras.html#Design_Extras.const_intersect_design|const"><span>const_intersect_design</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>const_index_lt_rep</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18906..18911"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>gr_zeroI</span><span> </span><span>le_zero_eq</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> pd</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|locale"><span>proper_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_16701..16722"><span>dual_is_proper_design</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>b1</span></span><span> </span><span class="skolem"><span>b2</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_19383..19387">b1in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_19425..19429">b2in</span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.remove1_mset|const"><span>remove1_mset</span></a><span> </span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_19495..19499">b1eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_19521..19525">j1lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19383..19387"><span>b1in</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span> </span><span>in_set_conv_nth</span><span> </span><span>set_mset_mset</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_19647..19651">b2eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>j2</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_19673..19677">j2lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="skolem"><span>j2</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19425..19429"><span>b2in</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.index_remove1_mset_ne|fact"><span>index_remove1_mset_ne</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19495..19499"><span>b1eq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19521..19525"><span>j1lt</span></a><span> </span><span>nth_mem</span><span> </span><span>set_mset_mset</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="skolem"><span>b2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18287..18314"><span>dual_blocks_const_intersect</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19495..19499"><span>b1eq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19647..19651"><span>b2eq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19521..19525"><span>j1lt</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19673..19677"><span>j2lt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19948..19953">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_pairwise_balance.dual_is_simp_const_inter_des|fact"><span class="entity_def" id="Dual_Systems.ordered_pairwise_balance.dual_is_simp_const_inter_des|thm"><span>dual_is_simp_const_inter_des</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>â¬</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>incomplete_block</span><span> </span><span class="bound"><span>bl</span></span><span>"</span></span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Design_Extras.html#Design_Extras.simple_const_intersect_design|const"><span>simple_const_intersect_design</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> d</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.const_intersect_design|locale"><span>const_intersect_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19948..19953"><span>assms</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_18912..18939"><span>dual_is_const_intersect_des</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20268..20270">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="comment1"><span>â â¹ </span><span>Show that m &lt; block size for all blocks</span><span> âº</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_19948..19953"><span>assms</span></a><span> </span><span>incomplete_index_strict_lt_rep</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_7315..7345"><span>dual_blocks_size_is_rep_obtain</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> s</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.simple_design|locale"><span>simple_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20268..20270"><span>d.simple_const_inter_block_size</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_const_intersect_design|locale"><span>ordered_const_intersect_design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20737..20742">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_const_intersect_design.dual_is_balanced|fact"><span class="entity_def" id="Dual_Systems.ordered_const_intersect_design.dual_is_balanced|thm"><span class="entity_def" id="offset_20743..20759">dual_is_balanced</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_20890..20894">psin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>i2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_20916..20919">neq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="skolem"><span>i2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20737..20742"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>card_2_iff</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20982..20984">lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20737..20742"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>blocks_list_length</span><span> </span><span>insert_subset</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21084..21087">lt2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20737..20742"><span>assms</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20890..20894"><span>psin</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>blocks_list_length</span><span> </span><span>insert_subset</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21196..21201">inter</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_12220..12250"><span>dual_blocks_points_index_inter</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20916..20919"><span>neq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20982..20984"><span>lt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20890..20894"><span>psin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21362..21366">inb1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>â¬</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20982..20984"><span>lt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21414..21418">inb2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>â¬</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i1</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_21084..21087"><span>lt2</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20916..20919"><span>neq</span></a><span> </span><span>blocks_index_ne_belong</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>blocks_list_length</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20982..20984"><span>lt</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>const_intersect</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_21362..21366"><span>inb1</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_21414..21418"><span>inb2</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_21196..21201"><span>inter</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21598..21603">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_const_intersect_design.dual_is_pbd|fact"><span class="entity_def" id="Dual_Systems.ordered_const_intersect_design.dual_is_pbd|thm"><span>dual_is_pbd</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>ð±</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>â¬</span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.point_replication_number|const"><span>rep</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|const"><span>pairwise_balance</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> pd</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.proper_design|locale"><span>proper_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_16701..16722"><span>dual_is_proper_design</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_21598..21603"><span>assms</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dual_sys.ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Dual_Systems.html#offset_21598..21603"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>ps</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="bound"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_20743..20759"><span>dual_is_balanced</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_sym_bibd|locale"><span>ordered_sym_bibd</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22186..22191">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_sym_bibd.dual_is_balanced|fact"><span class="entity_def" id="Dual_Systems.ordered_sym_bibd.dual_is_balanced|thm"><span class="entity_def" id="offset_22192..22208">dual_is_balanced</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_22339..22343">psin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>i1</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>i2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_22365..22368">neq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="skolem"><span>i2</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22186..22191"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>card_2_iff</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22432..22434">lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22186..22191"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>blocks_list_length</span><span> </span><span>insert_subset</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22534..22537">lt2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22186..22191"><span>assms</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22339..22343"><span>psin</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>blocks_list_length</span><span> </span><span>insert_subset</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22646..22651">inter</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="free"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_12220..12250"><span>dual_blocks_points_index_inter</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22365..22368"><span>neq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22432..22434"><span>lt</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22339..22343"><span>psin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22807..22811">inb1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>â¬</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22432..22434"><span>lt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>inb2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>â¬</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i1</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22534..22537"><span>lt2</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22365..22368"><span>neq</span></a><span> </span><span>blocks_index_simp_unique</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>blocks_list_length</span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.in_remove1_mset_neq|fact"><span>in_remove1_mset_neq</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22432..22434"><span>lt</span></a><span> </span><span>valid_blocks_index</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sym_block_intersections_index</span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22807..22811"><span>inb1</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22646..22651"><span>inter</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_sym_bibd.dual_bibd|fact"><span class="entity_def" id="Dual_Systems.ordered_sym_bibd.dual_bibd|thm"><span class="entity_def" id="offset_23098..23107">dual_bibd</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/BIBD.html#BIBD.bibd|const"><span>bibd</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span>ð</span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> block</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.block_design|locale"><span>block_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span>ð</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_17729..17749"><span>dual_is_block_design</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dual_sys.ð</span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2402..2415"><span>dual_blocks_v</span></a><span> </span><span>incomplete</span><span> </span><span>symmetric_condition_1</span><span> </span><span>symmetric_condition_2</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>t_lt_order</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>local.symmetric</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dual_sys.ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>ps</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ps</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.points_index|const"><span>index</span></a></span><span> </span><span class="bound"><span>ps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_22192..22208"><span>dual_is_balanced</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>r_ge_two</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The dual of a BIBD must by symmetric</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_sym_bibd.dual_bibd_symmetric|fact"><span class="entity_def" id="Dual_Systems.ordered_sym_bibd.dual_bibd_symmetric|thm"><span>dual_bibd_symmetric</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Design_Theory/BIBD.html#BIBD.symmetric_bibd|const"><span>symmetric_bibd</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span>ð</span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> bibd</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/BIBD.html#BIBD.bibd|locale"><span>bibd</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span>ð</span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_23098..23107"><span>dual_bibd</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_2279..2292"><span>dual_blocks_b</span></a><span> </span><span>local.symmetric</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Generalise Dual Concept</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The above formalisation relies on one translation of a dual design. However, any design 
</span><span>with an ordering of points and blocks such that the matrix is the transpose of the original is 
</span><span>a dual. The definition below encapsulates this concept. Additionally, we prove an isomorphism
</span><span>exists between the generated dual from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> and any design satisfying the is dual
</span><span>definition</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual_def|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual_def|thm"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual_def_raw|axiom"><span class="entity_def" id="offset_24587..24597">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual.cong|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual.cong|thm"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual|const"><span class="entity_def" id="offset_24598..24605">is_dual</span></span></span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>set</span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_dual</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Vs'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Bs'</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Vs'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Bs'</span></span></span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Vs'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Bs'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24728..24733">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dualI|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dualI|thm"><span>is_dualI</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_24598..24605"><span>is_dual</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_24587..24597"><span>is_dual_def</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_24728..24733"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24896..24901">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dualD1|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dualD1|thm"><span class="entity_def" id="offset_24902..24911">is_dualD1</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_24598..24605"><span>is_dual</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_24587..24597"><span>is_dual_def</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_24896..24901"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25018..25023">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dualD2|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dualD2|thm"><span class="entity_def" id="offset_25024..25033">is_dualD2</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_24598..24605"><span>is_dual</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|const"><span>ordered_incidence_system</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_24587..24597"><span>is_dual_def</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25018..25023"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.generated_is_dual|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.generated_is_dual|thm"><span>generated_is_dual</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_24598..24605"><span>is_dual</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> osys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1804..1827"><span>dual_is_ordered_inc_sys</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25310..25312">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_24587..24597"><span>is_dual_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_24587..24597"><span>is_dual_def</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3973..4000"><span>dual_incidence_mat_eq_trans</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25310..25312"><span>osys.ordered_incidence_system_axioms</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25454..25459">lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual_isomorphism_generated|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual_isomorphism_generated|thm"><span>is_dual_isomorphism_generated</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_24598..24605"><span>is_dual</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Design_Isomorphisms.html#Design_Isomorphisms.incidence_system_isomorphism|const"><span>incidence_system_isomorphism</span></a><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>Vs'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>mset</span><span> </span><span class="free"><span>Bs'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>Ï</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> os2</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25710..25712">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1804..1827"><span>dual_is_ordered_inc_sys</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> os1</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="free"><span>Vs'</span></span></span><span> </span><span class="quoted"><span class="free"><span>Bs'</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25454..25459"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25816..25818">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25024..25033"><span>is_dualD2</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> tos</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.two_ordered_sys|locale"><span>two_ordered_sys</span></a><span> </span><span class="quoted"><span class="free"><span>Vs'</span></span></span><span> </span><span class="quoted"><span class="free"><span>Bs'</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
     </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25454..25459"><span>assms</span></a><span>  </span><span>ordered_incidence_system_axioms</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.two_ordered_sys.intro|fact"><span>two_ordered_sys.intro</span></a><span>
     </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25991..25993">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25024..25033"><span>is_dualD2</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.two_ordered_sys.intro|fact"><span>two_ordered_sys.intro</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1804..1827"><span>dual_is_ordered_inc_sys</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_26069..26073">os2V</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_25710..25712"><span>os2.ð±</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_26123..26127">os2B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_25710..25712"><span>os2.â¬</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1392..1414"><span>dual_blocks_ordered_eq</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_25816..25818"><span>os1.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.inc_mat_of|const"><span>inc_mat_of</span></a><span> </span><span class="free"><span>Vs'</span></span><span> </span><span class="free"><span>Bs'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_25710..25712"><span>os2.N</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25816..25818"><span>os1.N</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25454..25459"><span>assms</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_24902..24911"><span>is_dualD1</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_3973..4000"><span>dual_incidence_mat_eq_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_25991..25993"><span>tos.equal_inc_mat_isomorphism_ex</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_26069..26073"><span>os2V</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_26123..26127"><span>os2B</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26416..26430">interpretation</span></span></span><span> ordered_dual_sys</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_incidence_system|locale"><span>ordered_incidence_system</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Dual_Systems.html#offset_1261..1280"><span>â¬s*</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_1804..1827"><span>dual_is_ordered_inc_sys</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Original system is dual of the dual</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual_rev|fact"><span class="entity_def" id="Dual_Systems.ordered_incidence_system.is_dual_rev|thm"><span>is_dual_rev</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Dual_Systems.html#offset_26416..26430"><span>ordered_dual_sys.is_dual</span></a><span> </span><span class="free"><span>ð±s</span></span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_5189..5220"><span>dual_incidence_mat_eq_trans_rev</span></a><span> </span><a class="entity_ref" href="Dual_Systems.html#offset_26416..26430"><span>ordered_dual_sys.is_dualI</span></a><span> </span><span>ordered_incidence_system_axioms</span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>ad>


<body>
<div class="head">
<h1>Theory Rank_Argument_General</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Rank_Argument_General.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Rank Argument - General</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>General lemmas to enable reasoning using the rank argument. This is described by Godsil 
</span><span>\cite{godsilToolsLinearAlgebra} and Bukh \cite{bukhAlgebraicMethodsCombinatoricsa}, both of whom 
</span><span>present it as a foundational technique</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Rank_Argument_General</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Dual_Systems.html"><span>Dual_Systems</span></a><span> </span><a href="../Jordan_Normal_Form/Determinant.html"><span>Jordan_Normal_Form.Determinant</span></a><span>
</span><a href="../Jordan_Normal_Form/DL_Rank.html"><span>Jordan_Normal_Form.DL_Rank</span></a><span> </span><a href="../Jordan_Normal_Form/Ring_Hom_Matrix.html"><span>Jordan_Normal_Form.Ring_Hom_Matrix</span></a><span> </span><a href="../BenOr_Kozen_Reif/More_Matrix.html"><span>BenOr_Kozen_Reif.More_Matrix</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Row/Column Operations</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Extensions to the existing elementary operations are made to enable reasoning on multiple 
</span><span>operations at once, similar to mathematical literature</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.index_mat_addrow_basic|fact"><span class="entity_def" id="Rank_Argument_General.index_mat_addrow_basic(5)|thm"><span class="entity_def" id="Rank_Argument_General.index_mat_addrow_basic(4)|thm"><span class="entity_def" id="Rank_Argument_General.index_mat_addrow_basic(3)|thm"><span class="entity_def" id="Rank_Argument_General.index_mat_addrow_basic(2)|thm"><span class="entity_def" id="Rank_Argument_General.index_mat_addrow_basic(1)|thm"><span>index_mat_addrow_basic</span></span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><span>then</span></span><span> 
    </span><span class="main"><span>(</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>mat_addrow_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Function to add a column to multiple other columns</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.elims|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.pelims|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.termination|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.pinduct|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.psimps|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.inducts|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.intros|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.inducts|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.intros|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.elims|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.simps(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.simps(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.pelims|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.termination|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.pinduct|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.psimps(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple.psimps(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.inducts|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.simps|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel.intros|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.inducts|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.simps|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.intros(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph.intros(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_sumC_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_dom|const"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_rel|const"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_sumC|const"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>semiring_1</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_col_to_multiple</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_col_to_multiple</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ks</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addcol</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>add_col_to_multiple</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ks</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Function to add a row to multiple other rows</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.elims|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.pelims|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.termination|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.pinduct|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.psimps|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.inducts|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.intros|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.inducts|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.intros|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.elims|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.simps(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.simps(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.pelims|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.termination|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.pinduct|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.psimps(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple.psimps(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.inducts|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.simps|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel.intros|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.inducts|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.simps|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.intros(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph.intros(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_sumC_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_dom|const"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_rel|const"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_sumC|const"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>semiring_1</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_row_to_multiple</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_row_to_multiple</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ks</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>add_row_to_multiple</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ks</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Function to add multiple rows to a single row</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.elims|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.pelims|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.termination|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.pinduct|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.psimps|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.inducts|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.intros|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.inducts|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.intros|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.elims|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.simps(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.simps(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.pelims|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.termination|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.pinduct|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.psimps(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows.psimps(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.inducts|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.simps|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel.intros|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.inducts|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.simps|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.intros(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph.intros(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_sumC_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_dom|const"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_rel|const"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_sumC|const"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>semiring_1</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_multiple_rows</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_multiple_rows</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ls</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>add_multiple_rows</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ls</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Function to add multiple columns to a single col</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.elims|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.pelims|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.termination|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.pinduct|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.psimps|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.inducts|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.intros|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.inducts|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.simps|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.induct|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.cases|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.intros|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.elims|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.simps(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.simps(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.pelims|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.termination|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.pinduct|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.psimps(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols.psimps(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.inducts|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.simps|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel.intros|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.inducts|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.simps|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.induct|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.cases|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.intros(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph.intros(1)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_sumC_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph_def|axiom"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_dom|const"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_rel|const"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_sumC|const"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>semiring_1</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span>list</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_multiple_cols</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_multiple_cols</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ls</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addcol</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>add_multiple_cols</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ls</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Basic lemmas on dimension and indexing of resulting matrix from above functions</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_dim|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_dim(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_dim(1)|thm"><span>add_multiple_rows_dim</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_index_unchanged|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_index_unchanged|thm"><span>add_multiple_rows_index_unchanged</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2644..2649">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_index_eq|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_index_eq|thm"><span>add_multiple_rows_index_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="free"><span>ls</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2644..2649"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_2945..2949">Cons</span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2969..2971">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="skolem"><span>aa</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3002..3004">lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2644..2649"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2945..2949"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2644..2649"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2644..2649"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.index_mat_addrow_basic|fact"><span>index_mat_addrow_basic</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>aa</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_3002..3004"><span>lt</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2969..2971"><span>ne</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2644..2649"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="skolem"><span>ls</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2945..2949"><span>Cons.hyps</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2644..2649"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2644..2649"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2945..2949"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_2945..2949"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>ab_semigroup_add_class.add_ac</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>list.set_intros</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3913..3918">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_index_eq_bounds|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_index_eq_bounds|thm"><span>add_multiple_rows_index_eq_bounds</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>low</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>up</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>up</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>=</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4156..4161">notin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_3913..3918"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_3913..3918"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows_index_eq|fact"><span>add_multiple_rows_index_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> 
      </span><a class="entity_ref" href="../Polynomials/Utils.html#Utils.sum_set_upt_eq_sum_list|fact"><span>sum_set_upt_eq_sum_list</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>low</span></span></span><span> </span><span class="quoted"><span class="free"><span>up</span></span></span><span class="main"><span>]</span></span><span>  </span><a class="entity_ref" href="Rank_Argument_General.html#offset_4156..4161"><span>notin</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_3913..3918"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_3913..3918"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_dim|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_dim(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_dim(1)|thm"><span>add_multiple_cols_dim</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_index_unchanged|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_index_unchanged|thm"><span>add_multiple_cols_index_unchanged</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4793..4798">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_index_eq|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_index_eq|thm"><span>add_multiple_cols_index_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="free"><span>ls</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_4793..4798"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_5094..5098">Cons</span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5118..5120">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="skolem"><span>aa</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5151..5153">lt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_4793..4798"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5094..5098"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addcol</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>aa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_4793..4798"><span>assms</span></a><span> </span><span>index_mat_addcol</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>aa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5151..5153"><span>lt</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5118..5120"><span>ne</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_4793..4798"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>aa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="skolem"><span>ls</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5094..5098"><span>Cons.hyps</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_4793..4798"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_4793..4798"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>  </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5094..5098"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5094..5098"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>ab_semigroup_add_class.add_ac</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span>  </span><span>list.set_intros</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5874..5879">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_index_eq_bounds|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_index_eq_bounds|thm"><span>add_multiple_cols_index_eq_bounds</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>low</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>up</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>up</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>=</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6117..6122">notin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5874..5879"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5874..5879"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols_index_eq|fact"><span>add_multiple_cols_index_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span class="main"><span>]</span></span><span> 
      </span><a class="entity_ref" href="../Polynomials/Utils.html#Utils.sum_set_upt_eq_sum_list|fact"><span>sum_set_upt_eq_sum_list</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>low</span></span></span><span> </span><span class="quoted"><span class="free"><span>up</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6117..6122"><span>notin</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5874..5879"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_5874..5879"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_dim|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_dim(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_dim(1)|thm"><span>add_row_to_multiple_dim</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ks</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_index_unchanged|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_index_unchanged|thm"><span>add_row_to_multiple_index_unchanged</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ks</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_index_unchanged_bound|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_index_unchanged_bound|thm"><span>add_row_to_multiple_index_unchanged_bound</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>low</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>up</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6946..6951">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_index_change|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_index_change|thm"><span>add_row_to_multiple_index_change</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ks</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>ks</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ks</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ks</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_7269..7273">Cons</span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7293..7299">lnotin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="skolem"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>aa</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_7387..7391">True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7406..7412">inotin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="skolem"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_7269..7273"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_7387..7391"><span>True</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_7293..7299"><span>lnotin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_7406..7412"><span>inotin</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_8069..8074">False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8089..8092">iin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="skolem"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_7269..7273"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>set_ConsD</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_8069..8074"><span>False</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_7269..7273"><span>Cons.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_7269..7273"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_6946..6951"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>distinct.simps</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_8089..8092"><span>iin</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_7293..7299"><span>lnotin</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8633..8638">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_index_change_bounds|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_index_change_bounds|thm"><span>add_row_to_multiple_index_change_bounds</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>low</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>up</span></span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>low</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>up</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8903..8904">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8943..8946">iin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_8633..8638"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>lnin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_8633..8638"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple_index_change|fact"><span>add_row_to_multiple_index_change</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_8903..8904"><span>d</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_8943..8946"><span>iin</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_8633..8638"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_dim|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_dim(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_dim(1)|thm"><span>add_col_to_multiple_dim</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ks</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_index_unchanged|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_index_unchanged|thm"><span>add_col_to_multiple_index_unchanged</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ks</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_index_unchanged_bound|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_index_unchanged_bound|thm"><span>add_col_to_multiple_index_unchanged_bound</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>low</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>up</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9661..9666">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_index_change|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_index_change|thm"><span>add_col_to_multiple_index_change</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ks</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>ks</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ks</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ks</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_9984..9988">Cons</span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10008..10014">lnotin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="skolem"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>aa</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_10102..10106">True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10121..10127">inotin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="skolem"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9984..9988"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="keyword1"><span>addcol</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_10102..10106"><span>True</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_10008..10014"><span>lnotin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_10121..10127"><span>inotin</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_10784..10789">False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10804..10807">iin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="skolem"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9984..9988"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>set_ConsD</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="keyword1"><span>addcol</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_10784..10789"><span>False</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9984..9988"><span>Cons.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9984..9988"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_9661..9666"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>distinct.simps</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_10804..10807"><span>iin</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_10008..10014"><span>lnotin</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11350..11355">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_index_change_bounds|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_index_change_bounds|thm"><span>add_col_to_multiple_index_change_bounds</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>low</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>up</span></span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>low</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>up</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11620..11621">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11660..11663">jin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_11350..11355"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>lnin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="free"><span>low</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>up</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_11350..11355"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple_index_change|fact"><span>add_col_to_multiple_index_change</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_11620..11621"><span>d</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_11660..11663"><span>jin</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_11350..11355"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Operations specifically on 1st row/column</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11897..11902">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_first_row_to_multiple_index|fact"><span class="entity_def" id="Rank_Argument_General.add_first_row_to_multiple_index(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_first_row_to_multiple_index(1)|thm"><span>add_first_row_to_multiple_index</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_11897..11902"><span>assms</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple_index_change_bounds|fact"><span>add_row_to_multiple_index_change_bounds</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span> </span><span class="quoted"><span class="main"><span>1</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="main"><span>0</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span class="operator"><span>linarith</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12275..12280">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_all_cols_to_first|fact"><span class="entity_def" id="Rank_Argument_General.add_all_cols_to_first(2)|thm"><span class="entity_def" id="Rank_Argument_General.add_all_cols_to_first(1)|thm"><span>add_all_cols_to_first</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_12275..12280"><span>assms</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols_index_eq_bounds|fact"><span>add_multiple_cols_index_eq_bounds</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_12275..12280"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Lemmas on the determinant of the matrix under extended row/column operations</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_carrier|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_carrier|thm"><span>add_row_to_multiple_carrier</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple_dim|fact"><span>add_row_to_multiple_dim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple_dim|fact"><span>add_row_to_multiple_dim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matD</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matD</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_carrier|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_carrier|thm"><span>add_col_to_multiple_carrier</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple_dim|fact"><span>add_col_to_multiple_dim</span></a><span> </span><span>carrier_matD</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matD</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_carrier|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_carrier|thm"><span>add_multiple_rows_carrier</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows_dim|fact"><span>add_multiple_rows_dim</span></a><span> </span><span>carrier_matD</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matD</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_carrier|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_carrier|thm"><span>add_multiple_cols_carrier</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols_dim|fact"><span>add_multiple_cols_dim</span></a><span> </span><span>carrier_matD</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matD</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>carrier_matI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13533..13538">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_det|fact"><span class="entity_def" id="Rank_Argument_General.add_row_to_multiple_det|thm"><span>add_row_to_multiple_det</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ks</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_13533..13538"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ks</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_13760..13764">Cons</span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="skolem"><span>ks</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13779..13781">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_13760..13764"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ks</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>det_addrow</span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple_carrier|fact"><span>add_row_to_multiple_carrier</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_13779..13781"><span>ne</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_13533..13538"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ks</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_13760..13764"><span>Cons.hyps</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_13533..13538"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_13760..13764"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>list.set_intros</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14230..14235">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_det|fact"><span class="entity_def" id="Rank_Argument_General.add_col_to_multiple_det|thm"><span>add_col_to_multiple_det</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ks</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14230..14235"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ks</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_14457..14461">Cons</span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="skolem"><span>ks</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14476..14478">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14457..14461"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ks</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addcol</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>ks</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>det_addcol</span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple_carrier|fact"><span>add_col_to_multiple_carrier</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14476..14478"><span>ne</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14230..14235"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_col_to_multiple|const"><span>add_col_to_multiple</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ks</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14457..14461"><span>Cons.hyps</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14230..14235"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14457..14461"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>list.set_intros</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14927..14932">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_det|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_cols_det|thm"><span>add_multiple_cols_det</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14927..14932"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_15167..15171">Cons</span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15186..15188">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15167..15171"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addcol</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>det_addcol</span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols_carrier|fact"><span>add_multiple_cols_carrier</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15186..15188"><span>ne</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14927..14932"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15167..15171"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>list.set_intros</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15167..15171"><span>Cons.hyps</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_14927..14932"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15167..15171"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15167..15171"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>list.set_intros</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15682..15687">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_det|fact"><span class="entity_def" id="Rank_Argument_General.add_multiple_rows_det|thm"><span>add_multiple_rows_det</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ls</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15682..15687"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_15922..15926">Cons</span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15941..15943">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15922..15926"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>addrow</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="skolem"><span>ls</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>det_addrow</span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows_carrier|fact"><span>add_multiple_rows_carrier</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15941..15943"><span>ne</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15682..15687"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15922..15926"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>list.set_intros</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_rows|const"><span>add_multiple_rows</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>aa</span></span><span> </span><span class="main"><span>#</span></span><span> </span><span class="skolem"><span>ls</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15922..15926"><span>Cons.hyps</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15682..15687"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15922..15926"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_15922..15926"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>list.set_intros</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Rank and Linear Independence</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Rank_Argument_General.rank|const"><span>rank</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>vec_space.rank</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Basic lemma: the rank of the multiplication of two matrices will be less than the minimum
</span><span>of the individual ranks of those matrices. This directly follows from an existing lemmas in the 
</span><span>linear algebra library which show independently that the resulting matrices rank is less than either
</span><span>the right or left matrix rank in the product</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16867..16872">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.rank_mat_mult_lt_min_rank_factor|fact"><span class="entity_def" id="Rank_Argument_General.rank_mat_mult_lt_min_rank_factor|thm"><span>rank_mat_mult_lt_min_rank_factor</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><span>conjugatable_ordered_field</span><span class="main"><span>}</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>nc</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>min</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17094..17095">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_16867..16872"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_16867..16872"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../BenOr_Kozen_Reif/More_Matrix.html#More_Matrix.vec_space.rank_mat_mul_right|fact"><span>vec_space.rank_mat_mul_right</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>*</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_16867..16872"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_16867..16872"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../BenOr_Kozen_Reif/More_Matrix.html#More_Matrix.rank_mat_mul_left|fact"><span>rank_mat_mul_left</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_17094..17095"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Rank Argument 1: Given two a $x \times y$ matrix $M$ where $MM^T$ has rank x, $x \le y$</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17412..17417">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.rank_argument|fact"><span class="entity_def" id="Rank_Argument_General.rank_argument|thm"><span>rank_argument</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>conjugatable_ordered_field</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec_space.rank</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?B</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17618..17624">Mt_car</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_17412..17417"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17677..17682">b_car</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>transpose_carrier_mat</span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_17412..17417"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="var"><span>?B</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>min</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank_mat_mult_lt_min_rank_factor|fact"><span>rank_mat_mult_lt_min_rank_factor</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_17618..17624"><span>Mt_car</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_17677..17682"><span>b_car</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_17412..17417"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>le_trans</span><span> </span><span>vec_space.rank_le_nc</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_17412..17417"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_17412..17417"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>min.bounded_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Generalise the rank argument to use the determinant. If the determinant of the matrix
</span><span>is non-zero, than it's rank must be equal to $x$. This removes the need for someone to use
</span><span>facts on rank in their proofs.</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18205..18210">lemma</span></span></span><span> </span><span class="entity_def" id="Rank_Argument_General.rank_argument_det|fact"><span class="entity_def" id="Rank_Argument_General.rank_argument_det|thm"><span>rank_argument_det</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>conjugatable_ordered_field</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?B</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18402..18408">Mt_car</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_18205..18210"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18461..18466">b_car</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>transpose_carrier_mat</span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_18205..18210"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18549..18555">b_rank</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec_space.rank</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="var"><span>?B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_space.low_rank_det_zero</span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_18205..18210"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="var"><span>?B</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>min</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank|const"><span>rank</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>M</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank_mat_mult_lt_min_rank_factor|fact"><span>rank_mat_mult_lt_min_rank_factor</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_18402..18408"><span>Mt_car</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_18461..18466"><span>b_car</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_18205..18210"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>le_trans</span><span> </span><span>vec_space.rank_le_nc</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_18205..18210"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#offset_18549..18555"><span>b_rank</span></a><span> </span><span>min.bounded_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>ad>


<body>
<div class="head">
<h1>Theory Linear_Bound_Argument</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Linear_Bound_Argument.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Linear Bound Argument - General</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Lemmas to enable general reasoning using the linear bound argument for combinatorial proofs.
</span><span>Jukna \cite{juknaExtremalCombinatorics2011} presents a good overview of the mathematical background 
</span><span>this theory is based on and applications</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Linear_Bound_Argument</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Incidence_Matrices.html"><span>Incidence_Matrices</span></a><span> </span><a href="../Jordan_Normal_Form/DL_Rank.html"><span>Jordan_Normal_Form.DL_Rank</span></a><span> 
</span><a href="../Jordan_Normal_Form/Ring_Hom_Matrix.html"><span>Jordan_Normal_Form.Ring_Hom_Matrix</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Vec Space Extensions</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Simple extensions to the existing vector space locale on linear independence</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_598..605">context</span></span></span><span> </span><span>vec_space</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_623..628">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_set_card_lt_dim|fact"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_set_card_lt_dim|thm"><span class="entity_def" id="offset_629..654">lin_indpt_set_card_lt_dim</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>set</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>lin_indpt</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dim</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_623..628"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_623..628"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>fin_dim</span><span> </span><span>li_le_dim</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_817..822">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_dim_col_lt_dim|fact"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_dim_col_lt_dim|thm"><span>lin_indpt_dim_col_lt_dim</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>nc</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>lin_indpt</span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>dim</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1006..1007">b</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>cols_length</span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_817..822"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>distinct_card</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_817..822"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>cols_dim</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_629..654"><span>lin_indpt_set_card_lt_dim</span></a><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_817..822"><span>assms</span></a><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_1006..1007"><span>b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1243..1248">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_comb_imp_lin_dep_fin|fact"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_comb_imp_lin_dep_fin|thm"><span>lin_comb_imp_lin_dep_fin</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>set</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>lincomb</span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>lin_dep</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_598..605"><span>lin_dep_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_1243..1248"><span>assms</span></a><span> </span><span>lincomb_as_lincomb_list_distinct</span><span> </span><span>sumlist_nth</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>While a trivial definition, this enables us to directly reference the definition outside
</span><span>of a locale context, as </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span>lin_indpt</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> is an inherited definition</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_vs_def|fact"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_vs_def|thm"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_vs_def_raw|axiom"><span class="entity_def" id="offset_1696..1706">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_vs.cong|fact"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_vs.cong|thm"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_indpt_vs|const"><span class="entity_def" id="offset_1707..1719">lin_indpt_vs</span></span></span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lin_indpt_vs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>lin_indpt</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1780..1785">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_comb_sum_lin_indpt|fact"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_comb_sum_lin_indpt|thm"><span class="entity_def" id="offset_1786..1808">lin_comb_sum_lin_indpt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>lincomb_list</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>lin_indpt</span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>finite_lin_indpt2</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_1780..1785"><span>assms</span></a><span> </span><span>lincomb_as_lincomb_list_distinct</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2090..2095">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_comb_mat_lin_indpt|fact"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_comb_mat_lin_indpt|thm"><span class="entity_def" id="offset_2096..2118">lin_comb_mat_lin_indpt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>mat_of_cols</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><span>*<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>vec</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>lin_indpt</span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_1786..1808"><span>lin_comb_sum_lin_indpt</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_2090..2095"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>v</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>dim_vec</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_2090..2095"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>lincomb_list</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><span>lincomb_list_as_mat_mult</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_2090..2095"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>f</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2631..2636">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_comb_mat_lin_indpt_vs|fact"><span class="entity_def" id="Linear_Bound_Argument.vec_space.lin_comb_mat_lin_indpt_vs|thm"><span>lin_comb_mat_lin_indpt_vs</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>mat_of_cols</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><span>*<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>vec</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_1707..1719"><span>lin_indpt_vs</span></a><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_2096..2118"><span>lin_comb_mat_lin_indpt</span></a><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_1696..1706"><span>lin_indpt_vs_def</span></a><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_2631..2636"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Linear Bound Argument Lemmas</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Three general representations of the linear bound argument, requiring a direct fact of 
</span><span>linear independence onthe rows of the vector space over either a set A of vectors, list xs of vectors
</span><span>or a Matrix' columns</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3213..3218">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.lin_bound_arg_general_set|fact"><span class="entity_def" id="Linear_Bound_Argument.lin_bound_arg_general_set|thm"><span>lin_bound_arg_general_set</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>field</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>vec</span><span> </span><span>set</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.vec_space.lin_indpt_vs|const"><span>vec_space.lin_indpt_vs</span></a><span> </span><span class="free"><span>nr</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.vec_space.lin_indpt_set_card_lt_dim|fact"><span>vec_space.lin_indpt_set_card_lt_dim</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>nr</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.vec_space.lin_indpt_vs_def|fact"><span>vec_space.lin_indpt_vs_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>nr</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>]</span></span><span> 
    </span><span>vec_space.dim_is_n</span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_3213..3218"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3511..3516">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.lin_bound_arg_general_list|fact"><span class="entity_def" id="Linear_Bound_Argument.lin_bound_arg_general_list|thm"><span>lin_bound_arg_general_list</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>field</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>vec</span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.vec_space.lin_indpt_vs|const"><span>vec_space.lin_indpt_vs</span></a><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.lin_bound_arg_general_set|fact"><span>lin_bound_arg_general_set</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>nr</span></span></span><span class="main"><span>]</span></span><span> </span><span>distinct_card</span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_3511..3516"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3804..3809">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.lin_bound_arg_general|fact"><span class="entity_def" id="Linear_Bound_Argument.lin_bound_arg_general|thm"><span>lin_bound_arg_general</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>field</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="free"><span>nc</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.vec_space.lin_indpt_vs|const"><span>vec_space.lin_indpt_vs</span></a><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4018..4020">ss</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_3804..3809"><span>assms</span></a><span> </span><span>cols_dim</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>nc</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_3804..3809"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>cols_length</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.lin_bound_arg_general_list|fact"><span>lin_bound_arg_general_list</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>cols</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>nr</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4018..4020"><span>ss</span></a><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_3804..3809"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The linear bound argument lemma on a matrix requiring the lower level assumption on a linear
</span><span>combination. This removes the need to directly refer to any aspect of the linear algebra libraries</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4443..4448">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.lin_bound_argument|fact"><span class="entity_def" id="Linear_Bound_Argument.lin_bound_argument|thm"><span>lin_bound_argument</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>field</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="free"><span>nc</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><span>*<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>vec</span><span> </span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.lin_bound_arg_general|fact"><span>lin_bound_arg_general</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span>A</span></span></span><span>"</span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>nr</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>nc</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.vec_space.lin_comb_mat_lin_indpt_vs|fact"><span>vec_space.lin_comb_mat_lin_indpt_vs</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4443..4448"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4443..4448"><span>assms</span></a><span> </span><span>cols_dim</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4862..4864">mA</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mat_of_cols</span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mat_of_cols_def</span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4443..4448"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>vec</span><span> </span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>vec</span><span> </span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4443..4448"><span>assms</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>vec</span><span> </span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4443..4448"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>nc</span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4443..4448"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>mat_of_cols</span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>*<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>vec</span><span> </span><span class="main"><span>(</span></span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
      </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4862..4864"><span>mA</span></a><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_4443..4448"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A further extension to present the linear combination directly as a sum. This manipulation from 
</span><span>vector product to a summation was found to commonly be repeated in proofs applying this rule</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5579..5584">lemma</span></span></span><span> </span><span class="entity_def" id="Linear_Bound_Argument.lin_bound_argument2|fact"><span class="entity_def" id="Linear_Bound_Argument.lin_bound_argument2|thm"><span>lin_bound_argument2</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><span>field</span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="free"><span>nc</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>vec</span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>nc</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>nr</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.lin_bound_argument|fact"><span>lin_bound_argument</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>A</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>nr</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>nc</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_5579..5584"><span>assms</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_5579..5584"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><span>*<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>vec</span><span> </span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><span>vec</span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>nc</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mult_mat_vec_def</span><span> </span><span>scalar_prod_def</span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_5579..5584"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>vec</span><span> </span><span class="main"><span>(</span></span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>nc</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_5579..5584"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><span>*<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>vec</span><span> </span><span class="free"><span>nc</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_5579..5584"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>f</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#offset_5579..5584"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>


<body>
<div class="head">
<h1>Theory Fishers_Inequality</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Fishers_Inequality.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Fisher's Inequality</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>This theory presents the proof of Fisher's Inequality \cite{fisherExaminationDifferentPossible1940a}
</span><span> on BIBD's (i.e. uniform Fisher's) and the generalised nonuniform Fisher's Inequality</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Fishers_Inequality</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Rank_Argument_General.html"><span>Rank_Argument_General</span></a><span> </span><a href="Linear_Bound_Argument.html"><span>Linear_Bound_Argument</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Uniform Fisher's Inequality</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_bibd|locale"><span>ordered_bibd</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Row/Column transformation steps</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Following design theory lecture notes from MATH3301 at the University of Queensland
</span><span> \cite{HerkeLectureNotes2016}, a simple transformation to produce an upper triangular matrix using elementary
</span><span>row operations is to (1) Subtract the first row from each other row, and (2) add all columns to the first column</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_802..807">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step1_vals|fact"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step1_vals(5)|thm"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step1_vals(4)|thm"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step1_vals(3)|thm"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step1_vals(2)|thm"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step1_vals(1)|thm"><span class="entity_def" id="offset_808..830">transform_N_step1_vals</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="entity_def" id="offset_843..847">mdef</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>top left elem</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>first column ex. 1</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>first row ex. 1</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>diagonal ex. 1</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>everything else</span><span> âº</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>transpose_N_mult_diag</span><span> </span><span>v_non_zero</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>transpose_N_mult_off_diag</span><span> </span><span>v_non_zero</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span> </span><span>transpose_N_mult_dim</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_1769..1770">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><span>â </span></span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1798..1801">ail</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>transpose_N_mult_diag</span><span> </span><span>v_non_zero</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_843..847"><span>mdef</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>ijne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_1769..1770"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>aij</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_843..847"><span>mdef</span></a><span> </span><span>transpose_N_mult_off_diag</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_1769..1770"><span>a</span></a><span> </span><span>v_non_zero</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_1798..1801"><span>ail</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_first_row_to_multiple_index|fact"><span>add_first_row_to_multiple_index</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_1769..1770"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>mult_minus1</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_2386..2387">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2413..2416">ail</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span> </span><span>transpose_N_mult_off_diag</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_2386..2387"><span>a</span></a><span> </span><span>v_non_zero</span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span> </span><span>transpose_N_mult_diag</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_2386..2387"><span>a</span></a><span> </span><span>v_non_zero</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_2413..2416"><span>ail</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_first_row_to_multiple_index|fact"><span>add_first_row_to_multiple_index</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_2386..2387"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>uminus_add_conv_diff</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span> </span><span>transpose_N_mult_off_diag</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_2386..2387"><span>a</span></a><span> </span><span>v_non_zero</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_2413..2416"><span>ail</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_first_row_to_multiple_index|fact"><span>add_first_row_to_multiple_index</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_802..807"><span>assms</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_2386..2387"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add.commute</span><span> </span><span>add.right_inverse</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3209..3214">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step2_vals|fact"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step2_vals(4)|thm"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step2_vals(3)|thm"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step2_vals(2)|thm"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_N_step2_vals(1)|thm"><span class="entity_def" id="offset_3215..3237">transform_N_step2_vals</span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="entity_def" id="offset_3250..3254">mdef</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>top left element</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>top row</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>Diagonal</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span>  </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>Everything else</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_all_cols_to_first|fact"><span>add_all_cols_to_first</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_808..830"><span>transform_N_step1_vals</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_all_cols_to_first|fact"><span>add_all_cols_to_first</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_808..830"><span>transform_N_step1_vals</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_4169..4170">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4199..4203">size</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4264..4267">val</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3250..3254"><span>mdef</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_808..830"><span>transform_N_step1_vals</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4169..4170"><span>a</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4169..4170"><span>a</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_all_cols_to_first|fact"><span>add_all_cols_to_first</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4264..4267"><span>val</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4199..4203"><span>size</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>sum_constant</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_808..830"><span>transform_N_step1_vals</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4169..4170"><span>a</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4169..4170"><span>a</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_4889..4890">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_all_cols_to_first|fact"><span>add_all_cols_to_first</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4889..4890"><span>a</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_808..830"><span>transform_N_step1_vals</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_5125..5130">False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5145..5148">iin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4889..4890"><span>a</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5206..5210">cond</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5306..5309">val</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_808..830"><span>transform_N_step1_vals</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4889..4890"><span>a</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5125..5130"><span>False</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>DiffE</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5145..5148"><span>iin</span></a><span> </span><span>index_mult_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_mult_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_transpose_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>insertI1</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5534..5538">val2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3250..3254"><span>mdef</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_808..830"><span>transform_N_step1_vals</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4889..4890"><span>a</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5125..5130"><span>False</span></a><span>
       </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5206..5210"><span>cond</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5145..5148"><span>iin</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5719..5723">val3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_808..830"><span>transform_N_step1_vals</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_4889..4890"><span>a</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5125..5130"><span>False</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple_dim|fact"><span>add_row_to_multiple_dim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>v_non_zero</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3209..3214"><span>assms</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_all_cols_to_first|fact"><span>add_all_cols_to_first</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5125..5130"><span>False</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>$$</span></span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5145..5148"><span>iin</span></a><span> </span><span>finite_atLeastLessThan</span><span> </span><span>sum.remove</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5306..5309"><span>val</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5534..5538"><span>val2</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_5719..5723"><span>val3</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Transformed matrix is upper triangular</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6327..6332">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_upper_triangular|fact"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.transform_upper_triangular|thm"><span class="entity_def" id="offset_6333..6359">transform_upper_triangular</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span>mdef</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>upper_triangular</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>]</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3215..3237"><span>transform_N_step2_vals</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>upper_triangularI</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6327..6332"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Find the determinant of the $NN^T$ matrix using transformed matrix values</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.ordered_bibd.determinant_inc_mat_square|fact"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.determinant_inc_mat_square|thm"><span class="entity_def" id="offset_6685..6711">determinant_inc_mat_square</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
</span><span class="comment1"><span>â â¹ </span><span>Show the matrix is now lower triangular, therefore the det is the product of the sum of diagonal</span><span> âº</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6884..6886">cm</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span>ð</span><span> </span><span>ð</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>transpose_N_mult_dim</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_6989..6995">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>C</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â¡</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple|const"><span>add_row_to_multiple</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7133..7138">detbc</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple_det|fact"><span>add_row_to_multiple_det</span></a><span> </span><span>v_non_zero</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6884..6886"><span>cm</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_7233..7239">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>D</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>D</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols|const"><span>add_multiple_cols</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7301..7304">d00</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>D</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3215..3237"><span>transform_N_step2_vals</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7233..7239"><span>D_def</span></a><span> </span><span>v_non_zero</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7434..7438">ine0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="skolem"><span>D</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="skolem"><span>D</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7233..7239"><span>D_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>       
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7586..7594">diagnon0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>ð</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>D</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>   
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_3215..3237"><span>transform_N_step2_vals</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7434..7438"><span>ine0</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7233..7239"><span>D_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> Slow </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7731..7735">alll</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7803..7806">cmc</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span>ð</span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6884..6886"><span>cm</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_row_to_multiple_carrier|fact"><span>add_row_to_multiple_carrier</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7899..7905">dimgt2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="skolem"><span>D</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>t_lt_order</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7233..7239"><span>D_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>fstterm</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="skolem"><span>D</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>points_list_length</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>1</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>det</span><span> </span><span class="skolem"><span>D</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.add_multiple_cols_det|fact"><span>add_multiple_cols_det</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7731..7735"><span>alll</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7803..7806"><span>cmc</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7233..7239"><span>D_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7133..7138"><span>detbc</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>prod_list</span><span> </span><span class="main"><span>(</span></span><span>diag_mat</span><span> </span><span class="skolem"><span>D</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>det_upper_triangular</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6333..6359"><span>transform_upper_triangular</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7233..7239"><span>D_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>..&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="skolem"><span>D</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>D</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>prod_list_diag_prod</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>D</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7233..7239"><span>D_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6989..6995"><span>C_def</span></a><span class="main"><span>)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>D</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>..&lt;</span></span><span> </span><span>ð</span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>D</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7899..7905"><span>dimgt2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>prod.atLeast_Suc_lessThan</span><span> </span><span>v_non_zero</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>int</span><span> </span><span>ð</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7301..7304"><span>d00</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_7586..7594"><span>diagnon0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span> </span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>index_lt_replication</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>less_imp_le_nat</span><span> </span><span>of_nat_diff</span><span> </span><span>of_nat_mult</span><span> </span><span>of_nat_power</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Fisher's Inequality using the rank argument. 
</span><span>Note that to use the rank argument we must first map N to a real matrix. It is useful to explicitly
</span><span>include the parameters which should be used in the application of the </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> [</span><span>source</span><span>] "</span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank_argument_det|fact"><span>rank_argument_det</span></a><span>"</span><span class="antiquote"><span>}</span></span></span><span> lemma</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.ordered_bibd.Fishers_Inequality_BIBD|fact"><span class="entity_def" id="Fishers_Inequality.ordered_bibd.Fishers_Inequality_BIBD|thm"><span>Fishers_Inequality_BIBD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Rank_Argument_General.html#Rank_Argument_General.rank_argument_det|fact"><span>rank_argument_det</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>map_mat</span><span> </span><span>real_of_int</span><span> </span><span>N</span><span>"</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span>"</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>N</span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span>ð</span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>blocks_list_length</span><span> </span><span>N_carrier_mat</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?B</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_mat</span><span> </span><span class="main"><span>(</span></span><span>real_of_int</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span>N</span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9500..9507">b_split</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_mat</span><span> </span><span class="main"><span>(</span></span><span>real_of_int</span><span class="main"><span>)</span></span><span> </span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span class="main"><span>(</span></span><span>real_of_int</span><span class="main"><span>)</span></span><span> </span><span>N</span><span class="main"><span>)</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>semiring_hom.mat_hom_mult</span><span>  </span><span>of_int_hom.semiring_hom_axioms</span><span> </span><span>transpose_carrier_mat</span><span> </span><span>map_mat_transpose</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>N_carrier_mat</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9735..9737">db</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="var"><span>?B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_6685..6711"><span>determinant_inc_mat_square</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9837..9841">lhn0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>r_gzero</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>ð</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>Î</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>index_lt_replication</span><span> </span><span>zero_less_diff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>det_not_0</span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="var"><span>?B</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_9837..9841"><span>lhn0</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_9735..9737"><span>db</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>gr_implies_not0</span><span> </span><span>mult_is_0</span><span> </span><span>of_nat_eq_0_iff</span><span> </span><span>power_not_zero</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>det</span><span> </span><span class="main"><span>(</span></span><span>of_int_hom.mat_hom</span><span> </span><span>N</span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>of_int_hom.mat_hom</span><span> </span><span>N</span><span class="main"><span>)</span></span><span class="keyword1"><span><span class="hidden">â§</span><sup>T</sup></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span class="main"><span>::</span></span><span> </span><span>real</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_9500..9507"><span>b_split</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Generalised Fisher's Inequality</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.simp_ordered_const_intersect_design|locale"><span>simp_ordered_const_intersect_design</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Lemma to reason on sum coefficients</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10347..10352">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.simp_ordered_const_intersect_design.sum_split_coeffs_0|fact"><span class="entity_def" id="Fishers_Inequality.simp_ordered_const_intersect_design.sum_split_coeffs_0|thm"><span class="entity_def" id="offset_10353..10371">sum_split_coeffs_0</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span>
           </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="free"><span>j'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_10617..10622">cine0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="free"><span>j'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10642..10649">innerge</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>  </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>inter_num_le_block_size</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10347..10352"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10773..10778">lhsge</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum_bounded_below</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11002..11006">rhs0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10347..10352"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10347..10352"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10773..10778"><span>lhsge</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10347..10352"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11205..11214">lhs0inner</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>  </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10642..10649"><span>innerge</span></a><span> </span><span>sum_nonneg_eq_0_iff</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_11440..11444">True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11459..11462">cj0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>j'</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_11205..11214"><span>lhs0inner</span></a><span> </span><span>const_intersect_block_size_diff</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10347..10352"><span>assms</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_11440..11444"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.remove</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10347..10352"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10617..10622"><span>cine0</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_11459..11462"><span>cj0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_11002..11006"><span>rhs0</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10347..10352"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>  
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="free"><span>j'</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10617..10622"><span>cine0</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_11205..11214"><span>lhs0inner</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10347..10352"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The general non-uniform version of fisher's inequality is also known as the "Block town problem".
</span><span>In this case we are working in a constant intersect design, hence the inequality is the opposite
</span><span>way around compared to the BIBD version. The theorem below is the more traditional set theoretic 
</span><span>approach. This proof is based off one by Jukna \cite{juknaExtremalCombinatorics2011}</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.simp_ordered_const_intersect_design.general_fishers_inequality|fact"><span class="entity_def" id="Fishers_Inequality.simp_ordered_const_intersect_design.general_fishers_inequality|thm"><span>general_fishers_inequality</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>empty_inter_implies_b_lt_v</span><span> </span><span>v_non_zero</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_12550..12555">False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12568..12571">mge</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12602..12605">bge</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>b_positive</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12550..12555"><span>False</span></a><span> </span><span>blocks_list_length</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_12671..12677">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>NR</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>NR</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span>N</span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.lin_bound_argument2|fact"><span>lin_bound_argument2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>NR</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="skolem"><span>NR</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>lift_01_distinct_cols_N</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12671..12677"><span>NR_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="entity_def" id="offset_12865..12869">nrcm</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>NR</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span>ð</span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12671..12677"><span>NR_def</span></a><span> </span><span>N_carrier_mat_01_lift</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12947..12964">scalar_prod_real1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span>  </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>scalar_prod_block_size_lift_01</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12671..12677"><span>NR_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13091..13108">scalar_prod_real2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>ð</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>scalar_prod_inter_num_lift_01</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12671..12677"><span>NR_def</span></a><span> </span><span>indexed_const_intersect</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>vec</span><span> </span><span>ð</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="skolem"><span>NR</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>ballI</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>v</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_13408..13411">eq0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec</span><span> </span><span>ð</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>ð</span><span>"</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_13488..13491">vin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="skolem"><span>NR</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_13519..13525">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>c</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>c</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_13582..13587">v_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="skolem"><span>j'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_13609..13613">jvlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="skolem"><span>NR</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_13488..13491"><span>vin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>cols_length</span><span> </span><span>cols_nth</span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index_less_size_conv|fact"><span>index_less_size_conv</span></a><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.nth_index|fact"><span>nth_index</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13725..13732">dim_col</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12865..12869"><span>nrcm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="comment1"><span>â â¹ </span><span>Summation reasoning to obtain conclusion on coefficients</span><span> âº</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>vec</span><span> </span><span>ð</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>vec</span><span> </span><span>ð</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_prod_zero|fact"><span>vec_prod_zero</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_13408..13411"><span>eq0</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_13519..13525"><span>c_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.scalar_prod_double_sum_fn_vec|fact"><span>scalar_prod_double_sum_fn_vec</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>ð»</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span>"</span></span></span><span> </span><span class="quoted"><span>ð</span></span><span> </span><span class="quoted"><span class="skolem"><span>c</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_13725..13732"><span>dim_col</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12947..12964"><span>scalar_prod_real1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>NR</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>power2_eq_square</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_13091..13108"><span>scalar_prod_real2</span></a><span>  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
         </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span> </span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j1</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j1</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.comm_monoid_add_class.double_sum_mult_hom|fact"><span>double_sum_mult_hom</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ð</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult_of_nat_commute</span><span> </span><span>sum.cong</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
         </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.comm_ring_1_class.double_sum_split_square_diff|fact"><span>double_sum_split_square_diff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
         </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span><span> </span><span>power2_eq_square</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
         </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
         </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>sum.distrib</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>sum_rep</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="free"><span>ð</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> 
         </span><span class="free"><span>ð</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_10353..10371"><span>sum_split_coeffs_0</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>c</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12568..12571"><span>mge</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12602..12605"><span>bge</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_13609..13613"><span>jvlt</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_12865..12869"><span>nrcm</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_13519..13525"><span>c_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_13582..13587"><span>v_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Using the dual design concept, it is easy to translate the set theoretic general definition
</span><span>of Fisher's inequality to a more traditional design theoretic version on pairwise balanced designs. 
</span><span>Two versions of this are given using different trivial (but crucial) conditions on design properties</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_pairwise_balance|locale"><span>ordered_pairwise_balance</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16550..16559">corollary</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.ordered_pairwise_balance.general_nonuniform_fishers|fact"><span class="entity_def" id="Fishers_Inequality.ordered_pairwise_balance.general_nonuniform_fishers|thm"><span>general_nonuniform_fishers</span></span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>â â¹</span><span>only valid on incomplete designs</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>â¬</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>incomplete_block</span><span> </span><span class="bound"><span>bl</span></span><span>"</span></span></span><span> 
    </span><span class="comment1"><span>â â¹ </span><span>i.e. not a super trivial design with only complete blocks</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>â¬s*</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Dual_Systems.html#Dual_Systems.dual_blocks|const"><span>dual_blocks</span></a><span> </span><span>ð±</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>dual_blocks_ordered_eq</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> des</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Design_Extras.html#Design_Extras.simple_const_intersect_design|locale"><span>simple_const_intersect_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>set</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>â¬s*</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_16550..16559"><span>assms</span></a><span> </span><span>dual_is_simp_const_inter_des</span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16999..17001">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> odes</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.simp_ordered_const_intersect_design|locale"><span>simp_ordered_const_intersect_design</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â¬s*</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>Î</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>distinct_upt</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_16999..17001"><span>des.wellformed</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17126..17128">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>blast</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>â¬s*</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>length</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17126..17128"><span>odes.general_fishers_inequality</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17126..17128"><span>odes.blocks_list_length</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17126..17128"><span>odes.points_list_length</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>dual_blocks_len</span><span> </span><span>points_list_length</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17427..17436">corollary</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality.ordered_pairwise_balance.general_nonuniform_fishers_comp|fact"><span class="entity_def" id="Fishers_Inequality.ordered_pairwise_balance.general_nonuniform_fishers_comp|thm"><span>general_nonuniform_fishers_comp</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span>â¬</span><span> </span><span>ð±</span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>Î</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹ </span><span>i.e. not a super trivial design with only complete blocks and single blocks</span><span> âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_17624..17630">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>B</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.removeAll_mset|const"><span>removeAll_mset</span></a><span> </span><span>ð±</span><span> </span><span>â¬</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17673..17682">b_smaller</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17624..17630"><span>B_def</span></a><span> </span><a class="entity_ref" href="Set_Multiset_Extras.html#Set_Multiset_Extras.removeAll_size_lt|fact"><span>removeAll_size_lt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17747..17755">b_incomp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>bl</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="bound"><span>bl</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wellformed</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17624..17630"><span>B_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>psubsetI</span><span> </span><span>psubset_card_mono</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17864..17872">index_gt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>count</span><span> </span><span>â¬</span><span> </span><span>ð±</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17427..17436"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> pbd</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Design_Theory/Block_Designs.html#Block_Designs.pairwise_balance|locale"><span>pairwise_balance</span></a><span> </span><span class="quoted"><span>ð±</span></span><span> </span><span class="quoted"><span class="skolem"><span>B</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>count</span><span> </span><span>â¬</span><span> </span><span>ð±</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>remove_all_complete_blocks_pbd</span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17624..17630"><span>B_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17427..17436"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18033..18035">by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Bs</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_18061..18062">m</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset</span><span> </span><span class="skolem"><span>Bs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_mset</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> opbd</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_pairwise_balance|locale"><span>ordered_pairwise_balance</span></a><span> </span><span class="quoted"><span class="free"><span>ð±s</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Bs</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Î</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span>count</span><span> </span><span>â¬</span><span> </span><span>ð±</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18180..18182">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_18033..18035"><span>pbd.ordered_pbdI</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_18061..18062"><span>m</span></a><span> </span><span>distinct</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span>size</span><span> </span><span class="skolem"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17747..17755"><span>b_incomp</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_18180..18182"><span>opbd.general_nonuniform_fishers</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17864..17872"><span>index_gt</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_18061..18062"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_17673..17682"><span>b_smaller</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality.html#offset_18061..18062"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>

<body>
<div class="head">
<h1>Theory Vector_Matrix_Mod</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Vector_Matrix_Mod.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Matrices/Vectors mod x</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>This section formalises operations and properties mod some integer x on integer matrices and 
</span><span>vectors. Much of this file was no longer needed for fishers once the generic idea of lifting a 0-1 matrix
</span><span>was introduced, however it is left as an example for future work on matrices mod n, beyond 0-1 matrices</span><span>  </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Vector_Matrix_Mod</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Matrix_Vector_Extras.html"><span>Matrix_Vector_Extras</span></a><span>
</span><a href="../Berlekamp_Zassenhaus/Finite_Field.html"><span>Berlekamp_Zassenhaus.Finite_Field</span></a><span> </span><a href="../Berlekamp_Zassenhaus/More_Missing_Multiset.html"><span>Berlekamp_Zassenhaus.More_Missing_Multiset</span></a><span>  
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Simple abbreviations for main mapping functions</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>finite</span><span> </span><span>mod_ring</span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>int</span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>to_int_mat</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>map_mat</span><span> </span><span>to_int_mod_ring</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>finite</span><span> </span><span>mod_ring</span><span> </span><span>vec</span><span> </span><span class="main"><span>â</span></span><span> </span><span>int</span><span> </span><span>vec</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>to_int_vec</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>map_vec</span><span> </span><span>to_int_mod_ring</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.vec_hom_smult2|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.vec_hom_smult|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_sum_mat|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mat_hom_pow|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mult_mat_vec_hom|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mat_hom_mult|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mat_hom_one|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.vec_hom_zero|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_mult_eq_zero|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.semiring_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_power|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.prod_list_map_hom|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_prod_list|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.monoid_mult_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.semigroup_mult_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_mult|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.times_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_one|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.one_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.map_poly_hom_add|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_sum_mset|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_sum|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.comm_monoid_add_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.ab_semigroup_add_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_add_eq_zero|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.sum_list_map_hom|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_sum_list|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.monoid_add_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.semigroup_add_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_add|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.plus_hom_axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.vec_hom_smult2|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.vec_hom_smult|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_sum_mat|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mat_hom_pow|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mult_mat_vec_hom|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mat_hom_mult|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mat_hom_one|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.vec_hom_zero|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_mult_eq_zero|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_prod_list|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_add_eq_zero|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_sum_list|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.semiring_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_power|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.prod_list_map_hom|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.monoid_mult_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.semigroup_mult_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_mult|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.times_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_one|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.one_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.map_poly_hom_add|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_sum_mset|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_sum|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.comm_monoid_add_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.ab_semigroup_add_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.sum_list_map_hom|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.monoid_add_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.semigroup_add_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.hom_add|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.plus_hom_axioms|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.vec_hom|const"><span class="entity_def" id="Vector_Matrix_Mod.of_int_mod_ring_hom_sr.mat_hom|const"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> of_int_mod_ring_hom_sr</span><span class="main"><span>:</span></span><span> </span><span>semiring_hom</span><span> </span><span class="quoted"><span>of_int_mod_ring</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span>of_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>of_int_mod_ring</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>of_int_mod_ring</span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span class="operator"><span>presburger</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_int_mod_ring</span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>of_int_hom.hom_one</span><span> </span><span>of_int_of_int_mod_ring</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span>of_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>of_int_mod_ring</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>of_int_mod_ring</span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mod_mult_eq</span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>NOTE: The context directly below is copied from Matrix Vector Extras, as for some reason 
</span><span>they can't be used locally if not? Ideally remove in future if possible</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span>inj_zero_hom</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="Vector_Matrix_Mod.of_int_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_real_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_rat_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.monom_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.pCons_0_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_poly_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.inj_zero_hom.vec_hom_zero_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_real_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_rat_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.monom_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.pCons_0_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_poly_hom.vec_hom_zero_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.inj_zero_hom.vec_hom_zero_iff|thm"><span>vec_hom_zero_iff</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>index_map_vec</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>i</span></span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1665..1666">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_1672..1676">main</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_1665..1666"><span>this</span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>vec_eq_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_1672..1676"><span>main</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="Vector_Matrix_Mod.of_int_hom.mat_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_real_hom.mat_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mod_ring_hom.mat_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_rat_hom.mat_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.monom_hom.mat_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.pCons_0_hom.mat_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_poly_hom.mat_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.inj_zero_hom.mat_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_hom.mat_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_real_hom.mat_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_rat_hom.mat_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.monom_hom.mat_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.pCons_0_hom.mat_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_poly_hom.mat_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mod_ring_hom.mat_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.inj_zero_hom.mat_hom_inj|thm"><span>mat_hom_inj</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_mat</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_mat</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>mat_eq_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="Vector_Matrix_Mod.of_int_hom.vec_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_real_hom.vec_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_rat_hom.vec_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.monom_hom.vec_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.pCons_0_hom.vec_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_poly_hom.vec_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.inj_zero_hom.vec_hom_inj|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_hom.vec_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_real_hom.vec_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_rat_hom.vec_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.monom_hom.vec_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.pCons_0_hom.vec_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_poly_hom.vec_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_inj|thm"><span class="entity_def" id="Vector_Matrix_Mod.inj_zero_hom.vec_hom_inj|thm"><span class="entity_def" id="offset_1853..1864">vec_hom_inj</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>w</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>vec_eq_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  </span><span class="entity_def" id="Vector_Matrix_Mod.of_int_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_real_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_rat_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.monom_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.pCons_0_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_poly_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.inj_zero_hom.vec_hom_set_distinct_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.of_int_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_real_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_rat_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.monom_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.pCons_0_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.of_int_poly_hom.vec_hom_set_distinct_iff|thm"><span class="entity_def" id="Vector_Matrix_Mod.inj_zero_hom.vec_hom_set_distinct_iff|thm"><span>vec_hom_set_distinct_iff</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>vec</span><span> </span><span>list</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span class="free"><span>hom</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_1853..1864"><span>vec_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Basic Mod Context</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.intro|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.intro|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod|locale"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod|const"><span class="entity_def" id="offset_2144..2151">mat_mod</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>int</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.non_triv_m|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.non_triv_m|thm"><span class="entity_def" id="offset_2177..2187">non_triv_m</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>First define the mod operations on vectors</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_def_raw|axiom"><span class="entity_def" id="offset_2256..2266">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod.cong|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod.cong|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod|const"><span class="entity_def" id="offset_2267..2274">vec_mod</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>vec</span><span> </span><span class="main"><span>â</span></span><span> </span><span>int</span><span> </span><span>vec</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>vec_mod</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>map_vec</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> Parse tree ambiguity is caused by bad definitions in the MPoly theory files. Issue raised
on Isabelle Mailing List </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_dim|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_dim|thm"><span class="entity_def" id="offset_2473..2484">vec_mod_dim</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_vec</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2256..2266"><span>vec_mod_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_index|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_index|thm"><span class="entity_def" id="offset_2561..2574">vec_mod_index</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2256..2266"><span>vec_mod_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_index_same|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_index_same|thm"><span class="entity_def" id="offset_2667..2685">vec_mod_index_same</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_setI2|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_setI2|thm"><span class="entity_def" id="offset_2776..2785">vec_setI2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>vec_setI</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_eq|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_eq|thm"><span class="entity_def" id="offset_2855..2865">vec_mod_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2776..2785"><span>vec_setI2</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2667..2685"><span>vec_mod_index_same</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>subset_iff</span><span> </span><span>zmod_trivial_iff</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_set_vec_same|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_set_vec_same|thm"><span>vec_mod_set_vec_same</span></span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2855..2865"><span>vec_mod_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Define the mod operation on matrices</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_def_raw|axiom"><span class="entity_def" id="offset_3186..3196">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod.cong|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod.cong|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod|const"><span class="entity_def" id="offset_3197..3204">mat_mod</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>int</span><span> </span><span>mat</span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mat_mod</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>map_mat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_dim|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_dim(2)|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_dim(1)|thm"><span class="entity_def" id="offset_3282..3293">mat_mod_dim</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3186..3196"><span>mat_mod_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_index|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_index|thm"><span class="entity_def" id="offset_3408..3421">mat_mod_index</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3186..3196"><span>mat_mod_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_index_same|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_index_same|thm"><span>mat_mod_index_same</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3186..3196"><span>mat_mod_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.elements_matI2|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.elements_matI2|thm"><span class="entity_def" id="offset_3715..3729">elements_matI2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3805..3810">lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_elements_in|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_elements_in|thm"><span class="entity_def" id="offset_3811..3830">mat_mod_elements_in</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_3959..3962">ilt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_3984..3987">jlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3805..3810"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3959..3962"><span>ilt</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3984..3987"><span>jlt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3715..3729"><span>elements_matI2</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3282..3293"><span>mat_mod_dim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3282..3293"><span>mat_mod_dim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_elements_map|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_elements_map|thm"><span>mat_mod_elements_map</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3811..3830"><span>mat_mod_elements_in</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>local.mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>  
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4586..4591">lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_eq_cond|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_eq_cond|thm"><span class="entity_def" id="offset_4592..4607">mat_mod_eq_cond</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_4586..4591"><span>assms</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3715..3729"><span>elements_matI2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_eq_elements_cond|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_eq_elements_cond|thm"><span>mat_mod_eq_elements_cond</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>elements_mat</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_4592..4607"><span>mat_mod_eq_cond</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_vec_mod_row|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_vec_mod_row|thm"><span class="entity_def" id="offset_5036..5055">mat_mod_vec_mod_row</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3186..3196"><span>mat_mod_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2256..2266"><span>vec_mod_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_vec_mod_col|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_vec_mod_col|thm"><span class="entity_def" id="offset_5168..5187">mat_mod_vec_mod_col</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3186..3196"><span>mat_mod_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2256..2266"><span>vec_mod_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.count_vec_mod_eq|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.count_vec_mod_eq|thm"><span class="entity_def" id="offset_5300..5316">count_vec_mod_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2855..2865"><span>vec_mod_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.elems_mat_setv_row_0m|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.elems_mat_setv_row_0m|thm"><span class="entity_def" id="offset_5417..5438">elems_mat_setv_row_0m</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.row_elems_subset_mat|fact"><span>row_elems_subset_mat</span></a><span> </span><span>subset_trans</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.elems_mat_setv_col_0m|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.elems_mat_setv_col_0m|thm"><span class="entity_def" id="offset_5565..5586">elems_mat_setv_col_0m</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>set<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.col_elems_subset_mat|fact"><span>col_elems_subset_mat</span></a><span> </span><span>subset_trans</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_count_row_eq|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_count_row_eq|thm"><span>mat_mod_count_row_eq</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_5300..5316"><span>count_vec_mod_eq</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_5036..5055"><span>mat_mod_vec_mod_row</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_5417..5438"><span>elems_mat_setv_row_0m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_count_col_eq|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_count_col_eq|thm"><span>mat_mod_count_col_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_5300..5316"><span>count_vec_mod_eq</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_5168..5187"><span>mat_mod_vec_mod_col</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_5565..5586"><span>elems_mat_setv_col_0m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mod_mat_one|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mod_mat_one|thm"><span class="entity_def" id="offset_6134..6145">mod_mat_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3186..3196"><span>mat_mod_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2177..2187"><span>non_triv_m</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mod_mat_zero|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mod_mat_zero|thm"><span>mod_mat_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="free"><span>nc</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="free"><span>nc</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3186..3196"><span>mat_mod_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2177..2187"><span>non_triv_m</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_unit|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_unit|thm"><span class="entity_def" id="offset_6357..6369">vec_mod_unit</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="main"><span>(</span></span><span>unit_vec</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>unit_vec</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>unit_vec_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2256..2266"><span>vec_mod_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2177..2187"><span>non_triv_m</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_zero|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.vec_mod_zero|thm"><span>vec_mod_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2177..2187"><span>non_triv_m</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_cond_iff|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod.mat_mod_cond_iff|thm"><span>mat_mod_cond_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_4592..4607"><span>mat_mod_eq_cond</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Mod Type</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>The below locale takes lemmas from the Poly Mod Finite Field theory in the Berlekamp Zassenhaus
</span><span>AFP entry, however has removed any excess material on polynomials mod, and only included the general 
</span><span>factors. Ideally, this could be used as the base locale for both in the future</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.intro|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.intro|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type|locale"><span class="entity_def" id="Vector_Matrix_Mod.mod_type|const"><span>mod_type</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>int</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>ty</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span>nontriv</span><span> </span><span>itself</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.m|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.m|thm"><span class="entity_def" id="offset_7082..7083">m</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.m1|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.m1|thm"><span class="entity_def" id="offset_7113..7115">m1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>nontriv</span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_def_raw|axiom"><span class="entity_def" id="offset_7172..7182">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M.cong|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M.cong|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M|const"><span class="entity_def" id="offset_7183..7184">M</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span class="main"><span>â</span></span><span> </span><span>int</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_0|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_0|thm"><span>M_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_M|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_M|thm"><span>M_M</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_plus|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_plus(2)|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_plus(1)|thm"><span>M_plus</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><span class="dynamic"><span class="dynamic"><span>mod_simps</span></span></span><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_minus|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_minus(2)|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_minus(1)|thm"><span>M_minus</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><span class="dynamic"><span class="dynamic"><span>mod_simps</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_times|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_times(2)|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_times(1)|thm"><span>M_times</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><span class="dynamic"><span class="dynamic"><span>mod_simps</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_1|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_1|thm"><span>M_1</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7113..7115"><span>m1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_sum|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_sum|thm"><span>M_sum</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span>sum</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>infinite_finite_induct</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_7852..7858">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7852..7858"><span>insert</span></a><span class="main"><span>(</span></span><span>1-2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7852..7858"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7852..7858"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.inv_M_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.inv_M_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.inv_M_def_raw|axiom"><span class="entity_def" id="offset_8082..8092">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.inv_M.cong|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.inv_M.cong|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.inv_M|const"><span class="entity_def" id="offset_8093..8098">inv_M</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span class="main"><span>â</span></span><span> </span><span>int</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv_M</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_inv_M_id|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_inv_M_id|thm"><span>M_inv_M_id</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8093..8098"><span>inv_M</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8082..8092"><span>inv_M_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_Rel_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_Rel_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_Rel_def_raw|axiom"><span class="entity_def" id="offset_8251..8261">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_Rel.cong|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_Rel.cong|thm"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_Rel|const"><span class="entity_def" id="offset_8262..8267">M_Rel</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M_Rel</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x'</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x'</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.to_int_mod_ring_plus|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.to_int_mod_ring_plus|thm"><span>to_int_mod_ring_plus</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.to_int_mod_ring_times|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.to_int_mod_ring_times|thm"><span>to_int_mod_ring_times</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.eq_M_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.eq_M_Rel|thm"><span>eq_M_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(=)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8251..8261"><span>M_Rel_def</span></a><span> </span><span>rel_fun_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.one_M_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.one_M_Rel|thm"><span>one_M_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8251..8261"><span>M_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.zero_M_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.zero_M_Rel|thm"><span>zero_M_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8251..8261"><span>M_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_to_int_mod_ring|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.M_to_int_mod_ring|thm"><span class="entity_def" id="offset_8999..9016">M_to_int_mod_ring</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.right_total_M_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.right_total_M_Rel|thm"><span class="entity_def" id="offset_9137..9154">right_total_M_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>right_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>right_total_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8251..8261"><span>M_Rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8999..9016"><span>M_to_int_mod_ring</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.left_total_M_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.left_total_M_Rel|thm"><span class="entity_def" id="offset_9269..9285">left_total_M_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>left_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>left_total_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8251..8261"><span>M_Rel_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="bound"><span>x'</span></span><span>"</span></span></span><span>  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>exI</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>of_int</span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>x</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.bi_total_M_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.bi_total_M_Rel|thm"><span>bi_total_M_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bi_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_9137..9154"><span>right_total_M_Rel</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_9269..9285"><span>left_total_M_Rel</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>bi_totalI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.to_int_mod_ring_of_int_M|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.to_int_mod_ring_of_int_M|thm"><span>to_int_mod_ring_of_int_M</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span>of_int</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7183..7184"><span>M</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mod_type.UNIV_M_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mod_type.UNIV_M_Rel|thm"><span>UNIV_M_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_set</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span>UNIV</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>rel_set_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8251..8261"><span>M_Rel_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7172..7182"><span>M_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><span>to_int_mod_ring_of_int_mod_ring</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Mat mod type</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Define a context to work on matrices and vectors of type </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>typ</span></span><span> </span><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.axioms|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.intro|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.axioms(2)|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.axioms(1)|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.intro|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type_def|axiom"><span class="entity_def" id="offset_10102..10108">locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type|locale"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type|const"><span>mat_mod_type</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.mat_mod|locale"><span>mat_mod</span></a><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.mod_type|locale"><span>mod_type</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_mod_ring_plus|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_mod_ring_plus|thm"><span>to_int_mod_ring_plus</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_mod_ring_times|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_mod_ring_times|thm"><span>to_int_mod_ring_times</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Set up transfer relation for matrices and vectors</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_def_raw|axiom"><span class="entity_def" id="offset_10511..10521">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel.cong|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel.cong|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel|const"><span class="entity_def" id="offset_10522..10528">MM_Rel</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>mat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>MM_Rel</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f'</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f'</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MV_Rel_def|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MV_Rel_def|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MV_Rel_def_raw|axiom"><span class="entity_def" id="offset_10620..10630">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MV_Rel.cong|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MV_Rel.cong|thm"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MV_Rel|const"><span class="entity_def" id="offset_10631..10637">MV_Rel</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>vec</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>vec</span><span> </span><span class="main"><span>â</span></span><span> </span><span>bool</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>MV_Rel</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v'</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v'</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_mat_index|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_mat_index|thm"><span class="entity_def" id="offset_10735..10751">to_int_mat_index</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_vec_index|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_vec_index|thm"><span class="entity_def" id="offset_10867..10883">to_int_vec_index</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="free"><span>v</span></span><span>  </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_dim_row_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_dim_row_MM_Rel|thm"><span class="entity_def" id="offset_10970..10987">eq_dim_row_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span>dim_row</span><span> </span><span>dim_row</span><span> </span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><span>index_map_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3282..3293"><span>mat_mod_dim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>rel_funI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.lt_dim_row_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.lt_dim_row_MM_Rel|thm"><span class="entity_def" id="offset_11125..11142">lt_dim_row_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10970..10987"><span>eq_dim_row_MM_Rel</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><span>rel_fun_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_dim_col_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_dim_col_MM_Rel|thm"><span class="entity_def" id="offset_11308..11325">eq_dim_col_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span>dim_col</span><span> </span><span>dim_col</span><span> </span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><span>rel_fun_def</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>index_map_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3282..3293"><span>mat_mod_dim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.lt_dim_col_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.lt_dim_col_MM_Rel|thm"><span class="entity_def" id="offset_11467..11484">lt_dim_col_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_11308..11325"><span>eq_dim_col_MM_Rel</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><span>rel_fun_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_dim_vec_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_dim_vec_MV_Rel|thm"><span>eq_dim_vec_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span>dim_vec</span><span> </span><span>dim_vec</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> </span><span>rel_fun_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>index_map_vec</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2473..2484"><span>vec_mod_dim</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.lt_dim_vec_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.lt_dim_vec_MV_Rel|thm"><span class="entity_def" id="offset_11806..11823">lt_dim_vec_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> </span><span>rel_fun_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>index_map_vec</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2473..2484"><span>vec_mod_dim</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_MM_Rel|thm"><span>eq_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>f'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>f'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(=)</span></span><span> </span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><span>rel_fun_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mod_ring_hom.mat_hom_inj|fact"><span>to_int_mod_ring_hom.mat_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_MV_Rel|thm"><span>eq_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(=)</span></span><span> </span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> </span><span>rel_fun_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_inj|fact"><span>to_int_mod_ring_hom.vec_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.index_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.index_MV_Rel|thm"><span>index_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span> </span><span class="main"><span>===&gt;</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_vec</span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_11806..11823"><span>lt_dim_vec_MV_Rel</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10102..10108"><span>M_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10102..10108"><span>M_def</span></a><span> </span><span>rel_fun_def</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10867..10883"><span>to_int_vec_index</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2561..2574"><span>vec_mod_index</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.index_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.index_MM_Rel|thm"><span>index_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span> </span><span class="main"><span>===&gt;</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_8262..8267"><span>M_Rel</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>
   </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_11125..11142"><span>lt_dim_row_MM_Rel</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_11467..11484"><span>lt_dim_col_MM_Rel</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span>  </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10102..10108"><span>M_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10102..10108"><span>M_def</span></a><span> </span><span>rel_fun_def</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3408..3421"><span>mat_mod_index</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10735..10751"><span>to_int_mat_index</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13024..13029">lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.index_MM_Rel_explicit|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.index_MM_Rel_explicit|thm"><span>index_MM_Rel_explicit</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>N'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N'</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13198..13200">eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="free"><span>N'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N'</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_13024..13029"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_13024..13029"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_13024..13029"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>index_map_mat</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.mat_mod.mat_mod_dim|fact"><span>mat_mod.mat_mod_dim</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2144..2151"><span>mat_mod_axioms</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="free"><span>N'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_13024..13029"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="free"><span>N'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$$</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3408..3421"><span>mat_mod_index</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_13198..13200"><span>eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_13024..13029"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_13024..13029"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.one_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.one_MV_Rel|thm"><span>one_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>(</span></span><span>unit_vec</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>unit_vec</span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_6357..6369"><span>vec_mod_unit</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2177..2187"><span>non_triv_m</span></a><span> </span><span>unit_vec_def</span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2177..2187"><span>non_triv_m</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.one_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.one_MM_Rel|thm"><span>one_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>1<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_6134..6145"><span>mod_mat_one</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.zero_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.zero_MM_Rel|thm"><span>zero_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="free"><span>nc</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>m</sub></span></span><span> </span><span class="free"><span>nr</span></span><span> </span><span class="free"><span>nc</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.zero_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.zero_MV_Rel|thm"><span>zero_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.right_unique_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.right_unique_MV_Rel|thm"><span>right_unique_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>right_unique</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>right_unique_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_inj|fact"><span>to_int_mod_ring_hom.vec_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.right_unique_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.right_unique_MM_Rel|thm"><span>right_unique_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>right_unique</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>right_unique_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mod_ring_hom.mat_hom_inj|fact"><span>to_int_mod_ring_hom.mat_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mod_to_int_mod_ring|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mod_to_int_mod_ring|thm"><span class="entity_def" id="offset_14450..14469">mod_to_int_mod_ring</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>to_int_mod_ring</span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mat_mod_to_int_mat|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mat_mod_to_int_mat|thm"><span class="entity_def" id="offset_14577..14595">mat_mod_to_int_mat</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>mat</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_14450..14469"><span>mod_to_int_mod_ring</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_matI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.vec_mod_to_int_vec|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.vec_mod_to_int_vec|thm"><span class="entity_def" id="offset_14722..14740">vec_mod_to_int_vec</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>vec</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_14450..14469"><span>mod_to_int_mod_ring</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>eq_vecI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.right_total_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.right_total_MM_Rel|thm"><span class="entity_def" id="offset_14867..14885">right_total_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>right_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>right_total_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="skolem"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>exI</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a></a></a><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>M</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_14577..14595"><span>mat_mod_to_int_mat</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.right_total_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.right_total_MV_Rel|thm"><span class="entity_def" id="offset_15116..15134">right_total_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>right_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>right_total_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>vec</span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>exI</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a></a></a><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>v</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_14722..14740"><span>vec_mod_to_int_vec</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_mod_ring_of_int_mod|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.to_int_mod_ring_of_int_mod|thm"><span class="entity_def" id="offset_15365..15391">to_int_mod_ring_of_int_mod</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><span>of_int</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>mod</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_7082..7083"><span>m</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.vec_mod_v_representative|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.vec_mod_v_representative|thm"><span class="entity_def" id="offset_15485..15509">vec_mod_v_representative</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="main"><span>(</span></span><span>map_vec</span><span> </span><span>of_int</span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>vec</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10102..10108"><span>mat_mod_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15365..15391"><span>to_int_mod_ring_of_int_mod</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mat_mod_N_representative|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mat_mod_N_representative|thm"><span class="entity_def" id="offset_15648..15672">mat_mod_N_representative</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="main"><span>(</span></span><span>map_mat</span><span> </span><span>of_int</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>mat</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10102..10108"><span>mat_mod_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15365..15391"><span>to_int_mod_ring_of_int_mod</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.left_total_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.left_total_MV_Rel|thm"><span class="entity_def" id="offset_15811..15828">left_total_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>left_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>left_total_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15485..15509"><span>vec_mod_v_representative</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.left_total_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.left_total_MM_Rel|thm"><span class="entity_def" id="offset_15959..15976">left_total_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>left_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>left_total_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15648..15672"><span>mat_mod_N_representative</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.bi_total_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.bi_total_MV_Rel|thm"><span>bi_total_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bi_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15116..15134"><span>right_total_MV_Rel</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15811..15828"><span>left_total_MV_Rel</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>bi_totalI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.bi_total_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.bi_total_MM_Rel|thm"><span>bi_total_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bi_total</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_14867..14885"><span>right_total_MM_Rel</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15959..15976"><span>left_total_MM_Rel</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>bi_totalI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.domain_MV_rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.domain_MV_rel|thm"><span>domain_MV_rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_domain_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Domainp</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>True</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>vec</span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Domainp</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>True</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> </span><span>Domainp.simps</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15485..15509"><span>vec_mod_v_representative</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.domain_MM_rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.domain_MM_rel|thm"><span>domain_MM_rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_domain_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Domainp</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>True</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>mat</span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Domainp</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>True</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> </span><span>Domainp.simps</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15648..15672"><span>mat_mod_N_representative</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mem_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mem_MV_Rel|thm"><span>mem_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span>rel_set</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>Y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>Y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(â)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>rel_funI</span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_16971..16973">xy</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_16992..16994">XY</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_set</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="bound"><span>x'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_17087..17090">x'X</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>xx'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="skolem"><span>x'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_16971..16973"><span>xy</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17160..17163">x'y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="skolem"><span>x'</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span>rel_setD1</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_16992..16994"><span>XY</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17087..17090"><span>x'X</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="skolem"><span>x'</span></span><span> </span><span class="skolem"><span>y'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17160..17163"><span>x'y</span></a><span>
     </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mod_ring_hom.vec_hom_inj|fact"><span>to_int_mod_ring_hom.vec_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_17390..17396">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span>rel_setD2</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_16992..16994"><span>XY</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17390..17396"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_17450..17453">x'X</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_17468..17471">x'y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="skolem"><span>x'</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_16971..16973"><span>xy</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17468..17471"><span>x'y</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="skolem"><span>x'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17450..17453"><span>x'X</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="bound"><span>x'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mem_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.mem_MM_Rel|thm"><span>mem_MM_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span>rel_set</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>Y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>Y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(â)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>rel_funI</span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_17797..17799">xy</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_17818..17820">XY</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_set</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>x'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_17913..17916">x'X</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>xx'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="skolem"><span>x'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17797..17799"><span>xy</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17986..17989">x'y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="skolem"><span>x'</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span>rel_setD1</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17818..17820"><span>XY</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17913..17916"><span>x'X</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="skolem"><span>x'</span></span><span> </span><span class="skolem"><span>y'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17986..17989"><span>x'y</span></a><span>
     </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mod_ring_hom.mat_hom_inj|fact"><span>to_int_mod_ring_hom.mat_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_18216..18222">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span>rel_setD2</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17818..17820"><span>XY</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_18216..18222"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_18276..18279">x'X</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_18294..18297">x'y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="skolem"><span>x'</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_17797..17799"><span>xy</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_18294..18297"><span>x'y</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="skolem"><span>x'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_18276..18279"><span>x'X</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>x'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.conversep_MM_Rel_OO_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.conversep_MM_Rel_OO_MM_Rel|thm"><span>conversep_MM_Rel_OO_MM_Rel</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span class="main"><span>Â¯Â¯</span></span><span> </span><span class="keyword1"><span>OO</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(=)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_14577..14595"><span>mat_mod_to_int_mat</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>OO_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mod_ring_hom.mat_hom_inj|fact"><span>to_int_mod_ring_hom.mat_hom_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_OO_conversep_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_OO_conversep_MM_Rel|thm"><span>MM_Rel_OO_conversep_MM_Rel</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="keyword1"><span>OO</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span class="main"><span>Â¯Â¯</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>M'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>OO_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_15648..15672"><span>mat_mod_N_representative</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.conversep_MM_Rel_OO_eq_m|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.conversep_MM_Rel_OO_eq_m|thm"><span>conversep_MM_Rel_OO_eq_m</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span class="main"><span>Â¯Â¯</span></span><span> </span><span class="keyword1"><span>OO</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>M'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span class="main"><span>Â¯Â¯</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>OO_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_m_OO_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_m_OO_MM_Rel|thm"><span>eq_m_OO_MM_Rel</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>M'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M'</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>OO</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>OO_def</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_mset_MM_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.eq_mset_MM_Rel|thm"><span>eq_mset_MM_Rel</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>rel_mset</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span>rel_mset</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>rel_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>M'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(=)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>rel_funI</span><span> </span><span>iffI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_19288..19290">AX</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_mset</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_19318..19320">BY</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_mset</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_19359..19361">AB</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>M'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M'</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_19288..19290"><span>AX</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_mset</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span class="main"><span>Â¯Â¯</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19453..19455">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>multiset.rel_flip</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19490..19494">note</span></span></span><span> </span><span>rel_mset_OO</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_19453..19455"><span>this</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_19359..19361"><span>AB</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span>rel_mset_OO</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_19490..19494"><span>this</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_19318..19320"><span>BY</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>multiset.rel_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_19318..19320"><span>BY</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_mset</span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span class="main"><span>Â¯Â¯</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19665..19667">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>multiset.rel_flip</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span>rel_mset_OO</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_19288..19290"><span>AX</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_19665..19667"><span>this</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>rel_mset</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>M'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3197..3204"><span>mat_mod</span></a><span> </span><span class="bound"><span>M'</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.vec_mset_MV_Rel|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.vec_mset_MV_Rel|thm"><span>vec_mset_MV_Rel</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>transfer_rule</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span>  </span><span class="main"><span>===&gt;</span></span><span> </span><span class="main"><span>(=)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span>image_mset</span><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> </span><span>rel_fun_def</span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>allI</span><span> </span><span>impI</span><span> </span><span>subset_antisym</span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>int</span><span> </span><span>vec</span><span>"</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span>  </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>mod_ring</span><span> </span><span>vec</span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_20078..20082">assm</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>image_mset</span><span> </span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_zero_hom.vec_hom_mset|fact"><span>inj_zero_hom.vec_hom_mset</span></a><span> </span><span>to_int_mod_ring_hom.inj_zero_hom_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>image_mset</span><span> </span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_20078..20082"><span>assm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20373..20378">lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.vec_count_MV_Rel_direct|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.vec_count_MV_Rel_direct|thm"><span>vec_count_MV_Rel_direct</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="free"><span>v1</span></span><span> </span><span class="free"><span>v2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v2</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20514..20521">eq_vecs</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_vec|const"><span>to_int_vec</span></a><span> </span><span class="free"><span>v2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_20373..20378"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v2</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v2</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20661..20662">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>image_mset</span><span> </span><span>to_int_mod_ring</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="free"><span>v2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Multiset_More.html#Multiset_More.count_image_mset_inj|fact"><span>count_image_mset_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>to_int_mod_ring_hom.inj_f</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20824..20825">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.vec_mset|const"><span>vec_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_20373..20378"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_20514..20521"><span>eq_vecs</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.inj_zero_hom.vec_hom_mset|fact"><span>inj_zero_hom.vec_hom_mset</span></a><span> </span><span>to_int_mod_ring_hom.inj_zero_hom_axioms</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="free"><span>v2</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.count_vec|const"><span>count_vec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_2267..2274"><span>vec_mod</span></a><span> </span><span class="free"><span>v1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>to_int_mod_ring</span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_20661..20662"><span>1</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_20824..20825"><span>2</span></a><span> </span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_MV_Rel_row|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_MV_Rel_row|thm"><span>MM_Rel_MV_Rel_row</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>row</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>index_map_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3282..3293"><span>mat_mod_dim</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_5036..5055"><span>mat_mod_vec_mod_row</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.row_map_mat|fact"><span>row_map_mat</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_MV_Rel_col|fact"><span class="entity_def" id="Vector_Matrix_Mod.mat_mod_type.MM_Rel_MV_Rel_col|thm"><span>MM_Rel_MV_Rel_col</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10522..10528"><span>MM_Rel</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10631..10637"><span>MV_Rel</span></a><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10511..10521"><span>MM_Rel_def</span></a><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_10620..10630"><span>MV_Rel_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><span>index_map_mat</span><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_3282..3293"><span>mat_mod_dim</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#offset_5168..5187"><span>mat_mod_vec_mod_col</span></a><span> </span><span>col_map_mat</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>le>
</head>


<body>
<div class="head">
<h1>Theory Fishers_Inequality_Variations</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Fishers_Inequality_Variations.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Variations on Fisher's Inequality</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Fishers_Inequality_Variations</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Dual_Systems.html"><span>Dual_Systems</span></a><span> </span><a href="Rank_Argument_General.html"><span>Rank_Argument_General</span></a><span>
</span><a href="Vector_Matrix_Mod.html"><span>Vector_Matrix_Mod</span></a><span> </span><a href="Linear_Bound_Argument.html"><span>Linear_Bound_Argument</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Matrix mod properties</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>This is reasoning on properties specific to incidence matrices under </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.mat_mod|const"><span>mat_mod</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>. Ultimately, 
</span><span>this definition was not used in the final proof but it is left as is in case of future use</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.mat_mod|locale"><span>mat_mod</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mat_mod_proper_iff|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mat_mod_proper_iff|thm"><span>mat_mod_proper_iff</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.proper_inc_mat|const"><span>proper_inc_mat</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.proper_inc_mat|const"><span>proper_inc_mat</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.proper_inc_mat_def|fact"><span>proper_inc_mat_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mat_mod_rep_num_eq|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mat_mod_rep_num_eq|thm"><span>mat_mod_rep_num_eq</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>elements_mat</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mat_mod_count_row_eq</span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_def|fact"><span>mat_rep_num_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mat_point_index_eq|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mat_point_index_eq|thm"><span>mat_point_index_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_point_index|const"><span>mat_point_index</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><span>mat_mod_eq_cond</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mod_mat_inter_num_eq|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mod_mat_inter_num_eq|thm"><span>mod_mat_inter_num_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mat_mod_eq_cond</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mod_mat_block_size|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mod_mat_block_size|thm"><span>mod_mat_block_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mat_mod_eq_cond</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mat_mod_non_empty_col_iff|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod.mat_mod_non_empty_col_iff|thm"><span>mat_mod_non_empty_col_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>elements_mat</span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
    </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.non_empty_col|const"><span>non_empty_col</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mat_mod_eq_cond</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1393..1400">context</span></span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.mat_mod_type|locale"><span>mat_mod_type</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1421..1426">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.mat_rep_num_MM_Rel|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.mat_rep_num_MM_Rel|thm"><span>mat_rep_num_MM_Rel</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>MM_Rel</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_row</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num|const"><span>mat_rep_num</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_rep_num_def|fact"><span>mat_rep_num_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_count_MV_Rel_direct</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_1421..1426"><span>assms</span></a><span> </span><span>mat_mod_vec_mod_row</span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.row_map_mat|fact"><span>row_map_mat</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_1393..1400"><span>MM_Rel_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_1393..1400"><span>MV_Rel_def</span></a><span> </span><span>index_map_mat</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mat_mod_dim</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>to_int_mod_ring_hom.hom_one</span><span class="main"><span>)</span></span><span> 


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1745..1750">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.mat_block_size_MM_Rel|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.mat_block_size_MM_Rel|thm"><span>mat_block_size_MM_Rel</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>MM_Rel</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size_def|fact"><span>mat_block_size_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>vec_count_MV_Rel_direct</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_1745..1750"><span>assms</span></a><span> </span><span>MM_Rel_MV_Rel_col</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>mat_mod_vec_mod_col</span><span> </span><span>to_int_mod_ring_hom.hom_one</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2033..2038">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.mat_inter_num_MM_Rel|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.mat_inter_num_MM_Rel|thm"><span>mat_inter_num_MM_Rel</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>MM_Rel</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="main"><span>(</span></span><span>mat_mod</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num_def|fact"><span>mat_inter_num_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_2033..2038"><span>assms</span></a><span> </span><span>index_map_mat</span><span> </span><span>mat_mod_dim</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Collect_cong</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_1393..1400"><span>MM_Rel_def</span></a><span> </span><span>to_int_mod_ring_hom.hom_1</span><span> </span><span>to_int_mod_ring_hom.hom_one</span><span class="main"><span>)</span></span><span> 


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>Lift 01 and mat mod equivalence on 0-1 matrices</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2421..2426">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.of_int_mod_ring_lift_01_eq|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.of_int_mod_ring_lift_01_eq|thm"><span>of_int_mod_ring_lift_01_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix|const"><span>zero_one_matrix</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_mat</span><span> </span><span class="main"><span>(</span></span><span>of_int_mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mat_eq_iff</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>map_mat</span><span> </span><span class="main"><span>(</span></span><span>of_int_mod_ring</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_2421..2426"><span>assms</span></a><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.M_not_one_simp|fact"><span>zero_one_matrix.M_not_one_simp</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2687..2692">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.to_int_mod_ring_lift_01_eq|fact"><span class="entity_def" id="Fishers_Inequality_Variations.mat_mod_type.to_int_mod_ring_lift_01_eq|thm"><span>to_int_mod_ring_lift_01_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix|const"><span>zero_one_matrix</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mat_eq_iff</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.to_int_mat|const"><span>to_int_mat</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_2687..2692"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.zero_one_matrix.M_not_zero_simp|fact"><span>zero_one_matrix.M_not_zero_simp</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The Odd-town Problem</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span> </span><span>The odd-town problem \cite{abaiLINEARALGEBRAMETHODS1988} is perhaps one of the most common 
</span><span>introductory problems for applying the linear algebra bound method to a combinatorial problem. 
</span><span>In mathematical literature, it is considered simpler than Fisher's Inequality, however presents some 
</span><span>interesting challenges to formalisation. Most significantly, it considers the incidence matrix to have 
</span><span>elements of types integers mod 2.</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Initially, define a locale to represent the odd town context (a town with v people, and b groups) 
</span><span>which must each be of odd size, but have an even intersection number with any other group</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.axioms|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.intro|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_def|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_axioms.intro|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_axioms_def|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.axioms(2)|thm"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.axioms(1)|thm"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.intro|thm"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_def|thm"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_axioms.intro|thm"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_axioms_def|thm"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_def|axiom"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_axioms_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town|locale"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town|const"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town_axioms|const"><span>odd_town</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_design|locale"><span>ordered_design</span></a><span> </span><span class="main"><span>+</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.odd_groups|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.odd_groups|thm"><span class="entity_def" id="offset_3651..3661">odd_groups</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>â¬</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>odd</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>bl</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.even_inters|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.even_inters|thm"><span class="entity_def" id="offset_3695..3706">even_inters</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bl1</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>â¬</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>bl2</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>â¬</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>bl1</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>â¹</span></span><span> </span><span>even</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>bl1</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="free"><span>bl2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.odd_town_no_repeat_clubs|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.odd_town_no_repeat_clubs|thm"><span class="entity_def" id="offset_3777..3801">odd_town_no_repeat_clubs</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Duplicate_Free_Multiset.html#Duplicate_Free_Multiset.distinct_mset|const"><span>distinct_mset</span></a><span> </span><span>â¬</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Duplicate_Free_Multiset.html#Duplicate_Free_Multiset.distinct_mset|const"><span>distinct_mset</span></a><span> </span><span>â¬</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_3892..3895">ain</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>â¬</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>countne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span>â¬</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Duplicate_Free_Multiset.html#Duplicate_Free_Multiset.distinct_mset_def|fact"><span>distinct_mset_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span>â¬</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>nat_less_le</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4048..4052">ain2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span class="main"><span>(</span></span><span>â¬</span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>in_diff_count</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>odd</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3651..3661"><span>odd_groups</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3892..3895"><span>ain</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3695..3706"><span>even_inters</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3892..3895"><span>ain</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_4048..4052"><span>ain2</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.odd_blocks_mat_block_size|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.odd_blocks_mat_block_size|thm"><span>odd_blocks_mat_block_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span>N</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>odd</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_block_size|const"><span>mat_block_size</span></a><span> </span><span>N</span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mat_block_size_conv</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3651..3661"><span>odd_groups</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dim_col_is_b</span><span> </span><span>valid_blocks_index</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4386..4391">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.odd_block_size_mod_2|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.odd_block_size_mod_2|thm"><span class="entity_def" id="offset_4392..4412">odd_block_size_mod_2</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span>prime_card</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4539..4542">cb2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_4386..4391"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>odd</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3651..3661"><span>odd_groups</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>transfer'</span></span><span> </span><span class="quasi_keyword"><span>fixing</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_4539..4542"><span>cb2</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.valid_indices_block_min|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.valid_indices_block_min|thm"><span class="entity_def" id="offset_4773..4796">valid_indices_block_min</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span>N</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span>N</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>ð»</span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.even_inter_mat_intersections|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.even_inter_mat_intersections|thm"><span>even_inter_mat_intersections</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span>N</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j2</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span>N</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j2</span></span><span>
  </span><span class="main"><span>â¹</span></span><span> </span><span>even</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.mat_inter_num|const"><span>mat_inter_num</span></a><span> </span><span>N</span><span> </span><span class="free"><span>j1</span></span><span> </span><span class="free"><span>j2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3695..3706"><span>even_inters</span></a><span> </span><span>mat_inter_num_conv</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_4773..4796"><span>valid_indices_block_min</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dim_col_is_b</span><span> </span><span>obtains_two_diff_block_indexes</span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5096..5101">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.even_inter_mod_2|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.even_inter_mod_2|thm"><span class="entity_def" id="offset_5102..5118">even_inter_mod_2</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span>prime_card</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>jlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5286..5289">cb2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_5096..5101"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>even</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3695..3706"><span>even_inters</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_5096..5101"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>blocks_index_ne_belong</span><span> </span><span>blocks_list_length</span><span> </span><span>valid_blocks_index</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_nat</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Design_Theory/Design_Basics.html#Design_Basics.intersection_number|const"><span>|â©|</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>â¬s</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>mod_ring</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>transfer'</span></span><span> </span><span class="quasi_keyword"><span>fixing</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span> </span><span class="quoted"><span class="free"><span>â¬s</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_5286..5289"><span>cb2</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The odd town locale must be simple by definition</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#Fishers_Inequality_Variations.odd_town|locale"><span>odd_town</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Incidence_Matrices.html#Incidence_Matrices.ordered_simple_design|locale"><span>ordered_simple_design</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_3777..3801"><span>odd_town_no_repeat_clubs</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../Nested_Multisets_Ordinals/Duplicate_Free_Multiset.html#Duplicate_Free_Multiset.distinct_mset_def|fact"><span>distinct_mset_def</span></a><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#Fishers_Inequality_Variations.odd_town|locale"><span>odd_town</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The upper bound lemma (i.e. variation on Fisher's) for the odd town property using the linear 
</span><span>bound argument. Notice it follows exactly the same pattern as the generalised version, however
</span><span>it's sum manipulation argument is significantly simpler (in line with the mathematical proofs)</span><span> </span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6098..6103">lemma</span></span></span><span> </span><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.upper_bound_clubs|fact"><span class="entity_def" id="Fishers_Inequality_Variations.odd_town.upper_bound_clubs|thm"><span>upper_bound_clubs</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span>prime_card</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ð»</span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>ð</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6192..6195">cb2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>CARD</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6098..6103"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> mmt</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Vector_Matrix_Mod.html#Vector_Matrix_Mod.mat_mod_type|locale"><span>mat_mod_type</span></a><span> </span><span class="quoted"><span class="numeral"><span>2</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span>prime_card</span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6098..6103"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_6342..6348">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N2</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span>mod_ring</span><span> </span><span>mat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N2</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.lift_01_mat|const"><span>lift_01_mat</span></a><span> </span><span>N</span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Linear_Bound_Argument.html#Linear_Bound_Argument.lin_bound_argument2|fact"><span>lin_bound_argument2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span class="skolem"><span>N2</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>distinct</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>N2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>lift_01_distinct_cols_N</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6342..6348"><span>N2_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="entity_def" id="offset_6544..6548">n2cm</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_mat</span><span> </span><span>ð</span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6342..6348"><span>N2_def</span></a><span> </span><span>N_carrier_mat_01_lift</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6625..6640">scalar_prod_odd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>scalar_prod_block_size_lift_01</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6342..6348"><span>N2_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_4392..4412"><span>odd_block_size_mod_2</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6098..6103"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6192..6195"><span>cb2</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6788..6804">scalar_prod_even</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span>ð»</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_5102..5118"><span>even_inter_mod_2</span></a><span> </span><span>scalar_prod_inter_num_lift_01</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6342..6348"><span>N2_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6098..6103"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>vec</span><span> </span><span>ð</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>ð</span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="skolem"><span>N2</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>v</span></span><span> 
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_7099..7102">eq0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>vec</span><span> </span><span>ð</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>length</span><span> </span><span class="free"><span>â¬s</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>0<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span>ð</span><span>"</span></span></span><span> 
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_7190..7193">vin</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set</span><span> </span><span class="main"><span>(</span></span><span>cols</span><span> </span><span class="skolem"><span>N2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_7221..7227">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>c</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>c</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>inner</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span>  </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mult.commute</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_7410..7415">v_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="skolem"><span>j'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7437..7441">jvlt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>dim_col</span><span> </span><span class="skolem"><span>N2</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7190..7193"><span>vin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>cols_length</span><span> </span><span>cols_nth</span><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.index_less_size_conv|fact"><span>index_less_size_conv</span></a><span> </span><a class="entity_ref" href="../List-Index/List_Index.html#List_Index.nth_index|fact"><span>nth_index</span></a><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>jvltb</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j'</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>ð»</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6544..6548"><span>n2cm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7610..7615">even0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>j'</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span>  </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6788..6804"><span>scalar_prod_even</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7410..7415"><span>v_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>vinc</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier_vec</span><span> </span><span>ð</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6544..6548"><span>n2cm</span></a><span> </span><a class="entity_ref" href="Matrix_Vector_Extras.html#Matrix_Vector_Extras.set_cols_carrier|fact"><span>set_cols_carrier</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7190..7193"><span>vin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>vec</span><span> </span><span>ð</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7099..7102"><span>eq0</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7221..7227"><span>c_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>  
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span>  </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>scalar_prod_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6544..6548"><span>n2cm</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_row</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>$</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="skolem"><span>N2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>.</span></span><span>  </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.swap</span><span> </span><span>scalar_prod_def</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>v</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>j'</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="skolem"><span>N2</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>j'</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7437..7441"><span>jvlt</span></a><span> </span><span>sum.remove</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>dim_col</span><span> </span><span class="skolem"><span>N2</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7410..7415"><span>v_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>j'</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span>ð»</span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>j'</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span>  </span><span class="skolem"><span>c</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>col</span><span> </span><span class="skolem"><span>N2</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6544..6548"><span>n2cm</span></a><span> </span><span>scalar_prod_smult_distrib</span><span> </span><span>col_dim</span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7410..7415"><span>v_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>j'</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>v</sub></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7610..7615"><span>even0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum.neutral</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>j'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>scalar_prod_smult_distrib</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7410..7415"><span>v_def</span></a><span class="main"><span>)</span></span><span>                 
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>j'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7410..7415"><span>v_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7437..7441"><span>jvlt</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6544..6548"><span>n2cm</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_6625..6640"><span>scalar_prod_odd</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7221..7227"><span>c_def</span></a><span> </span><a class="entity_ref" href="Fishers_Inequality_Variations.html#offset_7410..7415"><span>v_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Fishers_Inequality_Root'>head>


<body>
<div class="head">
<h1>Theory Fishers_Inequality_Root</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Title: Fishers_Inequality_Root.thy
   Author: Chelsea Edmonds
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Fishers_Inequality_Root</span><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
  </span><a href="Set_Multiset_Extras.html"><span>Set_Multiset_Extras</span></a><span>
  </span><a href="Matrix_Vector_Extras.html"><span>Matrix_Vector_Extras</span></a><span>
  </span><a href="Design_Extras.html"><span>Design_Extras</span></a><span>

  </span><a href="Incidence_Matrices.html"><span>Incidence_Matrices</span></a><span>
  </span><a href="Dual_Systems.html"><span>Dual_Systems</span></a><span>
  </span><a href="Rank_Argument_General.html"><span>Rank_Argument_General</span></a><span>
  </span><a href="Linear_Bound_Argument.html"><span>Linear_Bound_Argument</span></a><span>

  </span><a href="Fishers_Inequality.html"><span>Fishers_Inequality</span></a><span>
  </span><a href="Vector_Matrix_Mod.html"><span>Vector_Matrix_Mod</span></a><span>
  </span><a href="Fishers_Inequality_Variations.html"><span>Fishers_Inequality_Variations</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div>