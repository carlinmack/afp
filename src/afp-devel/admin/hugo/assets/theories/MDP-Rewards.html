<div id='MDP_reward'>

<body>
<div class="head">
<h1>Theory Bounded_Functions</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler, adapted from HOL-Analysis.Bounded_Continuous_Function </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bounded Functions</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Bounded_Functions</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL/Topological_Spaces.html"><span>HOL.Topological_Spaces</span></a><span>"</span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Analysis/Uniform_Limit.html"><span>HOL-Analysis.Uniform_Limit</span></a><span>"</span></span><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Probability/Probability.html"><span>HOL-Probability.Probability</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Definition</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.bfun_def|fact"><span class="entity_def" id="Bounded_Functions.bfun_def|thm"><span class="entity_def" id="Bounded_Functions.bfun_def_raw|axiom"><span>definition</span></span></span></span></span></span><span class="comment1"><span>â</span><span class="quoted"><span>â¹</span><span>tag</span><span> </span><span>important</span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Bounded_Functions.bfun|const"><span>bfun</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="bound"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_typerep_bfun|fact"><span class="entity_def" id="Bounded_Functions.typerep_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.typerep_bfun_inst.typerep_bfun|fact"><span class="entity_def" id="Bounded_Functions.bfun.type_definition_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_type_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_typerep_bfun|thm"><span class="entity_def" id="Bounded_Functions.typerep_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.typerep_bfun_inst.typerep_bfun|thm"><span class="entity_def" id="Bounded_Functions.bfun.type_definition_bfun|thm"><span class="entity_def" id="Bounded_Functions.arity_type_bfun|thm"><span class="entity_def" id="Bounded_Functions.typerep_bfun_def_raw|axiom"><span class="entity_def" id="Bounded_Functions.typerep_bfun_inst.typerep_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.bfun.type_definition_bfun|axiom"><span class="entity_def" id="Bounded_Functions.arity_type_bfun|axiom"><span class="entity_def" id="Bounded_Functions.typerep_bfun_inst.typerep_bfun|const"><span>typedef</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>overloaded</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun|type"><span>bfun</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span>_</span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>b</sub></span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>22</span><span class="main"><span>]</span></span><span> 21</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>morphisms</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun_induct|fact"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun_cases|fact"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun_inject|fact"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun_inverse|fact"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun|fact"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun_induct|thm"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun_cases|thm"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun_inject|thm"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun_inverse|thm"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun|thm"><span class="entity_def" id="Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun.Bfun_induct|fact"><span class="entity_def" id="Bounded_Functions.bfun.Bfun_cases|fact"><span class="entity_def" id="Bounded_Functions.bfun.Bfun_inject|fact"><span class="entity_def" id="Bounded_Functions.bfun.Bfun_inverse|fact"><span class="entity_def" id="Bounded_Functions.bfun.Bfun_induct|thm"><span class="entity_def" id="Bounded_Functions.bfun.Bfun_cases|thm"><span class="entity_def" id="Bounded_Functions.bfun.Bfun_inject|thm"><span class="entity_def" id="Bounded_Functions.bfun.Bfun_inverse|thm"><span class="entity_def" id="Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></span></span></span></span></span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded_def|fact"><span>bounded_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>coercion</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.Quotient_bfun|fact"><span class="entity_def" id="Bounded_Functions.bfun.domain_eq|fact"><span class="entity_def" id="Bounded_Functions.bfun.domain_par_left_total|fact"><span class="entity_def" id="Bounded_Functions.bfun.domain_par|fact"><span class="entity_def" id="Bounded_Functions.bfun.domain|fact"><span class="entity_def" id="Bounded_Functions.bfun.rep_transfer|fact"><span class="entity_def" id="Bounded_Functions.bfun.right_total|fact"><span class="entity_def" id="Bounded_Functions.bfun.bi_unique|fact"><span class="entity_def" id="Bounded_Functions.bfun.right_unique|fact"><span class="entity_def" id="Bounded_Functions.bfun.left_unique|fact"><span class="entity_def" id="Bounded_Functions.arity_term_of_bfun|fact"><span class="entity_def" id="Bounded_Functions.term_of_bfun_triv|fact"><span class="entity_def" id="Bounded_Functions.term_of_bfun_inst.term_of_bfun|fact"><span class="entity_def" id="Bounded_Functions.bfun.pcr_cr_eq|fact"><span class="entity_def" id="Bounded_Functions.pcr_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.cr_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.bfun.lifting|bundle"><span class="entity_def" id="Bounded_Functions.Quotient_bfun|thm"><span class="entity_def" id="Bounded_Functions.bfun.domain_eq|thm"><span class="entity_def" id="Bounded_Functions.bfun.domain_par_left_total|thm"><span class="entity_def" id="Bounded_Functions.bfun.domain_par|thm"><span class="entity_def" id="Bounded_Functions.bfun.domain|thm"><span class="entity_def" id="Bounded_Functions.bfun.rep_transfer|thm"><span class="entity_def" id="Bounded_Functions.bfun.right_total|thm"><span class="entity_def" id="Bounded_Functions.bfun.bi_unique|thm"><span class="entity_def" id="Bounded_Functions.bfun.right_unique|thm"><span class="entity_def" id="Bounded_Functions.bfun.left_unique|thm"><span class="entity_def" id="Bounded_Functions.arity_term_of_bfun|thm"><span class="entity_def" id="Bounded_Functions.term_of_bfun_triv|thm"><span class="entity_def" id="Bounded_Functions.term_of_bfun_inst.term_of_bfun|thm"><span class="entity_def" id="Bounded_Functions.bfun.pcr_cr_eq|thm"><span class="entity_def" id="Bounded_Functions.pcr_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.cr_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.term_of_bfun_triv_raw|axiom"><span class="entity_def" id="Bounded_Functions.term_of_bfun_inst.term_of_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.pcr_bfun_def_raw|axiom"><span class="entity_def" id="Bounded_Functions.cr_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.term_of_bfun_inst.term_of_bfun|const"><span class="entity_def" id="Bounded_Functions.pcr_bfun|const"><span class="entity_def" id="Bounded_Functions.cr_bfun|const"><span>setup_lifting</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.type_definition_bfun|fact"><span>type_definition_bfun</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bounded_apply_bfun|fact"><span class="entity_def" id="Bounded_Functions.bounded_apply_bfun|thm"><span>bounded_apply_bfun</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|fact"><span>apply_bfun</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_eqI|fact"><span class="entity_def" id="Bounded_Functions.bfun_eqI|thm"><span>bfun_eqI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_eqD|fact"><span class="entity_def" id="Bounded_Functions.bfun_eqD|thm"><span>bfun_eqD</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>dest</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_920..925">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfunE|fact"><span class="entity_def" id="Bounded_Functions.bfunE|thm"><span>bfunE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>blast</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_cases|fact"><span>apply_bfun_cases</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_920..925"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.const_bfun|fact"><span class="entity_def" id="Bounded_Functions.const_bfun|thm"><span>const_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_def|fact"><span>image_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.const_bfun.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.const_bfun.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.const_bfun.transfer|fact"><span class="entity_def" id="Bounded_Functions.const_bfun.rsp|fact"><span class="entity_def" id="Bounded_Functions.const_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.const_bfun.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.const_bfun.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.const_bfun.transfer|thm"><span class="entity_def" id="Bounded_Functions.const_bfun.rsp|thm"><span class="entity_def" id="Bounded_Functions.const_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.const_bfun_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.const_bfun|const"><span>const_bfun</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.const_bfun|fact"><span>const_bfun</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bounded_dist_le_SUP_dist|fact"><span class="entity_def" id="Bounded_Functions.bounded_dist_le_SUP_dist|thm"><span>bounded_dist_le_SUP_dist</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_dist_comp|fact"><span>bounded_dist_comp</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>,</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.dist_bfun.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.dist_bfun.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.dist_bfun.transfer|fact"><span class="entity_def" id="Bounded_Functions.dist_bfun.rsp|fact"><span class="entity_def" id="Bounded_Functions.dist_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.dist_bfun_inst.dist_bfun|fact"><span class="entity_def" id="Bounded_Functions.dist_bfun.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.dist_bfun.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.dist_bfun.transfer|thm"><span class="entity_def" id="Bounded_Functions.dist_bfun.rsp|thm"><span class="entity_def" id="Bounded_Functions.dist_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.dist_bfun_inst.dist_bfun|thm"><span class="entity_def" id="Bounded_Functions.dist_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.dist_bfun_inst.dist_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.dist_bfun_inst.dist_bfun|const"><span class="entity_def" id="offset_1472..1487">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="comment1"><span>â</span><span class="quoted"><span class="quoted"><span>â¹</span><span>tag</span><span> </span><span>important</span><span>âº</span></span></span></span><span> </span><span class="class_parameter"><span>dist_bfun</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.uniformity_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.uniformity_bfun_inst.uniformity_bfun|fact"><span class="entity_def" id="Bounded_Functions.uniformity_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.uniformity_bfun_inst.uniformity_bfun|thm"><span class="entity_def" id="Bounded_Functions.uniformity_bfun_def_raw|axiom"><span class="entity_def" id="Bounded_Functions.uniformity_bfun_inst.uniformity_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.uniformity_bfun_inst.uniformity_bfun|const"><span class="entity_def" id="offset_1594..1604">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="class_parameter"><span>uniformity_bfun</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.filter|type"><span>filter</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>uniformity_bfun</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>INF</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.greaterThan|const"><span>&lt;..}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.principal|const"><span>principal</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.open_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.open_bfun_inst.open_bfun|fact"><span class="entity_def" id="Bounded_Functions.open_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.open_bfun_inst.open_bfun|thm"><span class="entity_def" id="Bounded_Functions.open_bfun_def_raw|axiom"><span class="entity_def" id="Bounded_Functions.open_bfun_inst.open_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.open_bfun_inst.open_bfun|const"><span class="entity_def" id="offset_1738..1748">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="class_parameter"><span>open_bfun</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>open_bfun</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.uniformity_class.uniformity|const"><span>uniformity</span></a><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.dist_bounded|fact"><span class="entity_def" id="Bounded_Functions.dist_bounded|thm"><span class="entity_def" id="offset_1868..1880">dist_bounded</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bounded_dist_le_SUP_dist|fact"><span>bounded_dist_le_SUP_dist</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2017..2022">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.dist_bound|fact"><span class="entity_def" id="Bounded_Functions.dist_bound|thm"><span class="entity_def" id="offset_2023..2033">dist_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_2017..2022"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2195..2200">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.dist_fun_lt_imp_dist_val_lt|fact"><span class="entity_def" id="Bounded_Functions.dist_fun_lt_imp_dist_val_lt|thm"><span>dist_fun_lt_imp_dist_val_lt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_1868..1880"><span>dist_bounded</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_2195..2200"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_metric_space_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_metric_space_bfun|thm"><span>instance</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>h</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_1868..1880"><span>dist_bounded</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>g</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inject|fact"><span>apply_bfun_inject</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_1472..1487"><span>dist_bfun_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_eq|fact"><span>cSup_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_2023..2033"><span>dist_bound</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>h</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>h</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle2|fact"><span>dist_triangle2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>h</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_1868..1880"><span>dist_bounded</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>h</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_1868..1880"><span>dist_bounded</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_1738..1748"><span>open_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_1594..1604"><span>uniformity_bfun_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.PiC.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.PiC.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.PiC.transfer|fact"><span class="entity_def" id="Bounded_Functions.PiC.rsp|fact"><span class="entity_def" id="Bounded_Functions.PiC_def|fact"><span class="entity_def" id="Bounded_Functions.PiC.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.PiC.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.PiC.transfer|thm"><span class="entity_def" id="Bounded_Functions.PiC.rsp|thm"><span class="entity_def" id="Bounded_Functions.PiC_def|thm"><span class="entity_def" id="Bounded_Functions.PiC_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.PiC|const"><span>PiC</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>I</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi|const"><span>Pi</span></a><span> </span><span class="bound"><span>I</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.mem_PiC_iff|fact"><span class="entity_def" id="Bounded_Functions.mem_PiC_iff|thm"><span>mem_PiC_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.PiC|const"><span>PiC</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi|const"><span>Pi</span></a><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.mem_PiCD|fact"><span class="entity_def" id="Bounded_Functions.mem_PiCD|thm"><span>mem_PiCD</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.mem_PiC_iff|fact"><span>mem_PiC_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD1|fact"><span>iffD1</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.mem_PiCI|fact"><span class="entity_def" id="Bounded_Functions.mem_PiCI|thm"><span>mem_PiCI</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.mem_PiC_iff|fact"><span>mem_PiC_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD2|fact"><span>iffD2</span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3406..3411">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.tendsto_bfun_uniform_limit|fact"><span class="entity_def" id="Bounded_Functions.tendsto_bfun_uniform_limit|thm"><span>tendsto_bfun_uniform_limit</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.tendsto|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Uniform_Limit.html#Uniform_Limit.uniform_limit|const"><span>uniform_limit</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Uniform_Limit.html#Uniform_Limit.uniform_limitI|fact"><span>uniform_limitI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span class="main"><span>::</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span> </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_3585..3591">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.tendstoD|fact"><span>tendstoD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_3406..3411"><span>assms</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_3585..3591"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually_elim|method"><span class="operator"><span>eventually_elim</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_fun_lt_imp_dist_val_lt|fact"><span>dist_fun_lt_imp_dist_val_lt</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3798..3803">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.uniform_limit_tendsto_bfun|fact"><span class="entity_def" id="Bounded_Functions.uniform_limit_tendsto_bfun|thm"><span>uniform_limit_tendsto_bfun</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Uniform_Limit.html#Uniform_Limit.uniform_limit|const"><span>uniform_limit</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.tendsto|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.tendstoI|fact"><span>tendstoI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span class="main"><span>::</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4033..4035">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Uniform_Limit.html#Uniform_Limit.uniform_limitD|fact"><span>uniform_limitD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_3798..3803"><span>assms</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_4033..4035"><span>this</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually_elim|method"><span class="operator"><span>eventually_elim</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>blast</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bound|fact"><span>dist_bound</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_imp_le|fact"><span>less_imp_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually_elim|method"><span class="operator"><span>eventually_elim</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>âº</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span class="comment1"><span>â</span><span class="quoted"><span>â¹</span><span>tag</span><span> </span><span>unimportant</span><span>âº</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Supremum Norm</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span class="comment1"><span>â</span><span class="quoted"><span>â¹</span><span>tag</span><span> </span><span>unimportant</span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>,</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_vector|class"><span>real_vector</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.uminus_cont|fact"><span class="entity_def" id="Bounded_Functions.uminus_cont|thm"><span class="entity_def" id="offset_4477..4488">uminus_cont</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.plus_cont|fact"><span class="entity_def" id="Bounded_Functions.plus_cont|thm"><span class="entity_def" id="offset_4573..4582">plus_cont</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_plus_comp|fact"><span>bounded_plus_comp</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.minus_cont|fact"><span class="entity_def" id="Bounded_Functions.minus_cont|thm"><span class="entity_def" id="offset_4702..4712">minus_cont</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_minus_comp|fact"><span>bounded_minus_comp</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.scaleR_cont|fact"><span class="entity_def" id="Bounded_Functions.scaleR_cont|thm"><span class="entity_def" id="offset_4833..4844">scaleR_cont</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_scaleR_comp|fact"><span>bounded_scaleR_comp</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_normI|fact"><span class="entity_def" id="Bounded_Functions.bfun_normI|thm"><span>bfun_normI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.uminus_bfun.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.uminus_bfun.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.uminus_bfun.transfer|fact"><span class="entity_def" id="Bounded_Functions.uminus_bfun.rsp|fact"><span class="entity_def" id="Bounded_Functions.uminus_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.uminus_bfun_inst.uminus_bfun|fact"><span class="entity_def" id="Bounded_Functions.uminus_bfun.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.uminus_bfun.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.uminus_bfun.transfer|thm"><span class="entity_def" id="Bounded_Functions.uminus_bfun.rsp|thm"><span class="entity_def" id="Bounded_Functions.uminus_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.uminus_bfun_inst.uminus_bfun|thm"><span class="entity_def" id="Bounded_Functions.uminus_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.uminus_bfun_inst.uminus_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.uminus_bfun_inst.uminus_bfun|const"><span class="entity_def" id="offset_5052..5067">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>uminus_bfun</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_4477..4488"><span>uminus_cont</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.plus_bfun.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.plus_bfun.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.plus_bfun.transfer|fact"><span class="entity_def" id="Bounded_Functions.plus_bfun.rsp|fact"><span class="entity_def" id="Bounded_Functions.plus_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.plus_bfun_inst.plus_bfun|fact"><span class="entity_def" id="Bounded_Functions.plus_bfun.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.plus_bfun.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.plus_bfun.transfer|thm"><span class="entity_def" id="Bounded_Functions.plus_bfun.rsp|thm"><span class="entity_def" id="Bounded_Functions.plus_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.plus_bfun_inst.plus_bfun|thm"><span class="entity_def" id="Bounded_Functions.plus_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.plus_bfun_inst.plus_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.plus_bfun_inst.plus_bfun|const"><span class="entity_def" id="offset_5151..5166">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>plus_bfun</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_4573..4582"><span>plus_cont</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.minus_bfun.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.minus_bfun.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.minus_bfun.transfer|fact"><span class="entity_def" id="Bounded_Functions.minus_bfun.rsp|fact"><span class="entity_def" id="Bounded_Functions.minus_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.minus_bfun_inst.minus_bfun|fact"><span class="entity_def" id="Bounded_Functions.minus_bfun.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.minus_bfun.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.minus_bfun.transfer|thm"><span class="entity_def" id="Bounded_Functions.minus_bfun.rsp|thm"><span class="entity_def" id="Bounded_Functions.minus_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.minus_bfun_inst.minus_bfun|thm"><span class="entity_def" id="Bounded_Functions.minus_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.minus_bfun_inst.minus_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.minus_bfun_inst.minus_bfun|const"><span class="entity_def" id="offset_5265..5280">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>minus_bfun</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_4702..4712"><span>minus_cont</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.zero_bfun.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.zero_bfun.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.zero_bfun.transfer|fact"><span class="entity_def" id="Bounded_Functions.zero_bfun.rsp|fact"><span class="entity_def" id="Bounded_Functions.zero_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.zero_bfun_inst.zero_bfun|fact"><span class="entity_def" id="Bounded_Functions.zero_bfun.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.zero_bfun.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.zero_bfun.transfer|thm"><span class="entity_def" id="Bounded_Functions.zero_bfun.rsp|thm"><span class="entity_def" id="Bounded_Functions.zero_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.zero_bfun_inst.zero_bfun|thm"><span class="entity_def" id="Bounded_Functions.zero_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.zero_bfun_inst.zero_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.zero_bfun_inst.zero_bfun|const"><span class="entity_def" id="offset_5381..5396">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>zero_bfun</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.const_bfun|fact"><span>const_bfun</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.const_bfun_0_eq_0|fact"><span class="entity_def" id="Bounded_Functions.const_bfun_0_eq_0|thm"><span>const_bfun_0_eq_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.const_bfun|const"><span>const_bfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.scaleR_bfun.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.scaleR_bfun.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.scaleR_bfun.transfer|fact"><span class="entity_def" id="Bounded_Functions.scaleR_bfun.rsp|fact"><span class="entity_def" id="Bounded_Functions.scaleR_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.scaleR_bfun_inst.scaleR_bfun|fact"><span class="entity_def" id="Bounded_Functions.scaleR_bfun.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.scaleR_bfun.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.scaleR_bfun.transfer|thm"><span class="entity_def" id="Bounded_Functions.scaleR_bfun.rsp|thm"><span class="entity_def" id="Bounded_Functions.scaleR_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.scaleR_bfun_inst.scaleR_bfun|thm"><span class="entity_def" id="Bounded_Functions.scaleR_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.scaleR_bfun_inst.scaleR_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.scaleR_bfun_inst.scaleR_bfun|const"><span class="entity_def" id="offset_5525..5540">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>scaleR_bfun</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_4833..4844"><span>scaleR_cont</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.const_bfun.rep_eq|fact"><span>const_bfun.rep_eq</span></a><span>
  </span><a class="entity_ref" href="Bounded_Functions.html#offset_5052..5067"><span>uminus_bfun.rep_eq</span></a><span>
  </span><a class="entity_ref" href="Bounded_Functions.html#offset_5151..5166"><span>plus_bfun.rep_eq</span></a><span>
  </span><a class="entity_ref" href="Bounded_Functions.html#offset_5265..5280"><span>minus_bfun.rep_eq</span></a><span>
  </span><a class="entity_ref" href="Bounded_Functions.html#offset_5381..5396"><span>zero_bfun.rep_eq</span></a><span>
  </span><a class="entity_ref" href="Bounded_Functions.html#offset_5525..5540"><span>scaleR_bfun.rep_eq</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_real_vector_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_real_vector_bfun|thm"><span>instance</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>standard</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.scaleR_cont&apos;|fact"><span class="entity_def" id="Bounded_Functions.scaleR_cont&apos;|thm"><span>scaleR_cont'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.scaleR_cont|fact"><span>scaleR_cont</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_norm_le_SUP_norm|fact"><span class="entity_def" id="Bounded_Functions.bfun_norm_le_SUP_norm|thm"><span>bfun_norm_le_SUP_norm</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_norm_comp|fact"><span>bounded_norm_comp</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span class="comment1"><span>â</span><span class="quoted"><span>â¹</span><span>tag</span><span> </span><span>unimportant</span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>,</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.norm_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.norm_bfun_inst.norm_bfun|fact"><span class="entity_def" id="Bounded_Functions.norm_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.norm_bfun_inst.norm_bfun|thm"><span class="entity_def" id="Bounded_Functions.norm_bfun_def_raw|axiom"><span class="entity_def" id="Bounded_Functions.norm_bfun_inst.norm_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.norm_bfun_inst.norm_bfun|const"><span class="entity_def" id="offset_6198..6208">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="class_parameter"><span>norm_bfun</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>norm_bfun</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.sgn_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.sgn_bfun_inst.sgn_bfun|fact"><span class="entity_def" id="Bounded_Functions.sgn_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.sgn_bfun_inst.sgn_bfun|thm"><span class="entity_def" id="Bounded_Functions.sgn_bfun_def_raw|axiom"><span class="entity_def" id="Bounded_Functions.sgn_bfun_inst.sgn_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.sgn_bfun_inst.sgn_bfun|const"><span class="entity_def" id="offset_6279..6289">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.sgn_class.sgn|const"><span>sgn</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.divideR|const"><span>/<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_real_normed_vector_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_real_normed_vector_bfun|thm"><span>instance</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_6198..6208"><span>norm_bfun_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>g</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_6198..6208"><span>norm_bfun_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>transfer</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector_class.norm_triangle_le|fact"><span>norm_triangle_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_norm_le_SUP_norm|fact"><span>bfun_norm_le_SUP_norm</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="skolem"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>f</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_6198..6208"><span>norm_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun.rep_eq|fact"><span>dist_bfun.rep_eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.continuous_at_Sup_mono|fact"><span>continuous_at_Sup_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>x</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span></a></span></a></span><span class="skolem"><span class="skolem"><span class="skolem"><span>a</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span></a></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>x</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.monoI|fact"><span>monoI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.continuous_intros|fact"><span class="dynamic"><span class="dynamic"><span>continuous_intros</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> 
        </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_norm_comp|fact"><span>bounded_norm_comp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.image_comp|fact"><span>image_comp</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_6198..6208"><span>norm_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_6279..6289"><span>sgn_bfun_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.norm_bfun_def&apos;|fact"><span class="entity_def" id="Bounded_Functions.norm_bfun_def&apos;|thm"><span>norm_bfun_def'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_conv_dist|fact"><span>norm_conv_dist</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun.rep_eq|fact"><span>dist_bfun.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.norm_le_norm_bfun|fact"><span class="entity_def" id="Bounded_Functions.norm_le_norm_bfun|thm"><span>norm_le_norm_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|fact"><span>apply_bfun</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_norm_le_SUP_norm|fact"><span>bfun_norm_le_SUP_norm</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def|fact"><span>norm_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun_def|fact"><span>dist_bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.abs_le_norm_bfun|fact"><span class="entity_def" id="Bounded_Functions.abs_le_norm_bfun|thm"><span>abs_le_norm_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>abs</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_norm_def|fact"><span>real_norm_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.le_norm_bfun|fact"><span class="entity_def" id="Bounded_Functions.le_norm_bfun|thm"><span>le_norm_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_ge_self|fact"><span>abs_ge_self</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Complete Space</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.tendsto_add|fact"><span class="entity_def" id="Bounded_Functions.tendsto_add|thm"><span>tendsto_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>L</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="free"><span>L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.tendsto_intros|fact"><span class="dynamic"><span class="dynamic"><span>tendsto_intros</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.lim_add|fact"><span class="entity_def" id="Bounded_Functions.lim_add|thm"><span>lim_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.convergent|const"><span>convergent</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.limI|fact"><span>limI</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.tendsto_add|fact"><span>Bounded_Functions.tendsto_add</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergent_LIMSEQ_iff|fact"><span>convergent_LIMSEQ_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.complete_bfun|fact"><span class="entity_def" id="Bounded_Functions.complete_bfun|thm"><span>complete_bfun</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_7854..7862">cauchy_f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.uniform_space_class.Cauchy|const"><span>Cauchy</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span>  </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.complete_space|class"><span>complete_space</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.convergent|const"><span>convergent</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_7854..7862"><span>cauchy_f</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>cauchy_fx</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.uniform_space_class.Cauchy|const"><span>Cauchy</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_fun_lt_imp_dist_val_lt|fact"><span>dist_fun_lt_imp_dist_val_lt</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.CauchyI&apos;|fact"><span>CauchyI'</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.metric_CauchyD|fact"><span>metric_CauchyD</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_8158..8165">conv_fx</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.convergent|const"><span>convergent</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.complete_space_class.Cauchy_convergent|fact"><span>Cauchy_convergent</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>lim_f_bfun</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_8359..8365">dist_N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>n</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.metric_CauchyD|fact"><span>metric_CauchyD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_7854..7862"><span>cauchy_f</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.linordered_nonzero_semiring_class.zero_less_numeral|fact"><span>zero_less_numeral</span></a><span class="main"><span>]</span></span><span>  </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_fun_lt_imp_dist_val_lt|fact"><span>dist_fun_lt_imp_dist_val_lt</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8541..8544">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_8158..8165"><span>conv_fx</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergent_LIMSEQ_iff|fact"><span>convergent_LIMSEQ_iff</span></a><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>tendsto_f_N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="var"><span>?f</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.LIMSEQ_ignore_initial_segment|fact"><span>LIMSEQ_ignore_initial_segment</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_8785..8799">tendsto_f_dist</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.tendsto_intros|fact"><span class="dynamic"><span class="dynamic"><span>tendsto_intros</span></span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_imp_le|fact"><span>less_imp_le</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_8359..8365"><span>dist_N</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.lim_le|fact"><span>lim_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergentI|fact"><span>convergentI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_8785..8799"><span>tendsto_f_dist</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.limI|fact"><span>limI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_8785..8799"><span>tendsto_f_dist</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector_class.norm_triangle_ineq2|fact"><span>norm_triangle_ineq2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_8541..8544"><span>aux</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_9506..9520">bfun_lim_f_inv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="var"><span>?f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?f</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>bfun.Bfun_inverse</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="var"><span>?f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>e</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>n</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="var"><span>?f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>n</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>m</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="numeral"><span>0.5</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>n</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>m</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="var"><span>?P</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.metric_CauchyD|fact"><span>metric_CauchyD</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_7854..7862"><span>cauchy_f</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_9911..9917">dist_N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?P</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>m</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>0.5</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="var"><span>?f</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_8158..8165"><span>conv_fx</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergent_LIMSEQ_iff|fact"><span>convergent_LIMSEQ_iff</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
        </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span>tendsto_f_N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="var"><span>?f</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.LIMSEQ_ignore_initial_segment|fact"><span>LIMSEQ_ignore_initial_segment</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
        </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_10294..10308">tendsto_f_dist</span><span class="main"><span>:</span></span><span> 
          </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_dist|fact"><span>tendsto_dist</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="numeral"><span>0.5</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>m</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_fun_lt_imp_dist_val_lt|fact"><span>dist_fun_lt_imp_dist_val_lt</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_9911..9917"><span>dist_N</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>0.5</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_imp_le|fact"><span>less_imp_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergentI|fact"><span>convergentI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_10294..10308"><span>tendsto_f_dist</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.lim_le|fact"><span>lim_le</span></a><span>
              </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.limI|fact"><span>limI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_10294..10308"><span>tendsto_f_dist</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>0.5</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_10892..10895">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="var"><span>?f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="numeral"><span>0.5</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun_def|fact"><span>dist_bfun_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_9506..9520"><span>bfun_lim_f_inv</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>0.5</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="var"><span>?f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_10892..10895"><span>aux</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>n</span></span></span><span class="main"><span>â¥</span></span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="var"><span>?f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.canonically_ordered_monoid_add_class.less_eqE|fact"><span>less_eqE</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_LIMSEQ_I|fact"><span>metric_LIMSEQ_I</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.convergent|const"><span>convergent</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.convergent_def|fact"><span>convergent_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11388..11393">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.norm_bound|fact"><span class="entity_def" id="Bounded_Functions.norm_bound|thm"><span>norm_bound</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bound|fact"><span>dist_bound</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_11388..11393"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_bounded_norm_range|fact"><span class="entity_def" id="Bounded_Functions.bfun_bounded_norm_range|thm"><span>bfun_bounded_norm_range</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_norm_comp|fact"><span>bounded_norm_comp</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_banach_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_banach_bfun|thm"><span>instance</span></span></span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>,</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>standard</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.complete_bfun|fact"><span>complete_bfun</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11882..11887">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_prob_space_integrable|fact"><span class="entity_def" id="Bounded_Functions.bfun_prob_space_integrable|thm"><span>bfun_prob_space_integrable</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Topology.html#Elementary_Topology.second_countable_topology|class"><span>second_countable_topology</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.finite_measure|fact"><span>prob_space.finite_measure</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>Bfun_inverse</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_11882..11887"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_11882..11887"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.finite_measure.integrable_const_bound|fact"><span>finite_measure.integrable_const_bound</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12222..12227">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_integral_bound|fact"><span class="entity_def" id="Bounded_Functions.bfun_integral_bound|thm"><span>bfun_integral_bound</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Euclidean_Space.html#Euclidean_Space.euclidean_space|class"><span>euclidean_space</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>S</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="bound"><span>S</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_12376..12378">bH</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_norm_le_SUP_norm|fact"><span>bfun_norm_le_SUP_norm</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_12222..12227"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="skolem"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>âº</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_norm_comp|fact"><span>bounded_norm_comp</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_12376..12378"><span>bH</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_prob_space_integrable|fact"><span>bfun_prob_space_integrable</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.integral_le_const|fact"><span>prob_space.integral_le_const</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.prob_space_measure_pmf|fact"><span>prob_space_measure_pmf</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>S</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_norm_bound|fact"><span>integral_norm_bound</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.scale_bfun|fact"><span class="entity_def" id="Bounded_Functions.scale_bfun|thm"><span>scale_bfun</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.scaleR_cont|fact"><span>scaleR_cont</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_spec|fact"><span class="entity_def" id="Bounded_Functions.bfun_spec|thm"><span>bfun_spec</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded_def|fact"><span>bounded_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.apply_bfun_bfun|fact"><span class="entity_def" id="Bounded_Functions.apply_bfun_bfun|thm"><span>apply_bfun_bfun</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|fact"><span>apply_bfun</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_integral_bound&apos;|fact"><span class="entity_def" id="Bounded_Functions.bfun_integral_bound&apos;|thm"><span>bfun_integral_bound'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Euclidean_Space.html#Euclidean_Space.euclidean_space|class"><span>euclidean_space</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>S</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_integral_bound|fact"><span>bfun_integral_bound</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_spec|fact"><span>bfun_spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>F</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.bfun_comp.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.bfun_comp.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.bfun_comp.transfer|fact"><span class="entity_def" id="Bounded_Functions.bfun_comp.rsp|fact"><span class="entity_def" id="Bounded_Functions.bfun_comp_def|fact"><span class="entity_def" id="Bounded_Functions.bfun_comp.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.bfun_comp.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.bfun_comp.transfer|thm"><span class="entity_def" id="Bounded_Functions.bfun_comp.rsp|thm"><span class="entity_def" id="Bounded_Functions.bfun_comp_def|thm"><span class="entity_def" id="Bounded_Functions.bfun_comp_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_comp|const"><span>bfun_comp</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space|class"><span>metric_space</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>bf</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>bf</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Order Instance</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.class.Bounded_Functions.ordered_real_normed_vector.of_class.intro|fact"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class.ordered_real_normed_vector_axioms|fact"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class.axioms|fact"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class.super|fact"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class.intro|fact"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class_def|fact"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector.axioms|fact"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector.intro|fact"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector_def|fact"><span class="entity_def" id="Bounded_Functions.class.Bounded_Functions.ordered_real_normed_vector.of_class.intro|thm"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class.ordered_real_normed_vector_axioms|thm"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class.super(2)|thm"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class.super(1)|thm"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class.intro|thm"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class_def|thm"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector.axioms(2)|thm"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector.axioms(1)|thm"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector.intro|thm"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector_def|thm"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class_def|axiom"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector_def|axiom"><span>class</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector|locale"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector|class"><span class="entity_def" id="Bounded_Functions.ordered_real_normed_vector_class|const"><span class="entity_def" id="Bounded_Functions.class.ordered_real_normed_vector|const"><span>ordered_real_normed_vector</span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.ordered_real_vector|class"><span>ordered_real_vector</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_ordered_real_normed_vector_real|fact"><span class="entity_def" id="Bounded_Functions.arity_ordered_real_normed_vector_real|thm"><span>instance</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.ordered_real_normed_vector|class"><span>ordered_real_normed_vector</span></a></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>standard</span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="main"><span>_</span></span></span><span class="main"><span>,</span></span><span>  </span><span class="quoted"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.ordered_real_normed_vector|class"><span>ordered_real_normed_vector</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.ordered_real_normed_vector|class"><span>ordered_real_normed_vector</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.less_eq_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.ord_bfun_inst.less_eq_bfun|fact"><span class="entity_def" id="Bounded_Functions.less_eq_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.ord_bfun_inst.less_eq_bfun|thm"><span class="entity_def" id="Bounded_Functions.less_eq_bfun_def_raw|axiom"><span class="entity_def" id="Bounded_Functions.ord_bfun_inst.less_eq_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.ord_bfun_inst.less_eq_bfun|const"><span class="entity_def" id="offset_13689..13699">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="class_parameter"><span>less_eq_bfun</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.less_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.ord_bfun_inst.less_bfun|fact"><span class="entity_def" id="Bounded_Functions.less_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.ord_bfun_inst.less_bfun|thm"><span class="entity_def" id="Bounded_Functions.less_bfun_def_raw|axiom"><span class="entity_def" id="Bounded_Functions.ord_bfun_inst.less_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.ord_bfun_inst.less_bfun|const"><span class="entity_def" id="offset_13757..13767">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="class_parameter"><span>less_bfun</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>g</span></span></span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_ordered_real_normed_vector_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_ordered_real_normed_vector_bfun|thm"><span>instance</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>standard</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_13757..13767"><span>less_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_13689..13699"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.not_eq_order_implies_strict|fact"><span>order.not_eq_order_implies_strict</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_le_imp_less|fact"><span>not_le_imp_less</span></a><span> 
    </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_13689..13699"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_13757..13767"><span>less_bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.eq_iff|fact"><span>eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.ordered_real_vector_class.scaleR_left_mono|fact"><span>scaleR_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.ordered_real_vector_class.scaleR_right_mono|fact"><span>scaleR_right_mono</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.less_eq_bfunI|fact"><span class="entity_def" id="Bounded_Functions.less_eq_bfunI|thm"><span>less_eq_bfunI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.less_eq_bfunD|fact"><span class="entity_def" id="Bounded_Functions.less_eq_bfunD|thm"><span>less_eq_bfunD</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>dest</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Miscellaneous</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>bfun</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>,</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one|class"><span>one</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one|class"><span>one</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.one_bfun.rep_eq|fact"><span class="entity_def" id="Bounded_Functions.one_bfun.abs_eq|fact"><span class="entity_def" id="Bounded_Functions.one_bfun.transfer|fact"><span class="entity_def" id="Bounded_Functions.one_bfun.rsp|fact"><span class="entity_def" id="Bounded_Functions.one_bfun_def|fact"><span class="entity_def" id="Bounded_Functions.one_bfun_inst.one_bfun|fact"><span class="entity_def" id="Bounded_Functions.one_bfun.rep_eq|thm"><span class="entity_def" id="Bounded_Functions.one_bfun.abs_eq|thm"><span class="entity_def" id="Bounded_Functions.one_bfun.transfer|thm"><span class="entity_def" id="Bounded_Functions.one_bfun.rsp|thm"><span class="entity_def" id="Bounded_Functions.one_bfun_def|thm"><span class="entity_def" id="Bounded_Functions.one_bfun_inst.one_bfun|thm"><span class="entity_def" id="Bounded_Functions.one_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.one_bfun_inst.one_bfun_def|axiom"><span class="entity_def" id="Bounded_Functions.one_bfun_inst.one_bfun|const"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>one_bfun</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.const_bfun|fact"><span>const_bfun</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Functions.arity_one_bfun|fact"><span class="entity_def" id="Bounded_Functions.arity_one_bfun|thm"><span>instance</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>standard</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.one_bfun.rep_eq|fact"><span>one_bfun.rep_eq</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.apply_bfun_one|fact"><span class="entity_def" id="Bounded_Functions.apply_bfun_one|thm"><span>apply_bfun_one</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.one_bfun.rep_eq|fact"><span>one_bfun.rep_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.norm_bfun_one|fact"><span class="entity_def" id="Bounded_Functions.norm_bfun_one|thm"><span>norm_bfun_one</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.range_bfunI|fact"><span class="entity_def" id="Bounded_Functions.range_bfunI|thm"><span>range_bfunI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.finite_bfun|fact"><span class="entity_def" id="Bounded_Functions.finite_bfun|thm"><span>finite_bfun</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>::</span></span><span class="main"><span>_</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_class.finite|fact"><span>finite</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_imageI|fact"><span>finite_imageI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.finite_imp_bounded|fact"><span>finite_imp_bounded</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.range_bfunI|fact"><span>range_bfunI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15018..15023">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bounded_apply_bfun&apos;|fact"><span class="entity_def" id="Bounded_Functions.bounded_apply_bfun&apos;|thm"><span>bounded_apply_bfun'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="free"><span>S</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_15018..15023"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_pos|fact"><span>bounded_pos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_eqI|fact"><span>image_eqI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.trans|fact"><span>dual_order.trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>b</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bfun_tendsto_apply_bfun|fact"><span class="entity_def" id="Bounded_Functions.bfun_tendsto_apply_bfun|thm"><span>bfun_tendsto_apply_bfun</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_15404..15405">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15500..15503">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#offset_15404..15405"><span>h</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.tendsto_dist_iff|fact"><span>tendsto_dist_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun_def|fact"><span>dist_bfun_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Continuous_Function.html#Bounded_Continuous_Function.bounded_dist_le_SUP_dist|fact"><span>Bounded_Continuous_Function.bounded_dist_le_SUP_dist</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.Lim_transform_bound|fact"><span>Lim_transform_bound</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Bounded_Functions.html#offset_15500..15503"><span>aux</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.tendsto_dist_iff|fact"><span>tendsto_dist_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bounded Functions and Vectors</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.vec_bfun|fact"><span class="entity_def" id="Bounded_Functions.vec_bfun|thm"><span>vec_bfun</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.finite_bfun|fact"><span>finite_bfun</span></a><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.norm_bfun_le_norm_vec|fact"><span class="entity_def" id="Bounded_Functions.norm_bfun_le_norm_vec|thm"><span>norm_bfun_le_norm_vec</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>^</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>$</span></a></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def|fact"><span>norm_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun_def|fact"><span>dist_bfun_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>Bfun_inverse</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.component_le_norm_cart|fact"><span>component_le_norm_cart</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.bounded_linear_bfun_nth|fact"><span class="entity_def" id="Bounded_Functions.bounded_linear_bfun_nth|thm"><span>bounded_linear_bfun_nth</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>bfun.Bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_nth|const"><span>($)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.norm_nth_le|fact"><span>Finite_Cartesian_Product.norm_nth_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm|fact"><span>onorm</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>Bfun_inverse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Linear_Algebra.html#Linear_Algebra.linear_simps|fact"><span>linear_simps</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun_def|fact"><span>dist_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def|fact"><span>norm_bfun_def</span></a><span>
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_intro|fact"><span>bounded_linear_intro</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_least|fact"><span>cSup_least</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Functions.norm_vec_le_norm_bfun|fact"><span class="entity_def" id="Bounded_Functions.norm_vec_le_norm_bfun|thm"><span>norm_vec_le_norm_bfun</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'d</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.vec.vec_lambda|const"><span>vec_lambda</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/L2_Norm.html#L2_Norm.L2_set_le_sum_abs|fact"><span>L2_set_le_sum_abs</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Cartesian_Product.html#Finite_Cartesian_Product.norm_vec_def|fact"><span>norm_vec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/L2_Norm.html#L2_Norm.L2_set_def|fact"><span>L2_set_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'d</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.sum_bounded_above|fact"><span>sum_bounded_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_upper|fact"><span>cSup_upper</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def|fact"><span>norm_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun_def|fact"><span>dist_bfun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div><div id='MDP_reward'>dy>
<div class="head">
<h1>Theory Blinfun_Util</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bounded Linear Functions</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Blinfun_Util</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html"><span>HOL-Analysis.Bounded_Linear_Function</span></a><span>"</span></span><span> 
    </span><a href="Bounded_Functions.html"><span>Bounded_Functions</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Composition</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blinfun_compose_id|fact"><span class="entity_def" id="Blinfun_Util.blinfun_compose_id(2)|thm"><span class="entity_def" id="Blinfun_Util.blinfun_compose_id(1)|thm"><span>blinfun_compose_id</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blinfun_compose_assoc|fact"><span class="entity_def" id="Blinfun_Util.blinfun_compose_assoc|thm"><span>blinfun_compose_assoc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>F</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>H</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>G</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>H</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply_inject|fact"><span>blinfun_apply_inject</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blinfun_compose_diff_right|fact"><span class="entity_def" id="Blinfun_Util.blinfun_compose_diff_right|thm"><span>blinfun_compose_diff_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Power</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>overloading</span></span></span><span>
  blinfunpow </span><span class="main"><span>â¡</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compow|const"><span>compow</span></a><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Blinfun_Util.blinfunpow.simps|fact"><span class="entity_def" id="Blinfun_Util.blinfunpow_def|fact"><span class="entity_def" id="Blinfun_Util.blinfunpow.simps(2)|thm"><span class="entity_def" id="Blinfun_Util.blinfunpow.simps(1)|thm"><span class="entity_def" id="Blinfun_Util.blinfunpow_def|thm"><span class="entity_def" id="Blinfun_Util.blinfunpow_def|axiom"><span>primrec</span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span>blinfunpow</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blinfunpow</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blinfunpow</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>blinfunpow</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_851..856">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bounded_pow_blinfun|fact"><span class="entity_def" id="Blinfun_Util.bounded_pow_blinfun|thm"><span>bounded_pow_blinfun</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_851..856"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_1075..1077">bh</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_1075..1077"><span>bh</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun_compose|fact"><span>norm_blinfun_compose</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_mono&apos;|fact"><span>mult_mono'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blincomp_scaleR_right|fact"><span class="entity_def" id="Blinfun_Util.blincomp_scaleR_right|thm"><span>blincomp_scaleR_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_right|fact"><span>blinfun.scaleR_right</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.summable_inv_Q|fact"><span class="entity_def" id="Blinfun_Util.summable_inv_Q|thm"><span>summable_inv_Q</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_1593..1601">onorm_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_1593..1601"><span>onorm_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun_compose|fact"><span>norm_blinfun_compose</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_ratio_test|fact"><span>summable_ratio_test</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blinfunpow_assoc|fact"><span class="entity_def" id="Blinfun_Util.blinfunpow_assoc|thm"><span>blinfunpow_assoc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfun_compose_assoc|fact"><span>blinfun_compose_assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.norm_blinfunpow_le|fact"><span class="entity_def" id="Blinfun_Util.norm_blinfunpow_le|thm"><span>norm_blinfunpow_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun_id_le|fact"><span>norm_blinfun_id_le</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun_compose|fact"><span>norm_blinfun_compose</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2115..2120">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blinfunpow_nonneg|fact"><span class="entity_def" id="Blinfun_Util.blinfunpow_nonneg|thm"><span>blinfunpow_nonneg</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord|class"><span>ord</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_2115..2120"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2302..2307">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blinfunpow_mono|fact"><span class="entity_def" id="Blinfun_Util.blinfunpow_mono|thm"><span>blinfunpow_mono</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>u</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord|class"><span>ord</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_2302..2307"><span>assms</span></a><span class="main"><span>)</span></span><span>  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2485..2490">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.banach_blinfun|fact"><span class="entity_def" id="Blinfun_Util.banach_blinfun(2)|thm"><span class="entity_def" id="Blinfun_Util.banach_blinfun(1)|thm"><span>banach_blinfun</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.complete_space|class"><span>complete_space</span></a><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â!</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_2485..2490"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>v'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_2485..2490"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.banach_fix_type|fact"><span>banach_fix_type</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.zero_right|fact"><span>blinfun.zero_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_irrefl|fact"><span>less_irrefl</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.monoid_mult_class.mult.left_neutral|fact"><span>mult.left_neutral</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_semiring_strict_class.mult_less_le_imp_less|fact"><span>mult_less_le_imp_less</span></a><span> 
        </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_conv_dist|fact"><span>norm_conv_dist</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector_class.norm_ge_zero|fact"><span>norm_ge_zero</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.zero_less_dist_iff|fact"><span>zero_less_dist_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>l</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_2485..2490"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Norm_Arith.html#Norm_Arith.norm_imp_pos_and_ge|fact"><span>norm_imp_pos_and_ge</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_3100..3101">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3200..3201">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v0</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>v0</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span>âº</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.semigroup_mult_class.mult.assoc|fact"><span>mult.assoc</span></a><span> 
        </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_mono&apos;|fact"><span>mult_mono'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_3100..3101"><span>1</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>_</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>v</span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>âº</span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.LIMSEQ_realpow_zero|fact"><span>LIMSEQ_realpow_zero</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_3482..3483">k</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v0</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>v0</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_mult_left_zero|fact"><span>tendsto_mult_left_zero</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v0</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_3482..3483"><span>k</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_3200..3201"><span>2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_ge_self|fact"><span>abs_ge_self</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_0_le|fact"><span>Limits.tendsto_0_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?K</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span></a></span></span></a></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?f</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>n</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>l</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a></a></a><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>v0</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>v</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventuallyI|fact"><span>eventuallyI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v0</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.tendsto_dist_iff|fact"><span>tendsto_dist_iff</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v0</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.theI&apos;|fact"><span>theI'</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>v'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>âº</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â!</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.banach_fix_type|fact"><span>banach_fix_type</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Blinfun_Util.html#offset_2485..2490"><span>assms</span></a><span class="main"><span class="main"><span>]</span></span></span><span> 
        </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Geometric Sum</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv_one_sub_Q|fact"><span class="entity_def" id="Blinfun_Util.inv_one_sub_Q(2)|thm"><span class="entity_def" id="Blinfun_Util.inv_one_sub_Q(1)|thm"><span>inv_one_sub_Q</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_4262..4270">onorm_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_4438..4440">bh</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4262..4270"><span>onorm_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.dense_order_class.dense|fact"><span>dense</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector_class.norm_ge_zero|fact"><span>norm_ge_zero</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4438..4440"><span>bh</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4590..4601">norm_le_aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4438..4440"><span>bh</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_4750..4753">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun_compose|fact"><span>norm_blinfun_compose</span></a><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4750..4753"><span>Suc.IH</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4438..4440"><span>bh</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_mono&apos;|fact"><span>mult_mono'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="skolem"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_bilinear.diff_left|fact"><span>bounded_bilinear.diff_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_bilinear.add_right|fact"><span>bounded_bilinear.add_right</span></a><span> 
        </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear_blinfun_compose|fact"><span>bounded_bilinear_blinfun_compose</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4590..4601"><span>norm_le_aux</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_5412..5414">l2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4438..4440"><span>bh</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.Lim_transform_bound|fact"><span>Lim_transform_bound</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>n</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>b</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span></a></span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a></a></a><span> </span><span class="bound"><span class="bound"><span class="bound"><span>n</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.tendsto_eq_intros|fact"><span class="dynamic"><span class="dynamic"><span>tendsto_eq_intros</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4262..4270"><span>onorm_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun_compose|fact"><span>norm_blinfun_compose</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_ratio_test|fact"><span>summable_ratio_test</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span>  </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_LIMSEQ&apos;|fact"><span>summable_LIMSEQ'</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear_blinfun_compose|fact"><span>bounded_bilinear_blinfun_compose</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.bounded_bilinear.tendsto|fact"><span>Limits.bounded_bilinear.tendsto</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> prod </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>(o<span class="hidden">â©</span><sub>L</sub>)</span></a></span></a></span></a></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>   
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_diff|fact"><span>Limits.tendsto_diff</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.LIMSEQ_unique|fact"><span>LIMSEQ_unique</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_5412..5414"><span>l2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="skolem"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_6421..6424">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>(^^)</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
        </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>(^^)</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_bilinear.add_left|fact"><span>bounded_bilinear.add_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear_blinfun_compose|fact"><span>bounded_bilinear_blinfun_compose</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_6421..6424"><span>Suc.IH</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.minus_left|fact"><span>blinfun.minus_left</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfunpow_assoc|fact"><span>blinfunpow_assoc</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4590..4601"><span>norm_le_aux</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_7268..7270">l2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4438..4440"><span>bh</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.Lim_transform_bound|fact"><span>Lim_transform_bound</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>n</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>b</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span></a></span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a></a></a><span> </span><span class="bound"><span class="bound"><span class="bound"><span>n</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.tendsto_eq_intros|fact"><span class="dynamic"><span class="dynamic"><span>tendsto_eq_intros</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_4262..4270"><span>local.onorm_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun_compose|fact"><span>norm_blinfun_compose</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_ratio_test|fact"><span>summable_ratio_test</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span>  </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_LIMSEQ&apos;|fact"><span>summable_LIMSEQ'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear_blinfun_compose|fact"><span>bounded_bilinear_blinfun_compose</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.bounded_bilinear.tendsto|fact"><span>Limits.bounded_bilinear.tendsto</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> prod </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>(o<span class="hidden">â©</span><sub>L</sub>)</span></a></span></a></span></a></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>   
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_diff|fact"><span>Limits.tendsto_diff</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.LIMSEQ_unique|fact"><span>LIMSEQ_unique</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_7268..7270"><span>l2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8154..8159">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv_norm_le|fact"><span class="entity_def" id="Blinfun_Util.inv_norm_le(2)|thm"><span class="entity_def" id="Blinfun_Util.inv_norm_le(1)|thm"><span>inv_norm_le</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>Q</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_one_sub_Q|fact"><span>inv_one_sub_Q</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span></a></span><span> </span><span class="free"><span class="free"><span>Q</span></span></span><span>"</span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_8154..8159"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8394..8399">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv_norm_le&apos;|fact"><span class="entity_def" id="Blinfun_Util.inv_norm_le&apos;(2)|thm"><span class="entity_def" id="Blinfun_Util.inv_norm_le&apos;(1)|thm"><span>inv_norm_le'</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>Q</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_norm_le|fact"><span>inv_norm_le</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_8394..8399"><span>assms</span></a><span>  
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_apply_blinfun_compose|fact"><span>blinfun_apply_blinfun_compose</span></a><span> 
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_norm_le|fact"><span>inv_norm_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_apply_blinfun_compose|fact"><span>blinfun_apply_blinfun_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Inverses</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_def|fact"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_def|thm"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Y</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Y</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Y</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>X'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="bound"><span>X'</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8860..8865">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_I|fact"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_I|thm"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_I</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_8860..8865"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_def|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9026..9031">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_D|fact"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_D(2)|thm"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_D(1)|thm"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_D</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>dest</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_9026..9031"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_def|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9191..9196">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L_D|fact"><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L_D|thm"><span>invertible<span class="hidden">â©</span><sub>L</sub>_D</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>dest</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_9191..9196"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9335..9340">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L_I|fact"><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L_I|thm"><span>invertible<span class="hidden">â©</span><sub>L</sub>_I</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_9335..9340"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_comm|fact"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_comm|thm"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_comm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>Y</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_unique|fact"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_unique|thm"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_unique</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_def|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfun_compose_assoc|fact"><span>blinfun_compose_assoc</span></a><span>  </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfun_compose_id|fact"><span>blinfun_compose_id</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_ex1|fact"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_ex1|thm"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_ex1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â!</span></span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_unique|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_unique</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_ex1&apos;|fact"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_ex1&apos;|thm"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_ex1'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â!</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_ex1|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_ex1</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_def|fact"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_def|thm"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9975..9980">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_eq|fact"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_eq|thm"><span>inv<span class="hidden">â©</span><sub>L</sub>_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_def|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_9975..9980"><span>assms</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_ex1|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_ex1</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.the_equality|fact"><span>the_equality</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10130..10135">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_I|fact"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_I|thm"><span>inv<span class="hidden">â©</span><sub>L</sub>_I</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_10130..10135"><span>assms</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_eq|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_def|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv_app1|fact"><span class="entity_def" id="Blinfun_Util.inv_app1|thm"><span>inv_app1</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_ex1&apos;|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_ex1'</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_eq|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_eq</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv_app2|fact"><span class="entity_def" id="Blinfun_Util.inv_app2|thm"><span>inv_app2</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_ex1&apos;|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_ex1'</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_eq|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_eq</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv_app1&apos;|fact"><span class="entity_def" id="Blinfun_Util.inv_app1&apos;|thm"><span>inv_app1'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_app1|fact"><span>inv_app1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_apply_blinfun_compose|fact"><span>blinfun_apply_blinfun_compose</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun.rep_eq|fact"><span>id_blinfun.rep_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv_app2&apos;|fact"><span class="entity_def" id="Blinfun_Util.inv_app2&apos;|thm"><span>inv_app2'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_app2|fact"><span>inv_app2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_apply_blinfun_compose|fact"><span>blinfun_apply_blinfun_compose</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun.rep_eq|fact"><span>id_blinfun.rep_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_eq|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_comm|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_comm</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10893..10898">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_cancel_iff|fact"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_cancel_iff|thm"><span>inv<span class="hidden">â©</span><sub>L</sub>_cancel_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_10893..10898"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11007..11012">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L_inf_sum|fact"><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L_inf_sum|thm"><span>invertible<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_norm_le|fact"><span>Blinfun_Util.inv_norm_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11007..11012"><a class="entity_ref" href="Blinfun_Util.html#offset_11007..11012"><span>assms</span></a></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11007..11012"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11184..11189">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|fact"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_inf_sum|thm"><span>inv<span class="hidden">â©</span><sub>L</sub>_inf_sum</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_norm_le|fact"><span>Blinfun_Util.inv_norm_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11184..11189"><a class="entity_ref" href="Blinfun_Util.html#offset_11184..11189"><span>assms</span></a></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11184..11189"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_I|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_I</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11397..11402">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_compose|fact"><span class="entity_def" id="Blinfun_Util.is_inverse\&lt;^sub&gt;L_compose|thm"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_compose</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L|const"><span>is_inverse<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_eqI|fact"><span>blinfun_eqI</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_I|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_I</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_app2&apos;|fact"><span>inv_app2'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11397..11402"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_app2&apos;|fact"><span>inv_app2'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11397..11402"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_app1&apos;|fact"><span>inv_app1'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11397..11402"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_app1&apos;|fact"><span>inv_app1'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11397..11402"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L_compose|fact"><span class="entity_def" id="Blinfun_Util.invertible\&lt;^sub&gt;L_compose|thm"><span>invertible<span class="hidden">â©</span><sub>L</sub>_compose</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_compose|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_compose</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11834..11839">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_compose|fact"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_compose|thm"><span>inv<span class="hidden">â©</span><sub>L</sub>_compose</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.invertible\&lt;^sub&gt;L|const"><span>invertible<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_11834..11839"><span>assms</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_eq|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.is_inverse\&lt;^sub&gt;L_compose|fact"><span>is_inverse<span class="hidden">â©</span><sub>L</sub>_compose</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_id_blinfun|fact"><span class="entity_def" id="Blinfun_Util.inv\&lt;^sub&gt;L_id_blinfun|thm"><span>inv<span class="hidden">â©</span><sub>L</sub>_id_blinfun</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L|const"><span>inv<span class="hidden">â©</span><sub>L</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfun_compose_id|fact"><span>blinfun_compose_id</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv\&lt;^sub&gt;L_I|fact"><span>inv<span class="hidden">â©</span><sub>L</sub>_I</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Norm</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bounded_range_subset|fact"><span class="entity_def" id="Blinfun_Util.bounded_range_subset|thm"><span>bounded_range_subset</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bounded_const|fact"><span class="entity_def" id="Blinfun_Util.bounded_const|thm"><span>bounded_const</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.finite_imp_bounded|fact"><span>finite_imp_bounded</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite.emptyI|fact"><span>finite.emptyI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_insert|fact"><span>finite_insert</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_subset_iff|fact"><span>image_subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_iff|fact"><span>insert_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Blinfun_Util.bfun_pos.rep_eq|fact"><span class="entity_def" id="Blinfun_Util.bfun_pos.abs_eq|fact"><span class="entity_def" id="Blinfun_Util.bfun_pos.transfer|fact"><span class="entity_def" id="Blinfun_Util.bfun_pos.rsp|fact"><span class="entity_def" id="Blinfun_Util.bfun_pos_def|fact"><span class="entity_def" id="Blinfun_Util.bfun_pos.rep_eq|thm"><span class="entity_def" id="Blinfun_Util.bfun_pos.abs_eq|thm"><span class="entity_def" id="Blinfun_Util.bfun_pos.transfer|thm"><span class="entity_def" id="Blinfun_Util.bfun_pos.rsp|thm"><span class="entity_def" id="Blinfun_Util.bfun_pos_def|thm"><span class="entity_def" id="Blinfun_Util.bfun_pos_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bounded_const|fact"><span>bounded_const</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bounded_range_subset|fact"><span>bounded_range_subset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bfun_pos_zero|fact"><span class="entity_def" id="Blinfun_Util.bfun_pos_zero|thm"><span>bfun_pos_zero</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_eqI|fact"><span>bfun_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos.rep_eq|fact"><span>bfun_pos.rep_eq</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Blinfun_Util.bfun_nonneg.rep_eq|fact"><span class="entity_def" id="Blinfun_Util.bfun_nonneg.abs_eq|fact"><span class="entity_def" id="Blinfun_Util.bfun_nonneg.transfer|fact"><span class="entity_def" id="Blinfun_Util.bfun_nonneg.rsp|fact"><span class="entity_def" id="Blinfun_Util.bfun_nonneg_def|fact"><span class="entity_def" id="Blinfun_Util.bfun_nonneg.rep_eq|thm"><span class="entity_def" id="Blinfun_Util.bfun_nonneg.abs_eq|thm"><span class="entity_def" id="Blinfun_Util.bfun_nonneg.transfer|thm"><span class="entity_def" id="Blinfun_Util.bfun_nonneg.rsp|thm"><span class="entity_def" id="Blinfun_Util.bfun_nonneg_def|thm"><span class="entity_def" id="Blinfun_Util.bfun_nonneg_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bounded_const|fact"><span>bounded_const</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bounded_range_subset|fact"><span>bounded_range_subset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_def|fact"><span>bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bfun_nonneg_split|fact"><span class="entity_def" id="Blinfun_Util.bfun_nonneg_split|thm"><span>bfun_nonneg_split</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg.rep_eq|fact"><span>bfun_nonneg.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blinfun_split|fact"><span class="entity_def" id="Blinfun_Util.blinfun_split|thm"><span>blinfun_split</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg_split|fact"><span>bfun_nonneg_split</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bfun_nonneg_pos|fact"><span class="entity_def" id="Blinfun_Util.bfun_nonneg_pos|thm"><span>bfun_nonneg_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg.rep_eq|fact"><span>bfun_nonneg.rep_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos.rep_eq|fact"><span>bfun_pos.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bfun_nonneg|fact"><span class="entity_def" id="Blinfun_Util.bfun_nonneg|thm"><span>bfun_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg.rep_eq|fact"><span>bfun_nonneg.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bfun_pos_eq_nonneg|fact"><span class="entity_def" id="Blinfun_Util.bfun_pos_eq_nonneg|thm"><span>bfun_pos_eq_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|const"><span>bfun_nonneg</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos.rep_eq|fact"><span>bfun_pos.rep_eq</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg.rep_eq|fact"><span>bfun_nonneg.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13432..13437">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.blinfun_mono_norm_pos|fact"><span class="entity_def" id="Blinfun_Util.blinfun_mono_norm_pos|thm"><span>blinfun_mono_norm_pos</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13615..13616">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfun_split|fact"><span>blinfun_split</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg_pos|fact"><span>bfun_nonneg_pos</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_right|fact"><span>blinfun.add_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.abs_real_def|fact"><span>abs_real_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_comm_monoid_add_class.add_nonneg_nonneg|fact"><span>add_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_13432..13437"><span>assms</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_nonneg|fact"><span>bfun_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.zero_bfun.rep_eq|fact"><span>zero_bfun.rep_eq</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_13615..13616"><span>*</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.norm_bfun_pos|fact"><span class="entity_def" id="Blinfun_Util.norm_bfun_pos|thm"><span>norm_bfun_pos</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.SUP_cong|fact"><span>SUP_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos.rep_eq|fact"><span>bfun_pos.rep_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14351..14356">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.norm_blinfun_mono_eq_nonneg|fact"><span class="entity_def" id="Blinfun_Util.norm_blinfun_mono_eq_nonneg|thm"><span>norm_blinfun_mono_eq_nonneg</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun.rep_eq|fact"><span>norm_blinfun.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm_def|fact"><span>onorm_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14624..14625">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_divide_le_eq|fact"><span>pos_divide_le_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>m</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfun_mono_norm_pos|fact"><span>blinfun_mono_norm_pos</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_14351..14356"><span>assms</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.frac_le|fact"><span>frac_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos.rep_eq|fact"><span>bfun_pos.rep_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_14624..14625"><span>*</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.norm_blinfun_normalized_le|fact"><span class="entity_def" id="Blinfun_Util.norm_blinfun_normalized_le|thm"><span>norm_blinfun_normalized_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.bounded_linear_right|fact"><span>blinfun.bounded_linear_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.le_onorm|fact"><span>le_onorm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun.rep_eq|fact"><span>norm_blinfun.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15431..15436">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.norm_blinfun_mono_eq_nonneg&apos;|fact"><span class="entity_def" id="Blinfun_Util.norm_blinfun_mono_eq_nonneg&apos;|thm"><span>norm_blinfun_mono_eq_nonneg'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.norm_blinfun_mono_eq_nonneg|fact"><span>norm_blinfun_mono_eq_nonneg</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_15431..15436"><span>assms</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_16019..16023">show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>m</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bfun_pos|const"><span>bfun_pos</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_16019..16023"><span>that</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_nonneg_nonneg|fact"><span>scaleR_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_right|fact"><span>blinfun.scaleR_right</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>v</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.norm_blinfun_normalized_le|fact"><span>norm_blinfun_normalized_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16719..16724">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.norm_blinfun_mono_le_norm_one|fact"><span class="entity_def" id="Blinfun_Util.norm_blinfun_mono_le_norm_one|thm"><span>norm_blinfun_mono_le_norm_one</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16931..16933">**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_16719..16724"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.le_norm_bfun|fact"><span>le_norm_bfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>m</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_16719..16724"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_16719..16724"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_16719..16724"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_16931..16933"><span>**</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.zero_bfun.rep_eq|fact"><span>zero_bfun.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.abs_real_def|fact"><span>abs_real_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_le|fact"><span>linorder_class.not_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17555..17560">lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.norm_blinfun_mono_eq_one|fact"><span class="entity_def" id="Blinfun_Util.norm_blinfun_mono_eq_one|thm"><span>norm_blinfun_mono_eq_one</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'d</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_17555..17560"><span>assms</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.norm_blinfun_mono_le_norm_one|fact"><span>norm_blinfun_mono_le_norm_one</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_aboveI2|fact"><span>bdd_aboveI2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.norm_blinfun_mono_eq_nonneg&apos;|fact"><span>norm_blinfun_mono_eq_nonneg'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#offset_17555..17560"><span>assms</span></a><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Miscellaneous</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bounded_linear_apply_bfun|fact"><span class="entity_def" id="Blinfun_Util.bounded_linear_apply_bfun|thm"><span>bounded_linear_apply_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_intro|fact"><span>bounded_linear_intro</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.lim_blinfun_apply|fact"><span class="entity_def" id="Blinfun_Util.lim_blinfun_apply|thm"><span>lim_blinfun_apply</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.convergent|const"><span>convergent</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.bounded_bilinear_axioms|fact"><span>blinfun.bounded_bilinear_axioms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergent_LIMSEQ_iff|fact"><span>convergent_LIMSEQ_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.bounded_bilinear.tendsto|fact"><span>Limits.bounded_bilinear.tendsto</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Blinfun_Util.bounded_apply_blinfun|fact"><span class="entity_def" id="Blinfun_Util.bounded_apply_blinfun|thm"><span>bounded_apply_blinfun</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="free"><span>S</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_pos|fact"><span>bounded_pos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_eqI|fact"><span>image_eqI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_right_mono|fact"><span>mult_right_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>b</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
        </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.trans|fact"><span>dual_order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='MDP_reward'><body>
<div class="head">
<h1>Theory MDP_reward_Util</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>MDP_reward_Util</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Blinfun_Util.html"><span>Blinfun_Util</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Auxiliary Lemmas</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Summability</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_107..112">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.summable_powser_const|fact"><span class="entity_def" id="MDP_reward_Util.summable_powser_const|thm"><span>summable_powser_const</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_107..112"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Infinite sums</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.suminf_split_head&apos;|fact"><span class="entity_def" id="MDP_reward_Util.suminf_split_head&apos;|thm"><span>suminf_split_head'</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>suminf</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_split_head|fact"><span>suminf_split_head</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_432..437">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.sum_disc_lim|fact"><span class="entity_def" id="MDP_reward_Util.sum_disc_lim|thm"><span>sum_disc_lim</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_432..437"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_geometric|fact"><span>suminf_geometric</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_geometric|fact"><span>summable_geometric</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_mult2|fact"><span>suminf_mult2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bounded Functions</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_633..638">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.suminf_apply_bfun|fact"><span class="entity_def" id="MDP_reward_Util.suminf_apply_bfun|thm"><span>suminf_apply_bfun</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_633..638"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_intro|fact"><span>bounded_linear_intro</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.sum_apply_bfun|fact"><span class="entity_def" id="MDP_reward_Util.sum_apply_bfun|thm"><span>sum_apply_bfun</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>  

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Push-Forward of a Bounded Function</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.integrable_bfun_prob_space|fact"><span class="entity_def" id="MDP_reward_Util.integrable_bfun_prob_space|thm"><span>integrable_bfun_prob_space</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_norm_def|fact"><span>real_norm_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.ennreal|const"><span>ennreal</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Nonnegative_Lebesgue_Integration.html#Nonnegative_Lebesgue_Integration.nn_integral_mono|fact"><span>nn_integral_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.ennreal_leI|fact"><span>ennreal_leI</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.nn_integral_le_const|fact"><span>measure_pmf.nn_integral_le_const</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nonnegative_Real.html#Extended_Nonnegative_Real.ennreal_less_top|fact"><span>ennreal_less_top</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable_iff_bounded|fact"><span>integrable_iff_bounded</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward_Util.push_exp.rep_eq|fact"><span class="entity_def" id="MDP_reward_Util.push_exp.abs_eq|fact"><span class="entity_def" id="MDP_reward_Util.push_exp.transfer|fact"><span class="entity_def" id="MDP_reward_Util.push_exp.rsp|fact"><span class="entity_def" id="MDP_reward_Util.push_exp_def|fact"><span class="entity_def" id="MDP_reward_Util.push_exp.rep_eq|thm"><span class="entity_def" id="MDP_reward_Util.push_exp.abs_eq|thm"><span class="entity_def" id="MDP_reward_Util.push_exp.transfer|thm"><span class="entity_def" id="MDP_reward_Util.push_exp.rsp|thm"><span class="entity_def" id="MDP_reward_Util.push_exp_def|thm"><span class="entity_def" id="MDP_reward_Util.push_exp_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.push_exp|const"><span>push_exp</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_integral_bound&apos;|fact"><span>bfun_integral_bound'</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp.rep_eq|fact"><span>push_exp.rep_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.norm_push_exp_le_norm|fact"><span class="entity_def" id="MDP_reward_Util.norm_push_exp_le_norm|thm"><span>norm_push_exp_le_norm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.prob_space_axioms|fact"><span>measure_pmf.prob_space_axioms</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.integral_le_const|fact"><span>prob_space.integral_le_const</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_1911..1914">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_norm_bound|fact"><span>integral_norm_bound</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_1911..1914"><span>aux</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.push_exp_bounded_linear|fact"><span class="entity_def" id="MDP_reward_Util.push_exp_bounded_linear|thm"><span>push_exp_bounded_linear</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.norm_push_exp_le_norm|fact"><span>norm_push_exp_le_norm</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_intro|fact"><span>bounded_linear_intro</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.onorm_push_exp|fact"><span class="entity_def" id="MDP_reward_Util.onorm_push_exp|thm"><span>onorm_push_exp</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm|const"><span>onorm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm|const"><span>onorm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.norm_push_exp_le_norm|fact"><span>norm_push_exp_le_norm</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm_bound|fact"><span>onorm_bound</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm|const"><span>onorm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm|fact"><span>onorm</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp_bounded_linear|fact"><span>push_exp_bounded_linear</span></a><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.push_exp_return|fact"><span class="entity_def" id="MDP_reward_Util.push_exp_return|thm"><span>push_exp_return</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.eq_id_iff|fact"><span>eq_id_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Boundedness</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.bounded_abs|fact"><span class="entity_def" id="MDP_reward_Util.bounded_abs|thm"><span>bounded_abs</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X'</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>abs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.bounded_abs_range|fact"><span class="entity_def" id="MDP_reward_Util.bounded_abs_range|thm"><span>bounded_abs_range</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>abs</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Probability Theory</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3060..3065">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.integral_measure_pmf_bind|fact"><span class="entity_def" id="MDP_reward_Util.integral_measure_pmf_bind|thm"><span>integral_measure_pmf_bind</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3060..3065"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.integral_bind|fact"><span>integral_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></a></a><span>"</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>B</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_in_subprob_space|fact"><span>measure_pmf_in_subprob_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3337..3342">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.lemma_4_3_1&apos;|fact"><span class="entity_def" id="MDP_reward_Util.lemma_4_3_1&apos;|thm"><span>lemma_4_3_1'</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>W</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span>w</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3607..3619">abs_w_le_sup</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.bounded_abs|fact"><span>bounded_abs</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_image|fact"><span>image_image</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3777..3781">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3851..3856">ex_gr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>x'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>W</span></span></span><span> </span><span class="quoted"><span class="free"><span>w</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3777..3781"><span>that</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?s</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integral_less_AE|fact"><span>measure_pmf.integral_less_AE</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> A </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>{</span></span></span><span class="skolem"><span class="skolem"><span>x</span></span></span><span class="main"><span class="main"><span>}</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>w</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3607..3619"><span>abs_w_le_sup</span></a><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_measure_pmf_iff|fact"><span>AE_measure_pmf_iff</span></a><span> 
            </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integrable_const_bound|fact"><span>measure_pmf.integrable_const_bound</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?s</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3851..3856"><span>ex_gr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI|fact"><span>someI</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> P </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_measure_pmf_iff|fact"><span>AE_measure_pmf_iff</span></a><span> 
            </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3607..3619"><span>abs_w_le_sup</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integrable_const_bound|fact"><span>measure_pmf.integrable_const_bound</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.emeasure_pmf_single_eq_zero_iff|fact"><span>emeasure_pmf_single_eq_zero_iff</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>p</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.events|const"><span>measure_pmf.events</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>AE</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?s</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>AE</span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?s</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI|fact"><span>someI</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> P </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3851..3856"><span>ex_gr</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_pmfI|fact"><span>AE_pmfI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_linorder_class.less_cSUP_iff|fact"><span>less_cSUP_iff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3607..3619"><span>abs_w_le_sup</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> 
            </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_measure_pmf_iff|fact"><span>AE_measure_pmf_iff</span></a><span> 
            </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_aboveI|fact"><span>bdd_aboveI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> M </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="free"><span>W</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
            </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integral_le_const|fact"><span>measure_pmf.integral_le_const</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integrable_const_bound|fact"><span>measure_pmf.integrable_const_bound</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3851..3856"><span>ex_gr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI|fact"><span>someI</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> P </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="bound"><span>x'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><span class="var"><span>?s</span></span><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_5706..5707">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>w</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf_not_empty|fact"><span>set_pmf_not_empty</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.some_in_eq|fact"><span>some_in_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_5706..5707"><span>1</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_3337..3342"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf_not_empty|fact"><span>set_pmf_not_empty</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.some_in_eq|fact"><span>some_in_eq</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.bexI|fact"><span>bexI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
        </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_measure_pmf_iff|fact"><span>AE_measure_pmf_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_cong_AE|fact"><span>Bochner_Integration.integral_cong_AE</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?g</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6166..6171">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.lemma_4_3_1|fact"><span class="entity_def" id="MDP_reward_Util.lemma_4_3_1|thm"><span>lemma_4_3_1</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>w</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span class="main"><span>(</span></span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_6166..6171"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_has_Sup|fact"><span>bounded_has_Sup</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.prob_space_measure_pmf|fact"><span>prob_space_measure_pmf</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_measure_pmf_iff|fact"><span>AE_measure_pmf_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.integral_le_const|fact"><span>prob_space.integral_le_const</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6461..6466">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.bounded_integrable|fact"><span class="entity_def" id="MDP_reward_Util.bounded_integrable|thm"><span>bounded_integrable</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_6461..6466"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_measure_pmf_iff|fact"><span>AE_measure_pmf_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integrable_const_bound|fact"><span>measure_pmf.integrable_const_bound</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Argmax</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.finite_is_arg_max|fact"><span class="entity_def" id="MDP_reward_Util.finite_is_arg_max|thm"><span>finite_is_arg_max</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_6905..6911">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_6905..6911"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7131..7136">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.finite_arg_max_le|fact"><span class="entity_def" id="MDP_reward_Util.finite_arg_max_le|thm"><span>finite_arg_max_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_def|fact"><span>arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on_def|fact"><span>arg_max_on_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_7131..7136"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_7131..7136"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7389..7394">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.arg_max_on_in|fact"><span class="entity_def" id="MDP_reward_Util.arg_max_on_in|thm"><span>arg_max_on_in</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>  </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on_def|fact"><span>arg_max_on_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_def|fact"><span>arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_7389..7394"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_7389..7394"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.finite_is_arg_max|fact"><span>finite_is_arg_max</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI|fact"><span>someI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7609..7614">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.finite_arg_max_eq_Max|fact"><span class="entity_def" id="MDP_reward_Util.finite_arg_max_eq_Max|thm"><span>finite_arg_max_eq_Max</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_7609..7614"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_eqI|fact"><span>Max_eqI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.finite_arg_max_le|fact"><span>finite_arg_max_le</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.arg_max_on_in|fact"><span>arg_max_on_in</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.arg_max_SUP|fact"><span class="entity_def" id="MDP_reward_Util.arg_max_SUP|thm"><span>arg_max_SUP</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_aboveI|fact"><span>bdd_aboveI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward_Util.has_max_def|fact"><span class="entity_def" id="MDP_reward_Util.has_max_def|thm"><span class="entity_def" id="MDP_reward_Util.has_max_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward_Util.has_max|const"><span>has_max</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>x'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward_Util.has_arg_max_def|fact"><span class="entity_def" id="MDP_reward_Util.has_arg_max_def|thm"><span class="entity_def" id="MDP_reward_Util.has_arg_max_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_max|const"><span>has_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_max_def|fact"><span>has_max_def</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max_def|fact"><span>has_arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.has_arg_max_is_arg_max|fact"><span class="entity_def" id="MDP_reward_Util.has_arg_max_is_arg_max|thm"><span>has_arg_max_is_arg_max</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max|const"><span>arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max_def|fact"><span>has_arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_def|fact"><span>arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI|fact"><span>someI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.has_arg_max_arg_max|fact"><span class="entity_def" id="MDP_reward_Util.has_arg_max_arg_max|thm"><span>has_arg_max_arg_max</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max|const"><span>arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max_def|fact"><span>has_arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_def|fact"><span>arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.app_arg_max_ge|fact"><span class="entity_def" id="MDP_reward_Util.app_arg_max_ge|thm"><span>app_arg_max_ge</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max_def|fact"><span>has_arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on_def|fact"><span>arg_max_on_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_def|fact"><span>arg_max_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI|fact"><span>someI</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?P</span></span><span> </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.le_less_linear|fact"><span>le_less_linear</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.app_arg_max_eq_SUP|fact"><span class="entity_def" id="MDP_reward_Util.app_arg_max_eq_SUP|thm"><span>app_arg_max_eq_SUP</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.arg_max_SUP|fact"><span>arg_max_SUP</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on_def|fact"><span>arg_max_on_def</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max_is_arg_max|fact"><span>has_arg_max_is_arg_max</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9019..9024">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.SUP_is_arg_max|fact"><span class="entity_def" id="MDP_reward_Util.SUP_is_arg_max|thm"><span>SUP_is_arg_max</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_9019..9024"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9234..9239">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.is_arg_max_linorderI|fact"><span class="entity_def" id="MDP_reward_Util.is_arg_max_linorderI|thm"><span>is_arg_max_linorderI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_9234..9239"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9422..9427">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.is_arg_max_linorderD|fact"><span class="entity_def" id="MDP_reward_Util.is_arg_max_linorderD(2)|thm"><span class="entity_def" id="MDP_reward_Util.is_arg_max_linorderD(1)|thm"><span>is_arg_max_linorderD</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>dest</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_9422..9427"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9605..9610">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.is_arg_max_cong|fact"><span class="entity_def" id="MDP_reward_Util.is_arg_max_cong|thm"><span>is_arg_max_cong</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_9605..9610"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9760..9765">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.is_arg_max_congI|fact"><span class="entity_def" id="MDP_reward_Util.is_arg_max_congI|thm"><span>is_arg_max_congI</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_arg_max_cong|fact"><span>is_arg_max_cong</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_9760..9765"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Contraction Mappings</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward_Util.is_contraction_def|fact"><span class="entity_def" id="MDP_reward_Util.is_contraction_def|thm"><span class="entity_def" id="MDP_reward_Util.is_contraction_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward_Util.is_contraction|const"><span>is_contraction</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>C</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>C</span></span></span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>C</span></span></span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10036..10041">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.banach&apos;|fact"><span class="entity_def" id="MDP_reward_Util.banach&apos;(2)|thm"><span class="entity_def" id="MDP_reward_Util.banach&apos;(1)|thm"><span>banach'</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.complete_space|class"><span>complete_space</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction|const"><span>is_contraction</span></a><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â!</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_10211..10212">C</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>v'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="bound"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_10036..10041"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction_def|fact"><span>is_contraction_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.banach_fix_type|fact"><span>banach_fix_type</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>l</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_10324..10328">cont</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_10036..10041"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction_def|fact"><span>is_contraction_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10439..10440">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>v0</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>v0</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>v0</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v0</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v0</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span>âº</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_10211..10212"><span>C</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
          </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_10324..10328"><span>cont</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.LIMSEQ_realpow_zero|fact"><span>LIMSEQ_realpow_zero</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>l</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v0</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>v0</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_mult_left_zero|fact"><span>tendsto_mult_left_zero</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v0</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_10439..10440"><span>*</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_ge_self|fact"><span>abs_ge_self</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_0_le|fact"><span>Limits.tendsto_0_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>n</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>l</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a></a></a><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>v0</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>v</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span></a></span></span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventuallyI|fact"><span>eventuallyI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v0</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.tendsto_dist_iff|fact"><span>tendsto_dist_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v0</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_10211..10212"><span>C</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.theI&apos;|fact"><span>theI'</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â!</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_10036..10041"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction_def|fact"><span>is_contraction_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.banach_fix_type|fact"><span>banach_fix_type</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11488..11493">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.contraction_dist|fact"><span class="entity_def" id="MDP_reward_Util.contraction_dist|thm"><span>contraction_dist</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.complete_space|class"><span>complete_space</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>c</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction|const"><span>is_contraction</span></a><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction_def|fact"><span>is_contraction_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11488..11493"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v_fix</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_11802..11807">v_fix</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.the1_equality|fact"><span>the1_equality</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="skolem"><span>v_fix</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.banach&apos;|fact"><span>banach'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction|const"><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction|const"><span>is_contraction</span></a></a><span> </span><span class="free"><span class="free"><span>C</span></span></span><span>âº</span></span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11968..11985">dist_contr_le_pow</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11488..11493"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11488..11493"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12270..12280">summable_C</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11968..11985"><span>dist_contr_le_pow</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11488..11493"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.summable_powser_const|fact"><span>summable_powser_const</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_comparison_test|fact"><span>summable_comparison_test</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="free"><span class="free"><span class="free"><span>C</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span></a></span></a></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><span class="free"><span class="free"><span class="free"><span>v</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="free"><span class="free"><span class="free"><span>C</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a></a></a><span> </span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><span class="free"><span class="free"><span class="free"><span>v</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><span class="free"><span class="free"><span class="free"><span>c</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span></a></span></a></span><span class="bound"><span class="bound"><span class="bound"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a></a></a><span> </span><span class="free"><span class="free"><span class="free"><span>v</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="free"><span class="free"><span class="free"><span>C</span></span></span></span><span> </span><span class="free"><span class="free"><span class="free"><span>v</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
          </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>e</span></span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>safe</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><span>::</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="skolem"><span>v_fix</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.tendsto_iff|fact"><span>tendsto_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_12859..12860">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_imp_le_class.add_le_cancel_left|fact"><span>add_le_cancel_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle_le|fact"><span>dist_triangle_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.less_eq_real_def|fact"><span>less_eq_real_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="skolem"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_13161..13164">Suc</span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span>      
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Metric_Arith.html#Metric_Arith.metric|method"><span class="operator"><span>metric</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_simps_right|fact"><span>funpow_simps_right</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_def|fact"><span>o_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="skolem"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_13161..13164"><span>Suc.IH</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_imp_le_class.add_le_cancel_left|fact"><span>add_le_cancel_left</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="skolem"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_simps_right|fact"><span>funpow_simps_right</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_def|fact"><span>o_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.comm_monoid_add_class.sum.atMost_Suc_shift|fact"><span>sum.atMost_Suc_shift</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="skolem"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_12270..12280"><span>summable_C</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.sum_le_suminf|fact"><span>sum_le_suminf</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_12859..12860"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_14276..14285">le_suminf</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.field_le_epsilon|fact"><span>field_le_epsilon</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11968..11985"><span>dist_contr_le_pow</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_12270..12280"><span>summable_C</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11488..11493"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.summable_powser_const|fact"><span>summable_powser_const</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_14276..14285"><span>le_suminf</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_le|fact"><span>suminf_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.sum_disc_lim|fact"><span>sum_disc_lim</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.sum_disc_lim|fact"><span>sum_disc_lim</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_of_nonneg|fact"><span>abs_of_nonneg</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11488..11493"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11488..11493"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>v_fix</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11488..11493"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.pos_le_divide_eq|fact"><span>pos_le_divide_eq</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_gt_0_iff_gt|fact"><span>diff_gt_0_iff_gt</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_11802..11807"><span>v_fix</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Limits</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14883..14888">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.tendsto_bfun_sandwich|fact"><span class="entity_def" id="MDP_reward_Util.tendsto_bfun_sandwich|thm"><span>tendsto_bfun_sandwich</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually|const"><span>eventually</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually|const"><span>eventually</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15132..15133">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span>  </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_dist|fact"><span>tendsto_dist</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_14883..14888"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_14883..14888"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.tendsto_dist_iff|fact"><span>tendsto_dist_iff</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_14883..14888"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_add_zero|fact"><span>tendsto_add_zero</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually|const"><span>eventually</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span>"</span></span></span><span>    
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_14883..14888"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_14883..14888"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually_elim|method"><span class="operator"><span>eventually_elim</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_15428..15432">elim</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_15428..15432"><span>elim</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_real_def|fact"><span>dist_real_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun.rep_eq|fact"><span>dist_bfun.rep_eq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_real_def|fact"><span>dist_real_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_minus_comp|fact"><span>bounded_minus_comp</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.bounded_abs_range|fact"><span>bounded_abs_range</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually|const"><span>eventually</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_triangle|fact"><span>dist_triangle</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15989..15990">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually|const"><span>eventually</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually_elim2|fact"><span>eventually_elim2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.tendsto_iff|fact"><span>tendsto_iff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><span>::</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_16223..16224">3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_15132..15133"><span>1</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.tendsto_iff|fact"><span>tendsto_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>F</sub></span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually_mp|fact"><span>eventually_mp</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_reward_Util.html#offset_16223..16224"><span>3</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_15989..15990"><span>2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.eventually_mono|fact"><span>eventually_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.tendsto_dist_iff|fact"><span>tendsto_dist_iff</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Supremum</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16565..16570">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.SUP_add_le|fact"><span class="entity_def" id="MDP_reward_Util.SUP_add_le|thm"><span>SUP_add_le</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_16565..16570"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_has_Sup|fact"><span>bounded_has_Sup</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.le_SUP_diff&apos;|fact"><span class="entity_def" id="MDP_reward_Util.le_SUP_diff&apos;|thm"><span>le_SUP_diff'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_16832..16834">ne</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_16853..16856">bdd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_16904..16910">sup_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A'</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A'</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_16853..16856"><span>bdd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.bounded_minus_comp|fact"><span>bounded_minus_comp</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity_def" id="offset_17202..17203">e</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>e</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>z</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_17248..17249">z</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>e</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>z</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
       </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_17202..17203"><span>e</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_16832..16834"><span>ne</span></a><span>
       </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_linorder_class.less_cSupE|fact"><span>less_cSupE</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?y</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>â¨</span></a></span></a></span></a></span><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="free"><span class="free"><span class="free"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span></a></span></a></span><span> </span><span class="free"><span class="free"><span class="free"><span>X</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>e</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="var"><span>?X</span></span><span> </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span class="free"><span>B</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span></a></span></a></span><span class="free"><span class="free"><span class="free"><span>X</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>fastforce</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_16904..16910"><span>sup_le</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A'</span></span><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_16853..16856"><span>bdd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_has_Sup|fact"><span>bounded_has_Sup</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_17248..17249"><span>z</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_has_Sup|fact"><span>bounded_has_Sup</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_16853..16856"><span>bdd</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>z</span></span></span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.field_le_epsilon|fact"><span>field_le_epsilon</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>fastforce</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17844..17849">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.le_SUP_diff|fact"><span class="entity_def" id="MDP_reward_Util.le_SUP_diff|thm"><span>le_SUP_diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_17844..17849"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.le_SUP_diff&apos;|fact"><span>le_SUP_diff'</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.bounded_SUP_mul|fact"><span class="entity_def" id="MDP_reward_Util.bounded_SUP_mul|thm"><span>bounded_SUP_mul</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span>"</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.Sup_ereal_mult_left&apos;|fact"><span>Sup_ereal_mult_left'</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_real|fact"><span>bounded_real</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_18545..18552">sup_leb</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.complete_lattice_class.SUP_least|fact"><span>SUP_least</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.complete_lattice_class.SUP_mono&apos;|fact"><span>Complete_Lattices.SUP_mono'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>âº</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.complete_lattice_class.Inf_less_eq|fact"><span>Inf_less_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal_INF_uminus_eq|fact"><span>ereal_INF_uminus_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal_abs_leI|fact"><span>ereal_abs_leI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#offset_18545..18552"><span>sup_leb</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Nat.html#Extended_Nat.infinity_class.infinity|const"><span>â</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal_SUP|fact"><span>ereal_SUP</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal.ereal|const"><span>ereal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Extended_Real.html#Extended_Real.ereal_SUP|fact"><span>ereal_SUP</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward_Util.abs_cSUP_le|fact"><span class="entity_def" id="MDP_reward_Util.abs_cSUP_le|thm"><span>abs_cSUP_le</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_abs_le|fact"><span>cSup_abs_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_image|fact"><span>image_image</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div><div id='MDP_reward'><div class="head">
<h1>Theory MDP_cont</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler, adapted from Markov_Models.Discrete_Time_Markov_Process </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Discrete-Time Markov Decision Processes with Arbitrary State Spaces</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
  </span><span>In this file we construct discrete-time Markov decision processes, 
</span><span>  e.g. with arbitrary state spaces.
</span><span>  Proofs and definitions are adapted from Markov\_Models.Discrete\_Time\_Markov\_Process.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>MDP_cont</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Probability/Probability.html"><span>HOL-Probability.Probability</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_443..448">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.Ionescu_Tulcea_C_eq|fact"><span class="entity_def" id="MDP_cont.Ionescu_Tulcea_C_eq|thm"><span>Ionescu_Tulcea_C_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><span>PiM</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_541..542">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|const"><span>Ionescu_Tulcea</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|const"><span>Ionescu_Tulcea</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_541..542"><span>h</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C_def|fact"><span>Ionescu_Tulcea.C_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_787..790">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_801..804">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><span>PiM</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.rec_nat|const"><span>rec_nat</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>ma</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ma</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>Ï</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP|const"><span>Ionescu_Tulcea.eP</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_541..542"><span>h</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.space_C|fact"><span>Ionescu_Tulcea.space_C</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> P </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>P'</span></span></span></span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>x</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a></a></a><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C_def|fact"><span>Ionescu_Tulcea.C_def</span></a><span class="main"><span>)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><span>PiM</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP|const"><span>Ionescu_Tulcea.eP</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP|const"><span>Ionescu_Tulcea.eP</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP_def|fact"><span>Ionescu_Tulcea.eP_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_443..448"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_787..790"><span>Suc.IH</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_541..542"><span>h</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_801..804"><span>aux</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_cong|fact"><span>bind_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C_def|fact"><span>Ionescu_Tulcea.C_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1389..1394">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.Ionescu_Tulcea_CI_eq|fact"><span class="entity_def" id="MDP_cont.Ionescu_Tulcea_CI_eq|thm"><span>Ionescu_Tulcea_CI_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><span>PiM</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_1488..1489">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|const"><span>Ionescu_Tulcea</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|const"><span>Ionescu_Tulcea</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>J</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>J</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI_def|fact"><span>Ionescu_Tulcea.CI_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_1488..1489"><span>h</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI_def|fact"><span>Ionescu_Tulcea.CI_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_1488..1489"><span>h</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_1389..1394"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_cong|fact"><span>distr_cong</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.Ionescu_Tulcea_C_eq|fact"><span>Ionescu_Tulcea_C_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.measure_eqI_PiM_sequence|fact"><span class="entity_def" id="MDP_cont.measure_eqI_PiM_sequence|thm"><span>measure_eqI_PiM_sequence</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_1911..1912">*</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><span>PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><span>PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_1974..1976">eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span>
    </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_2109..2110">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.finite_measure|const"><span>finite_measure</span></a><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measure_eqI_PiM_infinite|fact"><span>measure_eqI_PiM_infinite</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_1911..1912"><span>*</span></a><span> _ </span><a class="entity_ref" href="MDP_cont.html#offset_2109..2110"><span>A</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>F'</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_2232..2233">J</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>F'</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_2281..2287">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_2334..2340">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>F</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="skolem"><span>F'</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>F</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_2232..2233"><span>J</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2486..2492">emb_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>{..</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atMost|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>cases</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_2281..2287"><span>n_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_2334..2340"><span>F_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb_def|fact"><span>prod_emb_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_def|fact"><span>PiE_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb_def|fact"><span>prod_emb_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_2334..2340"><span>F_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_2281..2287"><span>n_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_Suc_eq_le|fact"><span>less_Suc_eq_le</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>âº</span></span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_2486..2492"><span>emb_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_1974..1976"><span>eq</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>fact</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.distr_cong_simp|fact"><span class="entity_def" id="MDP_cont.distr_cong_simp|thm"><span>distr_cong_simp</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>L</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.simp_implies|const"><span>=simp=&gt;</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="free"><span>L</span></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.simp_implies_def|fact"><span>simp_implies_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_cong|fact"><span>distr_cong</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Definition and Basic Properties</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.intro|fact"><span class="entity_def" id="MDP_cont.discrete_MDP_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.intro|thm"><span class="entity_def" id="MDP_cont.discrete_MDP_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP|locale"><span class="entity_def" id="MDP_cont.discrete_MDP|const"><span>discrete_MDP</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> The valid actions are measurable subsets of all actions </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.A_s|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.A_s|thm"><span class="entity_def" id="offset_3408..3411">A_s</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> There always exists a valid action </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.A_ne|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.A_ne|thm"><span>A_ne</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> Assume the existence of at least 1 policy </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.ex_pol|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.ex_pol|thm"><span>ex_pol</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>Î´</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ma</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>Î´</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> The kernel maps a state-action pair to a distribution over states </span><span>*</span><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.K|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K|thm"><span class="entity_def" id="offset_3697..3698">K</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_prodI|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_prodI|thm"><span>space_prodI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>A'</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_cont.discrete_MDP.M|const"><span class="entity_def" id="offset_3893..3894">M</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_cont.discrete_MDP.Ma_A|const"><span class="entity_def" id="offset_3922..3926">Ma_A</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.restrict_space|const"><span>restrict_space</span></a><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_ma|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_ma|thm"><span class="entity_def" id="offset_3963..3971">space_ma</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_x0|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_x0|thm"><span>space_x0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>x0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets_eq_imp_space_eq|fact"><span>sets_eq_imp_space_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.A_subs_Ma|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.A_subs_Ma|thm"><span>A_subs_Ma</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3408..3411"><span>A_s</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets.sets_into_space|fact"><span>sets.sets_into_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_Ma_A_subset|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_Ma_A_subset|thm"><span>space_Ma_A_subset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_3922..3926"><span>Ma_A</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space_restrict_space|fact"><span>space_restrict_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.K_restrict|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K_restrict|thm"><span>K_restrict</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3922..3926"><span>Ma_A</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_id|fact"><span>measurable_id</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_pair_iff|fact"><span>measurable_pair_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_restrict_space2_iff|fact"><span>measurable_restrict_space2_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.measurable_K_act|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.measurable_K_act|thm"><span>measurable_K_act</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.measurable_K_st|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.measurable_K_st|thm"><span>measurable_K_st</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_K|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_K|thm"><span class="entity_def" id="offset_4811..4818">space_K</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3697..3698"><span>K</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra_def|fact"><span>prob_algebra_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_restrict_space2_iff|fact"><span>measurable_restrict_space2_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_measurableD|fact"><span>subprob_measurableD</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_K2|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_K2|thm"><span>space_K2</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_K_E|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_K_E|thm"><span>space_K_E</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_K|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_K|thm"><span class="entity_def" id="offset_5196..5202">sets_K</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3697..3698"><span>K</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra_def|fact"><span>prob_algebra_def</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_restrict_space2_iff|fact"><span>measurable_restrict_space2_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_measurableD|fact"><span>subprob_measurableD</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_K&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_K&apos;|thm"><span>sets_K'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_5196..5202"><span>sets_K</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_K|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_K|thm"><span class="entity_def" id="offset_5499..5511">prob_space_K</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3697..3698"><span>K</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_K2|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_K2|thm"><span>prob_space_K2</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_5499..5511"><span>prob_space_K</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.K_in_space|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K_in_space|thm"><span class="entity_def" id="offset_5764..5774">K_in_space</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3697..3698"><span>K</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Policies</span><span>âº</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> This section represents our own developments. </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.pol|type"><span>pol</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'d</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> History of i steps </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_cont.discrete_MDP.H|const"><span class="entity_def" id="offset_6052..6053">H</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="comment1"><span>(</span><span>*</span><span> + current state </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_cont.discrete_MDP.Hs|const"><span class="entity_def" id="offset_6118..6120">Hs</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span>  </span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_H1|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_H1|thm"><span class="entity_def" id="offset_6145..6153">space_H1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span>  </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Ï</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>Ï</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_def|fact"><span>PiE_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6253..6258">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_case_nat|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_case_nat|thm"><span>space_case_nat</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Ï</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><span class="free"><span>Ï</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6253..6258"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6145..6153"><span>space_H1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_fst|fact"><span>measurable_fst</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.undefined_in_H0|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.undefined_in_H0|thm"><span>undefined_in_H0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_K_Suc|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_K_Suc|thm"><span class="entity_def" id="offset_6544..6554">sets_K_Suc</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_5196..5202"><span>sets_K</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6145..6153"><span>space_H1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A decision rule is a function from states to distributions over enabled actions.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec0_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec0_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec0_def_raw|axiom"><span class="entity_def" id="offset_6745..6755">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec0.cong|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec0.cong|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec0|const"><span class="entity_def" id="offset_6757..6764">is_dec0</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span> </span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec_def_raw|axiom"><span class="entity_def" id="offset_6799..6809">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec.cong|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec.cong|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.is_dec|const"><span class="entity_def" id="offset_6811..6817">is_dec</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6118..6120"><span>Hs</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_6757..6764"><span>is_dec0</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6811..6817"><span>is_dec</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6745..6755"><span>is_dec0_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6799..6809"><span>is_dec_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A policy is a function from histories to valid decision rules.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.is_policy_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.is_policy_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.is_policy_def_raw|axiom"><span class="entity_def" id="offset_7023..7033">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_cont.discrete_MDP.is_policy.cong|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.is_policy.cong|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.is_policy|const"><span class="entity_def" id="offset_7034..7043">is_policy</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_policy</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6811..6817"><span>is_dec</span></a><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> selects the next action without history </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_cont.discrete_MDP.p0|const"><span class="entity_def" id="offset_7172..7174">p0</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p0</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_7288..7289">p</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.is_policyD|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.is_policyD|thm"><span class="entity_def" id="offset_7324..7334">is_policyD</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6118..6120"><span>Hs</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7288..7289"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7023..7033"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6799..6809"><span>is_dec_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_policy|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_policy|thm"><span class="entity_def" id="offset_7441..7453">space_policy</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>hs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6118..6120"><span>Hs</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>hs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3697..3698"><span>K</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7324..7334"><span>is_policyD</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra_def|fact"><span>prob_algebra_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_restrict_space2_iff|fact"><span>measurable_restrict_space2_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_measurableD|fact"><span>subprob_measurableD</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_policy&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_policy&apos;|thm"><span>space_policy'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7441..7453"><span>space_policy</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7777..7782">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_policyI|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_policyI|thm"><span>space_policyI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7441..7453"><span>space_policy</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7777..7782"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_policy|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_policy|thm"><span class="entity_def" id="offset_7968..7979">sets_policy</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>hs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6118..6120"><span>Hs</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>hs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7288..7289"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3697..3698"><span>K</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7324..7334"><span>is_policyD</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra_def|fact"><span>prob_algebra_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_restrict_space2_iff|fact"><span>measurable_restrict_space2_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_measurableD|fact"><span>subprob_measurableD</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_policy&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_policy&apos;|thm"><span class="entity_def" id="offset_8161..8173">sets_policy'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7968..7979"><span>sets_policy</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_policy&apos;&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_policy&apos;&apos;|thm"><span>sets_policy''</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7968..7979"><span>sets_policy</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.policy_prob_space|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.policy_prob_space|thm"><span class="entity_def" id="offset_8510..8527">policy_prob_space</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>hs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6118..6120"><span>Hs</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>hs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>hs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6118..6120"><span>Hs</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>hs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7288..7289"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>hs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra_def|fact"><span>prob_algebra_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space_restrict_space|fact"><span>space_restrict_space</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.policy_prob_space&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.policy_prob_space&apos;|thm"><span class="entity_def" id="offset_8808..8826">policy_prob_space'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_8510..8527"><span>policy_prob_space</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_p0|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_p0|thm"><span>prob_space_p0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_7172..7174"><span>p0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_8808..8826"><span>policy_prob_space'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.p0_sets|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.p0_sets|thm"><span>p0_sets</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>,</span></span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_measurableD|fact"><span>subprob_measurableD</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_p0|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_p0|thm"><span>space_p0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_7172..7174"><span>p0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.return_policy_prob_algebra|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.return_policy_prob_algebra|thm"><span class="entity_def" id="offset_9277..9303">return_policy_prob_algebra</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Successor Policy</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>To shift the policy by one step, we provide a single state-action pair as history</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.Suc_policy_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.Suc_policy_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.Suc_policy_def_raw|axiom"><span class="entity_def" id="offset_9550..9560">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sa</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>sa</span></span></span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.p_as_Suc_policy|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.p_as_Suc_policy|thm"><span>p_as_Suc_policy</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9733..9734">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.splits|fact"><span>nat.splits</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9550..9560"><span>Suc_policy_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9733..9734"><span>*</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.is_policy_Suc_policy|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.is_policy_Suc_policy|thm"><span class="entity_def" id="offset_9888..9908">is_policy_Suc_policy</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_9927..9928">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_9949..9950">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10019..10020">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="free"><span>sa</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9927..9928"><span>s</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6145..6153"><span>space_H1</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span>  </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_PiM_single|fact"><span>measurable_PiM_single</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.splits|fact"><span>nat.splits</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7324..7334"><span>is_policyD</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9949..9950"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>sa</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9550..9560"><span>Suc_policy_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_10019..10020"><span>*</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7023..7033"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6799..6809"><span>is_dec_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10548..10553">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.Suc_policy_measurable_step|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.Suc_policy_measurable_step|thm"><span>Suc_policy_measurable_step</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="free"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9550..9560"><span>Suc_policy_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_10548..10553"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> 
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_PiM_single&apos;|fact"><span>measurable_PiM_single'</span></a><span> 
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_def|fact"><span>extensional_def</span></a><span> 
      </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split|fact"><span>nat.split</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Single-Step Distribution</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>K'</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> takes 
</span><span>  a policy, 
</span><span>  a distribution over 's, 
</span><span>  the epoch,
</span><span>  and a history, 
</span><span>  produces a distribution over the next state-action pair.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.K&apos;_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K&apos;_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.K&apos;_def_raw|axiom"><span class="entity_def" id="offset_11136..11146">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_cont.discrete_MDP.K&apos;.cong|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K&apos;.cong|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.K&apos;|const"><span class="entity_def" id="offset_11147..11149">K'</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Ï</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s0</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Ï</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>Ï</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_K&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_K&apos;|thm"><span class="entity_def" id="offset_11340..11353">prob_space_K'</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_11366..11367">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11387..11388">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11425..11426">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11136..11146"><span>K'_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space.prob_space_bind|fact"><span>prob_space.prob_space_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> S </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>x0</span></span><span> </span><span class="main"><span>|</span></span><span> Suc </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11387..11388"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11425..11426"><span>h</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6145..6153"><span>space_H1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.splits|fact"><span>nat.splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>AE</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>x0</span></span><span> </span><span class="main"><span>|</span></span><span> Suc </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_11830..11831">0</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>h'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11425..11426"><span>h</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11830..11831"><span>0</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11366..11367"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11425..11426"><span>h</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11387..11388"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_8161..8173"><span>sets_policy'</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space.prob_space_bind|fact"><span>prob_space.prob_space_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> S</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span> 
          </span><a class="entity_ref" href="MDP_cont.html#offset_8510..8527"><span>policy_prob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_return|fact"><span>prob_space_return</span></a><span> 
          </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>nat</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.AE_I2|fact"><span>AE_I2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space.prob_space_bind|fact"><span>prob_space.prob_space_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11366..11367"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6145..6153"><span>space_H1</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11425..11426"><span>h</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11387..11388"><span>x</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_8510..8527"><span>policy_prob_space</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11425..11426"><span>h</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11366..11367"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6145..6153"><span>space_H1</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_return|fact"><span>prob_space_return</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11366..11367"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11425..11426"><span>h</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11387..11388"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_4811..4818"><span>space_K</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6145..6153"><span>space_H1</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9277..9303"><span>return_policy_prob_algebra</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
    </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>x0</span></span><span> </span><span class="main"><span>|</span></span><span> Suc </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_bind|fact"><span>measurable_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> N </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>Ma</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>x0</span></span><span> </span><span class="main"><span>|</span></span><span> Suc </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11366..11367"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11425..11426"><span>h</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11387..11388"><span>x</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.splits|fact"><span>nat.splits</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
      </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>x0</span></span><span> </span><span class="main"><span>|</span></span><span> Suc </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ma</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11425..11426"><span>h</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11387..11388"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6544..6554"><span>sets_K_Suc</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.splits|fact"><span>nat.splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_5196..5202"><span>sets_K</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.measurable_K&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.measurable_K&apos;|thm"><span class="entity_def" id="offset_13292..13305">measurable_K'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_13329..13330">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_13350..13351">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_6052..6053"><span>H</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11136..11146"><span>K'_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_bind_prob_space2|fact"><span>measurable_bind_prob_space2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> N </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>Ms</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>case</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>|</span></span><span> Suc </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_13350..13351"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>Ï</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>Ï</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_13350..13351"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_13329..13330"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Initial State-Action Distribution</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>K0</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> produces the initial state-action distribution from a state distribution
</span><span> and a policy.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.K0_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K0_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.K0_def_raw|axiom"><span class="entity_def" id="offset_14025..14035">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_cont.discrete_MDP.K0.cong|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K0.cong|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.K0|const"><span class="entity_def" id="offset_14037..14039">K0</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s0</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s0</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.K0_def&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K0_def&apos;|thm"><span class="entity_def" id="offset_14081..14088">K0_def'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>s0</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7172..7174"><span>p0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14025..14035"><span>K0_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11136..11146"><span>K'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.K0_prob|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K0_prob|thm"><span class="entity_def" id="offset_14199..14206">K0_prob</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14081..14088"><span>K0_def'</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_K0|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_K0|thm"><span class="entity_def" id="offset_14322..14335">prob_space_K0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14025..14035"><span>K0_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11340..11353"><span>prob_space_K'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_K0|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_K0|thm"><span class="entity_def" id="offset_14450..14458">space_K0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14199..14206"><span>K0_prob</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets_eq_imp_space_eq|fact"><span>sets_eq_imp_space_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.sets_kernel|fact"><span>sets_kernel</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14617..14622">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_K0|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_K0|thm"><span class="entity_def" id="offset_14623..14630">sets_K0</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14617..14622"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14199..14206"><span>K0_prob</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_measurableD|fact"><span>subprob_measurableD</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14819..14824">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.K0_return_eq_p0|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.K0_return_eq_p0|thm"><span>K0_return_eq_p0</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7172..7174"><span>p0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14081..14088"><span>K0_def'</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14819..14824"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_return|fact"><span>bind_return</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> N </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.M_ne_policy|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.M_ne_policy|thm"><span class="entity_def" id="offset_15063..15074">M_ne_policy</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14450..14458"><span>space_K0</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.not_empty|fact"><span>prob_space.not_empty</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14322..14335"><span>prob_space_K0</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Sequence Space of the MDP</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We can instantiate </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|const"><span>Ionescu_Tulcea</span></a><span class="antiquote"><span>}</span></span></span><span> with </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span class="antiquote"><span>}</span></span></span><span>.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.IT_K&apos;|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.IT_K&apos;|thm"><span class="entity_def" id="offset_15318..15323">IT_K'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|const"><span>Ionescu_Tulcea</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea_def|fact"><span>Ionescu_Tulcea_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_13292..13305"><span>measurable_K'</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11340..11353"><span>prob_space_K'</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fast</span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_def_raw|axiom"><span class="entity_def" id="offset_15512..15522">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence.cong|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence.cong|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence|const"><span class="entity_def" id="offset_15523..15535">lim_sequence</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lim_sequence</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.projective_family.lim|const"><span>projective_family.lim</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_15717..15718">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_15754..15755">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_lim_sequence|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_lim_sequence|thm"><span class="entity_def" id="offset_15779..15797">space_lim_sequence</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_lim_sequence|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_lim_sequence|thm"><span class="entity_def" id="offset_15858..15875">sets_lim_sequence</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.emeasure_lim_sequence_emb|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.emeasure_lim_sequence_emb|thm"><span class="entity_def" id="offset_15951..15976">emeasure_lim_sequence_emb</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>J</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="bound"><span>J</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><span class="bound"><span>J</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="bound"><span>J</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="bound"><span>J</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>X</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.emeasure_lim_sequence_emb_I0o|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.emeasure_lim_sequence_emb_I0o|thm"><span class="entity_def" id="offset_16149..16178">emeasure_lim_sequence_emb_I0o</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>X</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|locale"><span>Ionescu_Tulcea</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15754..15755"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15717..15718"><span>x</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16439..16440">.</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15512..15522"><span>lim_sequence_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15512..15522"><span>lim_sequence_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><span class="skolem"><span>J</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>CI</span></a><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15512..15522"><span>lim_sequence_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>lim</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16834..16835">}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_16843..16846">emb</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16834..16835"><span>this</span></a><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>up_to_I0o</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.up_to|const"><span>up_to</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>up_to_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.Least_equality|fact"><span>Least_equality</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>space_C</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16843..16846"><span>emb</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>CI_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_id2|fact"><span>distr_id2</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16439..16440"><span>sets_C</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.distr_cong_simp|fact"><span>distr_cong_simp</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17216..17221">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_prob_space|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_prob_space|thm"><span class="entity_def" id="offset_17222..17245">lim_sequence_prob_space</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17216..17221"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_17374..17375">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|locale"><span>Ionescu_Tulcea</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17374..17375"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17506..17508">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17521..17523">sp</span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>E</sub></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_17506..17508"><span>CI</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_funcset|const"><span>â<span class="hidden">â©</span><sub>E</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17374..17375"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15779..15797"><span>space_lim_sequence</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb_def|fact"><span>prod_emb_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17506..17508"><span>PF.space_P</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17506..17508"><span>PF.prob_space_P</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.emeasure_space_1|fact"><span>prob_space.emeasure_space_1</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_spaceI|fact"><span>prob_spaceI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17374..17375"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17521..17523"><span>sp</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15951..15976"><span>emeasure_lim_sequence_emb</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_empty_domain|fact"><span>PiE_empty_domain</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Measurablility of the Sequence Space</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence|thm"><span class="entity_def" id="offset_17988..18000">lim_sequence</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_18025..18026">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebra_generated|fact"><span>measurable_prob_algebra_generated</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.sets_PiM|fact"><span>sets_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Int_stable_prod_algebra|fact"><span>Int_stable_prod_algebra</span></a><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_algebra_sets_into_space|fact"><span>prod_algebra_sets_into_space</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17222..17245"><span>lim_sequence_prob_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18025..18026"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18025..18026"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15858..15875"><span>sets_lim_sequence</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_algebra|const"><span>prod_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>F</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_18634..18635">J</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.funcset|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_18682..18683">X</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_algebra_def|fact"><span>prod_algebra_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18777..18781">Pi_F</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.sets_PiM_I_finite|fact"><span>sets_PiM_I_finite</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_18871..18877">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span class="main"><span>â¥</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18922..18928">J_le_n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span class="main"><span>â¥</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_le|fact"><span>not_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_less_iff|fact"><span>Max_less_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>âº</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_le_eq|fact"><span>Suc_le_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span class="main"><span>â¥</span></span><span class="skolem"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>a</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_le|fact"><span>not_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18871..18877"><span>n_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI2|fact"><span>LeastI2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span class="main"><span>â¥</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19311..19312">C</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C.simps|fact"><span>Ionescu_Tulcea.C.simps</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18025..18026"><span>p</span></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_19587..19590">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP|const"><span>Ionescu_Tulcea.eP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP|const"><span>Ionescu_Tulcea.eP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18025..18026"><span>p</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP_def|fact"><span>Ionescu_Tulcea.eP_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.split|fact"><span>prod.split</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr2|fact"><span>measurable_distr2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> M </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_PiM_single&apos;|fact"><span>measurable_PiM_single'</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>Ï</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>Ï</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.split_beta&apos;|fact"><span>split_beta'</span></a><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>Ï</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>Ï</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.funcset|const"><span>â</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_funcset|const"><span>â<span class="hidden">â©</span><sub>E</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_Suc_eq|fact"><span>less_Suc_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11136..11146"><span>K'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18025..18026"><span>p</span></a><span> 
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_19587..19590"><span>Suc.IH</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C.simps|fact"><span>Ionescu_Tulcea.C.simps</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> p1 </span><span class="main"><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>p</span></span></span></span></span></span></span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18025..18026"><span>p</span></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_bind|fact"><span>measurable_bind</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21438..21439">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr|fact"><span>measurable_distr</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_restrict_subset|fact"><span>measurable_restrict_subset</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18922..18928"><span>J_le_n</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_19311..19312"><span>C</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18025..18026"><span>p</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.up_to_def|fact"><span>Ionescu_Tulcea.up_to_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18871..18877"><span>n_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI_def|fact"><span>Ionescu_Tulcea.CI_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18682..18683"><span>X</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18634..18635"><span>J</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18777..18781"><span>Pi_F</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18025..18026"><span>p</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15951..15976"><span>emeasure_lim_sequence_emb</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_21438..21439"><span>*</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_emeasure_subprob_algebra|fact"><span>measurable_emeasure_subprob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_18777..18781"><span>Pi_F</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_aux|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_aux|thm"><span class="entity_def" id="offset_22226..22242">lim_sequence_aux</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_22267..22268">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_22294..22295">f</span><span> </span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_22345..22347">f'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ma</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_22473..22475">gm</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebra_generated|fact"><span>measurable_prob_algebra_generated</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.sets_PiM|fact"><span>sets_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Int_stable_prod_algebra|fact"><span>Int_stable_prod_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_algebra_sets_into_space|fact"><span>prod_algebra_sets_into_space</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_22716..22717">a</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22746..22747">g</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22473..22475"><span>gm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|locale"><span>Ionescu_Tulcea</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22267..22268"><span>p</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22294..22295"><span>f</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>âº</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22746..22747"><span>g</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22936..22938">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22957..22959">p'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>âº</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22267..22268"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22294..22295"><span>f</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_23022..23024">sp</span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>E</sub></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_22936..22938"><span>CI</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_funcset|const"><span>â<span class="hidden">â©</span><sub>E</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22746..22747"><span>g</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22716..22717"><span>a</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22957..22959"><span>p'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15779..15797"><span>space_lim_sequence</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22957..22959"><span>p'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb_def|fact"><span>prod_emb_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22936..22938"><span>PF.space_P</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_23022..23024"><span>sp</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22746..22747"><span>g</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22716..22717"><span>a</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22957..22959"><span>p'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets.top|fact"><span>sets.top</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM_empty|fact"><span>space_PiM_empty</span></a><span class="main"><span>]</span></span><span> 
      </span><a class="entity_ref" href="MDP_cont.html#offset_22936..22938"><span>PF.prob_space_P</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.emeasure_space_1|fact"><span>prob_space.emeasure_space_1</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15951..15976"><span>emeasure_lim_sequence_emb</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15951..15976"><span>emeasure_lim_sequence_emb</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_23022..23024"><span>sp</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_spaceI|fact"><span>prob_spaceI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15512..15522"><span>lim_sequence_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_algebra|const"><span>prod_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>F</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_23868..23869">J</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.funcset|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_23916..23917">X</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb|const"><span>prod_emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_algebra_def|fact"><span>prod_algebra_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_24011..24015">Pi_F</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.sets_PiM_I_finite|fact"><span>sets_PiM_I_finite</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_24105..24111">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>LEAST</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.Least|const"><span>.</span></a></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>i</span></span></span><span class="main"><span>â¥</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_24156..24162">J_le_n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24105..24111"><span>n_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.wellorder_class.LeastI2|fact"><span>LeastI2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a></a></a><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>J</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_le_eq|fact"><span>Suc_le_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_le|fact"><span>not_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_24300..24301">g</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22473..22475"><span>gm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_24396..24397">C</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
    </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24300..24301"><span>g</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22294..22295"><span>f</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span>  </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C.simps|fact"><span>Ionescu_Tulcea.C.simps</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C.simps|fact"><span>Ionescu_Tulcea.C.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP|const"><span>Ionescu_Tulcea.eP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity_def" id="offset_24987..24988">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_bind&apos;|fact"><span>measurable_bind'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24987..24988"><span>h</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP|const"><span>Ionescu_Tulcea.eP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP|const"><span>Ionescu_Tulcea.eP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
          </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP_def|fact"><span>Ionescu_Tulcea.eP_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22294..22295"><span>f</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24300..24301"><span>g</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3963..3971"><span>space_ma</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22267..22268"><span>p</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span> 
                </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.eP_def|fact"><span>Ionescu_Tulcea.eP_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> 
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
              </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr2|fact"><span>measurable_distr2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> M</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_PiM_single&apos;|fact"><span>measurable_PiM_single'</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
            </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
              </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.split_beta&apos;|fact"><span>split_beta'</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
            </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
            </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
              </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.split_beta&apos;|fact"><span>split_beta'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_def|fact"><span>extensional_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi_iff|fact"><span>Pi_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
            </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
            </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
              </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11136..11146"><span>K'_def</span></a><span>
            </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_bind|fact"><span>measurable_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> N </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>Ms</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
              </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
              </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
                </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_pair_swap_iff|fact"><span>measurable_pair_swap_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></span><span class="main"><span>]</span></span><span>
                </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22473..22475"><span>gm</span></a><span>  </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_snd&apos;&apos;|fact"><span>measurable_snd''</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
              </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
              </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
                </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9550..9560"><span>Suc_policy_def</span></a><span>
                </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22345..22347"><span>f'</span></a><span>
                </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_bind|fact"><span>measurable_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> N </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="free"><span>Ma</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>w</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.fun_upd|const"><span>fun_upd</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22294..22295"><span>f</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24300..24301"><span>g</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_27244..27246">p'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22294..22295"><span>f</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI|const"><span>Ionescu_Tulcea.CI</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_23916..23917"><span>X</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_23868..23869"><span>J</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24011..24015"><span>Pi_F</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24300..24301"><span>g</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22294..22295"><span>f</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3697..3698"><span>K</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22267..22268"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_27244..27246"><span>p'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15951..15976"><span>emeasure_lim_sequence_emb</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27618..27622">also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_compose|fact"><span>measurable_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_emeasure_subprob_algebra|fact"><span>measurable_emeasure_subprob_algebra</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24011..24015"><span>Pi_F</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> 
      </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong|fact"><span>measurable_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>w</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="free"><span class="free"><span>f</span></span></span><span> </span><span class="bound"><span class="bound"><span>w</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="free"><span class="free"><span>g</span></span></span><span> </span><span class="bound"><span class="bound"><span>w</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>
      </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="main"><span class="bound"><span class="main"><span class="bound"><span>_</span></span></span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></a><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>x</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a></a><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a></a><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="main"><span class="bound"><span class="main"><span class="bound"><span>_</span></span></span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></a><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>f</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a></a><span> </span><span class="bound"><span class="bound"><span>f</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_27906..27907">1</span><span> </span><span class="skolem"><span>w</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.CI_def|fact"><span>Ionescu_Tulcea.CI_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22294..22295"><span>f</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_27906..27907"><span>1</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24300..24301"><span>g</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_27906..27907"><span>1</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22267..22268"><span>p</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.up_to_def|fact"><span>Ionescu_Tulcea.up_to_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a></a></a><span> </span><span class="free"><span class="free"><span class="free"><span>p</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>w</span></span></span></span><span>"</span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span class="free"><span>K</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>w</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24105..24111"><span>n_def</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>âº</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_5499..5511"><span>prob_space_K</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_5196..5202"><span>sets_K</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_compose|fact"><span>measurable_compose</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr|fact"><span>measurable_distr</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_restrict_subset|fact"><span>measurable_restrict_subset</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24156..24162"><span>J_le_n</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_24396..24397"><span>C</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_27618..27622"><span>calculation</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_Suc_return|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_Suc_return|thm"><span>lim_sequence_Suc_return</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_28491..28492">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_28518..28519">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
    </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22226..22242"><span>lim_sequence_aux</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_28491..28492"><span>p</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9888..9908"><span>is_policy_Suc_policy</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_snd|fact"><span>measurable_snd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_28491..28492"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_28518..28519"><span>s</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3963..3971"><span>space_ma</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_28491..28492"><span>p</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9550..9560"><span>Suc_policy_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_PiM_single&apos;|fact"><span>measurable_PiM_single'</span></a><span> 
        </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_28518..28519"><span>s</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.space_pair_measure|fact"><span>space_pair_measure</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_def|fact"><span>extensional_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split|fact"><span>nat.split</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_29053..29058">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_Suc_K|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_Suc_K|thm"><span class="entity_def" id="offset_29059..29077">lim_sequence_Suc_K</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29053..29058"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_22226..22242"><span>lim_sequence_aux</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Iteration Rule</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.step_C|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.step_C|thm"><span class="entity_def" id="offset_29300..29306">step_C</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_29318..29319">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_29355..29356">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.C|const"><span>Ionescu_Tulcea.C</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|locale"><span>Ionescu_Tulcea</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29355..29356"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29318..29319"><span>x</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_29645..29646">.</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14450..14458"><span>space_K0</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29355..29356"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29318..29319"><span>x</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29318..29319"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>::</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split|fact"><span>nat.split</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>eP</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>measurable_eP</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>measurable_C</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_return|fact"><span>bind_return</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> N</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><span>{</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>eP_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_distr|fact"><span>bind_distr</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a></a><span> </span><span class="free"><span class="free"><span>n</span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span></a></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="main"><span class="bound"><span class="main"><span class="bound"><span>_</span></span></span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></a><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>measurable_C</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29318..29319"><span>x</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14623..14630"><span>sets_K0</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29355..29356"><span>p</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14025..14035"><span>K0_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>space_P</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_ident_sets|fact"><span>measurable_ident_sets</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>sets_P</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>measurable_C</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>space_P</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>4</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14025..14035"><span>K0_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_cong|fact"><span>bind_cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29645..29646"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_eq|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_sequence_eq|thm"><span class="entity_def" id="offset_30818..30833">lim_sequence_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_30845..30846">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_30886..30887">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
    </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?B</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measure_eqI_PiM_infinite|fact"><span>measure_eqI_PiM_infinite</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15858..15875"><span>sets_lim_sequence</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.non_empty|fact"><span>Ionescu_Tulcea.non_empty</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea.space_P|fact"><span>Ionescu_Tulcea.space_P</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?B</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15063..15074"><span>M_ne_policy</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14450..14458"><span>space_K0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31425..31434">interpret</span></span></span><span> lim_sequence</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|locale"><span>prob_space</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17988..18000"><span>lim_sequence</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_restrict_space2_iff|fact"><span>measurable_restrict_space2_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra_def|fact"><span>prob_algebra_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.finite_measure|const"><span>finite_measure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31425..31434"><span>lim_sequence.finite_measure</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|locale"><span>Ionescu_Tulcea</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31725..31726">.</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?U</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>F'</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_31811..31812">J</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="skolem"><span>F'</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_31856..31862">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_31909..31915">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>F</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="skolem"><span>F'</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_31984..31985">F</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31811..31812"><span>J</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_32053..32059">emb_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>cases</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31856..31862"><span>n_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31909..31915"><span>F_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb_def|fact"><span>prod_emb_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_def|fact"><span>PiE_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb_def|fact"><span>prod_emb_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31909..31915"><span>F_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31856..31862"><span>n_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_Suc_eq_le|fact"><span>less_Suc_eq_le</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>J</span></span><span>âº</span></span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_32053..32059"><span>emb_eq</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16149..16178"><span>emeasure_lim_sequence_emb_I0o</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.sets_PiM_I_finite|fact"><span>sets_PiM_I_finite</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>y</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>split_C</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?U</span></span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29300..29306"><span>step_C</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>y</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>y</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>measurable_C</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14623..14630"><span>sets_K0</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31984..31985"><span>F</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>non_empty</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14450..14458"><span>space_K0</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.emeasure_bind|fact"><span>emeasure_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span>  _ </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_compose|fact"><span>measurable_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>measurable_C</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_PiM_single&apos;|fact"><span>measurable_PiM_single'</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split_asm|fact"><span>nat.split_asm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Nonnegative_Lebesgue_Integration.html#Nonnegative_Lebesgue_Integration.nn_integral_cong|fact"><span>nn_integral_cong</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_33396..33397">y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14450..14458"><span>space_K0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> y</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Projective_Family.html#Projective_Family.Ionescu_Tulcea|locale"><span>Ionescu_Tulcea</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33534..33536">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15318..15323"><span>IT_K'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_fst|fact"><span>measurable_fst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?y</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?y</span></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><span>{</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_def|fact"><span>extensional_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split|fact"><span>nat.split</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_33805..33807">yM</span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>m</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_PiM_single&apos;|fact"><span>measurable_PiM_single'</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_def|fact"><span>extensional_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split|fact"><span>nat.split</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>y'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?y</span></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_def|fact"><span>PiE_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_def|fact"><span>extensional_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split|fact"><span>nat.split</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_34138..34141">eq1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.vimage|const"><span>-`</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
        </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>F</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets.sets_into_space|fact"><span>sets.sets_into_space</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31984..31985"><span>F</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_def|fact"><span>extensional_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Ball_def|fact"><span>Ball_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split|fact"><span>nat.split</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split_asm|fact"><span>nat.split_asm</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_34426..34429">eq2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.vimage|const"><span>-`</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
        </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>F</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets.sets_into_space|fact"><span>sets.sets_into_space</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31984..31985"><span>F</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.space_PiM|fact"><span>space_PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.PiE_iff|fact"><span>PiE_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.prod_emb_def|fact"><span>prod_emb_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.extensional_def|fact"><span>extensional_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Ball_def|fact"><span>Ball_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.splits|fact"><span>nat.splits</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?I</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/Indicator_Function.html#Indicator_Function.indicator|const"><span>indicator</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span>    
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="free"><span>Ms</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_fst|fact"><span>measurable_fst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?y</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="var"><span>?y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_34980..34983">Suc</span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span>

      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?y</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>eP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_34980..34983"><span>Suc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>eP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?y</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_distr|fact"><span>bind_distr</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.space_C</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.sets_C</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.eP</span></a><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_cong|fact"><span>bind_cong</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>Ï'</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>Ï'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Ï'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?y</span></span><span> </span><span class="skolem"><span>Ï'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11147..11149"><span>K'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>Ï'</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_11136..11146"><span>K'_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9550..9560"><span>Suc_policy_def</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.splits|fact"><span>nat.splits</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>eP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?y</span></span><span> </span><span class="skolem"><span>Ï'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.eP</span></a><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>Ï'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?y</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>eP_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.eP_def</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_distr|fact"><span>distr_distr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.space_C</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.sets_P</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.split|fact"><span>nat.split</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span>
              </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_cong|fact"><span>distr_cong</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.measurable_fun_upd|fact"><span>measurable_fun_upd</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> J</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.eP</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?y</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.distr_bind|fact"><span>distr_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> _ _ </span><a class="entity_ref" href="MDP_cont.html#offset_33805..33807"><span>yM</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.space_C</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.sets_C</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>â¹</span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM_empty|fact"><span>PiM_empty</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.distr_return|fact"><span>distr_return</span></a><span>âº</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="var"><span>?U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="var"><span>?y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="var"><span>?U</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.emeasure_distr|fact"><span>emeasure_distr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.sets_C</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.space_C</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_34138..34141"><span>eq1</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.sets_PiM_I_finite|fact"><span>sets_PiM_I_finite</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_16149..16178"><span>emeasure_lim_sequence_emb_I0o</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.sets_PiM_I_finite|fact"><span>sets_PiM_I_finite</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?y</span></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.emeasure_distr|fact"><span>emeasure_distr</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15512..15522"><span>lim_sequence_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_ident_sets|fact"><span>measurable_ident_sets</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_33396..33397"><span>y</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15779..15797"><span>space_lim_sequence</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_cont.html#offset_9888..9908"><span>is_policy_Suc_policy</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_34426..34429"><span>eq2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>C</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.undefined|const"><span>undefined</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_33534..33536"><span>y.PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_32053..32059"><span>emb_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_31811..31812"><span>J</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14623..14630"><span>sets_K0</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>âº</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30886..30887"><span>p</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.emeasure_bind|fact"><span>emeasure_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> N</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><span>PiM</span></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="main"><span class="bound"><span class="main"><span class="bound"><span class="main"><span class="bound"><span>_</span></span></span></span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></a></a><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_5196..5202"><span>sets_K</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30845..30846"><span>x</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span>
        </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr2|fact"><span>measurable_distr2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17988..18000"><span>lim_sequence</span></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
        </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span> 
        </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr2|fact"><span>measurable_distr2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> M </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.PiM|const"><span>PiM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.emeasure|const"><span>emeasure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_31725..31726"><span>PF.emb</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.Pi\&lt;^sub&gt;E|const"><span>Pi<span class="hidden">â©</span><sub>E</sub></span></a><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>F'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Stream Space of the MDP</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream_def|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream_def|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream_def_raw|axiom"><span class="entity_def" id="offset_38304..38314">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream.cong|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream.cong|thm"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream|const"><span class="entity_def" id="offset_38315..38325">lim_stream</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream|type"><span>stream</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lim_stream</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_lim_stream|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_lim_stream|thm"><span>space_lim_stream</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_38315..38325"><span>lim_stream</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.streams|const"><span>streams</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38304..38314"><span>lim_stream_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.space_stream_space|fact"><span>space_stream_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.sets_lim_stream|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.sets_lim_stream|thm"><span>sets_lim_stream</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_38315..38325"><span>lim_stream</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38304..38314"><span>lim_stream_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_38723..38728">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream|thm"><span class="entity_def" id="offset_38729..38739">lim_stream</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_38315..38325"><span>lim_stream</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38304..38314"><span>lim_stream_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38723..38728"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr_prob_space2|fact"><span>measurable_distr_prob_space2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_17988..18000"><span>lim_sequence</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream_Suc|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream_Suc|thm"><span>lim_stream_Suc</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_39015..39016">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38315..38325"><span>lim_stream</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38304..38314"><span>lim_stream_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39015..39016"><span>p</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr_prob_space2|fact"><span>measurable_distr_prob_space2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29059..29077"><span>lim_sequence_Suc_K</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.space_stream_space_M_ne|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.space_stream_space_M_ne|thm"><span class="entity_def" id="offset_39246..39269">space_stream_space_M_ne</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.sconst_streams|fact"><span>sconst_streams</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.space_stream_space|fact"><span>space_stream_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_39390..39395">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_lim_stream|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_lim_stream|thm"><span>prob_space_lim_stream</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_38315..38325"><span>lim_stream</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39390..39395"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38729..38739"><span>lim_stream</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_39622..39627">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_step|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.prob_space_step|thm"><span>prob_space_step</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_38315..38325"><span>lim_stream</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39622..39627"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_5764..5774"><span>K_in_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_9888..9908"><span>is_policy_Suc_policy</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream_eq|fact"><span class="entity_def" id="MDP_cont.discrete_MDP.lim_stream_eq|thm"><span>lim_stream_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_39830..39831">p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_7034..7043"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_39857..39858">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="free"><span>Ms</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_38315..38325"><span>lim_stream</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>Ï</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38315..38325"><span>lim_stream</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_38304..38314"><span>lim_stream_def</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_30818..30833"><span>lim_sequence_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39857..39858"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.distr_bind|fact"><span>distr_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ _ </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.measurable_to_stream|fact"><span>measurable_to_stream</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
    </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraD|fact"><span>measurable_prob_algebraD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_distr_prob_space2|fact"><span>measurable_distr_prob_space2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> M</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>j</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></a><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_29059..29077"><span>lim_sequence_Suc_K</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14623..14630"><span>sets_K0</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39857..39858"><span>x</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>ya</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>ya</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14623..14630"><span>sets_K0</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39857..39858"><span>x</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span>  </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></a></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span></a></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>j</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a></a></a><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39857..39858"><span>x</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.not_empty|fact"><span>prob_space.not_empty</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14322..14335"><span>prob_space_K0</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>Ï</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_cong|fact"><span>bind_cong</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_distr|fact"><span>distr_distr</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39857..39858"><span>x</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_ident_sets|fact"><span>measurable_ident_sets</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15858..15875"><span>sets_lim_sequence</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_space|fact"><span>measurable_space</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_14037..14039"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#offset_15523..15535"><span>lim_sequence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP.Suc_policy|const"><span>Suc_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>Ï</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_3893..3894"><span>M</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_return_distr&apos;|fact"><span>bind_return_distr'</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>1</span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39246..39269"><span>space_stream_space_M_ne</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39857..39858"><span>x</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>2</span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39857..39858"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_15858..15875"><span>sets_lim_sequence</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_cong_sets|fact"><span>measurable_cong_sets</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_cong|fact"><span>distr_cong</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>[</span></span></span><span>1</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>3</span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39830..39831"><span>p</span></a><span> </span><a class="entity_ref" href="MDP_cont.html#offset_39857..39858"><span>x</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_distr|fact"><span>distr_distr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream_nat_case|fact"><span>to_stream_nat_case</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_compose|fact"><span>measurable_compose</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.measurable_to_stream|fact"><span>measurable_to_stream</span></a><span class="main"><span class="main"><span>]</span></span></span><span> 
            </span><a class="entity_ref" href="MDP_cont.html#offset_15858..15875"><span>sets_lim_sequence</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_cong|fact"><span>distr_cong</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable_ident_sets|fact"><span>measurable_ident_sets</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='MDP_reward'><div class="head">
<h1>Theory MDP_disc</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>MDP_disc</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
    </span><a href="MDP_cont.html"><span>MDP_cont</span></a><span>
    </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Library/Omega_Words_Fun.html"><span>HOL-Library.Omega_Words_Fun</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Markov Decision Processes with Discrete State Spaces</span><span>âº</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> counterpart to nn_integral_stream_space </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|locale"><span>prob_space</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="MDP_disc.measure_pmf.integral_stream_space|fact"><span class="entity_def" id="MDP_disc.prob_space.integral_stream_space|fact"><span class="entity_def" id="MDP_disc.measure_pmf.integral_stream_space|thm"><span class="entity_def" id="MDP_disc.prob_space.integral_stream_space|thm"><span>integral_stream_space</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream|type"><span>stream</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Topology.html#Elementary_Topology.second_countable_topology|class"><span>second_countable_topology</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_normed_vector|class"><span>real_normed_vector</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_374..379">int_f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> S</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Infinite_Product_Measure.html#Infinite_Product_Measure.sequence_space|locale"><span>sequence_space</span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_597..599">..</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> P</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_sigma_finite|locale"><span>pair_sigma_finite</span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_656..658">..</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> P'</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_sigma_finite|locale"><span>pair_sigma_finite</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>Î <span class="hidden">â©</span><sub>M</sub></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.has_bochner_integral|const"><span>has_bochner_integral</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_374..379"><span>int_f</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable.cases|fact"><span>integrable.cases</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_374..379"><span>int_f</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable_distr|fact"><span>integrable_distr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.measurable_to_stream|fact"><span>measurable_to_stream</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space_eq_distr|fact"><span>stream_space_eq_distr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.PiM_iter</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.S</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable_distr_eq|fact"><span>integrable_distr_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.S</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable_cong|fact"><span>integrable_cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1854..1855">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.S</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space_eq_distr|fact"><span>stream_space_eq_distr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_distr|fact"><span>integral_distr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.S</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.PiM_iter</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_distr|fact"><span>integral_distr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.case_nat|const"><span>case_nat</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.S</span></a><span>  </span><span class="main"><span>â</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_1854..1855"><span>*</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.pair_sigma_finite.integral_fst|fact"><span>pair_sigma_finite.integral_fst</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_656..658"><span>P.pair_sigma_finite_axioms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_unfold|fact"><span>case_prod_unfold</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_597..599"><span>S.S</span></a><span> </span><span class="main"><span>â</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Henstock_Kurzweil_Integration.html#Henstock_Kurzweil_Integration.integral_cong|fact"><span>integral_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream_nat_case|fact"><span>to_stream_nat_case</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.to_stream|const"><span>to_stream</span></a><span> </span><span class="main"><span>â</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_cong|fact"><span>Bochner_Integration.integral_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_distr|fact"><span>integral_distr</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space_eq_distr|fact"><span>stream_space_eq_distr</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.prefix_cons|fact"><span class="entity_def" id="MDP_disc.prefix_cons|thm"><span>prefix_cons</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>seq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>seq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>seq</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_upt_Suc|fact"><span>map_upt_Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.subsequence_def|fact"><span>subsequence_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.restrict_Suc|fact"><span class="entity_def" id="MDP_disc.restrict_Suc|thm"><span>restrict_Suc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.prefix_restrict|fact"><span class="entity_def" id="MDP_disc.prefix_restrict|thm"><span>prefix_restrict</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.restrict_Suc|fact"><span>restrict_Suc</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.prefix_cons|fact"><span>prefix_cons</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.prefix_measurable|fact"><span class="entity_def" id="MDP_disc.prefix_measurable|thm"><span>prefix_measurable</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_3568..3571">Suc</span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3582..3585">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>w</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3750..3754">aux'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>w</span></span><span class="main"><span>,</span></span><span class="bound"><span>wi</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="bound"><span>wi</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_3568..3571"><span>Suc.IH</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3958..3962">f_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>w</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>w</span></span><span class="main"><span>,</span></span><span class="bound"><span>wi</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="bound"><span>wi</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>w</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/FuncSet.html#FuncSet.restrict|const"><span>restrict</span></a><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>w</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Finite_Product_Measure.html#Finite_Product_Measure.Pi\&lt;^sub&gt;M|const"><span>Pi<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_3582..3585"><span>aux</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_3750..3754"><span>aux'</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.prefix_restrict|fact"><span>prefix_restrict</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_3958..3962"><span>f_eq</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.prefix_restrict|fact"><span>prefix_restrict</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>no_notation</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.build|const"><span>Omega_Words_Fun.build</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixr</span></span></span><span>  </span><span class="quoted"><span>â¹</span><span class="keyword1"><span>##</span></span><span>âº</span></span><span> 65</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.intro|fact"><span class="entity_def" id="MDP_disc.discrete_MDP_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.intro|thm"><span class="entity_def" id="MDP_disc.discrete_MDP_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP|locale"><span class="entity_def" id="MDP_disc.discrete_MDP|const"><span>discrete_MDP</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>enabled actions</span><span>âº</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>MDP kernel, transition probabilities</span><span>âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="entity_def" id="MDP_disc.discrete_MDP.A_ne|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.A_ne|thm"><span class="entity_def" id="offset_4634..4638">A_ne</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>set of enabled actions is nonempty</span><span>âº</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Policies</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Type synonym for decision rules.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.dec|type"><span>dec</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'d</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_def_raw|axiom"><span class="entity_def" id="offset_4806..4816">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec|const"><span class="entity_def" id="offset_4817..4823">is_dec</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.dec|type"><span>dec</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_dec</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_decI|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_decI|thm"><span>is_decI</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4806..4816"><span>is_dec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.D\&lt;^sub&gt;R|const"><span class="entity_def" id="offset_4997..5000">D<span class="hidden">â©</span><sub>R</sub></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_det_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_det_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_det_def_raw|axiom"><span class="entity_def" id="offset_5019..5029">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_det.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_det.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_det|const"><span class="entity_def" id="offset_5030..5040">is_dec_det</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_dec_det</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.D\&lt;^sub&gt;D|const"><span class="entity_def" id="offset_5117..5120">D<span class="hidden">â©</span><sub>D</sub></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5030..5040"><span>is_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_dec_det_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_dec_det_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_dec_det_def_raw|axiom"><span class="entity_def" id="offset_5143..5153">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_mk_dec_det_iff|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_dec_mk_dec_det_iff|thm"><span class="entity_def" id="offset_5197..5218">is_dec_mk_dec_det_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5030..5040"><span>is_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4806..4816"><span>is_dec_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5019..5029"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5143..5153"><span>mk_dec_det_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.D_det_to_MR|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.D_det_to_MR|thm"><span class="entity_def" id="offset_5331..5342">D_det_to_MR</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_5030..5040"><span>is_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>Due to the assumption </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4634..4638"><span>A_ne</span></a><span class="antiquote"><span>}</span></span></span><span>, a deterministic decision rule always exists.
</span><span>It immediately follows via </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5197..5218"><span>is_dec_mk_dec_det_iff</span></a><span class="antiquote"><span>}</span></span></span><span> that a randomized decision rule also exists.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.SOME_is_dec_det|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.SOME_is_dec_det|thm"><span class="entity_def" id="offset_5598..5613">SOME_is_dec_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_5030..5040"><span>is_dec_det</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4634..4638"><span>A_ne</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5019..5029"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.some_in_eq|fact"><span>some_in_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.ex_dec_det|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.ex_dec_det|thm"><span class="entity_def" id="offset_5711..5721">ex_dec_det</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5030..5040"><span>is_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5598..5613"><span>SOME_is_dec_det</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.D_det_ne|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.D_det_ne|thm"><span class="entity_def" id="offset_5789..5797">D_det_ne</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_5117..5120"><span>D<span class="hidden">â©</span><sub>D</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.D\&lt;^sub&gt;R_ne|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.D\&lt;^sub&gt;R_ne|thm"><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_4997..5000"><span>D<span class="hidden">â©</span><sub>R</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5789..5797"><span>D_det_ne</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5331..5342"><span>D_det_to_MR</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.ex_dec|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.ex_dec|thm"><span>ex_dec</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="bound"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5711..5721"><span>ex_dec_det</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Type synonym for policies.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.pol|type"><span>pol</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'c</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'d</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.dec|type"><span>dec</span></a><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A policy assigns a decision rule to each observed past.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_def_raw|axiom"><span class="entity_def" id="offset_6129..6139">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy|const"><span class="entity_def" id="offset_6140..6149">is_policy</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_policy</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>hs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>hs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;H\&lt;^sub&gt;R|const"><span class="entity_def" id="offset_6233..6238">Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>R</sub></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="bound"><span>p</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Deterministic policies</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.is_deterministic_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_deterministic_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_deterministic_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.is_deterministic.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_deterministic.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_deterministic|const"><span>is_deterministic</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_det_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_det_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_det_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_det|const"><span>mk_det</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;H\&lt;^sub&gt;D|const"><span>Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>D</sub></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>h</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5117..5120"><span>D<span class="hidden">â©</span><sub>D</sub></span></a><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Markovian policies</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian_def_raw|axiom"><span class="entity_def" id="offset_6489..6499">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian|const"><span class="entity_def" id="offset_6501..6513">is_markovian</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>h'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>â¶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>h'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_def_raw|axiom"><span class="entity_def" id="offset_6577..6587">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian|const"><span class="entity_def" id="offset_6588..6600">mk_markovian</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.dec|type"><span>dec</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.pol|type"><span>pol</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mk_markovian</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian_mk_iff|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian_mk_iff|thm"><span>is_markovian_mk_iff</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_6501..6513"><span>is_markovian</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6489..6499"><span>is_markovian_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6577..6587"><span>mk_markovian_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6129..6139"><span>is_policy_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.Ex_list_of_length|fact"><span>Ex_list_of_length</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian_mk|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_markovian_mk|thm"><span>is_markovian_mk</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6501..6513"><span>is_markovian</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6489..6499"><span>is_markovian_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6577..6587"><span>mk_markovian_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6129..6139"><span>is_policy_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_nil|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_nil|thm"><span>mk_markovian_nil</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6577..6587"><span>mk_markovian_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_det_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_det_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_det_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_markovian_det|const"><span>mk_markovian_det</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D|const"><span class="entity_def" id="offset_7227..7232">Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5117..5120"><span>D<span class="hidden">â©</span><sub>D</sub></span></a><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R|const"><span class="entity_def" id="offset_7269..7274">Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4997..5000"><span>D<span class="hidden">â©</span><sub>R</sub></span></a><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_imp_policies|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_imp_policies|thm"><span class="entity_def" id="offset_7304..7322">Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_imp_policies</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7269..7274"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6233..6238"><span>Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>R</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6129..6139"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6577..6587"><span>mk_markovian_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_MR_iff|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_MR_iff|thm"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub>_MR_iff</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7269..7274"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7227..7232"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_to_MR|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_to_MR|thm"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub>_to_MR</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7227..7232"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub></span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7269..7274"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_ne|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;D_ne|thm"><span class="entity_def" id="offset_7590..7598">Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub>_ne</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_7227..7232"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5711..5721"><span>ex_dec_det</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_5030..5040"><span>is_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_ne|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_ne|thm"><span class="entity_def" id="offset_7714..7722">Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_ne</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_7269..7274"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7590..7598"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub>_ne</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.policies_ne|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.policies_ne|thm"><span>policies_ne</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_6233..6238"><span>Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>R</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7714..7722"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_ne</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6129..6139"><span>is_policy_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Stationary policies</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary_def_raw|axiom"><span class="entity_def" id="offset_7882..7892">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary|const"><span class="entity_def" id="offset_7894..7907">is_stationary</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>h'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>h'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary_const_iff|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary_const_iff|thm"><span>is_stationary_const_iff</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_7894..7907"><span>is_stationary</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7882..7892"><span>is_stationary_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6129..6139"><span>is_policy_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary_const|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_stationary_const|thm"><span>is_stationary_const</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_4817..4823"><span>is_dec</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7894..7907"><span>is_stationary</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_stationary|const"><span>mk_stationary</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.mk_stationary_det|const"><span>mk_stationary_det</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Successor Policy</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>After taking the first step in the MDP, we will know which state and which action got selected 
</span><span>during the initial epoch. To obtain a policy that acts as if the current epoch was the initial one, 
</span><span>we prepend the observed state-action pair to the history. The result is again a policy, 
</span><span>i.e. it satisfies </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span class="antiquote"><span>}</span></span></span><span>.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc_def_raw|axiom"><span class="entity_def" id="offset_8643..8653">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>sa</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>sa</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_\&lt;pi&gt;_Suc|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_\&lt;pi&gt;_Suc|thm"><span>is_policy_Ï_Suc</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6129..6139"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_8643..8653"><span>Ï_Suc_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Suc_mk_markovian|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Suc_mk_markovian|thm"><span>Suc_mk_markovian</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_8643..8653"><span>Ï_Suc_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6577..6587"><span>mk_markovian_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Stream Space of the MDP</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Initial State-Action Distribution</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>If we fix a decision rule </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="antiquote"><span>}</span></span></span><span> and an initial distribution of states </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>S0</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>, 
</span><span>we obtain a distribution over state-action pairs in the following way:
</span><span>First, the initial state </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> is sampled from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span class="antiquote"><span>}</span></span></span><span>, 
</span><span>then an action </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span class="antiquote"><span>}</span></span></span><span> is selected from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.K0_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.K0_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.K0_def_raw|axiom"><span class="entity_def" id="offset_9313..9323">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.K0|const"><span>K0</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span class="main"><span>;</span></span><span> 
  </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>}</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>K<span class="hidden">â©</span><sub>0</sub></span></span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.K0_iff|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.K0_iff|thm"><span class="entity_def" id="offset_9413..9419">K0_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf_def|fact"><span>map_pmf_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.vimage_pair|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.vimage_pair|thm"><span>vimage_pair</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.vimage|const"><span>-`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>p</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_K0|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_K0|thm"><span>pmf_K0</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_bind|fact"><span>pmf_bind</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.integral_measure_pmf|fact"><span>integral_measure_pmf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> A </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>{</span></span></span></span><span class="free"><span class="free"><span class="free"><span>s</span></span></span></span><span class="main"><span class="main"><span class="main"><span>}</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_map|fact"><span>pmf_map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.rep_eq|fact"><span>pmf.rep_eq</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.set_pmf_K0|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.set_pmf_K0|thm"><span class="entity_def" id="offset_9800..9810">set_pmf_K0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.fst_K0|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.fst_K0|thm"><span class="entity_def" id="offset_9896..9902">fst_K0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>S0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf_comp|fact"><span>map_pmf_comp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf&apos;|fact"><span>bind_return_pmf'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.S|const"><span>S</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We inherit the trace space from MDPs with continuous state-action spaces</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10151..10165">interpretation</span></span></span><span> MDP_cont</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="MDP_cont.html#MDP_cont.discrete_MDP|locale"><span>MDP_cont.discrete_MDP</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>standard</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure|const"><span>â¨<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_algebra|const"><span>prob_algebra</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraI|fact"><span>measurable_prob_algebraI</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.prob_space_measure_pmf|fact"><span>prob_space_measure_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_pair_measure_countable1|fact"><span>measurable_pair_measure_countable1</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>Î´</span></span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>Î´</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4634..4638"><span>A_ne</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.some_in_eq|fact"><span>some_in_eq</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.bexI|fact"><span>bexI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4634..4638"><span>A_ne</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.count_space_M|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.count_space_M|thm"><span>count_space_M</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.M</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.pair_measure_countable|fact"><span>pair_measure_countable</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.space_M|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.space_M|thm"><span>space_M</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.M</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.space_lim_stream</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We reuse the stream space provided by </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.lim_stream</span></a><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.T_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.T_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.T_def_raw|axiom"><span class="entity_def" id="offset_10926..10936">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_disc.discrete_MDP.T.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.T.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.T|const"><span class="entity_def" id="offset_10937..10938">T</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream|type"><span>stream</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measure|type"><span>measure</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>T</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.lim_stream</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.sets_T|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.sets_T|thm"><span class="entity_def" id="offset_11081..11087">sets_T</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10926..10936"><span>T_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.sets_lim_stream</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.space_stream_space_ne|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.space_stream_space_ne|thm"><span>space_stream_space_ne</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.space_stream_space|fact"><span>space_stream_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.space_T|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.space_T|thm"><span>space_T</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.space_lim_stream</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10926..10936"><span>T_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.space_stream_space|fact"><span>space_stream_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_MDP_cont|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_MDP_cont|thm"><span>is_policy_MDP_cont</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.is_policy</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.is_dec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.prefix_measurable|fact"><span>prefix_measurable</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_pair_swap_iff|fact"><span>measurable_pair_swap_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.prob_space_measure_pmf|fact"><span>prob_space_measure_pmf</span></a><span>
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Binary_Product_Measure.html#Binary_Product_Measure.measurable_pair_measure_countable1|fact"><span>measurable_pair_measure_countable1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.measurable_prob_algebraI|fact"><span>measurable_prob_algebraI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.prob_space_T|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.prob_space_T|thm"><span class="entity_def" id="offset_11767..11779">prob_space_T</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10926..10936"><span>T_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.prob_space_measure_pmf|fact"><span>prob_space_measure_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.T_subprob|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.T_subprob|thm"><span>T_subprob</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.space|const"><span>space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra|const"><span>subprob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space.M_in_subprob|fact"><span>prob_space.M_in_subprob</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_11767..11779"><span>prob_space_T</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_11081..11087"><span>sets_T</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_algebra_cong|fact"><span>subprob_algebra_cong</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.T_subprob_space|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.T_subprob_space|thm"><span>T_subprob_space</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_space|const"><span>subprob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.K0_MDP_cont_eq|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.K0_MDP_cont_eq|thm"><span class="entity_def" id="offset_12138..12152">K0_MDP_cont_eq</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.K0</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
    </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.K0_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.K'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf_def|fact"><span>map_pmf_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf.rep_eq|fact"><span>return_pmf.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Decomposition of the Stream Space</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The distribution of traces/walks the MDP allows should intuitively satisfy the following rule:</span><span>

</span><span class="antiquoted"><span>â¸</span></span><span> </span><span>select the initial state </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="antiquote"><span>}</span></span></span><span> from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span class="antiquote"><span>}</span></span></span><span>
</span><span class="antiquoted"><span>â¸</span></span><span> </span><span>pass it to the decision rule </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> to determine a distribution over actions</span><span>
</span><span class="antiquoted"><span>â¸</span></span><span> </span><span>select the action </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span class="antiquote"><span>}</span></span></span><span>
</span><span class="antiquoted"><span>âª</span></span><span> </span><span>finally pass the state-action pair </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> to the kernel </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span class="antiquote"><span>}</span></span></span><span> to get a new </span><span>
  </span><span>distribution over states </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>s0'</span></span></span><span class="antiquote"><span>}</span></span></span><span>

</span><span>Then the iteration repeats with the updated policy </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>

</span><span>The result carries over from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.lim_stream_eq</span></a><span class="antiquote"><span>}</span></span></span><span>.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.T_eq|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.T_eq|thm"><span class="entity_def" id="offset_12983..12987">T_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>sa</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>Ï</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10926..10936"><span>T_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.lim_stream_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.is_policy</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Omega_Words_Fun.html#Omega_Words_Fun.prefix|const"><span>Omega_Words_Fun.prefix</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_prob_algebra|fact"><span>space_prob_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.prob_space_measure_pmf|fact"><span>prob_space_measure_pmf</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_8643..8653"><span>Ï_Suc_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10151..10165"><span>MDP_cont.Suc_policy_def</span></a><span> 
    </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.prefix_cons|fact"><span>prefix_cons</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_12138..12152"><span>K0_MDP_cont_eq</span></a><span>  </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_distrib|fact"><span>prod.case_distrib</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.T_eq_distr|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.T_eq_distr|thm"><span class="entity_def" id="offset_13432..13442">T_eq_distr</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>(##)</span></a></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_12983..12987"><span>T_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_return_distr&apos;|fact"><span>bind_return_distr'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The iteration rule lets us nicely decompose integrals (expected values) over functions on traces of 
</span><span>the MDP.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.integral_T|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.integral_T|thm"><span class="entity_def" id="offset_13730..13740">integral_T</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream|type"><span>stream</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_13791..13800">f_bounded</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_13828..13829">f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>t'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>sa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span class="bound"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13432..13442"><span>T_eq_distr</span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K<span class="hidden">â©</span><sub>0</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>(##)</span></a></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13432..13442"><span>T_eq_distr</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K<span class="hidden">â©</span><sub>0</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>LINT</span></span><span> </span><span class="bound"><span>t'</span></span><span class="main"><span>|</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>t'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.integral_bind|fact"><span>integral_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13828..13829"><span>f</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13791..13800"><span>f_bounded</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> B' </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span></a></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.prob_space_distr|fact"><span>prob_space.prob_space_distr</span></a><span> 
          </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_subprob_algebra|fact"><span>space_subprob_algebra</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.emeasure_le_1|fact"><span>prob_space.emeasure_le_1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.prob_space_distr|fact"><span>prob_space.prob_space_distr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>4</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13828..13829"><span>f</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_distr|fact"><span>integral_distr</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_cong|fact"><span>Bochner_Integration.integral_cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.nn_integral_T|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.nn_integral_T|thm"><span>nn_integral_T</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_14784..14785">f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>t'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>sa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span class="bound"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13432..13442"><span>T_eq_distr</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.nn_integral_bind|fact"><span>nn_integral_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_14784..14785"><span>f</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.prob_space_distr|fact"><span>prob_space.prob_space_distr</span></a><span> 
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_14784..14785"><span>f</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Nonnegative_Lebesgue_Integration.html#Nonnegative_Lebesgue_Integration.nn_integral_distr|fact"><span>nn_integral_distr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_subprob_algebra|fact"><span>space_subprob_algebra</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A Denotational View on the Stochastic Process</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>Many definitions on MDPs do not rely on the individual traces but only on the distribution 
</span><span>of states and actions at each epoch.
</span><span>
</span><span>We define this view on the trace space as the repeated iteration of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span class="antiquote"><span>}</span></span></span><span> and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span class="antiquote"><span>}</span></span></span><span>.
</span><span>It conincides with the definition of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span class="antiquote"><span>}</span></span></span><span>.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn.simps|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn.simps(2)|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn.simps(1)|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_def|axiom"><span class="entity_def" id="offset_15451..15458">primrec</span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn|const"><span class="entity_def" id="offset_15459..15461">Pn</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Pn</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Pn</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Pn</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_eq_T|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_eq_T|thm"><span class="entity_def" id="offset_15652..15659">Pn_eq_T</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>0</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>S0</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_12983..12987"><span>T_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.distr_bind|fact"><span>distr_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_space.bind_in_space|fact"><span>subprob_space.bind_in_space</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>4</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_cong|fact"><span>bind_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></a></a><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_const&apos;|fact"><span>bind_const'</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.distr_bind|fact"><span>distr_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.distr_return|fact"><span>distr_return</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_return&apos;&apos;|fact"><span>bind_return''</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.space_stream_space|fact"><span>space_stream_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_space_return_ne|fact"><span>subprob_space_return_ne</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_16277..16280">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_12983..12987"><span>T_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.distr_bind|fact"><span>distr_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_space.bind_in_space|fact"><span>subprob_space.bind_in_space</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>[</span></span></span><span>1</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>4</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_16277..16280"><span>Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_return_distr&apos;|fact"><span>bind_return_distr'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr_distr|fact"><span>distr_distr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_cong|fact"><span>bind_cong</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>The definition of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span class="antiquote"><span>}</span></span></span><span> also allows us to easily prove that only enabled actions can occur in
</span><span>the traces of the MDP.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_in_A|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_in_A|thm"><span class="entity_def" id="offset_16796..16803">Pn_in_A</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_16893..16894">0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_16893..16894"><span>0</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6129..6139"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4806..4816"><span>is_dec_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17070..17075">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.T_in_A|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.T_in_A|thm"><span>T_in_A</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>AE</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17181..17184">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>AE</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17070..17075"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15652..15659"><span>Pn_eq_T</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_16796..16803"><span>Pn_in_A</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_pmfI|fact"><span>AE_pmfI</span></a><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.AE_cong_simp|fact"><span>AE_cong_simp</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.AE_distrD|fact"><span>AE_distrD</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_disc.html#offset_17181..17184"><span>aux</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>State Process</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Alongside </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span class="antiquote"><span>}</span></span></span><span>, we also define the state and action distributions as projections.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn_def_raw|axiom"><span class="entity_def" id="offset_17549..17559">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn|const"><span class="entity_def" id="offset_17561..17563">Xn</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.X0|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.X0|thm"><span class="entity_def" id="offset_17605..17607">X0</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>S0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9896..9902"><span>fst_K0</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Xn_Suc|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn_Suc|thm"><span class="entity_def" id="offset_17670..17676">Xn_Suc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_assoc_pmf|fact"><span>bind_assoc_pmf</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_markovian_eq_Xn_bind|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_markovian_eq_Xn_bind|thm"><span class="entity_def" id="offset_17941..17964">Pn_markovian_eq_Xn_bind</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_18137..18140">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18137..18140"><span>Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_assoc_pmf|fact"><span>bind_assoc_pmf</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Xn_Suc&apos;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn_Suc&apos;|thm"><span class="entity_def" id="offset_18287..18294">Xn_Suc'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.set_pmf_X0|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.set_pmf_X0|thm"><span>set_pmf_X0</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>S0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17605..17607"><span>X0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.set_pmf_PSuc|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.set_pmf_PSuc|thm"><span>set_pmf_PSuc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9800..9810"><span>set_pmf_K0</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17941..17964"><span>Pn_markovian_eq_Xn_bind</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The Conditional Distribution of Actions</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>Actions are selected wrt. the whole history of state-action pairs encountered so far.
</span><span>The following definition defines the expected action selection when only the current state is given.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X_def_raw|axiom"><span class="entity_def" id="offset_18924..18934">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X|const"><span class="entity_def" id="offset_18936..18944">Y_cond_X</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.cond_pmf|const"><span>cond_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.prob_K0_X|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.prob_K0_X|thm"><span>prob_K0_X</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.prob|const"><span>measure_pmf.prob</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.measure_bind|fact"><span>measure_pmf.measure_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></a><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_in_subprob_algebra|fact"><span>measure_pmf_in_subprob_algebra</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.integral_measure_pmf_real|fact"><span>integral_measure_pmf_real</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>{</span></span></span></span><span class="free"><span class="free"><span class="free"><span>x</span></span></span></span><span class="main"><span class="main"><span class="main"><span>}</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>  

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.prob_Pn_X|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.prob_Pn_X|thm"><span class="entity_def" id="offset_19412..19421">prob_Pn_X</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.prob|const"><span>measure_pmf.prob</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_19584..19587">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18287..18294"><span>Xn_Suc'</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_19584..19587"><span>Suc</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.measure_bind|fact"><span>measure_pmf.measure_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span>
        </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_in_subprob_algebra|fact"><span>measure_pmf_in_subprob_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_bind|fact"><span>pmf_bind</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19801..19806">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_Pn_pair|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_Pn_pair|thm"><span class="entity_def" id="offset_19807..19818">pmf_Pn_pair</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19970..19973">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>sa</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_19801..19806"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20068..20072">aux'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>sa</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.vimage|const"><span>-`</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>sa</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>sa</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_19801..19806"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18924..18934"><span>Y_cond_X_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_map|fact"><span>pmf_map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.cond_pmf.rep_eq|fact"><span>cond_pmf.rep_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_19970..19973"><span>aux</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eq_0_set_pmf|fact"><span>pmf_eq_0_set_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.emeasure_eq_measure|fact"><span>measure_pmf.emeasure_eq_measure</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20068..20072"><span>aux'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_single|fact"><span>measure_pmf_single</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20331..20336">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_Pn|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_Pn|thm"><span>pmf_Pn</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20476..20479">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20331..20336"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20564..20568">aux'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.vimage|const"><span>-`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20331..20336"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18924..18934"><span>Y_cond_X_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.cond_pmf.rep_eq|fact"><span>cond_pmf.rep_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20476..20479"><span>aux</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_map|fact"><span>pmf_map</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eq_0_set_pmf|fact"><span>pmf_eq_0_set_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.emeasure_eq_measure|fact"><span>measure_pmf.emeasure_eq_measure</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20564..20568"><span>aux'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_single|fact"><span>measure_pmf_single</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20814..20819">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_Y_cond_X|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_Y_cond_X|thm"><span class="entity_def" id="offset_20820..20832">pmf_Y_cond_X</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20965..20968">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20814..20819"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21053..21057">aux'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.vimage|const"><span>-`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20814..20819"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_21053..21057"><span>aux'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18924..18934"><span>Y_cond_X_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.cond_pmf.rep_eq|fact"><span>cond_pmf.rep_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20965..20968"><span>aux</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_map|fact"><span>pmf_map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eq_0_set_pmf|fact"><span>pmf_eq_0_set_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.emeasure_eq_measure|fact"><span>measure_pmf.emeasure_eq_measure</span></a><span> 
        </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_single|fact"><span>measure_pmf_single</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21312..21317">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X_0|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X_0|thm"><span>Y_cond_X_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="free"><span>S0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eqI|fact"><span>pmf_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_21312..21317"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20820..20832"><span>pmf_Y_cond_X</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eq_0_set_pmf|fact"><span>pmf_eq_0_set_pmf</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> eqn 5.5.3 in Puterman </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X_markovian|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Y_cond_X_markovian|thm"><span>Y_cond_X_markovian</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_21540..21541">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eqI|fact"><span>pmf_eqI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20820..20832"><span>pmf_Y_cond_X</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_21540..21541"><span>h</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17941..17964"><span>Pn_markovian_eq_Xn_bind</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eq_0_set_pmf|fact"><span>pmf_eq_0_set_pmf</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_eq_Xn_Y_cond|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_eq_Xn_Y_cond|thm"><span class="entity_def" id="offset_21722..21737">Pn_eq_Xn_Y_cond</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eqI|fact"><span>pmf_eqI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'s</span></span></span></span><span> 
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>aux'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>,</span></span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> 
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_cong|fact"><span>Bochner_Integration.integral_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span class="main"><span>]</span></span></span><span> 
          </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_map_pmf|fact"><span>bind_map_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_map|fact"><span>pmf_map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_bind|fact"><span>pmf_bind</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_single|fact"><span>measure_pmf_single</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Indicator_Function.html#Indicator_Function.indicator|const"><span>indicator</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span class="bound"><span>a'</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_cong_AE|fact"><span>Bochner_Integration.integral_cong_AE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.AE_pmfI|fact"><span>AE_pmfI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_22662..22664">h'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semiring_no_zero_divisors_class.mult_eq_0_iff|fact"><span>mult_eq_0_iff</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_19807..19818"><span>pmf_Pn_pair</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eq_0_set_pmf|fact"><span>pmf_eq_0_set_pmf</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
        </span><a class="entity_ref" href="../../HOL/HOL-Library/Indicator_Function.html#Indicator_Function.indicat_real|const"><span>indicat_real</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a'</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> 
        </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.case_prod_beta&apos;|fact"><span>case_prod_beta'</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_20820..20832"><span>pmf_Y_cond_X</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>b</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_22662..22664"><span>h'</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.prob|const"><span>measure_pmf.prob</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span class="bound"><span>a'</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> 
      </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>,</span></span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_19412..19421"><span>prob_Pn_X</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_19807..19818"><span>pmf_Pn_pair</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eq_0_set_pmf|fact"><span>pmf_eq_0_set_pmf</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_eq_Xn_Y_cond&apos;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_eq_Xn_Y_cond&apos;|thm"><span>Pn_eq_Xn_Y_cond'</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_21722..21737"><span>Pn_eq_Xn_Y_cond</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_markovian_Suc|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_markovian_Suc|thm"><span>Pn_markovian_Suc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0|const"><span>K0</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_8643..8653"><span>Ï_Suc_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_23886..23889">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_23886..23889"><span>Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_assoc_pmf|fact"><span>bind_assoc_pmf</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>S0</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Action Process</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The distribution of actions.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn_def_raw|axiom"><span class="entity_def" id="offset_24063..24073">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn|const"><span class="entity_def" id="offset_24075..24077">Yn</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Y0|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Y0|thm"><span class="entity_def" id="offset_24119..24121">Y0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_24075..24077"><span>Yn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_24063..24073"><span>Yn_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf_comp|fact"><span>map_pmf_comp</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>For markovian policies, the decision rules at each epoch are independent of each other,
</span><span>hence we may express </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_24075..24077"><span>Yn</span></a><span class="antiquote"><span>}</span></span></span><span> solely in terms of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span class="antiquote"><span>}</span></span></span><span> and the current decision rule.</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Yn_markovian|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn_markovian|thm"><span class="entity_def" id="offset_24404..24416">Yn_markovian</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_24075..24077"><span>Yn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_24119..24121"><span>Y0</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_24578..24581">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_24063..24073"><span>Yn_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_24578..24581"><span>Suc</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_assoc_pmf|fact"><span>bind_assoc_pmf</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Restriction to Markovian Policies</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.as_markovian|const"><span class="entity_def" id="offset_24746..24758">as_markovian</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> 
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S0</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>For states which cannot occur we choose an arbitrary enabled action, as in this case we cannot make
</span><span>any statements about </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span class="antiquote"><span>}</span></span></span><span> (a distribution conditioned on an event with probability 0).</span><span>
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25061..25066">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_as_markovian|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_\&lt;Pi&gt;\&lt;^sub&gt;M\&lt;^sub&gt;R_as_markovian|thm"><span class="entity_def" id="offset_25067..25088">is_Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_as_markovian</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>p</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_24746..24758"><span>as_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7269..7274"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>hs</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="bound"><span>hs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="bound"><span>hs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>â©</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_zero_iff|fact"><span>measure_pmf_zero_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_eq_0_set_pmf|fact"><span>pmf_eq_0_set_pmf</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_25061..25066"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4634..4638"><span>A_ne</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_16796..16803"><span>Pn_in_A</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_4806..4816"><span>is_dec_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18924..18934"><span>Y_cond_X_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.some_in_eq|fact"><span>some_in_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_as_markovian|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.is_policy_as_markovian|thm"><span>is_policy_as_markovian</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_6140..6149"><span>is_policy</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_24746..24758"><span>as_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_25067..25088"><span>is_Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_as_markovian</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_7304..7322"><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_imp_policies</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_as_markovian_eq|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_as_markovian_eq|thm"><span>Pn_as_markovian_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_24746..24758"><span>as_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_24746..24758"><span>as_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf_cong|fact"><span>map_pmf_cong</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_25880..25883">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> 
      </span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_24746..24758"><span>as_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_18936..18944"><span>Y_cond_X</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_25880..25883"><span>Suc.IH</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17670..17676"><span>Xn_Suc</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_24746..24758"><span>as_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17670..17676"><span>Xn_Suc</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_25880..25883"><span>Suc.IH</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_24746..24758"><span>as_markovian</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_21722..21737"><span>Pn_eq_Xn_Y_cond</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>MDPs without Initial Distribution</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>From now on, we assume a known, deterministic initial state.
</span><span>All results from the previous discussion carry over as we are now in the special case
</span><span>where we the initial state is of the form </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>
</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_def_raw|axiom"><span class="entity_def" id="offset_26600..26610">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;|const"><span class="entity_def" id="offset_26612..26613">ð¯</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_eq_return_distr|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_eq_return_distr|thm"><span class="entity_def" id="offset_26647..26664">ð¯_eq_return_distr</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>(##)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13432..13442"><span>T_eq_distr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_distr|fact"><span>bind_distr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_space.subprob_space_distr|fact"><span>subprob_space.subprob_space_distr</span></a><span> 
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf_rep_eq|fact"><span>map_pmf_rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_subprob_algebra|fact"><span>space_subprob_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf|fact"><span>bind_return_pmf</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_eq_return|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_eq_return|thm"><span class="entity_def" id="offset_26947..26958">ð¯_eq_return</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>Ï</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> 
    </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26647..26664"><span>ð¯_eq_return_distr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_return_distr&apos;|fact"><span>bind_return_distr'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.not_empty|fact"><span>prob_space.not_empty</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_cong|fact"><span>bind_cong</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_return|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_return|thm"><span class="entity_def" id="offset_27182..27190">ð¯_return</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>(##)</span></a></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13432..13442"><span>T_eq_distr</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span>
          </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Stream_Space.html#Stream_Space.stream_space|const"><span>stream_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>(##)</span></a></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measurable_measure_pmf|fact"><span>measurable_measure_pmf</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_assoc|fact"><span>bind_assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> N </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></a></a><span>"</span></span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> R </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.prob_space_distr|fact"><span>prob_space.prob_space_distr</span></a><span> 
        </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_subprob_algebra|fact"><span>space_subprob_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.prob_space_measure_pmf|fact"><span>prob_space_measure_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf_rep_eq|fact"><span>map_pmf_rep_eq</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_distr|fact"><span>bind_distr</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K  </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.prob_space_distr|fact"><span>prob_space.prob_space_distr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_cong|fact"><span>bind_cong</span></a><span>
        </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.space_subprob_algebra|fact"><span>space_subprob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26647..26664"><span>ð¯_eq_return_distr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_return_eq|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_return_eq|thm"><span class="entity_def" id="offset_28187..28198">ð¯_return_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  </span><span class="bound"><span>w</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>Ï</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
   </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26947..26958"><span>ð¯_eq_return</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>  </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>Ï</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_10937..10938"><span>T</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
   </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>Ï</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_27182..27190"><span>ð¯_return</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_assoc|fact"><span>bind_assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span></a></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_27182..27190"><span>ð¯_return</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_eq|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_eq|thm"><span class="entity_def" id="offset_28810..28814">ð¯_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  </span><span class="bound"><span>w</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>;</span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_28187..28198"><span>ð¯_return_eq</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span> </span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_prob_space|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_prob_space|thm"><span class="entity_def" id="offset_29005..29017">ð¯_prob_space</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space|const"><span>prob_space</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_11767..11779"><span>prob_space_T</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_sets|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.\&lt;T&gt;_sets|thm"><span>ð¯_sets</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable_cong|attribute"><span class="operator"><span>measurable_cong</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.sets|const"><span>sets</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_11081..11087"><span>sets_T</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.measurable_ident_Suc&apos;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.measurable_ident_Suc&apos;|thm"><span>measurable_ident_Suc'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.measurable|const"><span>â<span class="hidden">â©</span><sub>M</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.nn_integral_\&lt;T&gt;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.nn_integral_\&lt;T&gt;|thm"><span>nn_integral_ð¯</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream|type"><span>stream</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>f</span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>t'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span class="bound"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_28810..28814"><span>ð¯_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.nn_integral_bind|fact"><span>nn_integral_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.bind_in_space|fact"><span>measure_pmf.bind_in_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_space.bind_in_space|fact"><span>subprob_space.bind_in_space</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_29005..29017"><span>ð¯_prob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.return|const"><span>return</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>w</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
              </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.nn_integral_bind|fact"><span>nn_integral_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.subprob_space.bind_in_space|fact"><span>subprob_space.bind_in_space</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_29005..29017"><span>ð¯_prob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.prob_space_imp_subprob_space|fact"><span>prob_space_imp_subprob_space</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>(##)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.bind_return_distr&apos;|fact"><span>bind_return_distr'</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_29005..29017"><span>ð¯_prob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.not_empty|fact"><span>prob_space.not_empty</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«<span class="hidden">â§</span><sup>+</sup></span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Nonnegative_Lebesgue_Integration.html#Nonnegative_Lebesgue_Integration.nn_integral_distr|fact"><span>nn_integral_distr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.integral_\&lt;T&gt;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.integral_\&lt;T&gt;|thm"><span>integral_ð¯</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream|type"><span>stream</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_30579..30588">f_bounded</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_30616..30617">f</span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>t'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream.SCons|const"><span>##</span></a></span><span class="bound"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_13730..13740"><span>integral_T</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_30579..30588"><span>f_bounded</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_30616..30617"><span>f</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf|fact"><span>bind_return_pmf</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_27182..27190"><span>ð¯_return</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.integral_map_pmf|fact"><span>integral_map_pmf</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_27182..27190"><span>ð¯_return</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.integral_bind|fact"><span>integral_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_disc.html#offset_30579..30588"><span>f_bounded</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> B' </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span></a></span></span></a></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span class="quoted"><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a></span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.emeasure_le_1|fact"><span>prob_space.emeasure_le_1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.integrable_\&lt;T&gt;_bounded|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.integrable_\&lt;T&gt;_bounded|thm"><span>integrable_ð¯_bounded</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.stream|type"><span>stream</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'d</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Topology.html#Elementary_Topology.second_countable_topology|class"><span>second_countable_topology</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>f</span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_31220..31221">b</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31220..31221"><span>b</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.finite_measure|fact"><span>prob_space.finite_measure</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_29005..29017"><span>ð¯_prob_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span> 
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.finite_measure.integrable_const_bound|fact"><span>finite_measure.integrable_const_bound</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;_def_raw|axiom"><span class="entity_def" id="offset_31407..31417">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;|const"><span class="entity_def" id="offset_31419..31422">Pn'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_def_raw|axiom"><span class="entity_def" id="offset_31450..31460">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;|const"><span class="entity_def" id="offset_31462..31465">Xn'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17561..17563"><span>Xn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn&apos;_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn&apos;_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn&apos;_def_raw|axiom"><span class="entity_def" id="offset_31493..31503">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn&apos;.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn&apos;.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn&apos;|const"><span class="entity_def" id="offset_31505..31508">Yn'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_24075..24077"><span>Yn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.K0&apos;_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.K0&apos;_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.K0&apos;_def_raw|axiom"><span class="entity_def" id="offset_31536..31546">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.K0&apos;|const"><span>K0'</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_disc.discrete_MDP.K_st_def|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.K_st_def|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.K_st_def_raw|axiom"><span class="entity_def" id="offset_31587..31597">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_disc.discrete_MDP.K_st.cong|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.K_st.cong|thm"><span class="entity_def" id="MDP_disc.discrete_MDP.K_st|const"><span class="entity_def" id="offset_31599..31603">K_st</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_K_st|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.pmf_K_st|thm"><span>pmf_K_st</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_31599..31603"><span>K_st</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|const"><span>pmf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31587..31597"><span>K_st_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf_bind|fact"><span>pmf_bind</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31599..31603"><span>K_st</span></a><span class="antiquote"><span>}</span></span></span><span> defines the distribution over the successor states for a given decision rule and state.
</span><span>It is mostly useful for markovian policies, as the information which action was selected is lost.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.P0&apos;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.P0&apos;|thm"><span>P0'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0&apos;|const"><span>K0'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31407..31417"><span>Pn'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31536..31546"><span>K0'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf|fact"><span>bind_return_pmf</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.X0&apos;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.X0&apos;|thm"><span>X0'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17605..17607"><span>X0</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31450..31460"><span>Xn'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_return_pmf|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn_return_pmf|thm"><span class="entity_def" id="offset_32131..32144">Pn_return_pmf</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15459..15461"><span>Pn</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>S0</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span> </span><span class="quoted"><span class="free"><span>S0</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9313..9323"><span>K0_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_assoc_pmf|fact"><span>bind_assoc_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf|fact"><span>bind_return_pmf</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.PSuc&apos;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.PSuc&apos;|thm"><span class="entity_def" id="offset_32329..32334">PSuc'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0&apos;|const"><span>K0'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="bound"><span>sa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31407..31417"><span>Pn'_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span>
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15451..15458"><span>Pn.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_32131..32144"><span>Pn_return_pmf</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31536..31546"><span>K0'_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf|fact"><span>bind_return_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_map_pmf|fact"><span>bind_map_pmf</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.PSuc&apos;_markovian|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.PSuc&apos;_markovian|thm"><span>PSuc'_markovian</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31599..31603"><span>K_st</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_32329..32334"><span>PSuc'</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_map_pmf|fact"><span>bind_map_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_assoc_pmf|fact"><span>bind_assoc_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31536..31546"><span>K0'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31587..31597"><span>K_st_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_Suc|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_Suc|thm"><span>Xn'_Suc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17670..17676"><span>Xn_Suc</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31450..31460"><span>Xn'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31407..31417"><span>Pn'_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_Pn&apos;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_Pn&apos;|thm"><span class="entity_def" id="offset_32891..32898">Xn'_Pn'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_pmf|const"><span>map_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17549..17559"><span>Xn_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31450..31460"><span>Xn'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31407..31417"><span>Pn'_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Suc_Xn&apos;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Suc_Xn&apos;|thm"><span class="entity_def" id="offset_32985..32992">Suc_Xn'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.\&lt;pi&gt;_Suc|const"><span>Ï_Suc</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_32891..32898"><span>Xn'_Pn'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.map_bind_pmf|fact"><span>map_bind_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_map_pmf|fact"><span>bind_map_pmf</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_32329..32334"><span>PSuc'</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31536..31546"><span>K0'_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Suc_Xn&apos;_markovian|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Suc_Xn&apos;_markovian|thm"><span>Suc_Xn'_markovian</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31599..31603"><span>K_st</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31587..31597"><span>K_st_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_assoc_pmf|fact"><span>bind_assoc_pmf</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_32985..32992"><span>Suc_Xn'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_split|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Xn&apos;_split|thm"><span>Xn'_split</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
  </span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_pmf_cong|fact"><span>bind_pmf_cong</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_assoc_pmf|fact"><span>bind_assoc_pmf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf|fact"><span>bind_return_pmf</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_32985..32992"><span>Suc_Xn'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Yn&apos;_markovian|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Yn&apos;_markovian|thm"><span>Yn'_markovian</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31505..31508"><span>Yn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31493..31503"><span>Yn'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31450..31460"><span>Xn'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_24404..24416"><span>Yn_markovian</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;_markovian_eq_Xn&apos;_bind|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;_markovian_eq_Xn&apos;_bind|thm"><span>Pn'_markovian_eq_Xn'_bind</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31462..31465"><span>Xn'</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_6588..6600"><span>mk_markovian</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Monad_Syntax.html#Monad_Syntax.bind|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0&apos;|const"><span>K0'</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31450..31460"><span>Xn'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31407..31417"><span>Pn'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31536..31546"><span>K0'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_9413..9419"><span>K0_iff</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_17941..17964"><span>Pn_markovian_eq_Xn_bind</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;_eq_\&lt;T&gt;|fact"><span class="entity_def" id="MDP_disc.discrete_MDP.Pn&apos;_eq_\&lt;T&gt;|thm"><span>Pn'_eq_ð¯</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_31419..31422"><span>Pn'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measure_Space.html#Measure_Space.distr|const"><span>distr</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#offset_26612..26613"><span>ð¯</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_disc.html#offset_26600..26610"><span>ð¯_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_31407..31417"><span>Pn'_def</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#offset_15652..15659"><span>Pn_eq_T</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='MDP_reward'>>
<div class="head">
<h1>Theory MDP_reward</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span> Author: Maximilian SchÃ¤ffeler </span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>MDP_reward</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
    </span><a href="Bounded_Functions.html"><span>Bounded_Functions</span></a><span>
    </span><a href="MDP_reward_Util.html"><span>MDP_reward_Util</span></a><span>
    </span><a href="Blinfun_Util.html"><span>Blinfun_Util</span></a><span>
    </span><a href="MDP_disc.html"><span>MDP_disc</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Markov Decision Processes with Rewards</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.axioms|fact"><span class="entity_def" id="MDP_reward.MDP_reward.intro|fact"><span class="entity_def" id="MDP_reward.MDP_reward_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward_axioms.intro|fact"><span class="entity_def" id="MDP_reward.MDP_reward_axioms_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.axioms(2)|thm"><span class="entity_def" id="MDP_reward.MDP_reward.axioms(1)|thm"><span class="entity_def" id="MDP_reward.MDP_reward.intro|thm"><span class="entity_def" id="MDP_reward.MDP_reward_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward_axioms.intro|thm"><span class="entity_def" id="MDP_reward.MDP_reward_axioms_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward_def|axiom"><span class="entity_def" id="MDP_reward.MDP_reward_axioms_def|axiom"><span class="entity_def" id="offset_195..201">locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward|locale"><span class="entity_def" id="MDP_reward.MDP_reward|const"><span class="entity_def" id="MDP_reward.MDP_reward_axioms|const"><span>MDP_reward</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP|locale"><span>discrete_MDP</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span>
    </span><span class="free"><span>A</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 
    </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span>
    </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="entity_def" id="MDP_reward.MDP_reward.zero_le_disc|fact"><span class="entity_def" id="MDP_reward.MDP_reward.zero_le_disc|thm"><span class="entity_def" id="offset_371..383">zero_le_disc</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="MDP_reward.MDP_reward.disc_lt_one|fact"><span class="entity_def" id="MDP_reward.MDP_reward.disc_lt_one|thm"><span class="entity_def" id="offset_408..419">disc_lt_one</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="MDP_reward.MDP_reward.r_bounded|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_bounded|thm"><span class="entity_def" id="offset_444..453">r_bounded</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span>This extension to the basic MDPs is formalized with another locale.
</span><span>It assumes the existence of a reward function </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span class="antiquote"><span>}</span></span></span><span> which takes a state-action pair to a real 
</span><span>number. We assume that the function is bounded </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>prop</span></span><span> </span><span class="quoted"><span class="free"><span>r_bounded</span></span></span><span class="antiquote"><span>}</span></span></span><span>.
</span><span>
</span><span>Furthermore, we fix a discounting factor </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span class="antiquote"><span>}</span></span></span><span>, where </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>
</span><span>âº</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Basic Properties</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.r_bfun|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_bfun|thm"><span>r_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_444..453"><span>r_bounded</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.r_bounded&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_bounded&apos;|thm"><span>r_bounded'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_444..453"><span>r_bounded</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_subset|fact"><span>bounded_subset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_disc_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_disc_eq|thm"><span>abs_disc_eq</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.idom_abs_sgn_class.abs_mult|fact"><span>abs_mult</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.r\&lt;^sub&gt;M_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r\&lt;^sub&gt;M_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.r\&lt;^sub&gt;M_def_raw|axiom"><span class="entity_def" id="offset_1056..1066">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.r\&lt;^sub&gt;M.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r\&lt;^sub&gt;M.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.r\&lt;^sub&gt;M|const"><span class="entity_def" id="offset_1068..1071">r<span class="hidden">â©</span><sub>M</sub></span></span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>sa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>sa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_r_le_r\&lt;^sub&gt;M|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_r_le_r\&lt;^sub&gt;M|thm"><span class="entity_def" id="offset_1096..1108">abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>r</span></span><span> </span><span class="free"><span>sa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Continuous_Function.html#Bounded_Continuous_Function.bounded_norm_le_SUP_norm|fact"><span>bounded_norm_le_SUP_norm</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_444..453"><span>r_bounded</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1056..1066"><span>r<span class="hidden">â©</span><sub>M</sub>_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_r\&lt;^sub&gt;M_eq_r\&lt;^sub&gt;M|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_r\&lt;^sub&gt;M_eq_r\&lt;^sub&gt;M|thm"><span class="entity_def" id="offset_1198..1212">abs_r<span class="hidden">â©</span><sub>M</sub>_eq_r<span class="hidden">â©</span><sub>M</sub></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.r\&lt;^sub&gt;M_nonneg|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r\&lt;^sub&gt;M_nonneg|thm"><span class="entity_def" id="offset_1278..1288">r<span class="hidden">â©</span><sub>M</sub>_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1198..1212"><span>abs_r<span class="hidden">â©</span><sub>M</sub>_eq_r<span class="hidden">â©</span><sub>M</sub></span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Summability</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_disc|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_disc|thm"><span class="entity_def" id="offset_1369..1382">summable_disc</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_r_disc|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_r_disc(3)|thm"><span class="entity_def" id="MDP_reward.MDP_reward.summable_r_disc(2)|thm"><span class="entity_def" id="MDP_reward.MDP_reward.summable_r_disc(1)|thm"><span>summable_r_disc</span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>sa</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>sa</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>sa</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>sa</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_comparison_test&apos;|fact"><span>summable_comparison_test'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1369..1382"><span>summable_disc</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>sa</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>sa</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_rabs_cancel|fact"><span>summable_rabs_cancel</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Reward over a Trace</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_trace_fin|const"><span class="entity_def" id="offset_1935..1946">Î½_trace_fin</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_trace|const"><span class="entity_def" id="offset_1995..2002">Î½_trace</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_\&lt;nu&gt;_trace_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_\&lt;nu&gt;_trace_le|thm"><span class="entity_def" id="offset_2038..2052">abs_Î½_trace_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_1995..2002"><span>Î½_trace</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_le|fact"><span>suminf_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_rabs|fact"><span>summable_rabs</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_\&lt;nu&gt;_trace_fin_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_\&lt;nu&gt;_trace_fin_le|thm"><span class="entity_def" id="offset_2295..2313">abs_Î½_trace_fin_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_1935..1946"><span>Î½_trace_fin</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_1935..1946"><span>Î½_trace_fin</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.ordered_comm_monoid_add_class.sum_mono|fact"><span>sum_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.measurable_suminf_reward|fact"><span class="entity_def" id="MDP_reward.MDP_reward.measurable_suminf_reward|thm"><span>measurable_suminf_reward</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_1995..2002"><span>Î½_trace</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.integrable_\&lt;nu&gt;_trace_fin|fact"><span class="entity_def" id="MDP_reward.MDP_reward.integrable_\&lt;nu&gt;_trace_fin|thm"><span>integrable_Î½_trace_fin</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1935..1946"><span>Î½_trace_fin</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_2295..2313"><span>abs_Î½_trace_fin_le</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.integrable_\&lt;nu&gt;_trace|fact"><span class="entity_def" id="MDP_reward.MDP_reward.integrable_\&lt;nu&gt;_trace|thm"><span class="entity_def" id="offset_2806..2824">integrable_Î½_trace</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1995..2002"><span>Î½_trace</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_2038..2052"><span>abs_Î½_trace_le</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Integrals over Rewards</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.measurable_r_nth|fact"><span class="entity_def" id="MDP_reward.MDP_reward.measurable_r_nth|thm"><span>measurable_r_nth</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|attribute"><span class="operator"><span>measurable</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Borel_Space.html#Borel_Space.borel_measurable|const"><span>borel_measurable</span></a><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.S|const"><span>S</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Measurable.html#Measurable.measurable|method"><span class="operator"><span>measurable</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.integrable_r_nth|fact"><span class="entity_def" id="MDP_reward.MDP_reward.integrable_r_nth|thm"><span>integrable_r_nth</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.expectation_abs_r_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.expectation_abs_r_le|thm"><span class="entity_def" id="offset_3174..3194">expectation_abs_r_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="skolem"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>P</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integrable_const_bound|fact"><span>measure_pmf.integrable_const_bound</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integral_le_const|fact"><span>measure_pmf.integral_le_const</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Expected Total Discounted Reward</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.pol|type"><span>pol</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Expected Finite-Horizon Discounted Reward</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_def_raw|axiom"><span class="entity_def" id="offset_3634..3644">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin|const"><span class="entity_def" id="offset_3646..3651">Î½_fin</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1935..1946"><span>Î½_trace_fin</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â</span></span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_\&lt;nu&gt;_fin_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_\&lt;nu&gt;_fin_le|thm"><span class="entity_def" id="offset_3693..3705">abs_Î½_fin_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3634..3644"><span>Î½_fin_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_2295..2313"><span>abs_Î½_trace_fin_le</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.integral_le_const|fact"><span>prob_space.integral_le_const</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_abs_bound|fact"><span>integral_abs_bound</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_Suc|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_Suc|thm"><span>Î½_fin_Suc</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span>  </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL-Library/Stream.html#Stream.snth|const"><span>!!</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3634..3644"><span>Î½_fin_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_zero|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_zero|thm"><span>Î½_fin_zero</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3634..3644"><span>Î½_fin_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_eq_Pn|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_eq_Pn|thm"><span class="entity_def" id="offset_4068..4079">Î½_fin_eq_Pn</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><span>Pn'</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Pn'_eq_ð¯</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_distr|fact"><span>integral_distr</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_def_raw|axiom"><span class="entity_def" id="offset_4202..4212">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;|const"><span class="entity_def" id="offset_4214..4215">Î½</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_eq_lim|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_eq_lim|thm"><span class="entity_def" id="offset_4248..4256">Î½_eq_lim</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4202..4212"><span>Î½_def</span></a><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_eq_\&lt;nu&gt;_trace|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_eq_\&lt;nu&gt;_trace|thm"><span class="entity_def" id="offset_4308..4320">Î½_eq_Î½_trace</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1995..2002"><span>Î½_trace</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1995..2002"><span>Î½_trace</span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>â</span></span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3634..3644"><span>Î½_fin_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_dominated_convergence|fact"><span>integral_dominated_convergence</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>AE</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1935..1946"><span>Î½_trace_fin</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1995..2002"><span>Î½_trace</span></a><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_LIMSEQ|fact"><span>summable_LIMSEQ</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="skolem"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>N</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.sum_le_suminf|fact"><span>sum_le_suminf</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1278..1288"><span>r<span class="hidden">â©</span><sub>M</sub>_nonneg</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>AE</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span>ð¯</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_1935..1946"><span>Î½_trace_fin</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>N</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_2295..2313"><span>abs_Î½_trace_fin_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4248..4256"><span>Î½_eq_lim</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.limI|fact"><span>limI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_\&lt;nu&gt;_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_\&lt;nu&gt;_le|thm"><span class="entity_def" id="offset_4901..4909">abs_Î½_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_2038..2052"><span>abs_Î½_trace_le</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4308..4320"><span>Î½_eq_Î½_trace</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_2806..2824"><span>integrable_Î½_trace</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Measure.html#Probability_Measure.prob_space.integral_le_const|fact"><span>prob_space.integral_le_const</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_abs_bound|fact"><span>integral_abs_bound</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_le|thm"><span class="entity_def" id="offset_5083..5087">Î½_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4901..4909"><span>abs_Î½_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_le_D1|fact"><span>abs_le_D1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_eq_Pn|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_eq_Pn|thm"><span class="entity_def" id="offset_5158..5165">Î½_eq_Pn</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><span>Pn'</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4068..4079"><span>Î½_fin_eq_Pn</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4248..4256"><span>Î½_eq_lim</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_eq_lim|fact"><span>suminf_eq_lim</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> 6.1.2 in Puterman </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_bfun|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_bfun|thm"><span class="entity_def" id="offset_5308..5314">Î½_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4901..4909"><span>abs_Î½_le</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_bfun|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_bfun|thm"><span class="entity_def" id="offset_5363..5373">Î½_fin_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3693..3705"><span>abs_Î½_fin_le</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="offset_5434..5449">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b|const"><span class="entity_def" id="offset_5450..5453">Î½<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5308..5314"><span>Î½_bfun</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;nu&gt;_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;nu&gt;_le|thm"><span>norm_Î½_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4901..4909"><span>abs_Î½_le</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.sum_disc_lim|fact"><span>sum_disc_lim</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bfun_def&apos;|fact"><span>norm_bfun_def'</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_as_markovian|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_as_markovian|thm"><span class="entity_def" id="offset_5639..5653">Î½_as_markovian</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="main"><span>(</span></span><span>as_markovian</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5158..5165"><span>Î½_eq_Pn</span></a><span> </span><span>Pn_as_markovian_eq</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>Pn'_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Optimal Reward</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_MD_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_MD_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_MD_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_MD.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_MD.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_MD|const"><span>Î½_MD</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_markovian_det|const"><span>mk_markovian_det</span></a><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt_def_raw|axiom"><span class="entity_def" id="offset_5860..5870">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt|const"><span class="entity_def" id="offset_5872..5877">Î½_opt</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5902..5907">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_le_\&lt;nu&gt;_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_le_\&lt;nu&gt;_opt|thm"><span>Î½_le_Î½_opt</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_policy</span><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5860..5870"><span>Î½_opt_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4901..4909"><span>abs_Î½_le</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5902..5907"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt_eq_MR|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt_eq_MR|thm"><span class="entity_def" id="offset_6100..6111">Î½_opt_eq_MR</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span class="main"><span>â</span></span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5860..5870"><span>Î½_opt_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>policies_ne</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4901..4909"><span>abs_Î½_le</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>m</span></span><span class="main"><span>â</span></span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>is_Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_as_markovian</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_refl|fact"><span>order_refl</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5639..5653"><span>Î½_as_markovian</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5639..5653"><span>Î½_as_markovian</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>blast</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span class="main"><span>â</span></span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_ne</span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_imp_policies</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt_bfun|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_opt_bfun|thm"><span class="entity_def" id="offset_6792..6802">Î½_opt_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5860..5870"><span>Î½_opt_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4901..4909"><span>abs_Î½_le</span></a><span> </span><span>policies_ne</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_abs_le|fact"><span>cSup_abs_le</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_normI|fact"><span>bfun_normI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.rep_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.abs_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.transfer|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.rsp|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.rep_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.abs_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.transfer|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.rsp|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_def|axiom"><span class="entity_def" id="offset_6935..6950">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt|const"><span class="entity_def" id="offset_6951..6958">Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6792..6802"><span>Î½_opt_bfun</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Reward of a Decision Rule</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.dec|type"><span>dec</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec|const"><span class="entity_def" id="offset_7103..7108">r_dec</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>d</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_r_dec_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_r_dec_le|thm"><span class="entity_def" id="offset_7139..7151">abs_r_dec_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_7103..7108"><span>r_dec</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3174..3194"><span>expectation_abs_r_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_abs_bound|fact"><span>integral_abs_bound</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.r_dec_eq_r_K0|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec_eq_r_K0|thm"><span class="entity_def" id="offset_7249..7262">r_dec_eq_r_K0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_7103..7108"><span>r_dec</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.K0&apos;|const"><span>K0'</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>K0'_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.r_dec_bfun|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec_bfun|thm"><span class="entity_def" id="offset_7344..7354">r_dec_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_7103..7108"><span>r_dec</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7139..7151"><span>abs_r_dec_le</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_normI|fact"><span>bfun_normI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="offset_7430..7445">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec\&lt;^sub&gt;b|const"><span class="entity_def" id="offset_7446..7453">r_dec<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_7103..7108"><span>r_dec</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7344..7354"><span>r_dec_bfun</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_r_dec_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_r_dec_le|thm"><span class="entity_def" id="offset_7510..7523">norm_r_dec_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7139..7151"><span>abs_r_dec_le</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_bound|fact"><span>norm_bound</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7430..7445"><span>r_dec<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.r_dec_det|fact"><span class="entity_def" id="MDP_reward.MDP_reward.r_dec_det|thm"><span>r_dec_det</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_7103..7108"><span>r_dec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_dec_det_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7430..7445"><span>r_dec<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun_inverse|fact"><span>bfun.Bfun_inverse</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Push-Forward of a Function Through the MDP</span><span>âº</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_l_pow_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_l_pow_eq|thm"><span>norm_l_pow_eq</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7893..7898">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_norm_disc_I|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_norm_disc_I|thm"><span>summable_norm_disc_I</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7893..7898"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8036..8041">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_norm_disc_I&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_norm_disc_I&apos;|thm"><span>summable_norm_disc_I'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8036..8041"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8185..8190">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_discI|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_discI|thm"><span>summable_discI</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8185..8190"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.Abel_lemma|fact"><span>Abel_lemma</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span> </span><span class="quoted"><span class="free"><span>F</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>b</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8469..8474">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_disc_reward|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_disc_reward|thm"><span class="entity_def" id="offset_8475..8495">summable_disc_reward</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.banach|class"><span>banach</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8469..8474"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_norm_cancel|fact"><span>summable_norm_cancel</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.dec|type"><span>dec</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_def_raw|axiom"><span class="entity_def" id="offset_8702..8712">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X|const"><span class="entity_def" id="offset_8714..8717">ð«<span class="hidden">â©</span><sub>X</sub></span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span>Xn'</span><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_0|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_0|thm"><span>ð«<span class="hidden">â©</span><sub>X</sub>_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8702..8712"><span>ð«<span class="hidden">â©</span><sub>X</sub>_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_bounded_linear|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_bounded_linear|thm"><span class="entity_def" id="offset_8828..8846">ð«<span class="hidden">â©</span><sub>X</sub>_bounded_linear</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear|const"><span>bounded_linear</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8702..8712"><span>ð«<span class="hidden">â©</span><sub>X</sub>_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="offset_8914..8922">norm_ð«<span class="hidden">â©</span><sub>X</sub></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm|const"><span>onorm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8702..8712"><span>ð«<span class="hidden">â©</span><sub>X</sub>_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;X_apply|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;X_apply|thm"><span class="entity_def" id="offset_8986..9000">norm_ð«<span class="hidden">â©</span><sub>X</sub>_apply</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm|fact"><span>onorm</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8828..8846"><span>ð«<span class="hidden">â©</span><sub>X</sub>_bounded_linear</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_bound_r|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_bound_r|thm"><span class="entity_def" id="offset_9088..9099">ð«<span class="hidden">â©</span><sub>X</sub>_bound_r</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8986..9000"><span>norm_ð«<span class="hidden">â©</span><sub>X</sub>_apply</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7510..7523"><span>norm_r_dec_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_bounded_r|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_bounded_r|thm"><span class="entity_def" id="offset_9206..9219">ð«<span class="hidden">â©</span><sub>X</sub>_bounded_r</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_9088..9099"><span>ð«<span class="hidden">â©</span><sub>X</sub>_bound_r</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_norm_disc_reward&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_norm_disc_reward&apos;|thm"><span>summable_norm_disc_reward'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_9206..9219"><span>ð«<span class="hidden">â©</span><sub>X</sub>_bounded_r</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_disc_reward_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_disc_reward_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span>summable_disc_reward_ð«<span class="hidden">â©</span><sub>X</sub></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8475..8495"><span>summable_disc_reward</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_9206..9219"><span>ð«<span class="hidden">â©</span><sub>X</sub>_bounded_r</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.disc_reward_tendsto|fact"><span class="entity_def" id="MDP_reward.MDP_reward.disc_reward_tendsto|thm"><span class="entity_def" id="offset_9605..9624">disc_reward_tendsto</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>t</span></span><span class="main"><span>&lt;</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_LIMSEQ|fact"><span>summable_LIMSEQ</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_Suc|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_Suc|thm"><span class="entity_def" id="offset_9757..9764">ð«<span class="hidden">â©</span><sub>X</sub>_Suc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="main"><span>(</span></span><span>K_st</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8702..8712"><span>ð«<span class="hidden">â©</span><sub>X</sub>_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.integral_bind|fact"><span>integral_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> K </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Sigma_Algebra.html#Sigma_Algebra.count_space|const"><span>count_space</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_in_subprob_algebra|fact"><span>measure_pmf_in_subprob_algebra</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span> </span><span>Suc_Xn'_markovian</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_Suc&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_Suc&apos;|thm"><span class="entity_def" id="offset_10027..10035">ð«<span class="hidden">â©</span><sub>X</sub>_Suc'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="main"><span>(</span></span><span>K_st</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_9757..9764"><span>ð«<span class="hidden">â©</span><sub>X</sub>_Suc</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_9757..9764"><span>ð«<span class="hidden">â©</span><sub>X</sub>_Suc</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_sconst|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_sconst|thm"><span class="entity_def" id="offset_10241..10251">ð«<span class="hidden">â©</span><sub>X</sub>_sconst</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="main"><span>(</span></span><span>K_st</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10027..10035"><span>ð«<span class="hidden">â©</span><sub>X</sub>_Suc'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_swap1|fact"><span>funpow_swap1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_P_n|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_P_n|thm"><span>norm_P_n</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Operator_Norm.html#Operator_Norm.onorm|const"><span>onorm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="main"><span>(</span></span><span>K_st</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8914..8922"><span>norm_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10241..10251"><span>ð«<span class="hidden">â©</span><sub>X</sub>_sconst</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_norm_bfun_disc|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_norm_bfun_disc|thm"><span>summable_norm_bfun_disc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.Abel_lemma|fact"><span>Abel_lemma</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_bfun_disc|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_bfun_disc|thm"><span>summable_bfun_disc</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>t</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.idom_abs_sgn_class.abs_mult|fact"><span>abs_mult</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.idom_abs_sgn_class.abs_mult|fact"><span>abs_mult</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_norm_cancel|fact"><span>summable_norm_cancel</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.summable_disc_norm|fact"><span class="entity_def" id="MDP_reward.MDP_reward.summable_disc_norm|thm"><span>summable_disc_norm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1369..1382"><span>summable_disc</span></a><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_bfun_disc_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_bfun_disc_le|thm"><span class="entity_def" id="offset_11067..11084">norm_bfun_disc_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_le|fact"><span>suminf_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_bfun_disc_le&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_bfun_disc_le&apos;|thm"><span class="entity_def" id="offset_11245..11263">norm_bfun_disc_le'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_le|fact"><span>suminf_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_reward.html#offset_11067..11084"><span>norm_bfun_disc_le</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.sum_disc_lim_l|fact"><span class="entity_def" id="MDP_reward.MDP_reward.sum_disc_lim_l|thm"><span>sum_disc_lim_l</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_mult2|fact"><span>suminf_mult2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_geometric|fact"><span>summable_geometric</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_geometric|fact"><span>suminf_geometric</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.sum_disc_bound|fact"><span class="entity_def" id="MDP_reward.MDP_reward.sum_disc_bound|thm"><span>sum_disc_bound</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_11245..11263"><span>norm_bfun_disc_le'</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.sum_disc_lim|fact"><span>sum_disc_lim</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.sum_disc_bound&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.sum_disc_bound&apos;|thm"><span>sum_disc_bound'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_11733..11734">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span>  </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_11733..11734"><span>h</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_norm|fact"><span>summable_norm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_11733..11734"><span>h</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_le|fact"><span>suminf_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_mono&apos;|fact"><span>mult_mono'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.sum_disc_lim|fact"><span>sum_disc_lim</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt|thm"><span class="entity_def" id="offset_12156..12166">Î½<span class="hidden">â©</span><sub>b</sub>_le_opt</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5083..5087"><span>Î½_le</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6935..6950"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_MD|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_MD|thm"><span>Î½<span class="hidden">â©</span><sub>b</sub>_le_opt_MD</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_markovian_det|const"><span>mk_markovian_det</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_markovian_det_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_policy_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_DD|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_DD|thm"><span class="entity_def" id="offset_12433..12446">Î½<span class="hidden">â©</span><sub>b</sub>_le_opt_DD</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec_det</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_markovian_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_DR|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_le_opt_DR|thm"><span>Î½<span class="hidden">â©</span><sub>b</sub>_le_opt_DR</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_markovian_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_eq_MR|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_eq_MR|thm"><span class="entity_def" id="offset_12697..12710">Î½<span class="hidden">â©</span><sub>b</sub>_opt_eq_MR</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6100..6111"><span>Î½_opt_eq_MR</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6935..6950"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_as_markovian|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_as_markovian|thm"><span class="entity_def" id="offset_12826..12842">Î½<span class="hidden">â©</span><sub>b</sub>_as_markovian</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="main"><span>(</span></span><span>as_markovian</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5639..5653"><span>Î½_as_markovian</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_elem|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_elem|thm"><span class="entity_def" id="offset_12969..12975">Î½_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8702..8712"><span>ð«<span class="hidden">â©</span><sub>X</sub>_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5158..5165"><span>Î½_eq_Pn</span></a><span> </span><span>Pn'_markovian_eq_Xn'_bind</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_in_subprob_algebra|fact"><span>measure_pmf_in_subprob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.integral_bind|fact"><span>integral_bind</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7249..7262"><span>r_dec_eq_r_K0</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_eq_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_eq_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="offset_13235..13245">Î½<span class="hidden">â©</span><sub>b</sub>_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_12969..12975"><span>Î½_elem</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.suminf_apply_bfun|fact"><span>suminf_apply_bfun</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_eq_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_eq_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span>Î½_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13235..13245"><span>Î½<span class="hidden">â©</span><sub>b</sub>_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> defines for each state the expected value of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="antiquote"><span>}</span></span></span><span> 
</span><span>after taking a single step in the MDP according to the decision rule </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>d</span></span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>  
</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.dec|type"><span>dec</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.rep_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.abs_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.transfer|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.rsp|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.rep_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.abs_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.transfer|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.rsp|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_def|axiom"><span class="entity_def" id="offset_13686..13701">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1|const"><span class="entity_def" id="offset_13702..13705">ð«<span class="hidden">â©</span><sub>1</sub></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun|type"><span>â<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp|const"><span>push_exp</span></a><span> </span><span class="main"><span>(</span></span><span>K_st</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.push_exp_bounded_linear|fact"><span>push_exp_bounded_linear</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_pow|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_pow|thm"><span class="entity_def" id="offset_13807..13814">ð«<span class="hidden">â©</span><sub>1</sub>_pow</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_const|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_const|thm"><span class="entity_def" id="offset_13899..13908">ð«<span class="hidden">â©</span><sub>X</sub>_const</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13807..13814"><span>ð«<span class="hidden">â©</span><sub>1</sub>_pow</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10241..10251"><span>ð«<span class="hidden">â©</span><sub>X</sub>_sconst</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="offset_13991..13999">norm_ð«<span class="hidden">â©</span><sub>1</sub></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun.rep_eq|fact"><span>norm_blinfun.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;1_pow|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;1_pow|thm"><span>norm_ð«<span class="hidden">â©</span><sub>1</sub>_pow</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13807..13814"><span>ð«<span class="hidden">â©</span><sub>1</sub>_pow</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun.rep_eq|fact"><span>norm_blinfun.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;1_l_less|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_\&lt;P&gt;\&lt;^sub&gt;1_l_less|thm"><span class="entity_def" id="offset_14184..14199">norm_ð«<span class="hidden">â©</span><sub>1</sub>_l_less</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_pos|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_pos|thm"><span class="entity_def" id="offset_14241..14248">ð«<span class="hidden">â©</span><sub>1</sub>_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_n_pos|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_n_pos|thm"><span class="entity_def" id="offset_14323..14332">ð«<span class="hidden">â©</span><sub>1</sub>_n_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_n_disc_pos|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_n_disc_pos|thm"><span class="entity_def" id="offset_14428..14442">ð«<span class="hidden">â©</span><sub>1</sub>_n_disc_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14323..14332"><span>ð«<span class="hidden">â©</span><sub>1</sub>_n_pos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_nonneg_nonneg|fact"><span>scaleR_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_sum_pos|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_sum_pos|thm"><span>ð«<span class="hidden">â©</span><sub>1</sub>_sum_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>t</span></span><span class="main"><span>â¤</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14323..14332"><span>ð«<span class="hidden">â©</span><sub>1</sub>_n_pos</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14241..14248"><span>ð«<span class="hidden">â©</span><sub>1</sub>_pos</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_left|fact"><span>blinfun.add_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_nonneg_nonneg|fact"><span>scaleR_nonneg_nonneg</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14727..14732">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_sum_ge|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_sum_ge|thm"><span class="entity_def" id="offset_14733..14743">ð«<span class="hidden">â©</span><sub>1</sub>_sum_ge</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>t</span></span><span class="main"><span>â¤</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14428..14442"><span>ð«<span class="hidden">â©</span><sub>1</sub>_n_disc_pos</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14727..14732"><span>assms</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_comm_monoid_add_class.add_increasing2|fact"><span>add_increasing2</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_left|fact"><span>blinfun.add_left</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.disc_\&lt;P&gt;\&lt;^sub&gt;1_tendsto|fact"><span class="entity_def" id="MDP_reward.MDP_reward.disc_\&lt;P&gt;\&lt;^sub&gt;1_tendsto|thm"><span class="entity_def" id="offset_14933..14949">disc_ð«<span class="hidden">â©</span><sub>1</sub>_tendsto</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>t</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_LIMSEQ&apos;|fact"><span>summable_LIMSEQ'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.disc_\&lt;P&gt;\&lt;^sub&gt;1_lim|fact"><span class="entity_def" id="MDP_reward.MDP_reward.disc_\&lt;P&gt;\&lt;^sub&gt;1_lim|thm"><span class="entity_def" id="offset_15073..15085">disc_ð«<span class="hidden">â©</span><sub>1</sub>_lim</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.t2_space_class.lim|const"><span>lim</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>t</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.limI|fact"><span>limI</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14933..14949"><span>disc_ð«<span class="hidden">â©</span><sub>1</sub>_tendsto</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.convergent_disc_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="MDP_reward.MDP_reward.convergent_disc_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span class="entity_def" id="offset_15196..15215">convergent_disc_ð«<span class="hidden">â©</span><sub>1</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.convergent|const"><span>convergent</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>t</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.convergentI|fact"><span>convergentI</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14933..14949"><span>disc_ð«<span class="hidden">â©</span><sub>1</sub>_tendsto</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15310..15315">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_suminf_ge|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_suminf_ge|thm"><span class="entity_def" id="offset_15316..15329">ð«<span class="hidden">â©</span><sub>1</sub>_suminf_ge</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15401..15404">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>t</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_tendsto_apply_bfun|fact"><span>bfun_tendsto_apply_bfun</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15073..15085"><span>disc_ð«<span class="hidden">â©</span><sub>1</sub>_lim</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.lim_blinfun_apply|fact"><span>lim_blinfun_apply</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15196..15215"><span>convergent_disc_ð«<span class="hidden">â©</span><sub>1</sub></span></a><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>t</span></span><span class="main"><span>â¤</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14733..14743"><span>ð«<span class="hidden">â©</span><sub>1</sub>_sum_ge</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15310..15315"><span>assms</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.LIMSEQ_le_const|fact"><span>LIMSEQ_le_const</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15401..15404"><span>aux</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15733..15738">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_suminf_pos|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_suminf_pos|thm"><span class="entity_def" id="offset_15739..15753">ð«<span class="hidden">â©</span><sub>1</sub>_suminf_pos</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15316..15329"><span>ð«<span class="hidden">â©</span><sub>1</sub>_suminf_ge</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>u</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15733..15738"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15858..15863">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.lemma_6_1_2_b|fact"><span class="entity_def" id="MDP_reward.MDP_reward.lemma_6_1_2_b|thm"><span class="entity_def" id="offset_15864..15877">lemma_6_1_2_b</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15739..15753"><span>ð«<span class="hidden">â©</span><sub>1</sub>_suminf_pos</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15858..15863"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The Bellman Operator </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>L</span></span></span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.L_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.L_def_raw|axiom"><span class="entity_def" id="offset_16156..16166">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.L.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.L|const"><span class="entity_def" id="offset_16168..16169">L</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.norm_L_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.norm_L_le|thm"><span class="entity_def" id="offset_16206..16215">norm_L_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.norm_blinfun|fact"><span>norm_blinfun</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13991..13999"><span>norm_ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7510..7523"><span>norm_r_dec_le</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Norm_Arith.html#Norm_Arith.norm_add_rule_thm|fact"><span>norm_add_rule_thm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.abs_L_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.abs_L_le|thm"><span class="entity_def" id="offset_16375..16383">abs_L_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16206..16215"><span>norm_L_le</span></a><span class="main"><span>]</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>



</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_stationary|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_stationary|thm"><span class="entity_def" id="offset_16486..16498">Î½_stationary</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13235..13245"><span>Î½<span class="hidden">â©</span><sub>b</sub>_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13807..13814"><span>ð«<span class="hidden">â©</span><sub>1</sub>_pow</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.scaleR_blinfun.rep_eq|fact"><span>scaleR_blinfun.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10241..10251"><span>ð«<span class="hidden">â©</span><sub>X</sub>_sconst</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>Î»</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>x</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a></a></a><span> </span><span class="bound"><span class="bound"><span class="bound"><span>x</span></span></span></span><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a></a></a><span> </span><span class="free"><span class="free"><span class="free"><span>d</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_eq_\&lt;P&gt;\&lt;^sub&gt;X_one|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_eq_\&lt;P&gt;\&lt;^sub&gt;X_one|thm"><span>ð«<span class="hidden">â©</span><sub>1</sub>_eq_ð«<span class="hidden">â©</span><sub>X</sub>_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10027..10035"><span>ð«<span class="hidden">â©</span><sub>X</sub>_Suc'</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The value of a markovian policy can be expressed in terms of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span class="antiquote"><span>}</span></span></span><span>.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_step|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_step|thm"><span class="entity_def" id="offset_17144..17150">Î½_step</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17237..17238">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_9088..9099"><span>ð«<span class="hidden">â©</span><sub>X</sub>_bound_r</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_split_head|fact"><span>suminf_split_head</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13235..13245"><span>Î½<span class="hidden">â©</span><sub>b</sub>_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>t</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_scaleR_right|fact"><span>suminf_scaleR_right</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_17237..17238"><span>s</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_9757..9764"><span>ð«<span class="hidden">â©</span><sub>X</sub>_Suc</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Linear_Algebra.html#Linear_Algebra.linear_simps|fact"><span>linear_simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13235..13245"><span>Î½<span class="hidden">â©</span><sub>b</sub>_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_\&lt;nu&gt;_fix|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_\&lt;nu&gt;_fix|thm"><span class="entity_def" id="offset_17910..17917">L_Î½_fix</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_17144..17150"><span>Î½_step</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17991..17996">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_fix_\&lt;nu&gt;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_fix_\&lt;nu&gt;|thm"><span class="entity_def" id="offset_17997..18004">L_fix_Î½</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_17991..17996"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.group_add_class.eq_diff_eq|fact"><span>eq_diff_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>t</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_norm_le&apos;|fact"><span>inv_norm_le'</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14184..14199"><span>norm_ð«<span class="hidden">â©</span><sub>1</sub>_l_less</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16486..16498"><span>Î½_stationary</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_\&lt;nu&gt;_fix_iff|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_\&lt;nu&gt;_fix_iff|thm"><span class="entity_def" id="offset_18421..18432">L_Î½_fix_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_17997..18004"><span>L_fix_Î½</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_17910..17917"><span>L_Î½_fix</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.apply_bfun_bounded_above|fact"><span class="entity_def" id="MDP_reward.MDP_reward.apply_bfun_bounded_above|thm"><span>apply_bfun_bounded_above</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.norm_le_norm_bfun|fact"><span>norm_le_norm_bfun</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.apply_bfun_bdd_above|fact"><span class="entity_def" id="MDP_reward.MDP_reward.apply_bfun_bdd_above|thm"><span>apply_bfun_bdd_above</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_bounded|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_bounded|thm"><span class="entity_def" id="offset_18816..18825">L_bounded</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16375..16383"><span>abs_L_le</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_bounded&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_bounded&apos;|thm"><span>L_bounded'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_subset|fact"><span>bounded_subset</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_18816..18825"><span>L_bounded</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_bdd_above|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_bdd_above|thm"><span>L_bdd_above</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Optimality Equations</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_def_raw|axiom"><span class="entity_def" id="offset_19172..19182">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;|const"><span class="entity_def" id="offset_19184..19185">â</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_bfun|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_bfun|thm"><span class="entity_def" id="offset_19238..19244">â_bfun</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19184..19185"><span>â</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19172..19182"><span>â_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16375..16383"><span>abs_L_le</span></a><span> </span><span>ex_dec</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.cSup_abs_le|fact"><span>cSup_abs_le</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_normI|fact"><span>bfun_normI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.rep_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.abs_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.transfer|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.rsp|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.rep_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.abs_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.transfer|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.rsp|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_def|axiom"><span class="entity_def" id="offset_19351..19366">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b|const"><span class="entity_def" id="offset_19367..19370">â<span class="hidden">â©</span><sub>b</sub></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_reward.html#offset_19184..19185"><span>â</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19238..19244"><span>â_bfun</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_le_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_le_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_19433..19441">L_le_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19172..19182"><span>â_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Monotonicity</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_mono|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_mono|thm"><span class="entity_def" id="offset_19563..19571">ð«<span class="hidden">â©</span><sub>1</sub>_mono</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_14241..14248"><span>ð«<span class="hidden">â©</span><sub>1</sub>_pos</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_mono|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_mono|thm"><span>ð«<span class="hidden">â©</span><sub>X</sub>_mono</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8702..8712"><span>ð«<span class="hidden">â©</span><sub>X</sub>_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_mono|fact"><span>integral_mono</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_mono|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_mono|thm"><span class="entity_def" id="offset_19788..19794">L_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.ordered_real_vector_class.scaleR_left_mono|fact"><span>scaleR_left_mono</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19875..19880">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_mono|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_mono|thm"><span>â<span class="hidden">â©</span><sub>b</sub>_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19788..19794"><span>L_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19875..19880"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span>ex_dec</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19172..19182"><span>â_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20022..20027">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.step_mono|fact"><span class="entity_def" id="MDP_reward.MDP_reward.step_mono|thm"><span class="entity_def" id="offset_20028..20037">step_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_20022..20027"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19433..19441"><span>L_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20138..20143">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.step_mono_elem|fact"><span class="entity_def" id="MDP_reward.MDP_reward.step_mono_elem|thm"><span class="entity_def" id="offset_20144..20158">step_mono_elem</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_20138..20143"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19172..19182"><span>â_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_linorder_class.less_cSUP_iff|fact"><span>less_cSUP_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_20138..20143"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_cancel_comm_monoid_add_class.add_strict_increasing|fact"><span>add_strict_increasing</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_20475..20478">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_less_eq|fact"><span>diff_less_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?d</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="var"><span>?d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_20475..20478"><span>aux</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>K_st_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_imp_le|fact"><span>less_imp_le</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.p_n_\&lt;pi&gt;_MD|fact"><span class="entity_def" id="MDP_reward.MDP_reward.p_n_\&lt;pi&gt;_MD|thm"><span>p_n_Ï_MD</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.p_n_\&lt;pi&gt;_MR|fact"><span class="entity_def" id="MDP_reward.MDP_reward.p_n_\&lt;pi&gt;_MR|thm"><span>p_n_Ï_MR</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_Suc_n_elem|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_Suc_n_elem|thm"><span class="entity_def" id="offset_21063..21077">ð«<span class="hidden">â©</span><sub>X</sub>_Suc_n_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10027..10035"><span>ð«<span class="hidden">â©</span><sub>X</sub>_Suc'</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.rep_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.abs_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.transfer|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.rsp|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.rep_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.abs_eq|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.transfer|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.rsp|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_def|axiom"><span class="entity_def" id="offset_21160..21175">lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin|const"><span class="entity_def" id="offset_21176..21183">Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s</span></span><span class="main"><span>,</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.pol|type"><span>pol</span></a><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5363..5373"><span>Î½_fin_bfun</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_elem|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_elem|thm"><span class="entity_def" id="offset_21259..21269">Î½_fin_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8702..8712"><span>ð«<span class="hidden">â©</span><sub>X</sub>_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4068..4079"><span>Î½_fin_eq_Pn</span></a><span> </span><span>Pn'_markovian_eq_Xn'_bind</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_in_subprob_algebra|fact"><span>measure_pmf_in_subprob_algebra</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Giry_Monad.html#Giry_Monad.integral_bind|fact"><span>integral_bind</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7249..7262"><span>r_dec_eq_r_K0</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_eq_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_eq_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="offset_21530..21544">Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21259..21269"><span>Î½_fin_elem</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.sum_apply_bfun|fact"><span>sum_apply_bfun</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21160..21175"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_eq_\&lt;P&gt;\&lt;^sub&gt;X|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_fin_eq_\&lt;P&gt;\&lt;^sub&gt;X|thm"><span class="entity_def" id="offset_21683..21695">Î½_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_3646..3651"><span>Î½_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21160..21175"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21530..21544"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;d|const"><span class="entity_def" id="offset_21824..21827">ð«<span class="hidden">â©</span><sub>d</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21856..21861">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_L_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;X_L_le|thm"><span class="entity_def" id="offset_21862..21870">ð«<span class="hidden">â©</span><sub>X</sub>_L_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21856..21861"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_20028..20037"><span>step_mono</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_tendsto_\&lt;nu&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_tendsto_\&lt;nu&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_21989..22008">Î½<span class="hidden">â©</span><sub>b</sub>_fin_tendsto_Î½<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_9605..9624"><span>disc_reward_tendsto</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13235..13245"><span>Î½<span class="hidden">â©</span><sub>b</sub>_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21530..21544"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;d_lim|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;d_lim|thm"><span class="entity_def" id="offset_22139..22146">ð«<span class="hidden">â©</span><sub>d</sub>_lim</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_21824..21827"><span>ð«<span class="hidden">â©</span><sub>d</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.tendsto_eq_intros|fact"><span class="dynamic"><span class="dynamic"><span>tendsto_eq_intros</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_21824..21827"><span>ð«<span class="hidden">â©</span><sub>d</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_mono&apos;|fact"><span>mult_mono'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_21824..21827"><span>ð«<span class="hidden">â©</span><sub>d</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Normed_Spaces.html#Elementary_Normed_Spaces.Lim_transform_bound|fact"><span>Lim_transform_bound</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_21824..21827"><span>ð«<span class="hidden">â©</span><sub>d</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_norm_zero_cancel|fact"><span>tendsto_norm_zero_cancel</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_bfun_one|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_bfun_one|thm"><span>ð«<span class="hidden">â©</span><sub>1</sub>_bfun_one</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_pow_bfun_one|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;P&gt;\&lt;^sub&gt;1_pow_bfun_one|thm"><span>ð«<span class="hidden">â©</span><sub>1</sub>_pow_bfun_one</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Properties of Solutions of the Optimality Equations</span><span>âº</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> 6.2.2 a) in Puterman </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22794..22799">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_dec_ge_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_dec_ge_opt|thm"><span class="entity_def" id="offset_22800..22812">â_dec_ge_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22868..22872">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="skolem"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?p</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mk_markovian</span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22970..22973">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="var"><span>?p</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="skolem"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21530..21544"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_23134..23137">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21862..21870"><span>ð«<span class="hidden">â©</span><sub>X</sub>_L_le</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_22794..22799"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_22868..22872"><span>that</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21063..21077"><span>ð«<span class="hidden">â©</span><sub>X</sub>_Suc_n_elem</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Linear_Algebra.html#Linear_Algebra.linear_simps|fact"><span>linear_simps</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="var"><span>?p</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="var"><span>?p</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="skolem"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_8714..8717"><span>ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_vector_class.scaleR_scaleR|fact"><span>scaleR_scaleR</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.ordered_real_vector_class.scaleR_left_mono|fact"><span>scaleR_left_mono</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21530..21544"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> 
            </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_vector_class.scaleR_add_right|fact"><span>scaleR_add_right</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_vector_class.scaleR_scaleR|fact"><span>scaleR_scaleR</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_23134..23137"><span>Suc.IH</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21530..21544"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_23725..23726">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="var"><span>?p</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21824..21827"><span>ð«<span class="hidden">â©</span><sub>d</sub></span></a><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="var"><span>?p</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_tendsto_apply_bfun|fact"><span>bfun_tendsto_apply_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_add|fact"><span>Limits.tendsto_add</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21989..22008"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_tendsto_Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_22139..22146"><span>ð«<span class="hidden">â©</span><sub>d</sub>_lim</span></a><span class="main"><span>]</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="var"><span>?p</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_22868..22872"><span>that</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_22970..22973"><span>aux</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_22794..22799"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.lim_mono|fact"><span>lim_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="MDP_reward.html#offset_23725..23726"><span>1</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>of</span></span><span>  </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_22868..22872"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>policies_ne</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_12697..12710"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt_eq_MR</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24176..24181">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_inc_le_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_inc_le_opt|thm"><span class="entity_def" id="offset_24182..24194">â_inc_le_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_24255..24258">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>e</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>e</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_24352..24354">hd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_24176..24181"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_20144..20158"><span>step_mono_elem</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>âº</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Pinf</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_24352..24354"><span>hd</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?Pinf</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="var"><span>?Pinf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15864..15877"><span>lemma_6_1_2_b</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_24352..24354"><span>hd</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="var"><span>?Pinf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_norm_le&apos;|fact"><span>inv_norm_le'</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="var"><span>?Pinf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16486..16498"><span>Î½_stationary</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.add_right|fact"><span>blinfun.add_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_right|fact"><span>blinfun.scaleR_right</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15196..15215"><span>convergent_disc_ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_iff_convergent&apos;|fact"><span>summable_iff_convergent'</span></a><span> 
          </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.scaleR_blinfun.rep_eq|fact"><span>scaleR_blinfun.rep_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
          </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_geometric|fact"><span>suminf_geometric</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_scaleR_left|fact"><span>bounded_linear_scaleR_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_geometric|fact"><span>summable_geometric</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>e</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>e</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_12156..12166"><span>Î½<span class="hidden">â©</span><sub>b</sub>_le_opt</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_markovian_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25911..25916">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>e</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_408..419"><span>disc_lt_one</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_25911..25916"><span>that</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_24255..24258"><span>aux</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.field_le_epsilon|fact"><span>field_le_epsilon</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26195..26200">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_fix_imp_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_fix_imp_opt|thm"><span class="entity_def" id="offset_26201..26214">â_fix_imp_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_26195..26200"><span>assms</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.dual_order.antisym|fact"><span>dual_order.antisym</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_22800..22812"><span>â_dec_ge_opt</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_24182..24194"><span>â_inc_le_opt</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.bounded_P|fact"><span class="entity_def" id="MDP_reward.MDP_reward.bounded_P|thm"><span class="entity_def" id="offset_26340..26349">bounded_P</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Solutions to the Optimality Equation</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span class="antiquote"><span>}</span></span></span><span> and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span class="antiquote"><span>}</span></span></span><span> are Contraction Mappings</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bounded_apply_blinfun|fact"><span>bounded_apply_blinfun</span></a><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bounded_apply_bfun&apos;|fact"><span>bounded_apply_bfun'</span></a><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.contraction_\&lt;L&gt;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.contraction_\&lt;L&gt;|thm"><span class="entity_def" id="offset_26592..26605">contraction_â</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26655..26659">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_dec</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_26655..26659"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.le_SUP_diff&apos;|fact"><span>le_SUP_diff'</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_real_def|fact"><span>dist_real_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19172..19182"><span>â_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ring_class.right_diff_distrib|fact"><span>right_diff_distrib</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_26340..26349"><span>bounded_P</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.bounded_SUP_mul|fact"><span>bounded_SUP_mul</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bounded_apply_bfun&apos;|fact"><span>bounded_apply_bfun'</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_26340..26349"><span>bounded_P</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bounded_apply_blinfun|fact"><span>bounded_apply_blinfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_norm_comp|fact"><span>bounded_norm_comp</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span><span> </span><span>ex_dec</span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_norm_comp|fact"><span>bounded_norm_comp</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_26340..26349"><span>bounded_P</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_norm_comp|fact"><span>bounded_norm_comp</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.norm_push_exp_le_norm|fact"><span>norm_push_exp_le_norm</span></a><span> </span><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.linear|fact"><span>linear</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bound|fact"><span>dist_bound</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.is_contraction_\&lt;L&gt;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.is_contraction_\&lt;L&gt;|thm"><span class="entity_def" id="offset_28349..28365">is_contraction_â</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction|const"><span>is_contraction</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_26592..26605"><span>contraction_â</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_371..383"><span>zero_le_disc</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_408..419"><span>disc_lt_one</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction_def|fact"><span>is_contraction_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.contraction_L|fact"><span class="entity_def" id="MDP_reward.MDP_reward.contraction_L|thm"><span class="entity_def" id="offset_28484..28497">contraction_L</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_28552..28555">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>lea</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>u</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span>  </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.real_vector.scale_right_diff_distrib|fact"><span>scale_right_diff_distrib</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.norm_push_exp_le_norm|fact"><span>norm_push_exp_le_norm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>u</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>â¥</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_28552..28555"><span>aux</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_real_def|fact"><span>dist_real_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>u</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_28552..28555"><span>aux</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>v</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="skolem"><span>u</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.metric_space_class.dist_commute|fact"><span>dist_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bound|fact"><span>dist_bound</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.is_contraction_L|fact"><span class="entity_def" id="MDP_reward.MDP_reward.is_contraction_L|thm"><span>is_contraction_L</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction|const"><span>is_contraction</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.is_contraction_def|fact"><span>is_contraction_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_28484..28497"><span>contraction_L</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_408..419"><span>disc_lt_one</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_371..383"><span>zero_le_disc</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Existence of a Fixpoint of </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_conv|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_conv(2)|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_conv(1)|thm"><span class="entity_def" id="offset_29732..29740">â<span class="hidden">â©</span><sub>b</sub>_conv</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â!</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.banach&apos;|fact"><span>banach'</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_28349..28365"><a class="entity_ref" href="MDP_reward.html#offset_28349..28365"><span>is_contraction_â</span></a></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_fix_iff_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_fix_iff_opt|thm"><span>â<span class="hidden">â©</span><sub>b</sub>_fix_iff_opt</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.banach&apos;|fact"><span>banach'</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_28349..28365"><span>is_contraction_â</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_26201..26214"><span>â_fix_imp_opt</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_fix|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_fix|thm"><span class="entity_def" id="offset_29979..29990">Î½<span class="hidden">â©</span><sub>b</sub>_opt_fix</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_opt|thm"><span class="entity_def" id="offset_30040..30047">â<span class="hidden">â©</span><sub>b</sub>_opt</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_lim|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_lim|thm"><span class="entity_def" id="offset_30097..30104">â<span class="hidden">â©</span><sub>b</sub>_lim</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_29732..29740"><span>â<span class="hidden">â©</span><sub>b</sub>_conv</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_29979..29990"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt_fix</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_2_6|fact"><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_2_6|thm"><span class="entity_def" id="offset_30193..30202">thm_6_2_6</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_2_6&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_2_6&apos;|thm"><span>thm_6_2_6'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_4214..4215"><span>Î½</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30193..30202"><span>thm_6_2_6</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6935..6950"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt.rep_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Existence of Optimal Policies</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_def_raw|axiom"><span class="entity_def" id="offset_30414..30424">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving|const"><span class="entity_def" id="offset_30426..30437">Î½_improving</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_iff|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_iff|thm"><span class="entity_def" id="offset_30501..30516">Î½_improving_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d'</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30414..30424"><span>Î½_improving_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_D_MR|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_D_MR|thm"><span>Î½_improving_D_MR</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>dest</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30501..30516"><span>Î½_improving_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_ge|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_ge|thm"><span class="entity_def" id="offset_30742..30756">Î½_improving_ge</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>d'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30501..30516"><span>Î½_improving_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_imp_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_imp_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_30849..30868">Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_eq_maximum|fact"><span>cSup_eq_maximum</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30501..30516"><span>Î½_improving_iff</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19172..19182"><span>â_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30985..30990">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_imp_\&lt;nu&gt;_improving|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_imp_\&lt;nu&gt;_improving|thm"><span class="entity_def" id="offset_30991..31010">â<span class="hidden">â©</span><sub>b</sub>_imp_Î½_improving</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30985..30990"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19433..19441"><span>L_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30501..30516"><span>Î½_improving_iff</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30985..30990"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31153..31158">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_alt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_improving_alt|thm"><span class="entity_def" id="offset_31159..31174">Î½_improving_alt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30991..31010"><span>â<span class="hidden">â©</span><sub>b</sub>_imp_Î½_improving</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30849..30868"><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31153..31158"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_def_raw|axiom"><span class="entity_def" id="offset_31305..31315">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving|const"><span class="entity_def" id="offset_31317..31329">Î½_conserving</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>d</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_iff|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_iff|thm"><span class="entity_def" id="offset_31366..31382">Î½_conserving_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d'</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31305..31315"><span>Î½_conserving_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30501..30516"><span>Î½_improving_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_ge|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_ge|thm"><span>Î½_conserving_ge</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>d'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d'</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31366..31382"><span>Î½_conserving_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30742..30756"><span>Î½_improving_ge</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_imp_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_imp_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span class="entity_def" id="offset_31661..31681">Î½_conserving_imp_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30849..30868"><span>Î½_improving_imp_â<span class="hidden">â©</span><sub>b</sub></span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31305..31315"><span>Î½_conserving_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31800..31805">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_imp_\&lt;nu&gt;_conserving|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_imp_\&lt;nu&gt;_conserving|thm"><span>â<span class="hidden">â©</span><sub>b</sub>_imp_Î½_conserving</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30991..31010"><span>â<span class="hidden">â©</span><sub>b</sub>_imp_Î½_improving</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31800..31805"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31305..31315"><span>Î½_conserving_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31971..31976">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_alt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_alt|thm"><span class="entity_def" id="offset_31977..31993">Î½_conserving_alt</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31305..31315"><span>Î½_conserving_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31159..31174"><span>Î½_improving_alt</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31971..31976"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32140..32145">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_alt&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;_conserving_alt&apos;|thm"><span class="entity_def" id="offset_32146..32163">Î½_conserving_alt'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>â·</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32140..32145"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31977..31993"><span>Î½_conserving_alt</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Conserving Decision Rules are Optimal</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32332..32339">theorem</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.ex_improving_imp_conserving|fact"><span class="entity_def" id="MDP_reward.MDP_reward.ex_improving_imp_conserving|thm"><span class="entity_def" id="offset_32340..32367">ex_improving_imp_conserving</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32332..32339"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31305..31315"><span>Î½_conserving_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32501..32508">theorem</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.conserving_imp_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.conserving_imp_opt|thm"><span class="entity_def" id="offset_32509..32527">conserving_imp_opt</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_18421..18432"><span>L_Î½_fix_iff</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31661..31681"><span>Î½_conserving_imp_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32501..32508"><span>assms</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32683..32688">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.conserving_imp_opt&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.conserving_imp_opt&apos;|thm"><span class="entity_def" id="offset_32689..32708">conserving_imp_opt'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32683..32688"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31305..31315"><span>Î½_conserving_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32867..32874">theorem</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.improving_att_imp_det_opt|fact"><span class="entity_def" id="MDP_reward.MDP_reward.improving_att_imp_det_opt|thm"><span>improving_att_imp_det_opt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_33038..33039">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_31317..31329"><span>Î½_conserving</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32867..32874"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32340..32367"><span>ex_improving_imp_conserving</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31366..31382"><span>Î½_conserving_iff</span></a><span> </span><span>is_dec_mk_dec_det_iff</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_imp_policies</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_12156..12166"><span>Î½<span class="hidden">â©</span><sub>b</sub>_le_opt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfunD|fact"><span>less_eq_bfunD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_eq_maximum|fact"><span>cSup_eq_maximum</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> z </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span>
        </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32509..32527"><span>conserving_imp_opt</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33038..33039"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6935..6950"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt.rep_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bellman Operator for Single Actions</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.L\&lt;^sub&gt;a|const"><span class="entity_def" id="offset_33511..33514">L<span class="hidden">â©</span><sub>a</sub></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L\&lt;^sub&gt;a_le|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L\&lt;^sub&gt;a_le|thm"><span class="entity_def" id="offset_33582..33588">L<span class="hidden">â©</span><sub>a</sub>_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_triangle_ineq|fact"><span>abs_triangle_ineq</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_abs_bound|fact"><span>integral_abs_bound</span></a><span class="main"><span class="main"><span>]</span></span></span><span>  
      </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_class.add_mono|fact"><span>add_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_mono|fact"><span>mult_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integral_le_const|fact"><span>measure_pmf.integral_le_const</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span> 
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.idom_abs_sgn_class.abs_mult|fact"><span>abs_mult</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L\&lt;^sub&gt;a_bounded|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L\&lt;^sub&gt;a_bounded|thm"><span class="entity_def" id="offset_33875..33886">L<span class="hidden">â©</span><sub>a</sub>_bounded</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.range|const"><span>range</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33582..33588"><span>L<span class="hidden">â©</span><sub>a</sub>_le</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L\&lt;^sub&gt;a_int|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L\&lt;^sub&gt;a_int|thm"><span class="entity_def" id="offset_33988..33995">L<span class="hidden">â©</span><sub>a</sub>_int</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>d</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_add|fact"><span>Bochner_Integration.integral_add</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.bounded_integrable|fact"><span>bounded_integrable</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_iff|fact"><span>bounded_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.bounded_integrable|fact"><span>bounded_integrable</span></a><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_mono|fact"><span>mult_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_abs_bound|fact"><span>integral_abs_bound</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
        </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integral_le_const|fact"><span>measure_pmf.integral_le_const</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.idom_abs_sgn_class.abs_mult|fact"><span>abs_mult</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_eq_L\&lt;^sub&gt;a|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_eq_L\&lt;^sub&gt;a|thm"><span class="entity_def" id="offset_34564..34572">L_eq_L<span class="hidden">â©</span><sub>a</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33988..33995"><span>L<span class="hidden">â©</span><sub>a</sub>_int</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>K_st_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf_bind|fact"><span>measure_pmf_bind</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.integral_measure_pmf_bind|fact"><span>integral_measure_pmf_bind</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> B </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_eq_L\&lt;^sub&gt;a_det|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_eq_L\&lt;^sub&gt;a_det|thm"><span class="entity_def" id="offset_34783..34795">L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>d</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34564..34572"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_dec_det_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Equivalences involving </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>const</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.SUP_step_MR_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.SUP_step_MR_eq|thm"><span class="entity_def" id="offset_34938..34952">SUP_step_MR_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>pa</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>pa</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>D<span class="hidden">â©</span><sub>R</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33875..33886"><span>L<span class="hidden">â©</span><sub>a</sub>_bounded</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33582..33588"><span>L<span class="hidden">â©</span><sub>a</sub>_le</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_abs_bound|fact"><span>integral_abs_bound</span></a><span class="main"><span class="main"><span>]</span></span></span><span> 
          </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> B </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> 
          </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integral_le_const|fact"><span>measure_pmf.integral_le_const</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.bounded_integrable|fact"><span>bounded_integrable</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span> </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_35540..35544">show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>m</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="bound"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_35540..35544"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34564..34572"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33988..33995"><span>L<span class="hidden">â©</span><sub>a</sub>_int</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_35722..35725">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub>_ne</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>pa</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_35722..35725"><span>aux</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> 
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_35956..35957">h</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?p</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_36066..36069">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>sa</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>sa</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_dec</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_35956..35957"><span>h</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.someI_ex|fact"><span>someI_ex</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_36066..36069"><span>aux</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="var"><span>?p</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34564..34572"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="bound"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded_def|fact"><span>bounded_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36434..36439">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_sup_att_dec|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_sup_att_dec|thm"><span class="entity_def" id="offset_36440..36455">â<span class="hidden">â©</span><sub>b</sub>_sup_att_dec</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d'</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34564..34572"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub></span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_36434..36439"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33875..33886"><span>L<span class="hidden">â©</span><sub>a</sub>_bounded</span></a><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19172..19182"><span>â_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.lemma_4_3_1&apos;|fact"><span>lemma_4_3_1'</span></a><span class="main"><span>)</span></span><span> 
      </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bounded_range_subset|fact"><span>bounded_range_subset</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_36434..36439"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34564..34572"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub></span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34938..34952"><span>SUP_step_MR_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_36843..36844">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d'</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>d'</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_36434..36439"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_36843..36844"><span>d</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_dec_det_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34564..34572"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.SUP_step_det_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.SUP_step_det_eq|thm"><span class="entity_def" id="offset_37013..37028">SUP_step_det_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33875..33886"><span>L<span class="hidden">â©</span><sub>a</sub>_bounded</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded_def|fact"><span>bounded_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16375..16383"><span>abs_L_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_37371..37375">show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>m</span></span><span class="main"><span>â</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37371..37375"><span>that</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_det_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34783..34795"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.bexI|fact"><span>bexI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_37527..37531">show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>m</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37527..37531"><span>that</span></a><span> </span><span>A_ne</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34783..34795"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Hilbert_Choice.html#Hilbert_Choice.some_in_eq|fact"><span>some_in_eq</span></a><span>
        </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.bexI|fact"><span>bexI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>SOME</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s'</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>A_ne</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.integrable_L\&lt;^sub&gt;a|fact"><span class="entity_def" id="MDP_reward.MDP_reward.integrable_L\&lt;^sub&gt;a|thm"><span class="entity_def" id="offset_37780..37794">integrable_L<span class="hidden">â©</span><sub>a</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable_add|fact"><span>Bochner_Integration.integrable_add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable_mult_right|fact"><span>integrable_mult_right</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_1096..1108"><span>abs_r_le_r<span class="hidden">â©</span><sub>M</sub></span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integrable_const_bound|fact"><span>measure_pmf.integrable_const_bound</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_1068..1071"><span>r<span class="hidden">â©</span><sub>M</sub></span></a><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integrable|const"><span>integrable</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.bounded_integrable|fact"><span>bounded_integrable</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bochner_Integration.html#Bochner_Integration.integral_abs_bound|fact"><span>integral_abs_bound</span></a><span class="main"><span class="main"><span>]</span></span></span><span> 
        </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.integral_le_const|fact"><span>measure_pmf.integral_le_const</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.SUP_L\&lt;^sub&gt;a_eq_det|fact"><span class="entity_def" id="MDP_reward.MDP_reward.SUP_L\&lt;^sub&gt;a_eq_det|thm"><span class="entity_def" id="offset_38304..38318">SUP_L<span class="hidden">â©</span><sub>a</sub>_eq_det</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>pa</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>pa</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.measure_pmf.expectation|const"><span>measure_pmf.expectation</span></a><span> </span><span class="bound"><span>pa</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_dec</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37780..37794"><span>integrable_L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33875..33886"><span>L<span class="hidden">â©</span><sub>a</sub>_bounded</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.bounded_range_subset|fact"><span>bounded_range_subset</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.lemma_4_3_1|fact"><span>lemma_4_3_1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>a</span></span><span class="main"><span>â</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>p</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.set_pmf|const"><span>set_pmf</span></a><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â«</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf.measure_pmf|const"><span>measure_pmf</span></a><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34938..34952"><span>SUP_step_MR_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37013..37028"><span>SUP_step_det_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>ex_dec_det</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_mono|fact"><span>cSUP_mono</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_eq_SUP_det|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;_eq_SUP_det|thm"><span class="entity_def" id="offset_38922..38934">â_eq_SUP_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19184..19185"><span>â</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19172..19182"><span>â_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34938..34952"><span>SUP_step_MR_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37013..37028"><span>SUP_step_det_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_38304..38318"><span>SUP_L<span class="hidden">â©</span><sub>a</sub>_eq_det</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_eq_SUP_det|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;L&gt;\&lt;^sub&gt;b_eq_SUP_det|thm"><span class="entity_def" id="offset_39068..39082">â<span class="hidden">â©</span><sub>b</sub>_eq_SUP_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_38922..38934"><span>â_eq_SUP_det</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Deterministic Decision Rules are Optimal</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_39243..39248">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.opt_imp_opt_dec_det|fact"><span class="entity_def" id="MDP_reward.MDP_reward.opt_imp_opt_dec_det|thm"><span>opt_imp_opt_dec_det</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>Î <span class="hidden">â©</span><sub>H</sub><span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_39391..39394">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span>as_markovian</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?ps</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>as_markovian</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_39527..39543">markovian_suc_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>as_markovian</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>is_Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_as_markovian</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_39243..39248"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_markovian_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>aux_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>g</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="bound"><span>g</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="bound"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="var"><span>?ps</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_39243..39248"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_12826..12842"><span>Î½<span class="hidden">â©</span><sub>b</sub>_as_markovian</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?ps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_markovian</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="var"><span>?ps</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_17144..17150"><span>Î½_step</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?ps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_39527..39543"><span>markovian_suc_le</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19563..19571"><span>ð«<span class="hidden">â©</span><sub>1</sub>_mono</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?ps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>as_markovian</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>is_Î <span class="hidden">â©</span><sub>M</sub><span class="hidden">â©</span><sub>R</sub>_as_markovian</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_39243..39248"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?ps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="var"><span>?ps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>R</sub></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19433..19441"><span>L_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?ps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?ps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="var"><span>?ps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>âº</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span>as_markovian</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.return_pmf|const"><span>return_pmf</span></a><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>K_st_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_39391..39394"><span>aux</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_36440..36455"><span>â<span class="hidden">â©</span><sub>b</sub>_sup_att_dec</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_39243..39248"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30040..30047"><span>â<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_policy_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32689..32708"><span>conserving_imp_opt'</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32146..32163"><span>Î½_conserving_alt'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Optimal Decision Rules for Finite Action Spaces</span><span>âº</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> 6.2.10 </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41050..41055">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_2_10|fact"><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_2_10|thm"><span>thm_6_2_10</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_38922..38934"><span>â_eq_SUP_det</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37013..37028"><span>SUP_step_det_eq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.arg_max_on_in|fact"><span>arg_max_on_in</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_41050..41055"><span>assms</span></a><span> </span><span>A_ne</span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_eq_Sup_fin|fact"><span>cSup_eq_Sup_fin</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.Sup_fin_Max|fact"><span>Sup_fin_Max</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_41050..41055"><span>assms</span></a><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.finite_arg_max_eq_Max|fact"><span>finite_arg_max_eq_Max</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>â</span></a></span><span class="bound"><span>d</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>â§</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>d</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span>  </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_dec_det_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>K_st_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf|fact"><span>bind_return_pmf</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun_eqI|fact"><span>bfun_eqI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_41050..41055"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_32689..32708"><span>conserving_imp_opt'</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30040..30047"><span>â<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_18421..18432"><span>L_Î½_fix_iff</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Existence of Epsilon-Optimal Policies</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.ex_det_eps|fact"><span class="entity_def" id="MDP_reward.MDP_reward.ex_det_eps|thm"><span class="entity_def" id="offset_41903..41913">ex_det_eps</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33582..33588"><span>L<span class="hidden">â©</span><sub>a</sub>_le</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_38922..38934"><span>â_eq_SUP_det</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37013..37028"><span>SUP_step_det_eq</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_linorder_class.less_cSUP_iff|fact"><span>less_cSUP_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>A_ne</span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>e</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>mk_dec_det_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_dec_det_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13686..13701"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.bind_return_pmf|fact"><span>bind_return_pmf</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>K_st_def</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>metis</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> unused </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_42570..42575">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_2_11|fact"><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_2_11|thm"><span class="entity_def" id="offset_42576..42586">thm_6_2_11</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_42570..42575"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_42770..42771">d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_41903..41913"><span>ex_det_eps</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a></span><span class="main"><span>]</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?d</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?lK</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="var"><span>?d</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?lK_opt</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="var"><span>?d</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="var"><span>?d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="var"><span>?lK_opt</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16156..16166"><span>L_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_26201..26214"><span>â_fix_imp_opt</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_42770..42771"><span>d</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?lK_opt</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="var"><span>?d</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.diff_right_commute|fact"><span>cancel_ab_semigroup_add_class.diff_right_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_le_eq|fact"><span>diff_le_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="var"><span>?lK</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?lK_opt</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15864..15877"><span>lemma_6_1_2_b</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_cong|fact"><span>suminf_cong</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16486..16498"><span>Î½_stationary</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="var"><span>?lK</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun_compose|const"><span>o<span class="hidden">â©</span><sub>L</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.id_blinfun|const"><span>id_blinfun</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="var"><span>?lK</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="var"><span>?lK</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_right|fact"><span>blinfun.diff_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.diff_left|fact"><span>blinfun.diff_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_43611..43613">le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="var"><span>?lK</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.inv_norm_le&apos;|fact"><span>inv_norm_le'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_43727..43728">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable|const"><span>summable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="var"><span>?d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_15196..15215"><span>convergent_disc_ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_iff_convergent&apos;|fact"><span>summable_iff_convergent'</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.summable_iff_convergent&apos;|fact"><span>summable_iff_convergent'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="var"><span>?lK</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="var"><span>?lK</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="var"><span>?lK</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_right|fact"><span>blinfun.scaleR_right</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?lK</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_43727..43728"><span>s</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.blinfun_apply|const"><span>blinfun_apply</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>â</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.bounded_linear_scaleR_left|fact"><span>bounded_linear_scaleR_left</span></a><span> 
          </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.bounded_linear.suminf|fact"><span>bounded_linear.suminf</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>eps</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Series.html#Series.suminf_geometric|fact"><span>suminf_geometric</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>eps</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_408..419"><span>disc_lt_one</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_le_eq|fact"><span>diff_le_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_43611..43613"><span>le</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_44692..44697">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.ex_det_dist_eps|fact"><span class="entity_def" id="MDP_reward.MDP_reward.ex_det_dist_eps|thm"><span>ex_det_dist_eps</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_44876..44878">h2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_44692..44697"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_41903..41913"><span>ex_det_eps</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19433..19441"><span>L_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span>  </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_44876..44878"><span>h2</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.diff_diff_add|fact"><span>diff_diff_add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_eq_diff_less_eq|fact"><span>diff_eq_diff_less_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>â</span></a></span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span>  </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>Â¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.dist_bfun.rep_eq|fact"><span>dist_bfun.rep_eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_real_def|fact"><span>dist_real_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_le_det|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_le_det|thm"><span class="entity_def" id="offset_45436..45450">Î½<span class="hidden">â©</span><sub>b</sub>_opt_le_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Liminf_Limsup.html#Liminf_Limsup.conditionally_complete_linorder_class.le_cSUP_iff|fact"><span>le_cSUP_iff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>safe</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>eps</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_45606..45607">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>eps</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_45782..45783">2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_42576..42586"><span>thm_6_2_11</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>âº</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>eps</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>âº</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_less_eq|fact"><span>diff_less_eq</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_45606..45607"><span>1</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.le_less_trans|fact"><span>le_less_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_45782..45783"><span>2</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â</span></span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>D<span class="hidden">â©</span><sub>D</sub></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>D_det_ne</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>d</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.bounded_imp_bdd_above|fact"><span>bounded_imp_bdd_above</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_4901..4909"><span>abs_Î½_le</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5434..5449"><span>Î½<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_195..201"><span>is_policy_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_eq_det|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_opt_eq_det|thm"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt_eq_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5450..5453"><span>Î½<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary_det</span><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_12433..12446"><span>Î½<span class="hidden">â©</span><sub>b</sub>_le_opt_DD</span></a><span> </span><span>D_det_ne</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_45436..45450"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt_le_det</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.less_eq_bfun_def|fact"><span>less_eq_bfun_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> unused, delete? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_46594..46599">lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.lemma_6_3_1_a|fact"><span class="entity_def" id="MDP_reward.MDP_reward.lemma_6_3_1_a|thm"><span>lemma_6_3_1_a</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Uniform_Limit.html#Uniform_Limit.uniform_limit|const"><span>uniform_limit</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19184..19185"><span>â</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_46733..46742">â_Bfun_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|const"><span>bfun</span></a><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19184..19185"><span>â</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="free"><span>v0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19351..19366"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun_inverse|fact"><span>apply_bfun_inverse</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Uniform_Limit.html#Uniform_Limit.uniform_limit|const"><span>uniform_limit</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="free"><span>v0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6951..6958"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.tendsto_bfun_uniform_limit|fact"><span>tendsto_bfun_uniform_limit</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30097..30104"><span>â<span class="hidden">â©</span><sub>b</sub>_lim</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Uniform_Limit.html#Uniform_Limit.uniform_limit|const"><span>uniform_limit</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.Bfun|const"><span>Bfun</span></a><span> </span><span class="free"><span>v0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_5872..5877"><span>Î½_opt</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Filter.html#Filter.sequentially|const"><span>sequentially</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6792..6802"><span>Î½_opt_bfun</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_6935..6950"><span>Î½<span class="hidden">â©</span><sub>b</sub>_opt.rep_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_46594..46599"><span>assms</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_46733..46742"><span>â_Bfun_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span> should be a general statement for convergent series? </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_3_1_b_aux|fact"><span class="entity_def" id="MDP_reward.MDP_reward.thm_6_3_1_b_aux|thm"><span>thm_6_3_1_b_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_class.dist|const"><span>dist</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.topological_space_class.LIMSEQ|const"><span>â¢</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30097..30104"><span>â<span class="hidden">â©</span><sub>b</sub>_lim</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_diff|fact"><span>tendsto_diff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Limits.html#Limits.tendsto_norm|fact"><span>tendsto_norm</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Topological_Spaces.html#Topological_Spaces.LIMSEQ_Suc|fact"><span>LIMSEQ_Suc</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.dist_norm_class.dist_norm|fact"><span>dist_norm</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_reward.max_L_ex_def|fact"><span class="entity_def" id="MDP_reward.MDP_reward.max_L_ex_def|thm"><span class="entity_def" id="MDP_reward.MDP_reward.max_L_ex_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_reward.max_L_ex.cong|fact"><span class="entity_def" id="MDP_reward.MDP_reward.max_L_ex.cong|thm"><span class="entity_def" id="MDP_reward.MDP_reward.max_L_ex|const"><span class="entity_def" id="offset_47411..47419">max_L_ex</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>More Restrictive MDP Locales</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.axioms|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.intro|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_def|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_axioms.intro|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_axioms_def|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.axioms(2)|thm"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.axioms(1)|thm"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.intro|thm"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_def|thm"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_axioms.intro|thm"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_axioms_def|thm"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_def|axiom"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_axioms_def|axiom"><span class="entity_def" id="offset_47510..47516">locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;|locale"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;|const"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;_axioms|const"><span>MDP_att_â</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#MDP_reward.MDP_reward|locale"><span>MDP_reward</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span>
    </span><span class="free"><span>A</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 
    </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="free"><span>r</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.Sup_att|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.Sup_att|thm"><span class="entity_def" id="offset_47645..47652">Sup_att</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_47411..47419"><span>max_L_ex</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_47684..47691">theorem</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.thm_6_2_10_a_aux&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.thm_6_2_10_a_aux&apos;|thm"><span class="entity_def" id="offset_47692..47709">thm_6_2_10_a_aux'</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun|type"><span>â<span class="hidden">â©</span><sub>b</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|type"><span>real</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33582..33588"><span>L<span class="hidden">â©</span><sub>a</sub>_le</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47684..47691"><span>assms</span></a><span> </span><span>A_ne</span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47510..47516"><span>â<span class="hidden">â©</span><sub>b</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_38922..38934"><span>â_eq_SUP_det</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37013..37028"><span>SUP_step_det_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper2|fact"><span>cSUP_upper2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_least|fact"><span>cSUP_least</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.is_arg_max_linorder|fact"><span>is_arg_max_linorder</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_act.axioms|fact"><span class="entity_def" id="MDP_reward.MDP_act.intro|fact"><span class="entity_def" id="MDP_reward.MDP_act_def|fact"><span class="entity_def" id="MDP_reward.MDP_act_axioms.intro|fact"><span class="entity_def" id="MDP_reward.MDP_act_axioms_def|fact"><span class="entity_def" id="MDP_reward.MDP_act.axioms(2)|thm"><span class="entity_def" id="MDP_reward.MDP_act.axioms(1)|thm"><span class="entity_def" id="MDP_reward.MDP_act.intro|thm"><span class="entity_def" id="MDP_reward.MDP_act_def|thm"><span class="entity_def" id="MDP_reward.MDP_act_axioms.intro|thm"><span class="entity_def" id="MDP_reward.MDP_act_axioms_def|thm"><span class="entity_def" id="MDP_reward.MDP_act_def|axiom"><span class="entity_def" id="MDP_reward.MDP_act_axioms_def|axiom"><span class="entity_def" id="offset_47973..47979">locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_act|locale"><span class="entity_def" id="MDP_reward.MDP_act|const"><span class="entity_def" id="MDP_reward.MDP_act_axioms|const"><span>MDP_act</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#MDP_reward.MDP_att_\&lt;L&gt;|locale"><span>MDP_att_â</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Library/Countable.html#Countable.countable|class"><span>countable</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>::</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_act.arb_act_in|fact"><span class="entity_def" id="MDP_reward.MDP_act.arb_act_in|thm"><span class="entity_def" id="offset_48117..48127">arb_act_in</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>â </span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>arb_act</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_act.is_opt_act_def|fact"><span class="entity_def" id="MDP_reward.MDP_act.is_opt_act_def|thm"><span class="entity_def" id="MDP_reward.MDP_act.is_opt_act_def_raw|axiom"><span class="entity_def" id="offset_48168..48178">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_act.is_opt_act.cong|fact"><span class="entity_def" id="MDP_reward.MDP_act.is_opt_act.cong|thm"><span class="entity_def" id="MDP_reward.MDP_act.is_opt_act|const"><span class="entity_def" id="offset_48180..48190">is_opt_act</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="MDP_reward.MDP_act.opt_acts|const"><span class="entity_def" id="offset_48253..48261">opt_acts</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_48180..48190"><span>is_opt_act</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_act.is_opt_act_some|fact"><span class="entity_def" id="MDP_reward.MDP_act.is_opt_act_some|thm"><span class="entity_def" id="offset_48298..48313">is_opt_act_some</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_48180..48190"><span>is_opt_act</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_48253..48261"><span>opt_acts</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_48117..48127"><span>arb_act_in</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max|const"><span>is_arg_max</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47645..47652"><span>Sup_att</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max_def|fact"><span>has_arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47973..47979"><span>max_L_ex_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_48168..48178"><span>is_opt_act_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_act.some_opt_acts_in_A|fact"><span class="entity_def" id="MDP_reward.MDP_act.some_opt_acts_in_A|thm"><span class="entity_def" id="offset_48511..48529">some_opt_acts_in_A</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_48253..48261"><span>opt_acts</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_48298..48313"><span>is_opt_act_some</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_48168..48178"><span>is_opt_act_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.is_arg_max_def|fact"><span>is_arg_max_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_act.\&lt;nu&gt;_improving_opt_acts|fact"><span class="entity_def" id="MDP_reward.MDP_act.\&lt;nu&gt;_improving_opt_acts|thm"><span>Î½_improving_opt_acts</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="free"><span>v0</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>arb_act</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_48253..48261"><span>opt_acts</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.bfun.apply_bfun|const"><span>apply_bfun</span></a><span> </span><span class="free"><span>v0</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_48168..48178"><span>is_opt_act_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_48298..48313"><span>is_opt_act_some</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_48511..48529"><span>some_opt_acts_in_A</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31159..31174"><span>Î½_improving_alt</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34783..34795"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47692..47709"><span>thm_6_2_10_a_aux'</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47973..47979"><span>is_dec_det_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="MDP_reward.MDP_finite_type.axioms|fact"><span class="entity_def" id="MDP_reward.MDP_finite_type.intro|fact"><span class="entity_def" id="MDP_reward.MDP_finite_type_def|fact"><span class="entity_def" id="MDP_reward.MDP_finite_type.axioms|thm"><span class="entity_def" id="MDP_reward.MDP_finite_type.intro|thm"><span class="entity_def" id="MDP_reward.MDP_finite_type_def|thm"><span class="entity_def" id="MDP_reward.MDP_finite_type_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_finite_type|locale"><span class="entity_def" id="MDP_reward.MDP_finite_type|const"><span>MDP_finite_type</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#MDP_reward.MDP_reward|locale"><span>MDP_reward</span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span> </span><span class="quoted"><span class="free"><span>l</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>Ã</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|class"><span>finite</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Probability/Probability_Mass_Function.html#Probability_Mass_Function.pmf|type"><span>pmf</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="free"><span>l</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_49006..49013">context</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#MDP_reward.MDP_reward|locale"><span>MDP_reward</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_zero|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_zero|thm"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_zero</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_49006..49013"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_Suc|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_Suc|thm"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_Suc</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10241..10251"><span>ð«<span class="hidden">â©</span><sub>X</sub>_sconst</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_49006..49013"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21683..21695"><span>Î½_fin_eq_ð«<span class="hidden">â©</span><sub>X</sub></span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_49006..49013"><span>ð«<span class="hidden">â©</span><sub>1</sub>.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13807..13814"><span>ð«<span class="hidden">â©</span><sub>1</sub>_pow</span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.blinfun.scaleR_left|fact"><span>blinfun.scaleR_left</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_eq|fact"><span class="entity_def" id="MDP_reward.MDP_reward.\&lt;nu&gt;\&lt;^sub&gt;b_fin_eq|thm"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_7446..7453"><span>r_dec<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.plus_blinfun.rep_eq|fact"><span>plus_blinfun.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_iter|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_iter|thm"><span>L_iter</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_49627..49630">Suc</span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow_Suc_right|fact"><span>funpow_Suc_right</span></a><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.funpow.simps|fact"><span>funpow.simps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_49627..49630"><span>Suc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_49006..49013"><span>L_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>v</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfunpow.simps|fact"><span>blinfunpow.simps</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blinfunpow_assoc|fact"><span>blinfunpow_assoc</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.bounded_stationary_\&lt;nu&gt;\&lt;^sub&gt;b_fin|fact"><span class="entity_def" id="MDP_reward.MDP_reward.bounded_stationary_\&lt;nu&gt;\&lt;^sub&gt;b_fin|thm"><span>bounded_stationary_Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_21176..21183"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin</span></a><span> </span><span class="main"><span>(</span></span><span>mk_stationary</span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_49006..49013"><span>Î½<span class="hidden">â©</span><sub>b</sub>_fin.rep_eq</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_3693..3705"><span>abs_Î½_fin_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.bounded_disc_\&lt;P&gt;\&lt;^sub&gt;1|fact"><span class="entity_def" id="MDP_reward.MDP_reward.bounded_disc_\&lt;P&gt;\&lt;^sub&gt;1|thm"><span>bounded_disc_ð«<span class="hidden">â©</span><sub>1</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.scaleR_class.scaleR|const"><span>*<span class="hidden">â©</span><sub>R</sub></span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13899..13908"><span>ð«<span class="hidden">â©</span><sub>X</sub>_const</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Bounded_Linear_Function.html#Bounded_Linear_Function.bounded_bilinear.bilinear_simps|fact"><span class="dynamic"><span class="dynamic"><span>blinfun.bilinear_simps</span></span></span></a><span> </span><a class="entity_ref" href="Blinfun_Util.html#Blinfun_Util.blincomp_scaleR_right|fact"><span>blincomp_scaleR_right</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10241..10251"><span>ð«<span class="hidden">â©</span><sub>X</sub>_sconst</span></a><span> 
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_class.mult_left_mono|fact"><span>mult_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.bounded_disc_\&lt;P&gt;\&lt;^sub&gt;1&apos;|fact"><span class="entity_def" id="MDP_reward.MDP_reward.bounded_disc_\&lt;P&gt;\&lt;^sub&gt;1&apos;|thm"><span>bounded_disc_ð«<span class="hidden">â©</span><sub>1</sub>'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.metric_space_class.bounded|const"><span>bounded</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_13702..13705"><span>ð«<span class="hidden">â©</span><sub>1</sub></span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_13899..13908"><span>ð«<span class="hidden">â©</span><sub>X</sub>_const</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_10241..10251"><span>ð«<span class="hidden">â©</span><sub>X</sub>_sconst</span></a><span> 
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL-Analysis/Elementary_Metric_Spaces.html#Elementary_Metric_Spaces.boundedI|fact"><span>boundedI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Real_Vector_Spaces.html#Real_Vector_Spaces.norm_class.norm|const"><span>norm</span></a><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Functions.html#Bounded_Functions.abs_le_norm_bfun|fact"><span>abs_le_norm_bfun</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_reward.L_iter_le_\&lt;L&gt;\&lt;^sub&gt;b|fact"><span class="entity_def" id="MDP_reward.MDP_reward.L_iter_le_\&lt;L&gt;\&lt;^sub&gt;b|thm"><span>L_iter_le_â<span class="hidden">â©</span><sub>b</sub></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_dec</span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19788..19794"><span>L_mono</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19433..19441"><span>L_le_â<span class="hidden">â©</span><sub>b</sub></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50928..50935">context</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#MDP_reward.MDP_att_\&lt;L&gt;|locale"><span>MDP_att_â</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.L\&lt;^sub&gt;a_le_arg_max|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.L\&lt;^sub&gt;a_le_arg_max|thm"><span>L<span class="hidden">â©</span><sub>a</sub>_le_arg_max</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>â¤</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47645..47652"><span>Sup_att</span></a><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.app_arg_max_ge|fact"><span>app_arg_max_ge</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47645..47652"><span>Sup_att</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_50928..50935"><span>max_L_ex_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on_def|fact"><span>arg_max_on_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.arg_max_on_in|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.arg_max_on_in|thm"><span class="entity_def" id="offset_51146..51159">arg_max_on_in</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max|const"><span>has_arg_max</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.has_arg_max_arg_max|fact"><span>has_arg_max_arg_max</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on_def|fact"><span>arg_max_on_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.\&lt;L&gt;\&lt;^sub&gt;b_eq_L\&lt;^sub&gt;a_max|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.\&lt;L&gt;\&lt;^sub&gt;b_eq_L\&lt;^sub&gt;a_max|thm"><span class="entity_def" id="offset_51268..51282">â<span class="hidden">â©</span><sub>b</sub>_eq_L<span class="hidden">â©</span><sub>a</sub>_max</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward_Util.html#MDP_reward_Util.app_arg_max_eq_SUP|fact"><span>app_arg_max_eq_SUP</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47645..47652"><span>Sup_att</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_50928..50935"><span>max_L_ex_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_39068..39082"><span>â<span class="hidden">â©</span><sub>b</sub>_eq_SUP_det</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_37013..37028"><span>SUP_step_det_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.ex_opt_det|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.ex_opt_det|thm"><span class="entity_def" id="offset_51455..51465">ex_opt_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_51516..51522">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>d</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.ord_class.arg_max_on|const"><span>arg_max_on</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_33511..33514"><span>L<span class="hidden">â©</span><sub>a</sub></span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MDP_reward.html#offset_19367..19370"><span>â<span class="hidden">â©</span><sub>b</sub></span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_16168..16169"><span>L</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="skolem"><span>d</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_51516..51522"><span>d_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_51268..51282"><span>â<span class="hidden">â©</span><sub>b</sub>_eq_L<span class="hidden">â©</span><sub>a</sub>_max</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_34783..34795"><span>L_eq_L<span class="hidden">â©</span><sub>a</sub>_det</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>d</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>â</span></a></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_47645..47652"><span>Sup_att</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_51146..51159"><span>arg_max_on_in</span></a><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_51516..51522"><span>d_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_50928..50935"><span>is_dec_det_def</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_50928..50935"><span>max_L_ex_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.ex_improving_det|fact"><span class="entity_def" id="MDP_reward.MDP_att_\&lt;L&gt;.ex_improving_det|thm"><span>ex_improving_det</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>d</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>D<span class="hidden">â©</span><sub>D</sub></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_30426..30437"><span>Î½_improving</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MDP_disc.html#MDP_disc.discrete_MDP.mk_dec_det|const"><span>mk_dec_det</span></a><span> </span><span class="bound"><span>d</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="MDP_reward.html#offset_31159..31174"><span>Î½_improving_alt</span></a><span> </span><a class="entity_ref" href="MDP_reward.html#offset_51455..51465"><span>ex_opt_det</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div>