<div id='Interest'>ody>
<div class="head">
<h1>Theory Preliminaries</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Preliminaries</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Analysis/Analysis.html"><span>HOL-Analysis.Analysis</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span>powr</span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixr</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>.^</span></span><span>"</span></span><span> 80</span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Preliminary Definitions and Lemmas</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_142..147">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.seq_part_multiple|fact"><span class="entity_def" id="Preliminaries.seq_part_multiple(2)|thm"><span class="entity_def" id="Preliminaries.seq_part_multiple(1)|thm"><span>seq_part_multiple</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>..&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â¶</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>contrapos_np</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_142..147"><span>A_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mult_less_cancel2</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>â¶</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_867..870">i_n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_884..887">i_x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_142..147"><span>A_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>less_le_trans</span><span> </span><span>mult_le_cancel2</span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_884..887"><span>i_x</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>diff_mult_distrib</span><span> </span><span>mult_1</span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_867..870"><span>i_n</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{..&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
      </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?i</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>less_mult_imp_div_less</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?i</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?i</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_142..147"><span>assms</span></a><span> </span><span>div_times_less_eq_dividend</span><span> </span><span>dividend_less_div_times</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_142..147"><span>A_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1506..1511">lemma</span></span></span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Preliminaries.field_class.divide_mult_cancel|fact"><span class="entity_def" id="Preliminaries.field.divide_mult_cancel|fact"><span class="entity_def" id="Preliminaries.field_class.divide_mult_cancel|thm"><span class="entity_def" id="Preliminaries.field.divide_mult_cancel|thm"><span>divide_mult_cancel</span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_1506..1511"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1622..1627">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.inverse_powr|fact"><span class="entity_def" id="Preliminaries.inverse_powr|thm"><span>inverse_powr</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="main"><span>-</span></span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_1622..1627"><span>that</span></a><span> </span><span>powr_divide</span><span> </span><span>powr_minus_divide</span><span> </span><span>powr_one_eq_one</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1751..1756">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.powr_eq_one_iff_gen|fact"><span class="entity_def" id="Preliminaries.powr_eq_one_iff_gen|thm"><span>powr_eq_one_iff_gen</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>powr_eq_0_iff</span><span> </span><span>powr_inj</span><span> </span><span>powr_zero_eq_one</span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_1751..1756"><span>that</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.powr_less_cancel2|fact"><span class="entity_def" id="Preliminaries.powr_less_cancel2|thm"><span>powr_less_cancel2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_2004..2009">a_pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>x_pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_2042..2047">y_pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>contrapos_pp</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>y</span></span><span>âº</span></span></span><span> </span><span>powr_less_mono2</span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_2004..2009"><span>a_pos</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#offset_2042..2047"><span>y_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.geometric_increasing_sum_aux|fact"><span class="entity_def" id="Preliminaries.geometric_increasing_sum_aux|thm"><span>geometric_increasing_sum_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>r</span></span><span class="main"><span>^</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>r</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>r</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>distrib_left</span><span> </span><span>power2_diff</span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span> </span><span>power2_eq_square</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2731..2736">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.geometric_increasing_sum|fact"><span class="entity_def" id="Preliminaries.geometric_increasing_sum|thm"><span>geometric_increasing_sum</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>r</span></span><span class="main"><span>^</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>r</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>r</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.geometric_increasing_sum_aux|fact"><span>geometric_increasing_sum_aux</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_2731..2736"><span>that</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.Reals_UNIV|fact"><span class="entity_def" id="Preliminaries.Reals_UNIV|thm"><span>Reals_UNIV</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span>real</span><span class="main"><span>.</span></span><span> </span><span>True</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>Reals_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.DERIV_fun_powr2|fact"><span class="entity_def" id="Preliminaries.DERIV_fun_powr2|thm"><span>DERIV_fun_powr2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_3054..3059">a_pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_3077..3078">f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>DERIV</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:&gt;</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>DERIV</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:&gt;</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>ln</span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3189..3190">g</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>DERIV</span></span><span> </span><span class="var"><span>?g</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3225..3228">pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?g</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3054..3059"><span>a_pos</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>DERIV_powr</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3189..3190"><span>g</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3225..3228"><span>pos</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3077..3078"><span>f</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3054..3059"><span>a_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.has_real_derivative_powr2|fact"><span class="entity_def" id="Preliminaries.has_real_derivative_powr2|thm"><span>has_real_derivative_powr2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_3396..3401">a_pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>has_real_derivative</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>ln</span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>at</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span>real</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3515..3516">f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>DERIV</span></span><span> </span><span class="var"><span>?f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>:&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.DERIV_fun_powr2|fact"><span>DERIV_fun_powr2</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3396..3401"><span>a_pos</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3515..3516"><span>f</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3606..3611">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.has_integral_powr2_from_0|fact"><span class="entity_def" id="Preliminaries.has_integral_powr2_from_0|thm"><span>has_integral_powr2_from_0</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_3669..3674">a_pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>a_neq_1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_3709..3715">c_nneg</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>has_integral</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="free"><span>c</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>ln</span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>c</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>has_integral</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="main"><span>(</span></span><span>ln</span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="main"><span>(</span></span><span>ln</span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>c</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>fundamental_theorem_of_calculus</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3709..3715"><span>c_nneg</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>c</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>ln</span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>has_vector_derivative</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>at</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><span>within</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>c</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_real_derivative_powr2|fact"><span>has_real_derivative_powr2</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3669..3674"><span>a_pos</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule</span></span><span> </span><span>DERIV_cdivide</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> c </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>ln</span><span> </span><span class="free"><span class="free"><span>a</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3606..3611"><span>assms</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>has_vector_derivative_within_subset</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> S</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>UNIV</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> T</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>{</span></span></span><span class="main"><span class="main"><span>0</span></span></span><span class="main"><span class="main"><span>..</span></span></span><span class="free"><span class="free"><span>c</span></span></span><span class="main"><span class="main"><span>}</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>iffD1</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>has_field_derivative_iff_has_vector_derivative</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_3606..3611"><span>assms</span></a><span> </span><span>powr_zero_eq_one</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4435..4440">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.integrable_on_powr2_from_0|fact"><span class="entity_def" id="Preliminaries.integrable_on_powr2_from_0|thm"><span>integrable_on_powr2_from_0</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>a_pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>a_neq_1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>c_nneg</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>integrable_on</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>c</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_integral_powr2_from_0|fact"><span>has_integral_powr2_from_0</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_4435..4440"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>integrable_on_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4679..4684">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.integrable_on_powr2_from_0_general|fact"><span class="entity_def" id="Preliminaries.integrable_on_powr2_from_0_general|thm"><span>integrable_on_powr2_from_0_general</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>a_pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>c_nneg</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>.^</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>integrable_on</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>c</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>has_integral_const_real</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_4931..4936">False</span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_integral_powr2_from_0|fact"><span>has_integral_powr2_from_0</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#offset_4931..4936"><span>False</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#offset_4679..4684"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5013..5018">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.has_integral_null_interval|fact"><span class="entity_def" id="Preliminaries.has_integral_null_interval|thm"><span>has_integral_null_interval</span></span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><span>has_integral</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>..</span></span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_5013..5018"><span>assms</span></a><span> </span><span>content_real_eq_0</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5180..5185">lemma</span></span></span><span> </span><span class="entity_def" id="Preliminaries.has_integral_interval_reverse|fact"><span class="entity_def" id="Preliminaries.has_integral_interval_reverse|thm"><span>has_integral_interval_reverse</span></span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>continuous_on</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>..</span></span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>+</span></span><span class="free"><span>b</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>has_integral</span></span><span> </span><span class="main"><span>(</span></span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>..</span></span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>..</span></span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?g'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5440..5444">g_C0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>continuous_on</span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>..</span></span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span> </span><span class="var"><span>?g</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>continuous_on_op_minus</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5516..5521">Dg_g'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>..</span></span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?g</span></span><span> </span><span class="keyword1"><span>has_field_derivative</span></span><span> </span><span class="var"><span>?g'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>at</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>within</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>..</span></span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>derivative_eq_intros</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>has_integral_substitution_general</span><span>
      </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?g</span></span></span></span><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_5180..5185"><span>assms</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#offset_5440..5444"><span>g_C0</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#offset_5516..5521"><span>Dg_g'</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_integral_null_interval|fact"><span>has_integral_null_interval</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#offset_5180..5185"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>integral_unique</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>has_integral_neg_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div><div id='Interest'><div class="head">
<h1>Theory Interest</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Interest</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Preliminaries.html"><span>Preliminaries</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>List of Actuarial Notations (Global Scope)</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.i_nom_def|fact"><span class="entity_def" id="Interest.i_nom_def|thm"><span class="entity_def" id="Interest.i_nom_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.i_nom|const"><span>i_nom</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$i[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$i[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  </span><span class="comment1"><span>â â¹</span><span>nominal interest rate</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.i_force_def|fact"><span class="entity_def" id="Interest.i_force_def|thm"><span class="entity_def" id="Interest.i_force_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.i_force|const"><span>i_force</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$Î´[</span></span><span>_</span><span class="keyword1"><span>]</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$Î´[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>ln</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>â â¹</span><span>force of interest</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.d_nom_def|fact"><span class="entity_def" id="Interest.d_nom_def|thm"><span class="entity_def" id="Interest.d_nom_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.d_nom|const"><span>d_nom</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$d[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$d[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>$i[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>}</span></a></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>$i[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  </span><span class="comment1"><span>â â¹</span><span>discount rate</span><span>âº</span></span><span> 
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.d_nom_yr|const"><span>d_nom_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$d[</span></span><span>_</span><span class="keyword1"><span>]</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$d[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>$d[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>}</span></a></span><span>"</span></span></span><span>  </span><span class="comment1"><span>â â¹</span><span>Post-fix "yr" stands for "year".</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.v_pres_def|fact"><span class="entity_def" id="Interest.v_pres_def|thm"><span class="entity_def" id="Interest.v_pres_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.v_pres|const"><span>v_pres</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$v[</span></span><span>_</span><span class="keyword1"><span>]</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$v[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  </span><span class="comment1"><span>â â¹</span><span>present value factor</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.ann_def|fact"><span class="entity_def" id="Interest.ann_def|thm"><span class="entity_def" id="Interest.ann_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann|const"><span>ann</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>$v[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>]</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>present value of an immediate annuity</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_yr|const"><span>ann_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann|const"><span>$a[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.acc_def|fact"><span class="entity_def" id="Interest.acc_def|thm"><span class="entity_def" id="Interest.acc_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc|const"><span>acc</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>future value of an immediate annuity</span><span>âº</span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>The name "acc" stands for "accumulation".</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_yr|const"><span>acc_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc|const"><span>$s[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.ann_due_def|fact"><span class="entity_def" id="Interest.ann_due_def|thm"><span class="entity_def" id="Interest.ann_due_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_due|const"><span>ann_due</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a''''[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a''[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>$v[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>]</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>present value of an annuity-due</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_due_yr|const"><span>ann_due_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a''''[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a''[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due|const"><span>$a''[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.acc_due_def|fact"><span class="entity_def" id="Interest.acc_due_def|thm"><span class="entity_def" id="Interest.acc_due_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_due|const"><span>acc_due</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s''''[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s''[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>future value of an annuity-due</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_due_yr|const"><span>acc_due_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s''''[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s''[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due|const"><span>$s''[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.ann_cont_def|fact"><span class="entity_def" id="Interest.ann_cont_def|thm"><span class="entity_def" id="Interest.ann_cont_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_cont|const"><span>ann_cont</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a''[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a'[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>::</span></span><span>real</span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>$v[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>]</span></a></span><span class="main"><span>.^</span></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>present value of a continuous annuity</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.acc_cont_def|fact"><span class="entity_def" id="Interest.acc_cont_def|thm"><span class="entity_def" id="Interest.acc_cont_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_cont|const"><span>acc_cont</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s''[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s'[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>::</span></span><span>real</span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>future value of a continuous annuity</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.perp_def|fact"><span class="entity_def" id="Interest.perp_def|thm"><span class="entity_def" id="Interest.perp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp|const"><span>perp</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>$i[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>present value of a perpetual annuity</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_yr|const"><span>perp_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a[</span></span><span>_</span><span class="keyword1"><span>]'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp|const"><span>$a[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.perp_due_def|fact"><span class="entity_def" id="Interest.perp_due_def|thm"><span class="entity_def" id="Interest.perp_due_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_due|const"><span>perp_due</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a''''[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a''[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>$d[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>present value of a perpetual annuity-due</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_due_yr|const"><span>perp_due_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a''''[</span></span><span>_</span><span class="keyword1"><span>]'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a''[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due|const"><span>$a''[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.ann_incr_def|fact"><span class="entity_def" id="Interest.ann_incr_def|thm"><span class="entity_def" id="Interest.ann_incr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_incr|const"><span>ann_incr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}a')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}a)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>$v[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>]</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>present value of an increasing annuity</span><span>âº</span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>This is my original definition.</span><span>âº</span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>Here, "l" represents the number of increments per unit time.</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_incr_lvl|const"><span>ann_incr_lvl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>$(I^{</span></a></span><span class="main"><span>1</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>}a)[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>The post-fix "lvl" stands for "level".</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_incr_yr|const"><span>ann_incr_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia')[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr_lvl|const"><span>$(Ia)[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr_lvl|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr_lvl|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.acc_incr_def|fact"><span class="entity_def" id="Interest.acc_incr_def|thm"><span class="entity_def" id="Interest.acc_incr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_incr|const"><span>acc_incr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}s')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}s)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="comment1"><span>â â¹</span><span>future value of an increasing annuity</span><span>âº</span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_incr_lvl|const"><span>acc_incr_lvl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Is')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Is)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_incr|const"><span>$(I^{</span></a></span><span class="main"><span>1</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_incr|const"><span>}s)[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_incr_yr|const"><span>acc_incr_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Is')[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Is)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_incr_lvl|const"><span>$(Is)[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr_lvl|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr_lvl|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.ann_due_incr_def|fact"><span class="entity_def" id="Interest.ann_due_incr_def|thm"><span class="entity_def" id="Interest.ann_due_incr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_due_incr|const"><span>ann_due_incr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}a''''')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}a'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>$v[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>]</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_due_incr_lvl|const"><span>ann_due_incr_lvl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia''''')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>$(I^{</span></a></span><span class="main"><span>1</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>}a'')[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.ann_due_incr_yr|const"><span>ann_due_incr_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia''''')[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_lvl|const"><span>$(Ia'')[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_lvl|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_lvl|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.acc_due_incr_def|fact"><span class="entity_def" id="Interest.acc_due_incr_def|thm"><span class="entity_def" id="Interest.acc_due_incr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_due_incr|const"><span>acc_due_incr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}s''''')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}s'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>â</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>*</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_due_incr_lvl|const"><span>acc_due_incr_lvl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Is''''')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Is'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr|const"><span>$(I^{</span></a></span><span class="main"><span>1</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr|const"><span>}s'')[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.acc_due_incr_yr|const"><span>acc_due_incr_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Is''''')[</span></span><span>_</span><span class="keyword1"><span>]'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Is'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_lvl|const"><span>$(Is'')[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_lvl|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_lvl|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.perp_incr_def|fact"><span class="entity_def" id="Interest.perp_incr_def|thm"><span class="entity_def" id="Interest.perp_incr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_incr|const"><span>perp_incr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}a')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}a)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>lim</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>$(I^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>}a)[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>}_</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_incr_lvl|const"><span>perp_incr_lvl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_incr|const"><span>$(I^{</span></a></span><span class="main"><span>1</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_incr|const"><span>}a)[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_incr_yr|const"><span>perp_incr_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia')[</span></span><span>_</span><span class="keyword1"><span>]'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia)[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_incr_lvl|const"><span>$(Ia)[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr_lvl|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr_lvl|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.perp_due_incr_def|fact"><span class="entity_def" id="Interest.perp_due_incr_def|thm"><span class="entity_def" id="Interest.perp_due_incr_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_due_incr|const"><span>perp_due_incr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}a''''')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}a'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>lim</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>$(I^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>}a'')[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>}_</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_due_incr_lvl|const"><span>perp_due_incr_lvl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia''''')[</span></span><span>_</span><span class="keyword1"><span>]^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr|const"><span>$(I^{</span></a></span><span class="main"><span>1</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr|const"><span>}a'')[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.perp_due_incr_yr|const"><span>perp_due_incr_yr</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia''''')[</span></span><span>_</span><span class="keyword1"><span>]'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia'')[</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>]_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_lvl|const"><span>$(Ia'')[</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_lvl|const"><span>]^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_lvl|const"><span>}_â</span></a></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Theory of Interest</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interest.interest.intro|fact"><span class="entity_def" id="Interest.interest_def|fact"><span class="entity_def" id="Interest.interest.intro|thm"><span class="entity_def" id="Interest.interest_def|thm"><span class="entity_def" id="Interest.interest_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Interest.interest|locale"><span class="entity_def" id="Interest.interest|const"><span>interest</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span>  </span><span class="comment1"><span>â â¹</span><span>i stands for an interest rate.</span><span>âº</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Interest.interest.v_futr_pos|fact"><span class="entity_def" id="Interest.interest.v_futr_pos|thm"><span class="entity_def" id="offset_5752..5762">v_futr_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>  </span><span class="comment1"><span>â â¹</span><span>Assume that the future value is positive.</span><span>âº</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.interest|locale"><span>interest</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.i_nom&apos;|const"><span class="entity_def" id="offset_5861..5867">i_nom'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$i^{</span></span><span>_</span><span class="keyword1"><span>}</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$i^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>$i[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_nom|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.i_force&apos;|const"><span class="entity_def" id="offset_5945..5953">i_force'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$Î´</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$Î´</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.i_force|const"><span>$Î´[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.i_force|const"><span>]</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.d_nom&apos;|const"><span class="entity_def" id="offset_6003..6009">d_nom'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$d^{</span></span><span>_</span><span class="keyword1"><span>}</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$d^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>$d[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.d_nom|const"><span>}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.d_nom_yr&apos;|const"><span>d_nom_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$d</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$d</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.d_nom_yr|const"><span>$d[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.d_nom_yr|const"><span>]</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.v_pres&apos;|const"><span class="entity_def" id="offset_6146..6153">v_pres'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$v</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$v</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>$v[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.v_pres|const"><span>]</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann&apos;|const"><span class="entity_def" id="offset_6203..6207">ann'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann|const"><span>$a[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_yr&apos;|const"><span>ann_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_yr|const"><span>$a[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_yr|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc&apos;|const"><span class="entity_def" id="offset_6384..6388">acc'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc|const"><span>$s[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_yr&apos;|const"><span>acc_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_yr|const"><span>$s[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_yr|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_due&apos;|const"><span class="entity_def" id="offset_6565..6573">ann_due'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a''''^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a''^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due|const"><span>$a''[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_due_yr&apos;|const"><span>ann_due_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a'''''_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a''_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_yr|const"><span>$a''[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_yr|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_due&apos;|const"><span class="entity_def" id="offset_6770..6778">acc_due'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s''''^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s''^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due|const"><span>$s''[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_due_yr&apos;|const"><span>acc_due_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s'''''_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s''_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due_yr|const"><span>$s''[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_yr|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_cont&apos;|const"><span class="entity_def" id="offset_6975..6984">ann_cont'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a'''_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a'_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_cont|const"><span>$a'[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_cont|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_cont&apos;|const"><span class="entity_def" id="offset_7064..7073">acc_cont'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$s'''_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$s'_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_cont|const"><span>$s'[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_cont|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp&apos;|const"><span class="entity_def" id="offset_7153..7158">perp'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp|const"><span>$a[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_yr&apos;|const"><span>perp_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a'_â</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_yr|const"><span>$a[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_yr|const"><span>]_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_due&apos;|const"><span class="entity_def" id="offset_7308..7317">perp_due'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a''''^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a''^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due|const"><span>$a''[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_due_yr&apos;|const"><span>perp_due_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$a'''''_â</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$a''_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due_yr|const"><span>$a''[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_yr|const"><span>]_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_incr&apos;|const"><span class="entity_def" id="offset_7487..7496">ann_incr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}a')^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}a)^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>$(I^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>}a)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_incr_lvl&apos;|const"><span class="entity_def" id="offset_7622..7635">ann_incr_lvl'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia')^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia)^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr_lvl|const"><span>$(Ia)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr_lvl|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr_lvl|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_incr_yr&apos;|const"><span>ann_incr_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia')'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia)_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_incr_yr|const"><span>$(Ia)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_incr_yr|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_incr&apos;|const"><span class="entity_def" id="offset_7839..7848">acc_incr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}s')^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}s)^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_incr|const"><span>$(I^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_incr|const"><span>}s)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_incr_lvl&apos;|const"><span class="entity_def" id="offset_7974..7987">acc_incr_lvl'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Is')^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Is)^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_incr_lvl|const"><span>$(Is)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr_lvl|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr_lvl|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_incr_yr&apos;|const"><span>acc_incr_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Is')'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Is)_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_incr_yr|const"><span>$(Is)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_incr_yr|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_due_incr&apos;|const"><span class="entity_def" id="offset_8191..8204">ann_due_incr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}a''''')^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}a'')^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>$(I^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>}a'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_due_incr_lvl&apos;|const"><span class="entity_def" id="offset_8338..8355">ann_due_incr_lvl'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia''''')^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia'')^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_lvl|const"><span>$(Ia'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_lvl|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_lvl|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.ann_due_incr_yr&apos;|const"><span>ann_due_incr_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia''''')'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia'')_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_yr|const"><span>$(Ia'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_yr|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_due_incr&apos;|const"><span class="entity_def" id="offset_8579..8592">acc_due_incr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}s''''')^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}s'')^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr|const"><span>$(I^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr|const"><span>}s'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_due_incr_lvl&apos;|const"><span>acc_due_incr_lvl'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Is''''')^{</span></span><span>_</span><span class="keyword1"><span>}'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Is'')^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_lvl|const"><span>$(Is'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_lvl|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_lvl|const"><span>}_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.acc_due_incr_yr&apos;|const"><span>acc_due_incr_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Is''''')'_</span></span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>101</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Is'')_</span></span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_yr|const"><span>$(Is'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_yr|const"><span>]_</span></a></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_incr&apos;|const"><span class="entity_def" id="offset_8967..8977">perp_incr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}a')^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}a)^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_incr|const"><span>$(I^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_incr|const"><span>}a)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_incr_lvl&apos;|const"><span>perp_incr_lvl'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia')^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia)^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_incr_lvl|const"><span>$(Ia)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr_lvl|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr_lvl|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_incr_yr&apos;|const"><span>perp_incr_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia')'_â</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia)_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_incr_yr|const"><span>$(Ia)[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_incr_yr|const"><span>]_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_due_incr&apos;|const"><span class="entity_def" id="offset_9284..9298">perp_due_incr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(I^{</span></span><span>_</span><span class="keyword1"><span>}a''''')^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(I^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><span class="free"><span>}a'')^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr|const"><span>$(I^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr|const"><span>}a'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_due_incr_lvl&apos;|const"><span>perp_due_incr_lvl'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia''''')^{</span></span><span>_</span><span class="keyword1"><span>}'_â</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>]</span></span><span> 200</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia'')^{</span></span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span class="free"><span>}_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_lvl|const"><span>$(Ia'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_lvl|const"><span>]^{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_lvl|const"><span>}_â</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Interest.interest.perp_due_incr_yr&apos;|const"><span>perp_due_incr_yr'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>real</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>$'(Ia''''')'_â</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>$(Ia'')_â</span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_yr|const"><span>$(Ia'')[</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_yr|const"><span>]_â</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.v_futr_m_pos|fact"><span class="entity_def" id="Interest.interest.v_futr_m_pos|thm"><span class="entity_def" id="offset_9631..9643">v_futr_m_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.i_nom_1|fact"><span class="entity_def" id="Interest.interest.i_nom_1|thm"><span>i_nom_1</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="main"><span>1</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9798..9803">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.i_nom_eff|fact"><span class="entity_def" id="Interest.interest.i_nom_eff|thm"><span class="entity_def" id="offset_9804..9813">i_nom_eff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>less_imp_neq</span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_9798..9803"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_powr</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10002..10007">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.i_nom_i|fact"><span class="entity_def" id="Interest.interest.i_nom_i|thm"><span class="entity_def" id="offset_10008..10015">i_nom_i</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_10002..10007"><span>that</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10112..10117">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.i_nom_0_iff_i_0|fact"><span class="entity_def" id="Interest.interest.i_nom_0_iff_i_0|thm"><span class="entity_def" id="offset_10118..10133">i_nom_0_iff_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_10214..10215">â</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_10112..10117"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>powr_inj</span><span> </span><a class="entity_ref" href="Interest.html#offset_10214..10215"><span>â</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>smt</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_10112..10117"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10527..10532">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.i_nom_pos_iff_i_pos|fact"><span class="entity_def" id="Interest.interest.i_nom_pos_iff_i_pos|thm"><span class="entity_def" id="offset_10533..10552">i_nom_pos_iff_i_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span>â</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_10527..10532"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>zero_less_mult_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.powr_less_cancel2|fact"><span>powr_less_cancel2</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="main"><span>1</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_10527..10532"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>powr_less_mono2</span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_10527..10532"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_10527..10532"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>zero_less_mult_iff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.e_delta|fact"><span class="entity_def" id="Interest.interest.e_delta|thm"><span class="entity_def" id="offset_11033..11040">e_delta</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>exp</span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_force_def|fact"><span>i_force_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.delta_0_iff_i_0|fact"><span class="entity_def" id="Interest.interest.delta_0_iff_i_0|thm"><span class="entity_def" id="offset_11116..11131">delta_0_iff_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_11033..11040"><span>e_delta</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_force_def|fact"><span>i_force_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_i_nom|fact"><span class="entity_def" id="Interest.interest.lim_i_nom|thm"><span class="entity_def" id="offset_11298..11307">lim_i_nom</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="bound"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>D1ipwr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>DERIV</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>:&gt;</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_force_def|fact"><span>i_force_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_real_derivative_powr2|fact"><span>has_real_derivative_powr2</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span class="main"><span>,</span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="main"><span>0</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span>limf</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>at</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>DERIV_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span>Suc</span><span> </span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>tendsto_at_iff_sequentially</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?f</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="main"><span>0</span></span></span><span> </span><span class="quoted"><span class="main"><span>â</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>iffD1</span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule_tac</span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>Suc</span><span> </span><span class="bound"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span>spec</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>drule</span></span><span> </span><span>mp</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>lim_1_over_n</span><span> </span><span>LIMSEQ_Suc</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>o_def</span><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>LIMSEQ_imp_Suc</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11948..11953">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.d_nom_0_iff_i_0|fact"><span class="entity_def" id="Interest.interest.d_nom_0_iff_i_0|thm"><span>d_nom_0_iff_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.d_nom_def|fact"><span>d_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_9631..9643"><span>v_futr_m_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>divide_eq_0_iff</span><span> </span><span>of_nat_0</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_10118..10133"><span>i_nom_0_iff_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_11948..11953"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12199..12204">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.d_nom_pos_iff_i_pos|fact"><span class="entity_def" id="Interest.interest.d_nom_pos_iff_i_pos|thm"><span class="entity_def" id="offset_12205..12224">d_nom_pos_iff_i_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.d_nom_def|fact"><span>d_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>zero_less_divide_iff</span><span> </span><a class="entity_ref" href="Interest.html#offset_10533..10552"><span>i_nom_pos_iff_i_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_9631..9643"><span>v_futr_m_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_12199..12204"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>smt</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_10533..10552"><span>i_nom_pos_iff_i_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_12199..12204"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12469..12474">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.d_nom_i_nom|fact"><span class="entity_def" id="Interest.interest.d_nom_i_nom|thm"><span class="entity_def" id="offset_12475..12486">d_nom_i_nom</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.d_nom_def|fact"><span>d_nom_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_9631..9643"><span>v_futr_m_pos</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>add_divide_distrib</span><span> </span><a class="entity_ref" href="Interest.html#offset_12469..12474"><span>that</span></a><span> </span><span>div_self</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_d_nom|fact"><span class="entity_def" id="Interest.interest.lim_d_nom|thm"><span class="entity_def" id="offset_12799..12808">lim_d_nom</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_11298..11307"><span>lim_i_nom</span></a><span> </span><span>tendsto_divide_0</span><span> </span><span>tendsto_of_nat</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add.right_neutral</span><span> </span><span>tendsto_add_const_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.d_nom_def|fact"><span>d_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_11298..11307"><span>lim_i_nom</span></a><span> </span><span>tendsto_divide</span><span> </span><span>div_by_1</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.v_pos|fact"><span class="entity_def" id="Interest.interest.v_pos|thm"><span class="entity_def" id="offset_13118..13123">v_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.v_1_iff_i_0|fact"><span class="entity_def" id="Interest.interest.v_1_iff_i_0|thm"><span class="entity_def" id="offset_13189..13200">v_1_iff_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.v_lt_1_iff_i_pos|fact"><span class="entity_def" id="Interest.interest.v_lt_1_iff_i_pos|thm"><span class="entity_def" id="offset_13373..13389">v_lt_1_iff_i_pos</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13592..13597">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.v_i_nom|fact"><span class="entity_def" id="Interest.interest.v_i_nom|thm"><span>v_i_nom</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>-</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span>powr_real_def</span><span> </span><a class="entity_ref" href="Interest.html#offset_13592..13597"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>powr_neg_one</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_9804..9813"><span>i_nom_eff</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13592..13597"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>-</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>powr_powr</span><span> </span><span>powr_realpow</span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_9631..9643"><span>v_futr_m_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13592..13597"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.i_v|fact"><span class="entity_def" id="Interest.interest.i_v|thm"><span class="entity_def" id="offset_14000..14003">i_v</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span>powr_real_def</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span>powr_neg_one</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.i_v_powr|fact"><span class="entity_def" id="Interest.interest.i_v_powr|thm"><span class="entity_def" id="offset_14104..14112">i_v_powr</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>-</span></span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14000..14003"><span>i_v</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_powr</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.v_delta|fact"><span class="entity_def" id="Interest.interest.v_delta|thm"><span class="entity_def" id="offset_14195..14202">v_delta</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>ln</span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_force_def|fact"><span>i_force_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>ln_div</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.is_derive_vpow|fact"><span class="entity_def" id="Interest.interest.is_derive_vpow|thm"><span>is_derive_vpow</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>DERIV</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>:&gt;</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="free"><span>t</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14195..14202"><span>v_delta</span></a><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_real_derivative_powr2|fact"><span>has_real_derivative_powr2</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14427..14432">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.d_nom_v|fact"><span class="entity_def" id="Interest.interest.d_nom_v|thm"><span class="entity_def" id="offset_14433..14440">d_nom_v</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_12475..12486"><span>d_nom_i_nom</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14427..14432"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_10008..10015"><span>i_nom_i</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_14427..14432"><span>that</span></a><span> </span><span>powr_minus_divide</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span>powr_divide</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14812..14817">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.d_nom_i_nom_v|fact"><span class="entity_def" id="Interest.interest.d_nom_i_nom_v|thm"><span class="entity_def" id="offset_14818..14831">d_nom_i_nom_v</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.d_nom_def|fact"><span>d_nom_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_10008..10015"><span>i_nom_i</span></a><span> </span><span>powr_divide</span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_14812..14817"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14968..14973">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.a_calc|fact"><span class="entity_def" id="Interest.interest.a_calc|thm"><span class="entity_def" id="offset_14974..14980">a_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="bound"><span>l</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_15106..15107">â</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>l</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="bound"><span>l</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>powr_powr</span><span> </span><span>powr_realpow</span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>powr_gt_zero</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_def|fact"><span>ann_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>sum_divide_distrib</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>geometric_sum</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span></a></span><span class="main"><span class="main"><span>.^</span></span></span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>1</span></span></span><span class="main"><span class="main"><span>/</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span>n</span></span></span><span class="main"><span class="main"><span>*</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>powr_zero_eq_one</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13189..13200"><span>v_1_iff_i_0</span></a><span> </span><span>powr_inj</span><span> </span><a class="entity_ref" href="Interest.html#offset_14968..14973"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>divide_eq_0_iff</span><span> </span><span>of_nat_eq_0_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_15106..15107"><span>â</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span>n</span></span></span><span class="main"><span class="main"><span>*</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span class="main"><span class="main"><span>::</span></span></span><span>nat</span><span>"</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>of_nat_simps</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>nonzero_mult_div_cancel_right</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>real</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>m</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>n</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14968..14973"><span>that</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>times_divide_eq_right</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span></a></span><span class="main"><span class="main"><span>.^</span></span></span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>1</span></span></span><span class="main"><span class="main"><span>/</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>diff_divide_distrib</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span></a></span></a></span><span class="main"><span class="main"><span class="main"><span>.^</span></span></span></span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="main"><span class="main"><span class="main"><span>1</span></span></span></span><span class="main"><span class="main"><span class="main"><span>/</span></span></span></span><span class="free"><span class="free"><span class="free"><span>m</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>minus_divide_divide</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span>mult_minus_right</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span>powr_divide</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16482..16487">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.a_calc_i_0|fact"><span class="entity_def" id="Interest.interest.a_calc_i_0|thm"><span class="entity_def" id="offset_16488..16498">a_calc_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_def|fact"><span>ann_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_16482..16487"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16601..16606">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s_calc_i_0|fact"><span class="entity_def" id="Interest.interest.s_calc_i_0|thm"><span class="entity_def" id="offset_16607..16617">s_calc_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>$s^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_def|fact"><span>acc_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_16601..16606"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16708..16713">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s_a|fact"><span class="entity_def" id="Interest.interest.s_a|thm"><span class="entity_def" id="offset_16714..16717">s_a</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>$s^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_def|fact"><span>ann_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum_distrib_left</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.inverse_powr|fact"><span>inverse_powr</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>times_divide_eq_right</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_add</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_16708..16713"><span>that</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>of_nat_diff</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Suc_le_eq</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>diff_divide_distrib</span><span> </span><a class="entity_ref" href="Interest.html#offset_16708..16713"><span>that</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>lessThan_iff</span><span> </span><span>sum.cong</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>atLeast0LessThan</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum.atLeastLessThan_rev</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span class="free"><span>n</span></span></span></span><span class="main"><span class="main"><span class="main"><span>*</span></span></span></span><span class="free"><span class="free"><span class="free"><span>m</span></span></span></span><span>"</span></span></span></span></span><span> </span><span class="quoted"><span class="main"><span class="quoted"><span class="main"><span class="quoted"><span class="main"><span>0</span></span></span></span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span> </span><span>add_0_right</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>$s^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_def|fact"><span>acc_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17722..17727">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s_calc|fact"><span class="entity_def" id="Interest.interest.s_calc|thm"><span class="entity_def" id="offset_17728..17734">s_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>$s^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_17722..17727"><span>that</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_16714..16717"><span>s_a</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14974..14980"><span>a_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>disjI2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>right_diff_distrib</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>left_right_inverse_power</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.a&apos;&apos;_a|fact"><span class="entity_def" id="Interest.interest.a&apos;&apos;_a|thm"><span class="entity_def" id="offset_18018..18023">a''_a</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_def|fact"><span>ann_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_due_def|fact"><span>ann_due_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>times_divide_eq_right</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14000..14003"><span>i_v</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_powr</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_add</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>add_divide_distrib</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.a_a&apos;&apos;|fact"><span class="entity_def" id="Interest.interest.a_a&apos;&apos;|thm"><span>a_a''</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_def|fact"><span>ann_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_due_def|fact"><span>ann_due_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>times_divide_eq_right</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_add</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>add_divide_distrib</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18521..18526">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.a&apos;&apos;_calc_i_0|fact"><span class="entity_def" id="Interest.interest.a&apos;&apos;_calc_i_0|thm"><span class="entity_def" id="offset_18527..18539">a''_calc_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_due_def|fact"><span>ann_due_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_18521..18526"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18647..18652">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s&apos;&apos;_calc_i_0|fact"><span class="entity_def" id="Interest.interest.s&apos;&apos;_calc_i_0|thm"><span class="entity_def" id="offset_18653..18665">s''_calc_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>$s''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_due_def|fact"><span>acc_due_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_18647..18652"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18762..18767">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.a&apos;&apos;_calc|fact"><span class="entity_def" id="Interest.interest.a&apos;&apos;_calc|thm"><span class="entity_def" id="offset_18768..18776">a''_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_18018..18023"><span>a''_a</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_14974..14980"><span>a_calc</span></a><span> </span><span>times_divide_eq_right</span><span> </span><a class="entity_ref" href="Interest.html#offset_18762..18767"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14000..14003"><span>i_v</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_powr</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_minus_divide</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14818..14831"><span>d_nom_i_nom_v</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_18762..18767"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s&apos;&apos;_s|fact"><span class="entity_def" id="Interest.interest.s&apos;&apos;_s|thm"><span class="entity_def" id="offset_19208..19213">s''_s</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>$s''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>$s^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_def|fact"><span>acc_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_due_def|fact"><span>acc_due_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum_distrib_left</span><span> </span><span>add_divide_distrib</span><span> </span><span>powr_add</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s_s&apos;&apos;|fact"><span class="entity_def" id="Interest.interest.s_s&apos;&apos;|thm"><span>s_s''</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>$s^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>$s''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_def|fact"><span>acc_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_due_def|fact"><span>acc_due_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum_distrib_left</span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.inverse_powr|fact"><span>inverse_powr</span></a><span> </span><span>add_divide_distrib</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>add_diff_cancel_left'</span><span> </span><span>powr_add</span><span> </span><span>uminus_add_conv_diff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19648..19653">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s&apos;&apos;_calc|fact"><span class="entity_def" id="Interest.interest.s&apos;&apos;_calc|thm"><span class="entity_def" id="offset_19654..19662">s''_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>$s''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>$s''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_19208..19213"><span>s''_s</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_17728..17734"><span>s_calc</span></a><span> </span><span>times_divide_eq_right</span><span> </span><a class="entity_ref" href="Interest.html#offset_19648..19653"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14000..14003"><span>i_v</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_powr</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_minus_divide</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14818..14831"><span>d_nom_i_nom_v</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_19648..19653"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20098..20103">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s&apos;&apos;_a&apos;&apos;|fact"><span class="entity_def" id="Interest.interest.s&apos;&apos;_a&apos;&apos;|thm"><span>s''_a''</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>$s''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_20098..20103"><span>that</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_19208..19213"><span>s''_s</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_18018..18023"><span>a''_a</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_16714..16717"><span>s_a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20209..20214">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.a&apos;_calc|fact"><span class="entity_def" id="Interest.interest.a&apos;_calc|thm"><span class="entity_def" id="offset_20215..20222">a'_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6975..6984"><span>$a'_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_cont_def|fact"><span>ann_cont_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>integral_unique</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_integral_powr2_from_0|fact"><span>has_integral_powr2_from_0</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> _ </span><a class="entity_ref" href="Interest.html#offset_20209..20214"><span>that</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14195..14202"><span>v_delta</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13189..13200"><span>v_1_iff_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_20209..20214"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span>minus_divide_divide</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20449..20454">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.a&apos;_calc_i_0|fact"><span class="entity_def" id="Interest.interest.a&apos;_calc_i_0|thm"><span class="entity_def" id="offset_20455..20466">a'_calc_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6975..6984"><span>$a'_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_cont_def|fact"><span>ann_cont_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>iffD2</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13189..13200"><span>v_1_iff_i_0</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_20449..20454"><span>that</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>integral_cong</span><span> </span><a class="entity_ref" href="Interest.html#offset_20449..20454"><span>that</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20627..20632">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s&apos;_calc|fact"><span class="entity_def" id="Interest.interest.s&apos;_calc|thm"><span class="entity_def" id="offset_20633..20640">s'_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7064..7073"><span>$s'_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5945..5953"><span>$Î´</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_cont_def|fact"><span>acc_cont_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>integral_unique</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_integral_powr2_from_0|fact"><span>has_integral_powr2_from_0</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> _ </span><a class="entity_ref" href="Interest.html#offset_20627..20632"><span>that</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_force_def|fact"><span>i_force_def</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_20627..20632"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20846..20851">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s&apos;_calc_i_0|fact"><span class="entity_def" id="Interest.interest.s&apos;_calc_i_0|thm"><span class="entity_def" id="offset_20852..20863">s'_calc_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7064..7073"><span>$s'_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_cont_def|fact"><span>acc_cont_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>integral_cong</span><span> </span><a class="entity_ref" href="Interest.html#offset_20846..20851"><span>that</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21000..21005">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.s&apos;_a&apos;|fact"><span class="entity_def" id="Interest.interest.s&apos;_a&apos;|thm"><span>s'_a'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7064..7073"><span>$s'_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6975..6984"><span>$a'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6975..6984"><span>$a'_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>-</span></span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_cont_def|fact"><span>ann_cont_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.integrable_on_powr2_from_0_general|fact"><span>integrable_on_powr2_from_0_general</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_21000..21005"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>integral_mult</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>integral_cong</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.inverse_powr|fact"><span>inverse_powr</span></a><span> </span><span>powr_add</span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>smt</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7064..7073"><span>$s'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_cont_def|fact"><span>acc_cont_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_21000..21005"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.has_integral_interval_reverse|fact"><span>has_integral_interval_reverse</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><span class="quoted"><span class="main"><span>0</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>n</span></span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>integral_unique</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>continuous_on_powr</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_m_a|fact"><span class="entity_def" id="Interest.interest.lim_m_a|thm"><span>lim_m_a</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6975..6984"><span>$a'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>LIMSEQ_imp_Suc</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span>Suc</span><span> </span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6975..6984"><span>$a'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_21766..21770">True</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_16488..16498"><span>a_calc_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_20455..20466"><span>a'_calc_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_21766..21770"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_21852..21857">False</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_21852..21857"><span>False</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_11116..11131"><span>delta_0_iff_i_0</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14974..14980"><span>a_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_20215..20222"><span>a'_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>tendsto_divide</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>LIMSEQ_Suc</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_11298..11307"><span>lim_i_nom</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_m_a&apos;&apos;|fact"><span class="entity_def" id="Interest.interest.lim_m_a&apos;&apos;|thm"><span>lim_m_a''</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6975..6984"><span>$a'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>LIMSEQ_imp_Suc</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span>Suc</span><span> </span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6975..6984"><span>$a'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_22270..22274">True</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_18527..18539"><span>a''_calc_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_20455..20466"><span>a'_calc_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_22270..22274"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_22358..22363">False</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_22358..22363"><span>False</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_11116..11131"><span>delta_0_iff_i_0</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_18768..18776"><span>a''_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_20215..20222"><span>a'_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>tendsto_divide</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>LIMSEQ_Suc</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_12799..12808"><span>lim_d_nom</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_m_s|fact"><span class="entity_def" id="Interest.interest.lim_m_s|thm"><span>lim_m_s</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>$s^{</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>}_</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7064..7073"><span>$s'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>LIMSEQ_imp_Suc</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>$s^{</span></a></span><span>Suc</span><span> </span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6384..6388"><span>}_</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7064..7073"><span>$s'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_22772..22776">True</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_16607..16617"><span>s_calc_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_20852..20863"><span>s'_calc_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_22772..22776"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_22858..22863">False</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_22858..22863"><span>False</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_11116..11131"><span>delta_0_iff_i_0</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_17728..17734"><span>s_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_20633..20640"><span>s'_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>tendsto_divide</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>LIMSEQ_Suc</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_11298..11307"><span>lim_i_nom</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_m_s&apos;&apos;|fact"><span class="entity_def" id="Interest.interest.lim_m_s&apos;&apos;|thm"><span>lim_m_s''</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>$s''^{</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>}_</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7064..7073"><span>$s'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>LIMSEQ_imp_Suc</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>$s''^{</span></a></span><span>Suc</span><span> </span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6770..6778"><span>}_</span></a></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7064..7073"><span>$s'_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_23281..23285">True</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_18653..18665"><span>s''_calc_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_20852..20863"><span>s'_calc_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_23281..23285"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_23369..23374">False</span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_23369..23374"><span>False</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_11116..11131"><span>delta_0_iff_i_0</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_19654..19662"><span>s''_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_20633..20640"><span>s'_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>tendsto_divide</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>LIMSEQ_Suc</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_12799..12808"><span>lim_d_nom</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_23640..23645">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_n_a|fact"><span class="entity_def" id="Interest.interest.lim_n_a|thm"><span>lim_n_a</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6203..6207"><span>}_</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7153..7158"><span>$a^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7153..7158"><span>}_â</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_10533..10552"><span>i_nom_pos_iff_i_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_23640..23645"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>smt</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>LIMSEQ_realpow_zero</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13373..13389"><span>v_lt_1_iff_i_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_23640..23645"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_23640..23645"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14974..14980"><span>a_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.perp_def|fact"><span>perp_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>tendsto_divide</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>tendsto_diff</span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> a</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="main"><span>1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> b</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="main"><span>0</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24069..24074">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_n_a&apos;&apos;|fact"><span class="entity_def" id="Interest.interest.lim_n_a&apos;&apos;|thm"><span>lim_n_a''</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>$a''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6565..6573"><span>}_</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7308..7317"><span>$a''^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7308..7317"><span>}_â</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_12205..12224"><span>d_nom_pos_iff_i_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_24069..24074"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>smt</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>LIMSEQ_realpow_zero</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13373..13389"><span>v_lt_1_iff_i_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_24069..24074"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_24069..24074"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_18768..18776"><span>a''_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.perp_due_def|fact"><span>perp_due_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>tendsto_divide</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>tendsto_diff</span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> a</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="main"><span>1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> b</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="main"><span>0</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Ilsm_Ilam|fact"><span class="entity_def" id="Interest.interest.Ilsm_Ilam|thm"><span class="entity_def" id="offset_24516..24525">Ilsm_Ilam</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>$(I^{</span></a></span><span class="free"><span>l</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>}s)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>l</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_incr_def|fact"><span>acc_incr_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_incr_def|fact"><span>ann_incr_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span> </span><span>powr_realpow</span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.inverse_powr|fact"><span>inverse_powr</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>minus_real_def</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_add</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>times_divide_eq_right</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>mult.assoc</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24856..24861">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Iam_calc|fact"><span class="entity_def" id="Interest.interest.Iam_calc|thm"><span class="entity_def" id="offset_24862..24870">Iam_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7622..7635"><span>$(Ia)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7622..7635"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>=</span></span><span class="bound"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?I</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?g</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7622..7635"><span>$(Ia)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7622..7635"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>=</span></span><span class="bound"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_incr_def|fact"><span>ann_incr_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.seq_part_multiple|fact"><span>seq_part_multiple</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_24856..24861"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mult_1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum.UNION_disjoint</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span class="quoted"><span class="var"><span class="quoted"><span class="var"><span>?I</span></span></span></span></span></span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span class="quoted"><span class="var"><span class="quoted"><span class="var"><span>?A</span></span></span></span></span></span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span class="quoted"><span class="var"><span class="quoted"><span class="var"><span>?g</span></span></span></span></span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>=</span></span><span class="bound"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>k</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>pos_less_divide_eq</span><span> </span><span>pos_divide_le_eq</span><span> </span><span>of_nat_less_iff</span><span> </span><span>of_nat_le_iff</span><span> </span><a class="entity_ref" href="Interest.html#offset_24856..24861"><span>that</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>of_nat_le_0_iff</span><span> </span><span>of_nat_mult</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>ceiling_unique</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>â</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>of_nat_1</span><span> </span><span>of_nat_add</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>of_int_1</span><span> </span><span>of_int_diff</span><span> </span><span>of_int_of_nat_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26078..26083">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Ism_calc|fact"><span class="entity_def" id="Interest.interest.Ism_calc|thm"><span>Ism_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7974..7987"><span>$(Is)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7974..7987"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>=</span></span><span class="bound"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_26078..26083"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_24516..24525"><span>Ilsm_Ilam</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_24862..24870"><span>Iam_calc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.inverse_powr|fact"><span>inverse_powr</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_add</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26506..26511">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Imam_calc_aux|fact"><span class="entity_def" id="Interest.interest.Imam_calc_aux|thm"><span class="entity_def" id="offset_26512..26525">Imam_calc_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_incr_def|fact"><span>ann_incr_def</span></a><span> </span><span>power_def</span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>of_nat_mult</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_26506..26511"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>nonzero_mult_div_cancel_left</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>ceiling_of_nat</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26807..26812">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Imam_calc|fact"><span class="entity_def" id="Interest.interest.Imam_calc|thm"><span class="entity_def" id="offset_26813..26822">Imam_calc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_26970..26971">â</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26807..26812"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26512..26525"><span>Imam_calc_aux</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_divide_distrib</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>powr_realpow</span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span>]</span></span><span> </span><span>powr_powr</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>add_divide_distrib</span><span> </span><span>powr_add</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26807..26812"><span>that</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13189..13200"><span>v_1_iff_i_0</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_26807..26812"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.geometric_increasing_sum|fact"><span>geometric_increasing_sum</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26970..26971"><span>â</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span></a></span><span class="main"><span class="main"><span>.^</span></span></span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>1</span></span></span><span class="main"><span class="main"><span>/</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_powr</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>times_divide_eq_right</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>divide_divide_eq_left</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>power_mult_distrib</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Preliminaries.html#Preliminaries.powr_eq_one_iff_gen|fact"><span>powr_eq_one_iff_gen</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13189..13200"><span>v_1_iff_i_0</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_realpow</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_28096..28101">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Imam_calc_i_0|fact"><span class="entity_def" id="Interest.interest.Imam_calc_i_0|thm"><span class="entity_def" id="offset_28102..28115">Imam_calc_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26512..26525"><span>Imam_calc_aux</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_28096..28101"><span>that</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13189..13200"><span>v_1_iff_i_0</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>iffD2</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_28096..28101"><span>that</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_divide_distrib</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>div</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>Suc_eq_plus1</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>sum_bounds_lt_plus1</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>id</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>Sum_Icc_nat</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>real_of_nat_div</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_28096..28101"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>power2_eq_square</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_28797..28802">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Imsm_calc|fact"><span class="entity_def" id="Interest.interest.Imsm_calc|thm"><span class="entity_def" id="offset_28803..28812">Imsm_calc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>}s)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_28797..28802"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26813..26822"><span>Imam_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>power2_eq_square</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_28797..28802"><span>that</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>powr_minus_divide</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>n</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>n</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>powr_diff</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>powr_realpow</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span>powr_minus_divide</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="free"><span>n</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>powr_add</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>n</span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>1</span></span></span><span class="main"><span class="main"><span>/</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><span>powr_realpow</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="free"><span>n</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14104..14112"><span>i_v_powr</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_28797..28802"><span>that</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_5752..5762"><span>v_futr_pos</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_24516..24525"><span>Ilsm_Ilam</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>disjI2</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>power_mult_distrib</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.v_pres_def|fact"><span>v_pres_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30560..30565">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Imsm_calc_i_0|fact"><span class="entity_def" id="Interest.interest.Imsm_calc_i_0|thm"><span>Imsm_calc_i_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>}s)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_30560..30565"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_24516..24525"><span>Ilsm_Ilam</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_28102..28115"><span>Imam_calc_i_0</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_30732..30737">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Ila&apos;&apos;m_Ilam|fact"><span class="entity_def" id="Interest.interest.Ila&apos;&apos;m_Ilam|thm"><span class="entity_def" id="offset_30738..30749">Ila''m_Ilam</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>$(I^{</span></a></span><span class="free"><span>l</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>}a'')^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>l</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_incr_def|fact"><span>ann_incr_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.ann_due_incr_def|fact"><span>ann_due_incr_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_30732..30737"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14000..14003"><span>i_v</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_powr</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>disjI2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>add_divide_distrib</span><span> </span><span>powr_add</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31071..31076">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Ia&apos;&apos;m_calc|fact"><span class="entity_def" id="Interest.interest.Ia&apos;&apos;m_calc|thm"><span>Ia''m_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8338..8355"><span>$(Ia'')^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_8338..8355"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>=</span></span><span class="bound"><span>j</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>..&lt;</span></span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_31071..31076"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_30738..30749"><span>Ila''m_Ilam</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>One_nat_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_24862..24870"><span>Iam_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14104..14112"><span>i_v_powr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>powr_add</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span>"</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31494..31499">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Ima&apos;&apos;m_calc_aux|fact"><span class="entity_def" id="Interest.interest.Ima&apos;&apos;m_calc_aux|thm"><span>Ima''m_calc_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>}a'')^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_31494..31499"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_30738..30749"><span>Ila''m_Ilam</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26512..26525"><span>Imam_calc_aux</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_distrib_left</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>powr_add</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span>"</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><span>sym</span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14104..14112"><span>i_v_powr</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_31816..31821">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Ima&apos;&apos;m_calc|fact"><span class="entity_def" id="Interest.interest.Ima&apos;&apos;m_calc|thm"><span>Ima''m_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>}a'')^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_31816..31821"><span>that</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_30738..30749"><span>Ila''m_Ilam</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26813..26822"><span>Imam_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14104..14112"><span>i_v_powr</span></a><span> </span><span>powr_add</span><span> </span><span>powr_zero_eq_one</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32103..32108">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Ils&apos;&apos;m_Ilsm|fact"><span class="entity_def" id="Interest.interest.Ils&apos;&apos;m_Ilsm|thm"><span class="entity_def" id="offset_32109..32120">Ils''m_Ilsm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8579..8592"><span>$(I^{</span></a></span><span class="free"><span>l</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8579..8592"><span>}s'')^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_8579..8592"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>$(I^{</span></a></span><span class="free"><span>l</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>}s)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7839..7848"><span>}_</span></a></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>l</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_incr_def|fact"><span>acc_incr_def</span></a><span> </span><a class="entity_ref" href="Interest.html#Interest.acc_due_incr_def|fact"><span>acc_due_incr_def</span></a><span> </span><span>sum_distrib_left</span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_32103..32108"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>sum.cong</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>add_divide_distrib</span><span> </span><span>powr_add</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32372..32377">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.Ims&apos;&apos;m_calc|fact"><span class="entity_def" id="Interest.interest.Ims&apos;&apos;m_calc|thm"><span>Ims''m_calc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8579..8592"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8579..8592"><span>}s'')^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_8579..8592"><span>}_</span></a></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>+</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_32372..32377"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_32109..32120"><span>Ils''m_Ilsm</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_28803..28812"><span>Imsm_calc</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32592..32597">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_Imam|fact"><span class="entity_def" id="Interest.interest.lim_Imam|thm"><span class="entity_def" id="offset_32598..32606">lim_Imam</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_7487..7496"><span>}_</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_32592..32597"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_26813..26822"><span>Imam_calc</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_32989..32990">â</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¦</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>Â¦</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13373..13389"><span>v_lt_1_iff_i_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_32592..32597"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>tendsto_cong</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>n</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><span class="bound"><span class="bound"><span>n</span></span></span><span class="main"><span class="main"><span>*</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span class="main"><span class="main"><span>*</span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span></a></span><span class="main"><span class="main"><span>^</span></span></span><span class="bound"><span class="bound"><span>n</span></span></span><span> </span><span class="main"><span class="main"><span>+</span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span></a></span><span class="main"><span class="main"><span>^</span></span></span><span class="bound"><span class="bound"><span>n</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>always_eventually</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>allI</span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>distrib_right</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>tendsto_intros</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>mult.commute</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>mult.assoc</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>real</span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>tendsto_intros</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>powser_times_n_limit_0</span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>tendsto_cong</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>n</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span class="main"><span class="main"><span>*</span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span></a></span><span class="main"><span class="main"><span>.^</span></span></span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>1</span></span></span><span class="main"><span class="main"><span>/</span></span></span><span class="free"><span class="free"><span>m</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>*</span></span></span><span class="main"><span class="main"><span>(</span></span></span><span class="bound"><span class="bound"><span>n</span></span></span><span class="main"><span class="main"><span>*</span></span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span></a></span><span class="main"><span class="main"><span>^</span></span></span><span class="bound"><span class="bound"><span>n</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>always_eventually</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>allI</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>powr_add</span><span> </span><span>powr_realpow</span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>tendsto_intros</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>powser_times_n_limit_0</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_32989..32990"><span>â</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>^</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>*</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>â¢</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13373..13389"><span>v_lt_1_iff_i_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_32592..32597"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>tendsto_intros</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.i_nom_def|fact"><span>i_nom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_13118..13123"><span>v_pos</span></a><span> </span><a class="entity_ref" href="Interest.html#offset_32592..32597"><span>that</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14104..14112"><span>i_v_powr</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_minus_divide</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14433..14440"><span>d_nom_v</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span class="main"><span class="main"><span>(</span></span></span><span class="quasi_keyword"><span>asm</span></span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>power2_eq_square</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34329..34334">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.perp_incr_calc|fact"><span class="entity_def" id="Interest.interest.perp_incr_calc|thm"><span>perp_incr_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8967..8977"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8967..8977"><span>}a)^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_8967..8977"><span>}_â</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.perp_incr_def|fact"><span>perp_incr_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>limI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_32598..32606"><span>lim_Imam</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_34329..34334"><span>that</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34494..34499">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.lim_Ima&apos;&apos;m|fact"><span class="entity_def" id="Interest.interest.lim_Ima&apos;&apos;m|thm"><span class="entity_def" id="offset_34500..34510">lim_Ima''m</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>}a'')^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_8191..8204"><span>}_</span></a></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¢</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_def|fact"><span>perp_due_incr_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_34494..34499"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_30738..30749"><span>Ila''m_Ilam</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>mult.commute</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14104..14112"><span>i_v_powr</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>powr_minus_divide</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>$i^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_5861..5867"><span>}</span></a></span><span class="main"><span>*</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6146..6153"><span>$v</span></a></span><span class="main"><span>.^</span></span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><span>ssubst</span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>tendsto_intros</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_32598..32606"><span>lim_Imam</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_14818..14831"><span>d_nom_i_nom_v</span></a><span> </span><span>power2_eq_square</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34909..34914">lemma</span></span></span><span> </span><span class="entity_def" id="Interest.interest.perp_due_incr_calc|fact"><span class="entity_def" id="Interest.interest.perp_due_incr_calc|thm"><span>perp_due_incr_calc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_9284..9298"><span>$(I^{</span></a></span><span class="free"><span>m</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_9284..9298"><span>}a'')^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_9284..9298"><span>}_â</span></a></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>$d^{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="Interest.html#offset_6003..6009"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>::</span></span><span class="quoted"><span>nat</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Interest.html#Interest.perp_due_incr_def|fact"><span>perp_due_incr_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>limI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interest.html#offset_34500..34510"><span>lim_Ima''m</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interest.html#offset_34909..34914"><span>that</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div>