<div id='Irrationals_From_THEBOOK'>/head>


<body>
<div class="head">
<h1>Theory Irrationals_From_THEBOOK</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Some irrational numbers</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>From Aigner and Ziegler, \emph{Proofs from THE BOOK} (Springer, 2018), Chapter 8, pp. 50--51.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Irrationals_From_THEBOOK</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../Stirling_Formula/Stirling_Formula.html"><span>Stirling_Formula.Stirling_Formula</span></a><span>"</span></span><span>
   
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Library additions</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span>comm_monoid_set</span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.comm_monoid_add_class.sum.atLeast_atMost_pred_shift|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.comm_monoid_mult_class.prod.atLeast_atMost_pred_shift|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.comm_monoid_set.atLeast_atMost_pred_shift|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.comm_monoid_mult_class.prod.atLeast_atMost_pred_shift|thm"><span class="entity_def" id="Irrationals_From_THEBOOK.comm_monoid_add_class.sum.atLeast_atMost_pred_shift|thm"><span class="entity_def" id="Irrationals_From_THEBOOK.comm_monoid_set.atLeast_atMost_pred_shift|thm"><span>atLeast_atMost_pred_shift</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>F</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span>Suc</span><span> </span><span class="free"><span>m</span></span><span class="main"><span>..</span></span><span>Suc</span><span> </span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>F</span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>m</span></span><span class="main"><span>..</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>atLeast_Suc_atMost_Suc_shift</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.field_differentiable_diff_const|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.field_differentiable_diff_const|thm"><span>field_differentiable_diff_const</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span class="operator"><span>derivative_intros</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(-)</span></span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><span>field_differentiable</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>field_differentiable_def</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>derivative_eq_intros</span></span></span><span> </span><span>exI</span><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>force</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Basic definitions and their consequences</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_def|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_def|thm"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Irrationals_From_THEBOOK.hf|const"><span>hf</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>hf</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span>real</span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="bound"><span>n</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Irrationals_From_THEBOOK.cf_def|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.cf_def|thm"><span class="entity_def" id="Irrationals_From_THEBOOK.cf_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Irrationals_From_THEBOOK.cf|const"><span>cf</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cf</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span> </span><span class="keyword1"><span>choose</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>-</span></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>-</span></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Mere knowledge that the coefficients are integers is not enough later on.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.hf_int_poly|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_int_poly|thm"><span>hf_int_poly</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1034..1037">inj</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(+)</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{..</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>inj_on_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(+)</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>{..</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>n</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>nat_le_iff_add</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â¤</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>choose</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>binomial_ring</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â¤</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>choose</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>mult.assoc</span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>power_minus</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â¤</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>choose</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span class="main"><span>+</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum_distrib_left</span><span> </span><span>mult_ac</span><span> </span><span>power_add</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>=</span></span><span class="free"><span>n</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum.reindex</span><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_1034..1037"><span>inj</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf_def|fact"><span>cf_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_def|fact"><span>hf_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf_def|fact"><span>cf_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>sum.union_disjoint</span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="free"><span>n</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>ivl_disj_int_two</span><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>ivl_disj_un_two</span><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>mult_2</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Lemma (ii) in the text has strict inequalities, but it takes more work and is less useful.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2207..2212">lemma</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.hf_nonneg|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_nonneg|thm"><span>hf_nonneg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.hf_le_inverse_fact|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_le_inverse_fact|thm"><span>hf_le_inverse_fact</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span>fact</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_2207..2212"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_def|fact"><span>hf_def</span></a><span> </span><span class="dynamic"><span class="dynamic"><span>divide_simps</span></span></span><span> </span><span>mult_le_one</span><span> </span><span>power_le_one</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.hf_differt|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_differt|thm"><span>hf_differt</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>differentiable</span></span><span> </span><span class="keyword1"><span>at</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_int_poly|fact"><span>hf_int_poly</span></a><span> </span><span>differentiable_def</span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>derivative_eq_intros</span></span></span><span> </span><span>exI</span><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.deriv_sum_int|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.deriv_sum_int|thm"><span>deriv_sum_int</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>deriv</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> 
     </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>int</span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>deriv</span><span> </span><span class="var"><span>?f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="var"><span>?g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2754..2758">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="var"><span>?f</span></span><span> </span><span class="keyword1"><span>has_real_derivative</span></span><span> </span><span class="var"><span>?g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>at</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>real</span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_2754..2758"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum.atLeast_Suc_atMost</span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum.cong</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sum</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>real</span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_2754..2758"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="var"><span>?g</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.comm_monoid_add_class.sum.atLeast_atMost_pred_shift|fact"><span>sum.atLeast_atMost_pred_shift</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> m</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="main"><span>0</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3287..3288">Â§</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="var"><span>?g</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>derivative_eq_intros</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_3287..3288"><span>Â§</span></a><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>DERIV_imp_deriv</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We calculate the coefficients of the $k$th derivative precisely.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.hf_deriv_int_poly|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_deriv_int_poly|thm"><span>hf_deriv_int_poly</span></span></span><span class="main"><span>:</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span class="main"><span>-</span></span><span class="free"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span>int</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;..</span></span><span class="bound"><span>i</span></span><span class="main"><span>+</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>+</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_int_poly|fact"><span>hf_int_poly</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_3767..3770">Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_3776..3782">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>F</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span>int</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;..</span></span><span class="bound"><span>i</span></span><span class="main"><span>+</span></span><span class="skolem"><span>k</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>+</span></span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3876..3878">Fd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="keyword1"><span>field_differentiable</span></span><span> </span><span class="keyword1"><span>at</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>field_differentiable_def</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_3776..3782"><span>F_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>derivative_eq_intros</span></span></span><span> </span><span>exI</span><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>force</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>prod</span><span> </span><span>int</span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>i</span></span><span class="main"><span>&lt;..</span></span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>int</span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>prod</span><span> </span><span>int</span><span> </span><span class="main"><span>{</span></span><span>Suc</span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>&lt;..</span></span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>i</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_le_mono</span><span> </span><span>atLeastSucAtMost_greaterThanAtMost</span><span> </span><span>le_add1</span><span> </span><span>of_nat_Suc</span><span> </span><span>prod.head</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>deriv</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> 
      </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>real_of_int</span><span> </span><span class="main"><span>(</span></span><span>int</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>&lt;..</span></span><span class="bound"><span>i</span></span><span class="main"><span>+</span></span><span> </span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf|const"><span>cf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><span>+</span></span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>deriv_cdivide_right</span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_3876..3878"><span>Fd</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_3776..3782"><span>F_def</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.deriv_sum_int|fact"><span>deriv_sum_int</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf_def|fact"><span>cf_def</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>of_int_mult</span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum.cong</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_3767..3770"><span>Suc</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_3776..3782"><span>F_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.hf_deriv_0|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_deriv_0|thm"><span>hf_deriv_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â¤</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>fact</span><span> </span><span class="free"><span>k</span></span><span class="main"><span>::</span></span><span>real</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>real_of_int</span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>fact</span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>fact_dvd</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dvd_def</span><span> </span><span>fact_nonzero</span><span> </span><span>mult.commute</span><span> </span><span>nonzero_mult_div_cancel_left</span><span> </span><span>of_int_fact</span><span> </span><span>real_of_int_div</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>prod</span><span> </span><span>real</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>&lt;..</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>fact</span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>fact_prod</span><span> </span><span>atLeastSucAtMost_greaterThanAtMost</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_int_poly|fact"><span>hf_deriv_int_poly</span></a><span> </span><span>dvd_def</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_int_poly|fact"><span>hf_deriv_int_poly</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf_def|fact"><span>cf_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.deriv_hf_minus|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.deriv_hf_minus|thm"><span>deriv_hf_minus</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>deriv</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>deriv</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>fun_eq_iff</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_def|fact"><span>hf_def</span></a><span> </span><span>mult.commute</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>deriv</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>deriv</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>deriv</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>deriv</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(-)</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>real_derivative_chain</span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>deriv</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>deriv</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.deriv_n_hf_diffr|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.deriv_n_hf_diffr|thm"><span>deriv_n_hf_diffr</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>field_differentiable</span></span><span> </span><span class="keyword1"><span>at</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>field_differentiable_def</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_int_poly|fact"><span>hf_deriv_int_poly</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>derivative_eq_intros</span></span></span><span> </span><span>exI</span><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>force</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.deriv_n_hf_minus|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.deriv_n_hf_minus|thm"><span>deriv_n_hf_minus</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>fun_eq_iff</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_def|fact"><span>hf_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_5842..5845">Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5856..5857">o</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(-)</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(-)</span></span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>field_differentiable</span></span><span> </span><span class="keyword1"><span>at</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>field_differentiable_compose</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>deriv</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_5842..5845"><span>Suc</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>deriv</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_5856..5857"><span>o</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_5856..5857"><span>o</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><span>deriv_chain</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>-</span></span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Towards the main result</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.hf_deriv_1|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_deriv_1|thm"><span>hf_deriv_1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â¤</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Ints_1</span><span> </span><span>Ints_minus</span><span> </span><span>Ints_mult</span><span> </span><span>Ints_power</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.deriv_n_hf_minus|fact"><span>deriv_n_hf_minus</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_0|fact"><span>hf_deriv_0</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.hf_deriv_eq_0|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.hf_deriv_eq_0|thm"><span>hf_deriv_eq_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.cf_def|fact"><span>cf_def</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_int_poly|fact"><span>hf_deriv_int_poly</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The case for positive integers</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6847..6852">lemma</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.exp_nat_irrational|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.exp_nat_irrational|thm"><span>exp_nat_irrational</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>exp</span><span> </span><span class="main"><span>(</span></span><span>real_of_int</span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>exp</span><span> </span><span class="main"><span>(</span></span><span>real_of_int</span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_6988..6990">ab</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>coprime</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7026..7031">exp_s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>exp</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>of_int</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>of_int</span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Rats_cases'</span><span> </span><span>div_0</span><span> </span><span>exp_not_eq_zero</span><span> </span><span>of_int_0</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>exp_gt_zero</span><span> </span><span>of_int_0_less_iff</span><span> </span><span>zero_less_divide_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_7196..7202">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>(</span></span><span>max</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>^</span></span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7255..7258">ns3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span class="main"><span>^</span></span><span class="numeral"><span>3</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>real</span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="numeral"><span>3</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_7196..7202"><span>n_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>zero_less_nat_eq</span><span> </span><span>zero_less_power</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>3</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_6847..6852"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>power_increasing</span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>real_of_int</span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>^</span></span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>power_mult</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="numeral"><span>3</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_6847..6852"><span>assms</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_7255..7258"><span>ns3</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>power_mono</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>exp</span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>exp_le</span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>divide_simps</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7747..7751">s_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>exp</span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7811..7817">a_less</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>sqrt</span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span>pi</span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span>pi</span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>pi_gt_zero</span><span> </span><span>sin_gt_zero_02</span><span> </span><span>sin_le_zero</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sqrt</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span class="main"><span>^</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_6988..6990"><span>ab</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>order_less_imp_le</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>sqrt</span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_7196..7202"><span>n_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>int_nat_eq</span><span> </span><span>of_nat_less_of_int_iff</span><span> </span><span>real_sqrt_le_mono</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>sqrt</span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span>pi</span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>n</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>pi</span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sqrt</span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span>pi</span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>exp</span><span> </span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mult_strict_right_mono</span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_7811..7817"><span>a_less</span></a><span class="main"><span>]</span></span><span> </span><span>mult_left_mono</span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_7747..7751"><span>s_le</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_7747..7751"><span>s_le</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_6988..6990"><span>ab</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_6847..6852"><span>assms</span></a><span> </span><span>of_int_1</span><span> </span><span>of_int_le_iff</span><span> </span><span>of_int_mult</span><span> </span><span>zero_less_power</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8481..8482">n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fact</span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>fact_bounds</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>n</span></span><span>âº</span></span></span><span> </span><span>of_int_fact</span><span> </span><span>of_int_less_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_8597..8603">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>F</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>â¤</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>-</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>deriv</span><span class="main"><span>^^</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>Fder</span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>derivative_intros</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>F</span></span><span> </span><span class="keyword1"><span>has_real_derivative</span></span><span> </span><span class="main"><span>-</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>at</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8789..8793">have</span></span></span><span> </span><span class="entity_def" id="offset_8794..8795">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>sum</span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>{..</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>sum</span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>lessThan_Suc_atMost</span><span> </span><span>sum.lessThan_Suc</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_8789..8793"><span>that</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_eq_0|fact"><span>hf_deriv_eq_0</span></a><span> </span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> k</span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>Suc</span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9062..9063">Â§</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>â¤</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span>Suc</span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
           </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>j</span></span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>deriv</span><span> </span><span class="main"><span>^^</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> 
           </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>n</span></span><span class="main"><span>+</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>n</span></span><span class="main"><span>&gt;</span></span><span class="main"><span>0</span></span><span>âº</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>sum_Suc_reindex</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span><span> </span><span>atLeast0AtMost</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_8794..8795"><span>*</span></a><span> </span><span>mult.left_commute</span><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>minus_nat.diff_Suc</span><span> </span><span>sum_distrib_left</span><span> 
                   </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sum.distrib</span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>comm_monoid_add_class.sum.neutral</span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>nat.split_asm</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_8597..8603"><span>F_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>derivative_eq_intros</span></span></span><span> </span><span>field_differentiable_derivI</span><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9062..9063"><span>Â§</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span><span> </span><span>atLeast0AtMost</span><span> </span><span>eval_nat_numeral</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9806..9814">F01_Ints</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â¤</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â¤</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_8597..8603"><span>F_def</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_0|fact"><span>hf_deriv_0</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_1|fact"><span>hf_deriv_1</span></a><span> </span><span>Ints_sum</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_9898..9904">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>sF</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>sF</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>exp</span><span> </span><span class="main"><span>(</span></span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_9952..9958">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>sF'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>sF'</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span>Suc</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>exp</span><span> </span><span class="main"><span>(</span></span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10040..10046">sF_der</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>sF</span></span><span> </span><span class="keyword1"><span>has_real_derivative</span></span><span> </span><span class="skolem"><span>sF'</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>at</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9898..9904"><span>sF_def</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9952..9958"><span>sF'_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>refl</span><span> </span><span class="dynamic"><span class="dynamic"><span>derivative_eq_intros</span></span></span><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?N</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="skolem"><span>sF'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10236..10248">sF'_integral</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>sF'</span></span><span> </span><span class="keyword1"><span>has_integral</span></span><span> </span><span class="skolem"><span>sF</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>sF</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>fundamental_theorem_of_calculus</span><span> </span><span>has_field_derivative_iff_has_vector_derivative</span><span> </span><span>has_vector_derivative_at_within</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_10040..10046"><span>sF_der</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?N</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>integral_unique</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_7026..7031"><span>exp_s</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9898..9904"><span>sF_def</span></a><span> </span><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â¤</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_deriv_1|fact"><span>hf_deriv_1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9806..9814"><span>F01_Ints</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10624..10630">N_Ints</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?N</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â¤</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>sF'</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_10670..10673">ge0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>sF'</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_6847..6852"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9952..9958"><span>sF'_def</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_def|fact"><span>hf_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>continuous_on</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="skolem"><span>sF'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9952..9958"><span>sF'_def</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_def|fact"><span>hf_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span class="dynamic"><span class="dynamic"><span>continuous_intros</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10874..10878">have</span></span></span><span> </span><span class="quoted"><span>False</span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>sF'</span></span><span> </span><span class="keyword1"><span>has_integral</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>has_integral_0_cbox_imp_0</span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="main"><span>0</span></span></span><span> </span><span class="quoted"><span class="main"><span>1</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>sF'</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span class="main"><span>/</span></span><span class="numeral"><span>2</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_10874..10878"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="skolem"><span>sF'</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_10670..10673"><span>ge0</span></a><span> </span><span>has_integral_nonneg</span><span> </span><span>integral_unique</span><span> </span><span>order_le_less</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_10236..10248"><span>sF'_integral</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="var"><span>?N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="skolem"><span>sF'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span>Suc</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>exp</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>*</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9952..9958"><span>sF'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span>Suc</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>exp</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>mult_left_mono</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>exp</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>*</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span>real</span><span class="main"><span>.</span></span><span> </span><span>exp</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><span>mult_mono</span><span> </span><span>integral_le</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>exp</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>*</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>integrable_on</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="var"><span>?N</span></span><span>âº</span></span></span><span> </span><span>not_integrable_integral</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9952..9958"><span>sF'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_6847..6852"><span>assms</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_nonneg|fact"><span>hf_nonneg</span></a><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf_le_inverse_fact|fact"><span>hf_le_inverse_fact</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>exp</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>integral</span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..</span></span><span class="main"><span>1</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>exp</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>s</span></span><span class="main"><span>*</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.hf|const"><span>hf</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>exp</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_6847..6852"><span>assms</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?N</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>of_int</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span>Suc</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>*</span></span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>exp</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>fact</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_9952..9958"><span>sF'_def</span></a><span> </span><span>mult_ac</span><span> </span><span class="dynamic"><span class="dynamic"><span>divide_simps</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_8481..8482"><span>n</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_7026..7031"><span>exp_s</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>of_int_fact</span><span> </span><span>of_int_less_iff</span><span> </span><span>of_int_mult</span><span> </span><span>of_int_power</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span>False</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="var"><span>?N</span></span><span>âº</span></span></span><span> </span><span>Ints_cases</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_10624..10630"><span>N_Ints</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12212..12219">theorem</span></span></span><span> </span><span class="entity_def" id="Irrationals_From_THEBOOK.exp_irrational|fact"><span class="entity_def" id="Irrationals_From_THEBOOK.exp_irrational|thm"><span>exp_irrational</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>q</span></span><span class="main"><span>::</span></span><span class="quoted"><span>real</span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>q</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>q</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>exp</span><span> </span><span class="free"><span>q</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> 
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_12310..12311">q</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>exp</span><span> </span><span class="free"><span>q</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>t</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>q</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>of_int</span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>of_int</span><span> </span><span class="skolem"><span>t</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Rats_cases'</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_12212..12219"><span>assms</span></a><span> </span><span>div_0</span><span> </span><span>of_int_0</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>exp</span><span> </span><span class="free"><span>q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>exp</span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>exp_divide_power_eq</span><span> </span><span>of_nat_nat</span><span> </span><span>zero_less_nat_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>exp</span><span> </span><span class="free"><span>q</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="main"><span>(</span></span><span>nat</span><span> </span><span class="skolem"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>â</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#offset_12310..12311"><span>q</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span>False</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Rats_inverse</span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span> </span><span>exp_minus</span><span> </span><a class="entity_ref" href="Irrationals_From_THEBOOK.html#Irrationals_From_THEBOOK.exp_nat_irrational|fact"><span>exp_nat_irrational</span></a><span> </span><span>of_int_of_nat</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div>