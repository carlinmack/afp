<div id="Agent">
<div class="head">
<h1>Theory Agent</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Agent
  <span class="keyword2"><span class="keyword">imports</span></span> <span class="quoted">"<a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL-Nominal/Nominal.html">HOL-Nominal.Nominal</a>"</span>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">atom_decl</span></span> name

<span class="keyword1"><span class="command">nominal_datatype</span></span> act <span class="main">=</span> actAction <span class="quoted">name</span>      <span class="main">(</span><span class="quoted">"<span class="keyword1">‚¶á</span>_<span class="keyword1">‚¶à</span>"</span> 100<span class="main">)</span>
                     <span class="main">|</span> actCoAction <span class="quoted">name</span>    <span class="main">(</span><span class="quoted">"<span class="keyword1">‚ü®</span>_<span class="keyword1">‚ü©</span>"</span> 100<span class="main">)</span>
                     <span class="main">|</span> actTau              <span class="main">(</span><span class="quoted">"<span class="keyword1">œÑ</span>"</span> 100<span class="main">)</span>

<span class="keyword1"><span class="command">nominal_datatype</span></span> ccs <span class="main">=</span> CCSNil           <span class="main">(</span><span class="quoted">"<span class="keyword1">ùü¨</span>"</span> 115<span class="main">)</span>
                     <span class="main">|</span> Action <span class="quoted">act</span> <span class="quoted">ccs</span>   <span class="main">(</span><span class="quoted">"_<span class="keyword1">.</span>_"</span> <span class="main">[</span>120<span class="main">,</span> 110<span class="main">]</span> 110<span class="main">)</span>
                     <span class="main">|</span> Sum <span class="quoted">ccs</span> <span class="quoted">ccs</span>      <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">"<span class="keyword1">‚äï</span>"</span> 90<span class="main">)</span>
                     <span class="main">|</span> Par <span class="quoted">ccs</span> <span class="quoted">ccs</span>      <span class="main">(</span><span class="keyword2"><span class="keyword">infixl</span></span> <span class="quoted">"<span class="keyword1">‚à•</span>"</span> 85<span class="main">)</span>
                     <span class="main">|</span> Res <span class="quoted"><span class="quoted">"<span class="main">¬´</span>name<span class="main">¬ª</span> ccs"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span>_<span class="keyword1">‚¶à</span>_"</span> <span class="main">[</span>105<span class="main">,</span> 100<span class="main">]</span> 100<span class="main">)</span>
                     <span class="main">|</span> Bang <span class="quoted">ccs</span>         <span class="main">(</span><span class="quoted">"<span class="keyword1">!</span>_"</span> <span class="main">[</span>95<span class="main">]</span><span class="main">)</span>

<span class="keyword1"><span class="command">nominal_primrec</span></span> <span class="entity">coAction</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"act <span class="main">‚áí</span> act"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free">coAction</span> <span class="main">(</span><span class="main">‚¶á</span><span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">‚¶à</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">‚ü®</span><span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">‚ü©</span><span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">coAction</span> <span class="main">(</span><span class="main">‚ü®</span><span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">‚ü©</span><span class="main">)</span><span class="main">=</span> <span class="main">(</span><span class="main">‚¶á</span><span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">‚¶à</span><span class="main">)</span>"</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">"<span class="free">coAction</span> <span class="main">(</span><span class="keyword1">œÑ</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">œÑ</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> TrueI<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="Agent-coActionEqvt"><span class="command">lemma</span></span> coActionEqvt<span class="main">[</span><span class="operator">eqvt</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">p</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"name prm"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">a</span> <span class="main">::</span> <span class="quoted">act</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">p</span> <span class="main">‚àô</span> coAction <span class="free">a</span><span class="main">)</span> <span class="main">=</span> coAction<span class="main">(</span><span class="free">p</span> <span class="main">‚àô</span> <span class="free">a</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quoted"><span class="free">a</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> act.strong_induct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="dynamic"><span class="dynamic">eqvts</span></span><span class="main">)</span>

<span class="keyword1" id="Agent-coActionSimps"><span class="command">lemma</span></span> coActionSimps<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">a</span> <span class="main">::</span> <span class="quoted">act</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"coAction<span class="main">(</span>coAction <span class="free">a</span><span class="main">)</span> <span class="main">=</span> <span class="free">a</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="quoted"><span class="quoted">"<span class="main">(</span>coAction <span class="free">a</span> <span class="main">=</span> <span class="keyword1">œÑ</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">a</span> <span class="main">=</span> <span class="keyword1">œÑ</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span> <span class="main">(</span><span class="operator">nominal_induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> act.strong_induct<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="Agent-coActSimp"><span class="command">lemma</span></span> coActSimp<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span> <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"coAction <span class="free">Œ±</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span> <span class="main">=</span> <span class="main">(</span><span class="free">Œ±</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span><span class="main">)</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>coAction <span class="free">Œ±</span> <span class="main">=</span> <span class="keyword1">œÑ</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">Œ±</span> <span class="main">=</span> <span class="keyword1">œÑ</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quoted"><span class="free">Œ±</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> act.strong_induct<span class="main">)</span> <span class="operator">auto</span>
    
<span class="keyword1" id="Agent-coActFresh"><span class="command">lemma</span></span> coActFresh<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">a</span> <span class="main">::</span> <span class="quoted">act</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> coAction <span class="free">a</span> <span class="main">=</span> <span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">a</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quoted"><span class="free">a</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> act.strong_induct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span><span class="main">)</span>
  
<span class="keyword1" id="Agent-alphaRes"><span class="command">lemma</span></span> alphaRes<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">y</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">y</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">=</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="main">[</span><span class="main">(</span><span class="free">x</span><span class="main">,</span> <span class="free">y</span><span class="main">)</span><span class="main">]</span> <span class="main">‚àô</span> <span class="free">P</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject alpha fresh_left calc_atm pt_swap_bij<span class="main"><span class="main">[</span></span><span class="operator">OF</span> pt_name_inst<span class="main"><span class="main">,</span></span> <span class="operator">OF</span> at_name_inst<span class="main"><span class="main">]</span></span>pt3<span class="main"><span class="main">[</span></span><span class="operator">OF</span> pt_name_inst<span class="main"><span class="main">,</span></span> <span class="operator">OF</span> at_ds1<span class="main"><span class="main"><span class="main">[</span></span></span><span class="operator">OF</span> at_name_inst<span class="main"><span class="main"><span class="main">]</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">semantics</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> act <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span>    <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚üº</span>_ <span class="keyword1">‚â∫</span> _"</span> <span class="main">[</span>80<span class="main">,</span> 80<span class="main">,</span> 80<span class="main">]</span> 80<span class="main">)</span>
<span class="keyword2"><span class="keyword">where</span></span>
  Action<span class="main">:</span>   <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">Œ±</span></span></span><span class="main">.</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>
<span class="main">|</span> Sum1<span class="main">:</span>     <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚üπ</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚äï</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span>"</span></span>
<span class="main">|</span> Sum2<span class="main">:</span>     <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">Q'</span></span></span> <span class="main">‚üπ</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚äï</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">Q'</span></span></span>"</span></span>
<span class="main">|</span> Par1<span class="main">:</span>     <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚üπ</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span>"</span></span>
<span class="main">|</span> Par2<span class="main">:</span>     <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">Q'</span></span></span> <span class="main">‚üπ</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q'</span></span></span>"</span></span>
<span class="main">|</span> Comm<span class="main">:</span>     <span class="quoted"><span class="quoted">"<span class="main">‚ü¶</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">a</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span><span class="main">;</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="main">(</span>coAction <span class="free"><span class="bound"><span class="entity">a</span></span></span><span class="main">)</span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">Q'</span></span></span><span class="main">;</span> <span class="free"><span class="bound"><span class="entity">a</span></span></span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="keyword1">œÑ</span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q'</span></span></span>"</span></span>
<span class="main">|</span> Res<span class="main">:</span>      <span class="quoted"><span class="quoted">"<span class="main">‚ü¶</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span><span class="main">;</span> <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">‚ôØ</span> <span class="free"><span class="bound"><span class="entity">Œ±</span></span></span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="free"><span class="bound"><span class="entity">P'</span></span></span>"</span></span>
<span class="main">|</span> Bang<span class="main">:</span>     <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="main">!</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚üπ</span> <span class="main">!</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üº</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span>"</span></span>

<span class="keyword1"><span class="command">equivariance</span></span> semantics

<span class="keyword1"><span class="command">nominal_inductive</span></span> semantics
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> abs_fresh<span class="main">)</span>

<span class="keyword1" id="Agent-semanticsInduct"><span class="command">lemma</span></span> semanticsInduct<span class="main">:</span>
<span class="quoted"><span class="quoted">"<span class="main">‚ü¶</span><span class="free">R</span> <span class="main">‚üº</span><span class="free">Œ≤</span> <span class="main">‚â∫</span> <span class="free">R'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">Œ±</span> <span class="bound">P</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="bound">Œ±</span><span class="main">.</span><span class="main">(</span><span class="bound">P</span><span class="main">)</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="bound">P</span><span class="main">;</span>
 <span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Œ±</span> <span class="bound">P'</span> <span class="bound">Q</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="bound">P</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="bound">P</span> <span class="bound">Œ±</span> <span class="bound">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span>ccs.Sum <span class="bound">P</span> <span class="bound">Q</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="bound">P'</span><span class="main">;</span>
 <span class="main">‚ãÄ</span><span class="bound">Q</span> <span class="bound">Œ±</span> <span class="bound">Q'</span> <span class="bound">P</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="bound">Q</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">Q'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="bound">Q</span> <span class="bound">Œ±</span> <span class="bound">Q'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span>ccs.Sum <span class="bound">P</span> <span class="bound">Q</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="bound">Q'</span><span class="main">;</span>
 <span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Œ±</span> <span class="bound">P'</span> <span class="bound">Q</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="bound">P</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="bound">P</span> <span class="bound">Œ±</span> <span class="bound">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="main">(</span><span class="bound">P'</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span><span class="main">;</span>
 <span class="main">‚ãÄ</span><span class="bound">Q</span> <span class="bound">Œ±</span> <span class="bound">Q'</span> <span class="bound">P</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="bound">Q</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">Q'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="bound">Q</span> <span class="bound">Œ±</span> <span class="bound">Q'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q'</span><span class="main">)</span><span class="main">;</span>
 <span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">a</span> <span class="bound">P'</span> <span class="bound">Q</span> <span class="bound">Q'</span> <span class="bound">ùíû</span><span class="main">.</span>
    <span class="main">‚ü¶</span><span class="bound">P</span> <span class="main">‚üº</span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="bound">P</span> <span class="bound">a</span> <span class="bound">P'</span><span class="main">;</span> <span class="bound">Q</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="bound">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="bound">Q'</span><span class="main">;</span>
     <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="bound">Q</span> <span class="main">(</span>coAction <span class="bound">a</span><span class="main">)</span> <span class="bound">Q'</span><span class="main">;</span> <span class="bound">a</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span><span class="main">‚üß</span>
    <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">œÑ</span><span class="main">)</span> <span class="main">(</span><span class="bound">P'</span> <span class="main">‚à•</span> <span class="bound">Q'</span><span class="main">)</span><span class="main">;</span>
 <span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Œ±</span> <span class="bound">P'</span> <span class="bound">x</span> <span class="bound">ùíû</span><span class="main">.</span>
    <span class="main">‚ü¶</span><span class="bound">x</span> <span class="main">‚ôØ</span> <span class="bound">ùíû</span><span class="main">;</span> <span class="bound">P</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="bound">P</span> <span class="bound">Œ±</span> <span class="bound">P'</span><span class="main">;</span> <span class="bound">x</span> <span class="main">‚ôØ</span> <span class="bound">Œ±</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">P</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">P'</span><span class="main">)</span><span class="main">;</span>
 <span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Œ±</span> <span class="bound">P'</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="bound">P</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="bound">P</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="bound">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">!</span><span class="bound">P</span> <span class="bound">Œ±</span> <span class="bound">P'</span><span class="main">‚üß</span>

<span class="main">‚üπ</span> <span class="free">Prop</span> <span class="main">(</span><span class="free">ùíû</span><span class="main">::</span><span class="tfree">'a</span><span class="main">::</span>fs_name<span class="main">)</span> <span class="free">R</span> <span class="free">Œ≤</span> <span class="free">R'</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">erule_tac</span> z<span class="main"><span class="main">=</span></span><span class="quoted"><span class="free">ùíû</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> semantics.strong_induct<span class="main">)</span> <span class="operator">auto</span>

<span class="keyword1" id="Agent-NilTrans"><span class="command">lemma</span></span> NilTrans<span class="main">[</span><span class="operator">dest</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">ùü¨</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚üπ</span> False"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">‚¶á</span><span class="free">b</span><span class="main">‚¶à</span><span class="main">)</span><span class="main">.</span><span class="free">P</span> <span class="main">‚üº</span><span class="main">‚ü®</span><span class="free">c</span><span class="main">‚ü©</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚üπ</span> False"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">‚¶á</span><span class="free">b</span><span class="main">‚¶à</span><span class="main">)</span><span class="main">.</span><span class="free">P</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚üπ</span> False"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">‚ü®</span><span class="free">b</span><span class="main">‚ü©</span><span class="main">)</span><span class="main">.</span><span class="free">P</span> <span class="main">‚üº</span><span class="main">‚¶á</span><span class="free">c</span><span class="main">‚¶à</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚üπ</span> False"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">‚ü®</span><span class="free">b</span><span class="main">‚ü©</span><span class="main">)</span><span class="main">.</span><span class="free">P</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚üπ</span> False"</span></span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main">ùü¨</span></span> <span class="main"><span class="main">‚üº</span></span><span class="free"><span class="free">Œ±</span></span> <span class="main"><span class="main">‚â∫</span></span> <span class="free"><span class="free">P'</span></span>"</span></span></span><span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main">(</span></span><span class="main"><span class="main">‚¶á</span></span><span class="free"><span class="free">b</span></span><span class="main"><span class="main">‚¶à</span></span><span class="main"><span class="main">)</span></span><span class="main"><span class="main">.</span></span><span class="free"><span class="free">P</span></span> <span class="main"><span class="main">‚üº</span></span><span class="main"><span class="main">‚ü®</span></span><span class="free"><span class="free">c</span></span><span class="main"><span class="main">‚ü©</span></span> <span class="main"><span class="main">‚â∫</span></span> <span class="free"><span class="free">P'</span></span>"</span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main">(</span></span><span class="main"><span class="main">‚¶á</span></span><span class="free"><span class="free">b</span></span><span class="main"><span class="main">‚¶à</span></span><span class="main"><span class="main">)</span></span><span class="main"><span class="main">.</span></span><span class="free"><span class="free">P</span></span> <span class="main"><span class="main">‚üº</span></span><span class="keyword1"><span class="keyword1">œÑ</span></span> <span class="main"><span class="main">‚â∫</span></span> <span class="free"><span class="free">P'</span></span>"</span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main">(</span></span><span class="main"><span class="main">‚ü®</span></span><span class="free"><span class="free">b</span></span><span class="main"><span class="main">‚ü©</span></span><span class="main"><span class="main">)</span></span><span class="main"><span class="main">.</span></span><span class="free"><span class="free">P</span></span> <span class="main"><span class="main">‚üº</span></span><span class="main"><span class="main">‚¶á</span></span><span class="free"><span class="free">c</span></span><span class="main"><span class="main">‚¶à</span></span> <span class="main"><span class="main">‚â∫</span></span> <span class="free"><span class="free">P'</span></span>"</span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main">(</span></span><span class="main"><span class="main">‚ü®</span></span><span class="free"><span class="free">b</span></span><span class="main"><span class="main">‚ü©</span></span><span class="main"><span class="main">)</span></span><span class="main"><span class="main">.</span></span><span class="free"><span class="free">P</span></span> <span class="main"><span class="main">‚üº</span></span><span class="keyword1"><span class="keyword1">œÑ</span></span> <span class="main"><span class="main">‚â∫</span></span> <span class="free"><span class="free">P'</span></span>"</span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1" id="Agent-freshDerivative"><span class="command">lemma</span></span> freshDerivative<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">a</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span>  <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> semantics.strong_induct<span class="main">)</span>
  <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.fresh abs_fresh<span class="main">)</span>
  
<span class="keyword1" id="Agent-actCases"><span class="command">lemma</span></span> actCases<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cAct<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ≤</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚üº</span><span class="free">Œ≤</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">Œ±</span> <span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">Œ≤</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="free"><span class="free"><span class="free">Œ±</span></span></span><span class="main"><span class="main"><span class="main">.</span></span></span><span class="main"><span class="main"><span class="main">(</span></span></span><span class="free"><span class="free"><span class="free">P</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span> <span class="main"><span class="main"><span class="main">‚üº</span></span></span><span class="free"><span class="free"><span class="free">Œ≤</span></span></span> <span class="main"><span class="main"><span class="main">‚â∫</span></span></span> <span class="free"><span class="free"><span class="free">P'</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>

<span class="keyword1" id="Agent-sumCases"><span class="command">lemma</span></span> sumCases<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cSum1 cSum2<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span> <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span><span class="main">.</span> <span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Q'</span><span class="main">.</span> <span class="free">Q</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="bound">Q'</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">‚äï</span></span></span> <span class="free"><span class="free"><span class="free">Q</span></span></span> <span class="main"><span class="main"><span class="main">‚üº</span></span></span><span class="free"><span class="free"><span class="free">Œ±</span></span></span> <span class="main"><span class="main"><span class="main">‚â∫</span></span></span> <span class="free"><span class="free"><span class="free">R</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>

<span class="keyword1" id="Agent-parCases"><span class="command">lemma</span></span> parCases<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cPar1 cPar2 cComm<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">a</span> <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span><span class="main">.</span> <span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="free">Œ±</span> <span class="main">(</span><span class="bound">P'</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Q'</span><span class="main">.</span> <span class="free">Q</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="bound">Q'</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="free">Œ±</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="bound">Q'</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span> <span class="bound">Q'</span> <span class="bound">a</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="main">‚üº</span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="free">Q</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="bound">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="bound">Q'</span><span class="main">;</span> <span class="bound">a</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span><span class="main">;</span> <span class="free">Œ±</span> <span class="main">=</span> <span class="keyword1">œÑ</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="main">(</span><span class="keyword1">œÑ</span><span class="main">)</span> <span class="main">(</span><span class="bound">P'</span> <span class="main">‚à•</span> <span class="bound">Q'</span><span class="main">)</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">Œ±</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">‚à•</span></span></span> <span class="free"><span class="free"><span class="free">Q</span></span></span> <span class="main"><span class="main"><span class="main">‚üº</span></span></span><span class="free"><span class="free"><span class="free">Œ±</span></span></span> <span class="main"><span class="main"><span class="main">‚â∫</span></span></span> <span class="free"><span class="free"><span class="free">R</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>

<span class="keyword1" id="Agent-resCases"><span class="command">lemma</span></span> resCases<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cRes<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span>  <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="bound">P'</span><span class="main">)</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P'</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> freshDerivative <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> abs_fresh<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> semantics.strong_cases<span class="main"><span class="main">[</span></span><span class="operator">of</span> <span class="main"><span class="main">_</span></span> <span class="main"><span class="main">_</span></span> <span class="main"><span class="main">_</span></span> <span class="main"><span class="main">_</span></span> <span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free">x</span></span></span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
      <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> abs_fresh ccs.inject alpha<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">bangPred</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  aux1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">bangPred</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">(</span><span class="main">!</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span>"</span></span>
<span class="main">|</span> aux2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">bangPred</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="main">!</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Agent-bangInduct"><span class="command">lemma</span></span> bangInduct<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cPar1 cPar2 cComm cBang<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">ùíû</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="tfree">'a</span><span class="main">::</span>fs_name"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     rPar1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Œ±</span> <span class="bound">P'</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="main">(</span><span class="bound">P'</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     rPar2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Œ±</span> <span class="bound">P'</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="main">!</span><span class="free">P</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="bound">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="bound">P'</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     rComm<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">a</span> <span class="bound">P'</span> <span class="bound">P''</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="main">‚üº</span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">!</span><span class="free">P</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="bound">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="bound">P''</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="main">(</span>coAction <span class="bound">a</span><span class="main">)</span> <span class="bound">P''</span><span class="main">;</span> <span class="bound">a</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">œÑ</span><span class="main">)</span> <span class="main">(</span><span class="bound">P'</span> <span class="main">‚à•</span> <span class="bound">P''</span><span class="main">)</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     rBang<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Œ±</span> <span class="bound">P'</span> <span class="bound">ùíû</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">‚ãÄ</span><span class="bound">ùíû</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="bound">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">ùíû</span> <span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="bound">Œ±</span> <span class="bound">P'</span>"</span></span>


  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">ùíû</span> <span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="free">Œ±</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">X</span> <span class="skolem">Œ±</span> <span class="skolem">P'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">X</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"bangPred <span class="free">P</span> <span class="skolem">X</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">ùíû</span> <span class="skolem">X</span> <span class="skolem">Œ±</span> <span class="skolem">P'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quasi_keyword">avoiding</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="free">ùíû</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> semantics.strong_induct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Action <span class="skolem">Œ±</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"bangPred <span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Œ±</span></span></span><span class="main"><span class="main"><span class="main">.</span></span></span><span class="main"><span class="main"><span class="main">(</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Pa</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main">)</span> 
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sum1 <span class="skolem">Pa</span> <span class="skolem">Œ±</span> <span class="skolem">P'</span> <span class="skolem">Q</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"bangPred <span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Pa</span></span></span> <span class="main"><span class="main"><span class="main">‚äï</span></span></span> <span class="skolem"><span class="skolem"><span class="skolem">Q</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main">)</span> 
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sum2 <span class="skolem">Q</span> <span class="skolem">Œ±</span> <span class="skolem">Q'</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"bangPred <span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Pa</span></span></span> <span class="main"><span class="main"><span class="main">‚äï</span></span></span> <span class="skolem"><span class="skolem"><span class="skolem">Q</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main">)</span> 
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Par1 <span class="skolem">Pa</span> <span class="skolem">Œ±</span> <span class="skolem">P'</span> <span class="skolem">Q</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">-</span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"bangPred <span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Pa</span></span></span> <span class="main"><span class="main"><span class="main">‚à•</span></span></span> <span class="skolem"><span class="skolem"><span class="skolem">Q</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> rPar1 <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Par2 <span class="skolem">Q</span> <span class="skolem">Œ±</span> <span class="skolem">P'</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">-</span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"bangPred <span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Pa</span></span></span> <span class="main"><span class="main"><span class="main">‚à•</span></span></span> <span class="skolem"><span class="skolem"><span class="skolem">Q</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> rPar2 aux1 <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Comm <span class="skolem">Pa</span> <span class="skolem">a</span> <span class="skolem">P'</span> <span class="skolem">Q</span> <span class="skolem">Q'</span> <span class="skolem">C</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">-</span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"bangPred <span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Pa</span></span></span> <span class="main"><span class="main"><span class="main">‚à•</span></span></span> <span class="skolem"><span class="skolem"><span class="skolem">Q</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> rComm aux1 <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Res <span class="skolem">Pa</span> <span class="skolem">Œ±</span> <span class="skolem">P'</span> <span class="skolem">x</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"bangPred <span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="keyword1"><span class="keyword1"><span class="keyword1">‚¶áŒΩ</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">x</span></span></span><span class="main"><span class="main"><span class="main">‚¶à</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Pa</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main">)</span> 
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Bang <span class="skolem">Pa</span> <span class="skolem">Œ±</span> <span class="skolem">P'</span><span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">-</span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"bangPred <span class="free"><span class="free"><span class="free">P</span></span></span> <span class="main"><span class="main"><span class="main">(</span></span></span><span class="main"><span class="main"><span class="main">!</span></span></span><span class="skolem"><span class="skolem"><span class="skolem">Pa</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> rBang aux2 <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">!</span><span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> bangPred.aux1<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">inductive_set</span></span> <span class="entity">bangRel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set <span class="main">‚áí</span> <span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
<span class="keyword2"><span class="keyword">for</span></span> <span class="entity">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  BRBang<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="main">!</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="main">!</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">bangRel</span> <span class="free">Rel</span>"</span></span>
<span class="main">|</span> BRPar<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">R</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">(</span><span class="free">bangRel</span> <span class="free">Rel</span><span class="main">)</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">T</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">(</span><span class="free">bangRel</span> <span class="free">Rel</span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Agent-BRBangCases"><span class="command">lemma</span></span> BRBangCases<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> BRBang<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">F</span>   <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> bool"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="free">F</span> <span class="main">(</span><span class="main">!</span><span class="bound">P</span><span class="main">)</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main"><span class="main">(</span></span></span><span class="free"><span class="free"><span class="free">P</span></span></span><span class="main"><span class="main"><span class="main">,</span></span></span> <span class="main"><span class="main"><span class="main">!</span></span></span><span class="free"><span class="free"><span class="free">Q</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span> <span class="main"><span class="main"><span class="main">‚àà</span></span></span> bangRel <span class="free"><span class="free"><span class="free">Rel</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span> 

<span class="keyword1" id="Agent-BRParCases"><span class="command">lemma</span></span> BRParCases<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> BRPar<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">F</span>   <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> bool"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">R</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span><span class="main">;</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">F</span> <span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">)</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span> <span class="operator">-</span> <span class="main">(</span><span class="operator">ind_cases</span> <span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted">"<span class="main"><span class="main"><span class="main">(</span></span></span><span class="free"><span class="free"><span class="free">P</span></span></span><span class="main"><span class="main"><span class="main">,</span></span></span> <span class="free"><span class="free"><span class="free">Q</span></span></span> <span class="main"><span class="main"><span class="main">‚à•</span></span></span> <span class="main"><span class="main"><span class="main">!</span></span></span><span class="free"><span class="free"><span class="free">Q</span></span></span><span class="main"><span class="main"><span class="main">)</span></span></span> <span class="main"><span class="main"><span class="main">‚àà</span></span></span> bangRel <span class="free"><span class="free"><span class="free">Rel</span></span></span>"</span></span></span></span><span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ccs.inject<span class="main">)</span> 

<span class="keyword1" id="Agent-bangRelSubset"><span class="command">lemma</span></span> bangRelSubset<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">Rel</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span>  bangRel.induct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> BRBang BRPar<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Tau_Chain">
<div class="head">
<h1>Theory Tau_Chain</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Tau_Chain
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Agent">Agent</a>
<span class="keyword2"><span class="keyword">begin</span></span>


<span class="keyword1"><span class="command">definition</span></span> <span class="entity">tauChain</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> _"</span> <span class="main">[</span>80<span class="main">,</span> 80<span class="main">]</span> 80<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="keyword1"><span class="free">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚â°</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">P'</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">P'</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">}</span><span class="main">^*</span>"</span></span>

<span class="keyword1" id="Tau_Chain-tauChainInduct"><span class="command">lemma</span></span> tauChainInduct<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> Base Step<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span> <span class="bound">P''</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="bound">P'</span><span class="main">;</span> <span class="bound">P'</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="bound">P''</span><span class="main">;</span> <span class="free">Prop</span> <span class="bound">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">P''</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> rtrancl_induct<span class="main">)</span>

<span class="keyword1" id="Tau_Chain-tauChainRefl"><span class="command">lemma</span></span> tauChainRefl<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def<span class="main">)</span>

<span class="keyword1" id="Tau_Chain-tauChainCons"><span class="command">lemma</span></span> tauChainCons<span class="main">[</span><span class="operator">dest</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P''</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P'</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="free">P''</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P''</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> rtrancl_trans<span class="main">)</span>

<span class="keyword1" id="Tau_Chain-tauChainCons2"><span class="command">lemma</span></span> tauChainCons2<span class="main">[</span><span class="operator">dest</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P''</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P'</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="free">P''</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P''</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> rtrancl_trans<span class="main">)</span>

<span class="keyword1" id="Tau_Chain-tauChainAppend"><span class="command">lemma</span></span> tauChainAppend<span class="main">[</span><span class="operator">dest</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P''</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P'</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P''</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P''</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P'</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P''</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>‚Ä∫</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span> <span class="operator">auto</span>

<span class="keyword1" id="Tau_Chain-tauChainSum1"><span class="command">lemma</span></span> tauChainSum1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚â†</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> Base 
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Step <span class="skolem">P'</span> <span class="skolem">P''</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">=</span><span class="skolem">P'</span>"</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Sum1 <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Tau_Chain-tauChainSum2"><span class="command">lemma</span></span> tauChainSum2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">Q'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚â†</span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">Q'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> Base 
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Step <span class="skolem">Q'</span> <span class="skolem">Q''</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="main">=</span><span class="skolem">Q'</span>"</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Sum2 <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Tau_Chain-tauChainPar1"><span class="command">lemma</span></span> tauChainPar1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span> <span class="main">‚à•</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Par1<span class="main">)</span>

<span class="keyword1" id="Tau_Chain-tauChainPar2"><span class="command">lemma</span></span> tauChainPar2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Par2<span class="main">)</span>

<span class="keyword1" id="Tau_Chain-tauChainRes"><span class="command">lemma</span></span> tauChainRes<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span>  <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> Res<span class="main">)</span>

<span class="keyword1" id="Tau_Chain-tauChainRepl"><span class="command">lemma</span></span> tauChainRepl<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P'</span> <span class="main">‚â†</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted">"<span class="improper">P'</span> <span class="main">‚â†</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">drule</span> Bang<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Weak_Cong_Semantics">
<div class="head">
<h1>Theory Weak_Cong_Semantics</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Cong_Semantics
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Tau_Chain">Tau_Chain</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">weakCongTrans</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> act <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚üπ</span>_ <span class="keyword1">‚â∫</span> _"</span> <span class="main">[</span>80<span class="main">,</span> 80<span class="main">,</span> 80<span class="main">]</span> 80<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üπ</span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚â°</span> <span class="main">‚àÉ</span><span class="bound">P''</span> <span class="bound">P'''</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="bound">P''</span> <span class="main">‚àß</span> <span class="bound">P''</span> <span class="main">‚üº</span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main">‚â∫</span> <span class="bound">P'''</span> <span class="main">‚àß</span> <span class="bound">P'''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span>"</span></span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongTransE"><span class="command">lemma</span></span> weakCongTransE<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">P''</span> <span class="free">P'''</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">P''</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="free">P'''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongTransI"><span class="command">lemma</span></span> weakCongTransI<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P''</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>    <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'''</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P''</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P''</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'''</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P'''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-transitionWeakCongTransition"><span class="command">lemma</span></span> transitionWeakCongTransition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongAction"><span class="command">lemma</span></span> weakCongAction<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">a</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>
  <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Action tauChainRefl<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongSum1"><span class="command">lemma</span></span> weakCongSum1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted">"<span class="free">P</span><span class="main">=</span><span class="improper">P''</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> Sum1<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> tauChainSum1<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongSum2"><span class="command">lemma</span></span> weakCongSum2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted">"<span class="free">Q</span><span class="main">=</span><span class="improper">P''</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> Sum2<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> tauChainSum2<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongPar1"><span class="command">lemma</span></span> weakCongPar1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚à•</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>
  <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> tauChainPar1 Par1<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongPar2"><span class="command">lemma</span></span> weakCongPar2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>
  <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> tauChainPar2 Par2<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongSync"><span class="command">lemma</span></span> weakCongSync<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üπ</span><span class="main">(</span>coAction <span class="free">Œ±</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Œ±</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚üπ</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚à•</span> <span class="free">Q'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule_tac</span> x<span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted">"<span class="improper">P''</span> <span class="main">‚à•</span> <span class="improper">P''a</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> exI<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> tauChainPar1 tauChainPar2<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule_tac</span> x<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="improper">P'''</span> <span class="main">‚à•</span> <span class="improper">P'''a</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> exI<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule</span> Comm<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule_tac</span> P'<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">"<span class="free">P'</span> <span class="main">‚à•</span> <span class="improper">P'''a</span>"</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> tauChainAppend<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> tauChainPar1 tauChainPar2<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongRes"><span class="command">lemma</span></span> weakCongRes<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span>  <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>
  <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> tauChainRes Res<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Semantics-weakCongRepl"><span class="command">lemma</span></span> weakCongRepl<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def<span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted">"<span class="improper">P''</span> <span class="main">=</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span>"</span></span><span class="main">)</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Bang <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> tauChainRepl<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Weak_Semantics">
<div class="head">
<h1>Theory Weak_Semantics</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Semantics
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Cong_Semantics">Weak_Cong_Semantics</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">weakTrans</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> act <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span>_ <span class="keyword1">‚â∫</span> _"</span> <span class="main">[</span>80<span class="main">,</span> 80<span class="main">,</span> 80<span class="main">]</span> 80<span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span></span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main"><span class="free">‚â∫</span></span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚â°</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚üπ</span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main">‚â∫</span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span> <span class="main">‚à®</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main">=</span> <span class="keyword1">œÑ</span> <span class="main">‚àß</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">P'</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Weak_Semantics-weakEmptyTrans"><span class="command">lemma</span></span> weakEmptyTrans<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakTransCases"><span class="command">lemma</span></span> weakTransCases<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> Base Step<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ü¶</span><span class="free">Œ±</span> <span class="main">=</span> <span class="keyword1">œÑ</span><span class="main">;</span> <span class="free">P</span> <span class="main">=</span> <span class="free">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="main">(</span><span class="keyword1">œÑ</span><span class="main">)</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="free">Œ±</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">Œ±</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakCongTransitionWeakTransition"><span class="command">lemma</span></span> weakCongTransitionWeakTransition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-transitionWeakTransition"><span class="command">lemma</span></span> transitionWeakTransition<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> transitionWeakCongTransition weakCongTransitionWeakTransition<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakAction"><span class="command">lemma</span></span> weakAction<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">a</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongAction<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakSum1"><span class="command">lemma</span></span> weakSum1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚â†</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongSum1<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakSum2"><span class="command">lemma</span></span> weakSum2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚â†</span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongSum2<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakPar1"><span class="command">lemma</span></span> weakPar1<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚à•</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongPar1<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakPar2"><span class="command">lemma</span></span> weakPar2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongPar2<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakSync"><span class="command">lemma</span></span> weakSync<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="main">(</span>coAction <span class="free">Œ±</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Œ±</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="free">P'</span> <span class="main">‚à•</span> <span class="free">Q'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongSync<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakRes"><span class="command">lemma</span></span> weakRes<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span>  <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongRes<span class="main">)</span>

<span class="keyword1" id="Weak_Semantics-weakRepl"><span class="command">lemma</span></span> weakRepl<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>  <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P'</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">P'</span> <span class="main">‚â†</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongRepl<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Strong_Sim">
<div class="head">
<h1>Theory Strong_Sim</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Strong_Sim
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Agent">Agent</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">simulation</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> <span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span>   <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚Üù[</span>_<span class="keyword1">]</span> _"</span> <span class="main">[</span>80<span class="main">,</span> 80<span class="main">,</span> 80<span class="main">]</span> 80<span class="main">)</span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚Üù[</span></span><span class="free"><span class="bound"><span class="entity">Rel</span></span></span><span class="main"><span class="free">]</span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚â°</span> <span class="main">‚àÄ</span><span class="bound">a</span> <span class="bound">Q'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚üº</span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">Q'</span> <span class="main">‚ü∂</span> <span class="main">(</span><span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚üº</span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free"><span class="bound"><span class="entity">Rel</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Strong_Sim-simI"><span class="command">lemma</span></span> simI<span class="main">[</span><span class="operator">case_names</span> Sim<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Œ±</span> <span class="bound">Q'</span><span class="main">.</span> <span class="free">Q</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">Q'</span> <span class="main">‚üπ</span> <span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="free">P</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>

<span class="keyword1" id="Strong_Sim-simE"><span class="command">lemma</span></span> simE<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>   <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">P'</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>

<span class="keyword1" id="Strong_Sim-reflexive"><span class="command">lemma</span></span> reflexive<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>
  
<span class="keyword1" id="Strong_Sim-transitive"><span class="command">lemma</span></span> transitive<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>   <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel''</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚Üù[</span><span class="free">Rel'</span><span class="main">]</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Rel</span> <span class="keyword1">O</span> <span class="free">Rel'</span> <span class="main">‚äÜ</span> <span class="free">Rel''</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel''</span><span class="main">]</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>


</pre>
</div><div id="Weak_Sim">
<div class="head">
<h1>Theory Weak_Sim</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Sim
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Semantics">Weak_Semantics</a> <a href="#Strong_Sim">Strong_Sim</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">weakSimulation</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> <span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span>   <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span>_<span class="keyword1">&gt;</span> _"</span> <span class="main">[</span>80<span class="main">,</span> 80<span class="main">,</span> 80<span class="main">]</span> 80<span class="main">)</span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span></span><span class="free"><span class="bound"><span class="entity">Rel</span></span></span><span class="main"><span class="free">&gt;</span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚â°</span> <span class="main">‚àÄ</span><span class="bound">a</span> <span class="bound">Q'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚üº</span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">Q'</span> <span class="main">‚ü∂</span> <span class="main">(</span><span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free"><span class="bound"><span class="entity">Rel</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Weak_Sim-weakSimI"><span class="command">lemma</span></span> weakSimI<span class="main">[</span><span class="operator">case_names</span> Sim<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Œ±</span> <span class="bound">Q'</span><span class="main">.</span> <span class="free">Q</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">Q'</span> <span class="main">‚üπ</span> <span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakSimulation_def<span class="main">)</span>

<span class="keyword1" id="Weak_Sim-weakSimE"><span class="command">lemma</span></span> weakSimE<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>   <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">P'</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakSimulation_def<span class="main">)</span>

<span class="keyword1" id="Weak_Sim-simTauChain"><span class="command">lemma</span></span> simTauChain<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">Q'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     Sim<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="bound">S</span>"</span></span>

  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">P'</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">Q'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="free">thesis</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> Base
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Base<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Step <span class="skolem">Q''</span> <span class="skolem">Q'</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P''</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P''</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Step<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P''</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P''</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="skolem">Q''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Sim<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P''</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Q''</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakSimE<span class="main">)</span>
  <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P''</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="skolem">thesis</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def weakCongTrans_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Step<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Sim-simE2"><span class="command">lemma</span></span> simE2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>   <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     Sim<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="bound">S</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">P'</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> Goal<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">thesis</span>"</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakTransCases<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> Base
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> Step
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'''</span></span> <span class="skolem"><span class="skolem">Q''</span></span>
    <span class="keyword2"><span class="keyword">where</span></span> QChain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">Q'''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> Q'''Trans<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">Q'''</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> Q''Chain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">Q''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">Q'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongTransE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> QChain <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> Sim <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'''</span></span> <span class="keyword2"><span class="keyword">where</span></span> PChain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P'''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'''</span><span class="main">,</span> <span class="skolem">Q'''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simTauChain<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'''</span><span class="main">,</span> <span class="skolem">Q'''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P'''</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="skolem">Q'''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Sim<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P''</span></span> <span class="keyword2"><span class="keyword">where</span></span> P'''Trans<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">P'''</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P''</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Q'''Trans <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> Q''Chain <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P''</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> Sim <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> P''Chain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">P''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simTauChain<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> P'''Trans P''Chain Step <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakTransCases<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> Base
      <span class="keyword1"><span class="command">from</span></span> PChain <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P'''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> Base
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> Base
          <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Step <span class="skolem">P'</span> <span class="skolem">P''</span><span class="main">)</span>
          <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def weakCongTrans_def<span class="main">)</span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Step <span class="skolem">P'''</span> <span class="skolem">P''</span><span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def weakCongTrans_def<span class="main">)</span>
      <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> Step
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> PChain
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> x<span class="main"><span class="main">=</span></span><span class="quoted"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> exI<span class="main">)</span> <span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def weakCongTrans_def<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Sim-reflexive"><span class="command">lemma</span></span> reflexive<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakSimulation_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> transitionWeakCongTransition weakCongTransitionWeakTransition<span class="main">)</span>
  
<span class="keyword1" id="Weak_Sim-transitive"><span class="command">lemma</span></span> transitive<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>   <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel''</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Rel</span> <span class="keyword1">O</span> <span class="free">Rel'</span> <span class="main">‚äÜ</span> <span class="free">Rel''</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">S</span> <span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="bound">S</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="bound">T</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel''</span><span class="main">&gt;</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakSimI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">Œ±</span> <span class="skolem">R'</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> assms
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">drule_tac</span> Q<span class="main"><span class="main">=</span></span><span class="quoted"><span class="free">R</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> weakSimE<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">drule_tac</span> Q<span class="main"><span class="main">=</span></span><span class="quoted"><span class="free">Q</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> simE2<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Sim-weakMonotonic"><span class="command">lemma</span></span> weakMonotonic<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">A</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">B</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">A</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">‚äÜ</span> <span class="free">B</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">B</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakSimulation_def<span class="main">)</span>

<span class="keyword1" id="Weak_Sim-simWeakSim"><span class="command">lemma</span></span> simWeakSim<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> weakSimI<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
  <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> simE transitionWeakTransition<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Weak_Cong_Sim">
<div class="head">
<h1>Theory Weak_Cong_Sim</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Cong_Sim
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Cong_Semantics">Weak_Cong_Semantics</a> <a href="#Weak_Sim">Weak_Sim</a> <a href="#Strong_Sim">Strong_Sim</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">weakCongSimulation</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> <span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span>   <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚Üù&lt;</span>_<span class="keyword1">&gt;</span> _"</span> <span class="main">[</span>80<span class="main">,</span> 80<span class="main">,</span> 80<span class="main">]</span> 80<span class="main">)</span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚Üù&lt;</span></span><span class="free"><span class="bound"><span class="entity">Rel</span></span></span><span class="main"><span class="free">&gt;</span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚â°</span> <span class="main">‚àÄ</span><span class="bound">a</span> <span class="bound">Q'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚üº</span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">Q'</span> <span class="main">‚ü∂</span> <span class="main">(</span><span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚üπ</span><span class="bound">a</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free"><span class="bound"><span class="entity">Rel</span></span></span><span class="main">)</span>"</span></span>

<span class="keyword1" id="Weak_Cong_Sim-weakSimI"><span class="command">lemma</span></span> weakSimI<span class="main">[</span><span class="operator">case_names</span> Sim<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Œ±</span> <span class="bound">Q'</span><span class="main">.</span> <span class="free">Q</span> <span class="main">‚üº</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">Q'</span> <span class="main">‚üπ</span> <span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="free">P</span> <span class="main">‚üπ</span><span class="bound">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongSimulation_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Sim-weakSimE"><span class="command">lemma</span></span> weakSimE<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>   <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>

  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">P'</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongSimulation_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Sim-simWeakSim"><span class="command">lemma</span></span> simWeakSim<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> weakSimI<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
  <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> simE transitionWeakCongTransition<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Sim-weakCongSimWeakSim"><span class="command">lemma</span></span> weakCongSimWeakSim<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> Weak_Sim.weakSimI<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
  <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakSimE weakCongTransitionWeakTransition<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Sim-test"><span class="command">lemma</span></span> test<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">=</span> <span class="free">P'</span> <span class="main">‚à®</span> <span class="main">(</span><span class="main">‚àÉ</span><span class="bound">P''</span><span class="main">.</span> <span class="free">P</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="bound">P''</span> <span class="main">‚àß</span> <span class="bound">P''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainInduct<span class="main">)</span> <span class="operator">auto</span>

<span class="keyword1" id="Weak_Cong_Sim-tauChainCasesSym"><span class="command">lemma</span></span> tauChainCasesSym<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cTauNil cTauStep<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P''</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="bound">P''</span><span class="main">;</span> <span class="bound">P''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">P'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="free">P'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">P'</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> test<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Sim-simE2"><span class="command">lemma</span></span> simE2<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span>   <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q'</span>  <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     Sim<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="bound">S</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">P'</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> Goal<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span><span class="main">;</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free">thesis</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q'''</span></span> <span class="skolem"><span class="skolem">Q''</span></span>
    <span class="keyword2"><span class="keyword">where</span></span> QChain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">Q'''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> Q'''Trans<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">Q'''</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> Q''Chain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">Q''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="free">Q'</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongTransE<span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> QChain Q'''Trans <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> tauChainCasesSym<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> cTauNil
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q''</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'''</span></span> <span class="keyword2"><span class="keyword">where</span></span> PTrans<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'''</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> Q''Chain <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'''</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> Sim <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> P''Chain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">P'''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simTauChain<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> PTrans P''Chain <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Goal <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def weakTrans_def<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cTauStep <span class="skolem">Q''''</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">Q''''</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P''''</span></span> <span class="keyword2"><span class="keyword">where</span></span>  PChain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P''''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P''''</span><span class="main">,</span> <span class="skolem">Q''''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">drule_tac</span> weakSimE<span class="main">)</span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Q''''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">Q'''</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P''''</span><span class="main">,</span> <span class="skolem">Q''''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> Sim <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'''</span></span> <span class="keyword2"><span class="keyword">where</span></span> P''''Chain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">P''''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P'''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'''</span><span class="main">,</span> <span class="skolem">Q'''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simTauChain<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'''</span><span class="main">,</span> <span class="skolem">Q'''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P'''</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="skolem">Q'''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Sim<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P''</span></span> <span class="keyword2"><span class="keyword">where</span></span> P'''Trans<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">P'''</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P''</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P''</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> Q'''Trans <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Sim.weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> Q''Chain <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P''</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> Sim <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> P''Chain<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="skolem">P''</span> <span class="keyword1">‚üπ<span class="hidden">‚á©</span><sub>œÑ</sub></span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simTauChain<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> PChain P''''Chain P'''Trans P''Chain
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def weakTrans_def<span class="main">)</span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule_tac</span> x<span class="main"><span class="main">=</span></span><span class="quoted"><span class="improper">P''aa</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> exI<span class="main">)</span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tauChain_def<span class="main">)</span>

    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="free">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Goal <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongTrans_def weakTrans_def<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong_Sim-reflexive"><span class="command">lemma</span></span> reflexive<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongSimulation_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> transitionWeakCongTransition<span class="main">)</span>
  
<span class="keyword1" id="Weak_Cong_Sim-transitive"><span class="command">lemma</span></span> transitive<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>   <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel''</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚Üù&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Rel</span> <span class="keyword1">O</span> <span class="free">Rel'</span> <span class="main">‚äÜ</span> <span class="free">Rel''</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">S</span> <span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="bound">S</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="bound">T</span>"</span></span>
  
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel''</span><span class="main">&gt;</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakSimI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">Œ±</span> <span class="skolem">R'</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> assms
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">drule_tac</span> Q<span class="main"><span class="main">=</span></span><span class="quoted"><span class="free">R</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> weakSimE<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">drule_tac</span> Q<span class="main"><span class="main">=</span></span><span class="quoted"><span class="free">Q</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">in</span></span></span> simE2<span class="main">)</span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong_Sim-weakMonotonic"><span class="command">lemma</span></span> weakMonotonic<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">A</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">B</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">A</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">‚äÜ</span> <span class="free">B</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">B</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongSimulation_def<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Strong_Sim_SC">
<div class="head">
<h1>Theory Strong_Sim_SC</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Strong_Sim_SC
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Strong_Sim">Strong_Sim</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Strong_Sim_SC-resNilLeft"><span class="command">lemma</span></span> resNilLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="main">ùü¨</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-resNilRight"><span class="command">lemma</span></span> resNilRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">ùü¨</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> resCases<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-test"><span class="command">lemma</span></span> test<span class="main">[</span><span class="operator">simp</span><span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="main">[</span><span class="free">x</span><span class="main">].</span><span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> abs_fresh<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-scopeExtSumLeft"><span class="command">lemma</span></span> scopeExtSumLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">y</span> <span class="bound">R</span><span class="main">.</span> <span class="bound">y</span> <span class="main">‚ôØ</span> <span class="bound">R</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">R</span><span class="main">,</span> <span class="bound">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">elim</span> sumCases resCases<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Res Sum1 Sum2 C1 <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> freshDerivative<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="Strong_Sim_SC-scopeExtSumRight"><span class="command">lemma</span></span> scopeExtSumRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">y</span> <span class="bound">R</span><span class="main">.</span> <span class="bound">y</span> <span class="main">‚ôØ</span> <span class="bound">R</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">elim</span> sumCases resCases<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Res Sum1 Sum2 C1 <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> freshDerivative<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="Strong_Sim_SC-scopeExtLeft"><span class="command">lemma</span></span> scopeExtLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">y</span> <span class="bound">R</span> <span class="bound">T</span><span class="main">.</span> <span class="bound">y</span> <span class="main">‚ôØ</span> <span class="bound">R</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="bound">R</span> <span class="main">‚à•</span> <span class="bound">T</span><span class="main">)</span><span class="main">,</span> <span class="bound">R</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> parCases resCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Res C1 Par1 Par2 Comm <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> freshDerivative <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-scopeExtRight"><span class="command">lemma</span></span> scopeExtRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">y</span> <span class="bound">R</span> <span class="bound">T</span><span class="main">.</span> <span class="bound">y</span> <span class="main">‚ôØ</span> <span class="bound">R</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">R</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">T</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="bound">R</span> <span class="main">‚à•</span> <span class="bound">T</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> parCases resCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Res C1 Par1 Par2 Comm <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> freshDerivative <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-sumComm"><span class="command">lemma</span></span> sumComm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> sumCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Sum1 Sum2<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-sumAssocLeft"><span class="command">lemma</span></span> sumAssocLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> sumCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Sum1 Sum2<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-sumAssocRight"><span class="command">lemma</span></span> sumAssocRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">" <span class="free">P</span> <span class="main">‚äï</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">)</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚äï</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">intro</span> simI<span class="main"><span class="keyword3">,</span></span> <span class="operator">elim</span> sumCases<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Sum1 Sum2<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>

<span class="keyword1" id="Strong_Sim_SC-sumIdLeft"><span class="command">lemma</span></span> sumIdLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="main">ùü¨</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Sum1<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-sumIdRight"><span class="command">lemma</span></span> sumIdRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="main">ùü¨</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> sumCases<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-parComm"><span class="command">lemma</span></span> parComm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">T</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span> <span class="main">‚à•</span> <span class="bound">T</span><span class="main">,</span> <span class="bound">T</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> parCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Par1 Par2 Comm C1<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-parAssocLeft"><span class="command">lemma</span></span> parAssocLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">S</span> <span class="bound">T</span> <span class="bound">U</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">S</span> <span class="main">‚à•</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">,</span> <span class="bound">S</span> <span class="main">‚à•</span> <span class="main">(</span><span class="bound">T</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> parCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Par1 Par2 Comm C1<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-parAssocRight"><span class="command">lemma</span></span> parAssocRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">S</span> <span class="bound">T</span> <span class="bound">U</span><span class="main">.</span> <span class="main">(</span><span class="bound">S</span> <span class="main">‚à•</span> <span class="main">(</span><span class="bound">T</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="bound">S</span> <span class="main">‚à•</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">)</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> parCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Par1 Par2 Comm C1<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-parIdLeft"><span class="command">lemma</span></span> parIdLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">Q</span> <span class="main">‚à•</span> <span class="main">ùü¨</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Par1<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-parIdRight"><span class="command">lemma</span></span> parIdRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">Q</span><span class="main">,</span> <span class="bound">Q</span> <span class="main">‚à•</span> <span class="main">ùü¨</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> parCases<span class="main">)</span>

<span class="keyword1"><span class="command">declare</span></span> fresh_atm<span class="main">[</span><span class="operator">simp</span><span class="main">]</span>

<span class="keyword1" id="Strong_Sim_SC-resActLeft"><span class="command">lemma</span></span> resActLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span> <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span><span class="main">)</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> actCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Res Action<span class="main">)</span> 

<span class="keyword1" id="Strong_Sim_SC-resActRight"><span class="command">lemma</span></span> resActRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span> <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> resCases actCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Action<span class="main">)</span> 

<span class="keyword1" id="Strong_Sim_SC-resComm"><span class="command">lemma</span></span> resComm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">y</span> <span class="main">::</span> <span class="quoted">name</span> 
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="bound">Q</span><span class="main">)</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="bound">Q</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> resCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Res<span class="main">)</span>

<span class="keyword1"><span class="command">inductive_cases</span></span> bangCases<span class="main">[</span><span class="operator">simplified</span> ccs.distinct act.distinct<span class="main">]</span><span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚üº</span><span class="free">Œ±</span> <span class="main">‚â∫</span> <span class="free">P'</span>"</span></span>

<span class="keyword1" id="Strong_Sim_SC-bangUnfoldLeft"><span class="command">lemma</span></span> bangUnfoldLeft<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="main">!</span><span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def ccs.inject <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> bangCases<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_SC-bangUnfoldRight"><span class="command">lemma</span></span> bangUnfoldRight<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def ccs.inject <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Bang<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span> 

</pre>
</div><div id="Strong_Bisim">
<div class="head">
<h1>Theory Strong_Bisim</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Strong_Bisim
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Strong_Sim">Strong_Sim</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Strong_Bisim-monotonic"><span class="command">lemma</span></span> monotonic<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">A</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">B</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">A</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">A</span> <span class="main">‚äÜ</span> <span class="free">B</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">B</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def<span class="main">)</span>

<span class="keyword1" id="Strong_Bisim-monoCoinduct"><span class="command">lemma</span></span> monoCoinduct<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">x</span> <span class="bound">y</span> <span class="bound">xa</span> <span class="bound">xb</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span>
                      <span class="bound">x</span> <span class="main">‚â§</span> <span class="bound">y</span> <span class="main">‚üπ</span>
                      <span class="main">(</span><span class="bound">Q</span> <span class="main">‚Üù[</span><span class="main">{</span><span class="main">(</span><span class="bound">xb</span><span class="main">,</span> <span class="bound">xa</span><span class="main">)</span><span class="main">.</span> <span class="bound">x</span> <span class="bound">xb</span> <span class="bound">xa</span><span class="main">}</span><span class="main">]</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚ü∂</span>
                     <span class="main">(</span><span class="bound">Q</span> <span class="main">‚Üù[</span><span class="main">{</span><span class="main">(</span><span class="bound">xb</span><span class="main">,</span> <span class="bound">xa</span><span class="main">)</span><span class="main">.</span> <span class="bound">y</span> <span class="bound">xb</span> <span class="bound">xa</span><span class="main">}</span><span class="main">]</span> <span class="bound">P</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule</span> monotonic<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> le_funE<span class="main">)</span>

<span class="keyword1"><span class="command">coinductive_set</span></span> <span class="entity">bisim</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">‚ü¶</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚Üù[</span><span class="free">bisim</span><span class="main">]</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">;</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">bisim</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">bisim</span>"</span></span>
<span class="keyword2"><span class="keyword">monos</span></span> monoCoinduct

<span class="keyword1"><span class="command">abbreviation</span></span>
  <span class="entity">bisimJudge</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚àº</span> _"</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">]</span> 65<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚àº</span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚â°</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚àà</span> bisim"</span></span>

<span class="keyword1" id="Strong_Bisim-bisimCoinductAux"><span class="command">lemma</span></span> bisimCoinductAux<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">P</span> <span class="main">‚Üù[</span><span class="main">(</span><span class="free">X</span> <span class="main">‚à™</span> bisim<span class="main">)</span><span class="main">]</span> <span class="bound">Q</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">Q</span><span class="main">,</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">‚à™</span> bisim <span class="main">=</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚à®</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> bisim<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">coinduct</span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim-bisimCoinduct"><span class="command">lemma</span></span> bisimCoinduct<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cSim cSym<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù[</span><span class="main">(</span><span class="free">X</span> <span class="main">‚à™</span> bisim<span class="main">)</span><span class="main">]</span> <span class="bound">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">‚à™</span> bisim <span class="main">=</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚à®</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> bisim<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">coinduct</span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim-bisimWeakCoinductAux"><span class="command">lemma</span></span> bisimWeakCoinductAux<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù[</span><span class="free">X</span><span class="main">]</span> <span class="bound">S</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span> 

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinductAux<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> monotonic<span class="main">)</span>

<span class="keyword1" id="Strong_Bisim-bisimWeakCoinduct"><span class="command">lemma</span></span> bisimWeakCoinduct<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cSim cSym<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">P</span> <span class="main">‚Üù[</span><span class="free">X</span><span class="main">]</span> <span class="bound">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">Q</span><span class="main">,</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">‚à™</span> bisim <span class="main">=</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚à®</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> bisim<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> monotonic<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim-bisimE"><span class="command">lemma</span></span> bisimE<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span>bisim<span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚àº</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> bisim.cases<span class="main">)</span>

<span class="keyword1" id="Strong_Bisim-bisimI"><span class="command">lemma</span></span> bisimI<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span>bisim<span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚àº</span> <span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> bisim.intros<span class="main">)</span>

<span class="keyword1" id="Strong_Bisim-reflexive"><span class="command">lemma</span></span> reflexive<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">P</span><span class="main">)</span> <span class="main">‚àà</span> Id"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> reflexive<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim-symmetric"><span class="command">lemma</span></span> symmetric<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚àº</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms  
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bisimE<span class="main">)</span>

<span class="keyword1" id="Strong_Bisim-transitive"><span class="command">lemma</span></span> transitive<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚àº</span> <span class="free">R</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">)</span> <span class="main">‚àà</span> bisim <span class="keyword1">O</span> bisim"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> transitive <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimE<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim-bisimTransCoinduct"><span class="command">lemma</span></span> bisimTransCoinduct<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cSim cSym<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     rSim<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù[</span><span class="main">(</span>bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim<span class="main">)</span><span class="main">]</span> <span class="bound">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     rSym<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> reflexive<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimWeakCoinduct<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim‚Ä∫</span></span>
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚àº</span> <span class="skolem">R</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="skolem">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span> <span class="main">‚àº</span> <span class="skolem">Q</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚àº</span> <span class="skolem">R</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù[</span>bisim<span class="main">]</span> <span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bisimE<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="skolem">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚Üù[</span><span class="main">(</span>bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim<span class="main">)</span><span class="main">]</span> <span class="skolem">S</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> rSim<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"bisim <span class="keyword1">O</span> <span class="main">(</span>bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim<span class="main">)</span> <span class="main">‚äÜ</span> bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> transitive<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù[</span><span class="main">(</span>bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim<span class="main">)</span><span class="main">]</span> <span class="skolem">S</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Strong_Sim.transitive<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">S</span> <span class="main">‚àº</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">S</span> <span class="main">‚Üù[</span>bisim<span class="main">]</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bisimE<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span>bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim<span class="main">)</span> <span class="keyword1">O</span> bisim <span class="main">‚äÜ</span> bisim <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> transitive<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Strong_Sim.transitive<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSym <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> symmetric rSym<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Strong_Sim_Pres">
<div class="head">
<h1>Theory Strong_Sim_Pres</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Strong_Sim_Pres
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Strong_Sim">Strong_Sim</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Strong_Sim_Pres-actPres"><span class="command">lemma</span></span> actPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">a</span>    <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> actCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Action<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_Pres-sumPres"><span class="command">lemma</span></span> sumPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Rel</span> <span class="main">‚äÜ</span> <span class="free">Rel'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚Üù[</span><span class="free">Rel'</span><span class="main">]</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> sumCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Sum1 Sum2<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_Pres-parPresAux"><span class="command">lemma</span></span> parPresAux<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚Üù[</span><span class="free">Rel'</span><span class="main">]</span> <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">R</span><span class="main">,</span> <span class="free">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span> <span class="bound">Q'</span> <span class="bound">R'</span> <span class="bound">T'</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span><span class="main">;</span> <span class="main">(</span><span class="bound">R'</span><span class="main">,</span> <span class="bound">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">P'</span> <span class="main">‚à•</span> <span class="bound">R'</span><span class="main">,</span> <span class="bound">Q'</span> <span class="main">‚à•</span> <span class="bound">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel''</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚Üù[</span><span class="free">Rel''</span><span class="main">]</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> simI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">a</span> <span class="skolem">QT</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚à•</span> <span class="free">T</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">QT</span>‚Ä∫</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> parCases<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar1 <span class="skolem">Q'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Par1<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">R</span><span class="main">,</span> <span class="free">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="free">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar2 <span class="skolem">T'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚Üù[</span><span class="free">Rel'</span><span class="main">]</span> <span class="free">T</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">T</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">T'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Par2<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cComm <span class="skolem">Q'</span> <span class="skolem">T'</span> <span class="skolem">a</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚Üù[</span><span class="free">Rel'</span><span class="main">]</span> <span class="free">T</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">T</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">T'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">a</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Comm<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Sim_Pres-parPres"><span class="command">lemma</span></span> parPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">S</span> <span class="bound">T</span> <span class="bound">U</span><span class="main">.</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">S</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">,</span> <span class="bound">T</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚Üù[</span><span class="free">Rel'</span><span class="main">]</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> parPresAux<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Rel''<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free">Rel'</span></span></span></span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> Rel'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">Id</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> reflexive<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_Pres-resPres"><span class="command">lemma</span></span> resPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span>   <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span> <span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">R</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚Üù[</span><span class="free">Rel'</span><span class="main">]</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> simulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> resCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Res<span class="main">)</span>

<span class="keyword1" id="Strong_Sim_Pres-bangPres"><span class="command">lemma</span></span> bangPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="bound">S</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚Üù[</span>bangRel <span class="free">Rel</span><span class="main">]</span> <span class="main">!</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> simI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Pa</span> <span class="skolem">Œ±</span> <span class="skolem">Q'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="skolem">Pa</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">Pa</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bangInduct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar1 <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> 
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> simE<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Par1<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar2 <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cPar2
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Par2<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cComm <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">Q''</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù[</span><span class="free">Rel</span><span class="main">]</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> simE<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cComm
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">a</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üº</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Comm<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cBang <span class="skolem">Œ±</span> <span class="skolem">Q'</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRBangCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRBang <span class="skolem">P</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRBang<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cBang
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="skolem">P</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Bang<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> BRBang<span class="main">)</span> 
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">!</span><span class="free">Q</span> <span class="main">‚üº</span> <span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Strong_Bisim_Pres">
<div class="head">
<h1>Theory Strong_Bisim_Pres</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Strong_Bisim_Pres
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Strong_Bisim">Strong_Bisim</a> <a href="#Strong_Sim_Pres">Strong_Sim_Pres</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Strong_Bisim_Pres-actPres"><span class="command">lemma</span></span> actPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span> <span class="main">::</span> <span class="quoted">act</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚àº</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="bound">P</span><span class="main">)</span><span class="main">,</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="bound">Q</span><span class="main">)</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚àº</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span><span class="main">,</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> 
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimE <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> actPres<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_Pres-sumPres"><span class="command">lemma</span></span> sumPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚àº</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚äï</span> <span class="bound">R</span><span class="main">,</span> <span class="bound">Q</span> <span class="main">‚äï</span> <span class="bound">R</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="bound">R</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚àº</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> sumPres reflexive <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimE<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_Pres-parPres"><span class="command">lemma</span></span> parPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚àº</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">,</span> <span class="bound">Q</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="bound">R</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚àº</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> parPres <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimE<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_Pres-resPres"><span class="command">lemma</span></span> resPres<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚àº</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">P</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">Q</span><span class="main">)</span> <span class="main">|</span> <span class="bound">x</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚àº</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> resPres <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimE<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_Pres-bangPres"><span class="command">lemma</span></span> bangPres<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚àº</span> <span class="main">!</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel bisim"</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> BRBang<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimWeakCoinduct<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel bisim‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span><span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRBang <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
      <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚àº</span> <span class="skolem">Q</span>‚Ä∫</span></span> bisimE<span class="main">(</span>1<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="skolem">P</span> <span class="main">‚Üù[</span>bangRel bisim<span class="main">]</span> <span class="main">!</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangPres<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">R</span> <span class="skolem">T</span> <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚àº</span> <span class="skolem">T</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚Üù[</span>bisim<span class="main">]</span> <span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bisimE<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚àº</span> <span class="skolem">T</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚Üù[</span>bangRel bisim<span class="main">]</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel bisim‚Ä∫</span></span> bangRel.BRPar
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Strong_Sim_Pres.parPresAux<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSym <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">induct</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimE <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> BRPar BRBang<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Struct_Cong">
<div class="head">
<h1>Theory Struct_Cong</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Struct_Cong
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Agent">Agent</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">structCong</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚â°<span class="hidden">‚á©</span><sub>s</sub></span> _"</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span>
  Refl<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>
<span class="main">|</span> Sym<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚üπ</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>
<span class="main">|</span> Trans<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ü¶</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">;</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">R</span></span></span>"</span></span>

<span class="main">|</span> ParComm<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>
<span class="main">|</span> ParAssoc<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span><span class="main">)</span>"</span></span>
<span class="main">|</span> ParId<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="main">ùü¨</span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>

<span class="main">|</span> SumComm<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚äï</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚äï</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>
<span class="main">|</span> SumAssoc<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚äï</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚äï</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚äï</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚äï</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span><span class="main">)</span>"</span></span>
<span class="main">|</span> SumId<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚äï</span> <span class="main">ùü¨</span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>

<span class="main">|</span> ResNil<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="main">ùü¨</span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="main">ùü¨</span>"</span></span>
<span class="main">|</span> ScopeExtPar<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">‚ôØ</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚üπ</span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span>"</span></span>
<span class="main">|</span> ScopeExtSum<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">‚ôØ</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚üπ</span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚äï</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚äï</span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span>"</span></span>
<span class="main">|</span> ScopeAct<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">‚ôØ</span> <span class="free"><span class="bound"><span class="entity">Œ±</span></span></span> <span class="main">‚üπ</span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">Œ±</span></span></span><span class="main">.</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span><span class="main">)</span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">Œ±</span></span></span><span class="main">.</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span>"</span></span>
<span class="main">|</span> ScopeCommAux<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">‚â†</span> <span class="free"><span class="bound"><span class="entity">y</span></span></span> <span class="main">‚üπ</span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">‚¶à</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">y</span></span></span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free"><span class="bound"><span class="entity">x</span></span></span><span class="main">‚¶à</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span>"</span></span>

<span class="main">|</span> BangUnfold<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="keyword1"><span class="free">‚â°<span class="hidden">‚á©</span><sub>s</sub></span></span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚à•</span> <span class="main">!</span><span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>
<span class="keyword1"><span class="command">equivariance</span></span> structCong
<span class="keyword1"><span class="command">nominal_inductive</span></span> structCong
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> abs_fresh<span class="main">)</span>

<span class="keyword1" id="Struct_Cong-ScopeComm"><span class="command">lemma</span></span> ScopeComm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">y</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span> <span class="keyword1">‚â°<span class="hidden">‚á©</span><sub>s</sub></span> <span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">"<span class="free">x</span><span class="main">=</span><span class="free">y</span>"</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Refl ScopeCommAux<span class="main">)</span>

<span class="keyword2"><span class="keyword">end</span></span>

</pre>
</div><div id="Strong_Bisim_SC">
<div class="head">
<h1>Theory Strong_Bisim_SC</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Strong_Bisim_SC
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Strong_Sim_SC">Strong_Sim_SC</a> <a href="#Strong_Bisim_Pres">Strong_Bisim_Pres</a> <a href="#Struct_Cong">Struct_Cong</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Strong_Bisim_SC-resNil"><span class="command">lemma</span></span> resNil<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span> <span class="main">‚àº</span> <span class="main">ùü¨</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span><span class="main">,</span> <span class="main">ùü¨</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span><span class="main">,</span> <span class="main">ùü¨</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="main">ùü¨</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span>
      <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> resNilLeft resNilRight<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-scopeExt"><span class="command">lemma</span></span> scopeExt<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àº</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span><span class="main">,</span> <span class="bound">P</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">Q</span><span class="main">)</span> <span class="main">|</span> <span class="bound">x</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">x</span> <span class="main">‚ôØ</span> <span class="bound">P</span><span class="main">}</span> <span class="main">‚à™</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">Q</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span><span class="main">)</span> <span class="main">|</span> <span class="bound">x</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">x</span> <span class="main">‚ôØ</span> <span class="bound">P</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> scopeExtLeft scopeExtRight<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-sumComm"><span class="command">lemma</span></span> sumComm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span> <span class="main">‚àº</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">P</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚äï</span> <span class="free">P</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> sumComm reflexive<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-sumAssoc"><span class="command">lemma</span></span> sumAssoc<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚àº</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">)</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> sumAssocLeft sumAssocRight reflexive<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-sumId"><span class="command">lemma</span></span> sumId<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="main">ùü¨</span> <span class="main">‚àº</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="main">ùü¨</span><span class="main">,</span> <span class="free">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="main">ùü¨</span><span class="main">,</span> <span class="free">P</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="main">ùü¨</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> sumIdLeft sumIdRight reflexive<span class="main">)</span> 
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-parComm"><span class="command">lemma</span></span> parComm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span> <span class="main">‚àº</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">,</span> <span class="bound">Q</span> <span class="main">‚à•</span> <span class="bound">P</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> True<span class="main">}</span> <span class="main">‚à™</span> <span class="main">{</span><span class="main">(</span><span class="bound">Q</span> <span class="main">‚à•</span> <span class="bound">P</span><span class="main">,</span> <span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> True<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> parComm<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-parAssoc"><span class="command">lemma</span></span> parAssoc<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚àº</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">(</span><span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">,</span> <span class="bound">P</span> <span class="main">‚à•</span> <span class="main">(</span><span class="bound">Q</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">)</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="bound">R</span><span class="main">.</span> True<span class="main">}</span> <span class="main">‚à™</span>  
                                     <span class="main">{</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="main">(</span><span class="bound">Q</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="bound">R</span><span class="main">.</span> True<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> parAssocLeft parAssocRight<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-parId"><span class="command">lemma</span></span> parId<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span> <span class="main">‚àº</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span><span class="main">,</span> <span class="free">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span><span class="main">,</span> <span class="bound">P</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span><span class="main">.</span> True<span class="main">}</span> <span class="main">‚à™</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span><span class="main">.</span> True<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> parIdLeft parIdRight<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-scopeFresh"><span class="command">lemma</span></span> scopeFresh<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚àº</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚àº</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> parId<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> symmetric<span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span> <span class="main">‚àº</span> <span class="main">ùü¨</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> parComm<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">ùü¨</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚àº</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="main">ùü¨</span> <span class="main">‚à•</span> <span class="free">P</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> scopeExt<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> symmetric<span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="main">ùü¨</span> <span class="main">‚à•</span> <span class="free">P</span><span class="main">)</span> <span class="main">‚àº</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span><span class="main">)</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> resPres<span class="main"><span class="main">[</span></span><span class="operator">OF</span> parComm<span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span><span class="main">)</span> <span class="main">‚àº</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> scopeExt<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span>  <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span> <span class="main">‚àº</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span> <span class="main">‚à•</span> <span class="free">P</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> parComm<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">ùü¨</span> <span class="main">‚à•</span> <span class="free">P</span> <span class="main">‚àº</span> <span class="main">ùü¨</span> <span class="main">‚à•</span> <span class="free">P</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> parPres<span class="main"><span class="main">[</span></span><span class="operator">OF</span> resNil<span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">ùü¨</span> <span class="main">‚à•</span> <span class="free">P</span> <span class="main">‚àº</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> parComm<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="main">ùü¨</span> <span class="main">‚àº</span> <span class="free">P</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> parId<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">metis</span> transitive<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-scopeExtSum"><span class="command">lemma</span></span> scopeExtSum<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àº</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">Q</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">P</span>‚Ä∫</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> 
      <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> scopeExtSumLeft scopeExtSumRight reflexive scopeFresh scopeFresh<span class="main"><span class="main">[</span></span><span class="operator">THEN</span> symmetric<span class="main"><span class="main">]</span></span><span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-resAct"><span class="command">lemma</span></span> resAct<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span> <span class="main">::</span> <span class="quoted">act</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àº</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span><span class="main">)</span><span class="main">,</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span><span class="main">)</span><span class="main">,</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">}</span>"</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">x</span> <span class="main">‚ôØ</span> <span class="free">Œ±</span>‚Ä∫</span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> resActLeft resActRight reflexive<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-resComm"><span class="command">lemma</span></span> resComm<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">y</span> <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span> <span class="main">‚àº</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">P</span><span class="main">)</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">P</span><span class="main">)</span><span class="main">)</span> <span class="main">|</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">P</span><span class="main">.</span> True<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> resComm<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-bangUnfold"><span class="command">lemma</span></span> bangUnfold<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚àº</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="main">{</span><span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">,</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span><span class="main">)</span><span class="main">,</span> <span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">P</span><span class="main">,</span> <span class="main">!</span><span class="free">P</span><span class="main">)</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bisimCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> bangUnfoldLeft bangUnfoldRight reflexive<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Strong_Bisim_SC-bisimStructCong"><span class="command">lemma</span></span> bisimStructCong<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚â°<span class="hidden">‚á©</span><sub>s</sub></span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> Struct_Cong.strong_induct<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> reflexive symmetric transitive parComm parAssoc parId sumComm
   sumAssoc sumId resNil scopeExt scopeExtSum resAct resComm bangUnfold<span class="main">)</span>   

<span class="keyword2"><span class="keyword">end</span></span>  

</pre>
</div><div id="Weak_Bisim">
<div class="head">
<h1>Theory Weak_Bisim</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Bisim
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Sim">Weak_Sim</a> <a href="#Strong_Bisim_SC">Strong_Bisim_SC</a> <a href="#Struct_Cong">Struct_Cong</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Weak_Bisim-weakMonoCoinduct"><span class="command">lemma</span></span> weakMonoCoinduct<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">x</span> <span class="bound">y</span> <span class="bound">xa</span> <span class="bound">xb</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span>
                         <span class="bound">x</span> <span class="main">‚â§</span> <span class="bound">y</span> <span class="main">‚üπ</span>
                         <span class="main">(</span><span class="bound">Q</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="main">{</span><span class="main">(</span><span class="bound">xb</span><span class="main">,</span> <span class="bound">xa</span><span class="main">)</span><span class="main">.</span> <span class="bound">x</span> <span class="bound">xb</span> <span class="bound">xa</span><span class="main">}</span><span class="main">&gt;</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚ü∂</span>
                        <span class="main">(</span><span class="bound">Q</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="main">{</span><span class="main">(</span><span class="bound">xb</span><span class="main">,</span> <span class="bound">xa</span><span class="main">)</span><span class="main">.</span> <span class="bound">y</span> <span class="bound">xb</span> <span class="bound">xa</span><span class="main">}</span><span class="main">&gt;</span> <span class="bound">P</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule</span> weakMonotonic<span class="main">)</span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> le_funE<span class="main">)</span>

<span class="keyword1"><span class="command">coinductive_set</span></span> <span class="entity">weakBisimulation</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="main">‚ü¶</span><span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">weakBisimulation</span><span class="main">&gt;</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">;</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">weakBisimulation</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">weakBisimulation</span>"</span></span>
<span class="keyword2"><span class="keyword">monos</span></span> weakMonoCoinduct

<span class="keyword1"><span class="command">abbreviation</span></span>
  <span class="entity">weakBisimJudge</span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚âà</span> _"</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">]</span> 65<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚âà</span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚â°</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">P</span></span></span><span class="main">,</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span><span class="main">)</span> <span class="main">‚àà</span> weakBisimulation"</span></span>

<span class="keyword1" id="Weak_Bisim-weakBisimulationCoinductAux"><span class="command">lemma</span></span> weakBisimulationCoinductAux<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="main">(</span><span class="free">X</span> <span class="main">‚à™</span> weakBisimulation<span class="main">)</span><span class="main">&gt;</span> <span class="bound">Q</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">Q</span><span class="main">,</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">‚à™</span> weakBisimulation <span class="main">=</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚à®</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> weakBisimulation<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">coinduct</span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim-weakBisimulationCoinduct"><span class="command">lemma</span></span> weakBisimulationCoinduct<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cSim cSym<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="main">(</span><span class="free">X</span> <span class="main">‚à™</span> weakBisimulation<span class="main">)</span><span class="main">&gt;</span> <span class="bound">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">‚à™</span> weakBisimulation <span class="main">=</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚à®</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> weakBisimulation<span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">coinduct</span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim-weakBisimWeakCoinductAux"><span class="command">lemma</span></span> weakBisimWeakCoinductAux<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">X</span><span class="main">&gt;</span> <span class="bound">Q</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">Q</span><span class="main">,</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span> 

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimulationCoinductAux<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakMonotonic<span class="main">)</span>

<span class="keyword1" id="Weak_Bisim-weakBisimWeakCoinduct"><span class="command">lemma</span></span> weakBisimWeakCoinduct<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cSim cSym<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">X</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">X</span><span class="main">&gt;</span> <span class="bound">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">Q</span><span class="main">,</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">X</span> <span class="main">‚à™</span> <span class="free">weakBisim</span> <span class="main">=</span> <span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚à®</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">weakBisim</span><span class="main">}</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">with</span></span> assms <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimulationCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakMonotonic<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim-weakBisimulationE"><span class="command">lemma</span></span> weakBisimulationE<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚âà</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakBisimulation.cases<span class="main">)</span>

<span class="keyword1" id="Weak_Bisim-weakBisimulationI"><span class="command">lemma</span></span> weakBisimulationI<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚âà</span> <span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakBisimulation.intros<span class="main">)</span>

<span class="keyword1" id="Weak_Bisim-reflexive"><span class="command">lemma</span></span> reflexive<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">P</span><span class="main">)</span> <span class="main">‚àà</span> Id"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimulationCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Weak_Sim.reflexive<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim-symmetric"><span class="command">lemma</span></span> symmetric<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚âà</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms  
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakBisimulationE<span class="main">)</span>

<span class="keyword1" id="Weak_Bisim-transitive"><span class="command">lemma</span></span> transitive<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚âà</span> <span class="free">R</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">R</span><span class="main">)</span> <span class="main">‚àà</span> weakBisimulation <span class="keyword1">O</span> weakBisimulation"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimulationCoinduct<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">R</span><span class="main">)</span> <span class="main">‚àà</span> weakBisimulation <span class="keyword1">O</span> weakBisimulation‚Ä∫</span></span>
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">Q</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">‚âà</span> <span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">Q</span>‚Ä∫</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Q</span> <span class="main">‚âà</span> <span class="skolem">R</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakBisimulationE<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"weakBisimulation <span class="keyword1">O</span> weakBisimulation <span class="main">‚äÜ</span> <span class="main">(</span>weakBisimulation <span class="keyword1">O</span> weakBisimulation<span class="main">)</span> <span class="main">‚à™</span> weakBisimulation"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> weakBisimulationE<span class="main">(</span>1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Sim.transitive<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSym <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> symmetric<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim-bisimWeakBisimulation"><span class="command">lemma</span></span> bisimWeakBisimulation<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimWeakCoinduct<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> X<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">bisim</span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span>
  <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimE simWeakSim<span class="main">)</span>

<span class="keyword1" id="Weak_Bisim-structCongWeakBisimulation"><span class="command">lemma</span></span> structCongWeakBisimulation<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚â°<span class="hidden">‚á©</span><sub>s</sub></span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms

<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> bisimWeakBisimulation bisimStructCong<span class="main">)</span>

<span class="keyword1" id="Weak_Bisim-strongAppend"><span class="command">lemma</span></span> strongAppend<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>   <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel''</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> PSimQ<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     QSimR<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚Üù[</span><span class="free">Rel'</span><span class="main">]</span> <span class="free">R</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     Trans<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">Rel</span> <span class="keyword1">O</span> <span class="free">Rel'</span> <span class="main">‚äÜ</span> <span class="free">Rel''</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel''</span><span class="main">&gt;</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakSimulation_def simulation_def<span class="main">)</span> <span class="operator">blast</span>

<span class="keyword1" id="Weak_Bisim-weakBisimWeakUpto"><span class="command">lemma</span></span> weakBisimWeakUpto<span class="main">[</span><span class="operator">case_names</span> cSim cSym<span class="main">,</span> <span class="operator">consumes</span> 1<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> rSim<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="main">(</span>weakBisimulation <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim<span class="main">)</span><span class="main">&gt;</span> <span class="bound">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> rSym<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">Q</span><span class="main">,</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"weakBisimulation <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> weakBisimulation"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?Y</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"weakBisimulation <span class="keyword1">O</span> <span class="free">X</span> <span class="keyword1">O</span> bisim"</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Strong_Bisim.reflexive reflexive<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimWeakCoinduct<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">{</span></span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">P</span> <span class="skolem">P'</span> <span class="skolem">Q'</span> <span class="skolem">Q</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q'</span> <span class="main">‚âà</span> <span class="skolem">Q</span>"</span></span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> reflexive Strong_Bisim.reflexive<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Q'</span> <span class="main">‚âà</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q'</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakBisimulationE<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?Y</span> <span class="keyword1">O</span> weakBisimulation <span class="main">‚äÜ</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimWeakBisimulation transitive<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">P</span> <span class="skolem">Q</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?Y</span>"</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q'</span> <span class="main">‚àº</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P'</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="var">?Y</span><span class="main">&gt;</span> <span class="skolem">Q'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> rSim<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Q'</span> <span class="main">‚àº</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q'</span> <span class="main">‚Üù[</span>bisim<span class="main">]</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bisimE<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?Y</span> <span class="keyword1">O</span> bisim <span class="main">‚äÜ</span> <span class="var">?Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> Strong_Bisim.transitive<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P'</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="var">?Y</span><span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> strongAppend<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">P'</span>‚Ä∫</span></span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"weakBisimulation <span class="keyword1">O</span> <span class="var">?Y</span> <span class="main">‚äÜ</span> <span class="var">?Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> transitive<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="var">?Y</span><span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> weakBisimulationE<span class="main">(</span>1<span class="main">)</span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> Weak_Sim.transitive<span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P'</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="var">?X</span><span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Sim.transitive<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">P'</span>‚Ä∫</span></span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"weakBisimulation <span class="keyword1">O</span> <span class="var">?X</span> <span class="main">‚äÜ</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> transitive<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="var">?X</span><span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> weakBisimulationE<span class="main">(</span>1<span class="main">)</span>
        <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> Weak_Sim.transitive<span class="main">)</span>
    <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSym <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> bisimE rSym weakBisimulationE<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim-weakBisimUpto"><span class="command">lemma</span></span> weakBisimUpto<span class="main">[</span><span class="operator">case_names</span> cSim cSym<span class="main">,</span> <span class="operator">consumes</span> 1<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> p<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> rSim<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="main">(</span>weakBisimulation <span class="keyword1">O</span> <span class="main">(</span><span class="free">X</span> <span class="main">‚à™</span> weakBisimulation<span class="main">)</span> <span class="keyword1">O</span> bisim<span class="main">)</span><span class="main">&gt;</span> <span class="bound">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span> rSym<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">from</span></span> p <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">X</span> <span class="main">‚à™</span> weakBisimulation"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimWeakUpto<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> rSim rSym weakBisimulationE<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">rule</span> weakMonotonic<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakBisimulationE<span class="main">)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> relcomp_unfold<span class="main">)</span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">metis</span> reflexive Strong_Bisim.reflexive transitive<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Weak_Cong">
<div class="head">
<h1>Theory Weak_Cong</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Cong
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Cong_Sim">Weak_Cong_Sim</a> <a href="#Weak_Bisim">Weak_Bisim</a> <a href="#Strong_Bisim_SC">Strong_Bisim_SC</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">weakCongruence</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs <span class="main">‚áí</span> ccs <span class="main">‚áí</span> bool"</span></span> <span class="main">(</span><span class="quoted">"_ <span class="keyword1">‚âÖ</span> _"</span> <span class="main">[</span>70<span class="main">,</span> 70<span class="main">]</span> 65<span class="main">)</span>
<span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main"><span class="free">‚âÖ</span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚â°</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚àß</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="free"><span class="bound"><span class="entity">P</span></span></span>"</span></span>

<span class="keyword1" id="Weak_Cong-weakCongruenceE"><span class="command">lemma</span></span> weakCongruenceE<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongruence_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong-weakCongruenceI"><span class="command">lemma</span></span> weakCongruenceI<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ccs"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="free">P</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongruence_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong-weakCongISym"><span class="command">lemma</span></span> weakCongISym<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cSym cSim<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">Prop</span> <span class="free">P</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="main">‚üπ</span> <span class="free">Prop</span> <span class="bound">Q</span> <span class="bound">P</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="free">Prop</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="free">F</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="main">(</span><span class="free">F</span> <span class="bound">Q</span><span class="main">)</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">F</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongruence_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong-weakCongISym2"><span class="command">lemma</span></span> weakCongISym2<span class="main">[</span><span class="operator">consumes</span> 1<span class="main">,</span> <span class="operator">case_names</span> cSim<span class="main">]</span><span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚âÖ</span> <span class="bound">Q</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="free">F</span> <span class="bound">P</span><span class="main">)</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="main">(</span><span class="free">F</span> <span class="bound">Q</span><span class="main">)</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">F</span> <span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">F</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongruence_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong-reflexive"><span class="command">lemma</span></span> reflexive<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongruenceI Weak_Bisim.reflexive Weak_Cong_Sim.reflexive<span class="main">)</span>

<span class="keyword1" id="Weak_Cong-symmetric"><span class="command">lemma</span></span> symmetric<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚âÖ</span> <span class="free">P</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms  
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongruence_def<span class="main">)</span>

<span class="keyword1" id="Weak_Cong-transitive"><span class="command">lemma</span></span> transitive<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Q</span> <span class="main">‚âÖ</span> <span class="free">R</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?Prop</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">Œª</span><span class="bound">P</span> <span class="bound">R</span><span class="main">.</span> <span class="main">‚àÉ</span><span class="bound">Q</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚âÖ</span> <span class="bound">Q</span> <span class="main">‚àß</span> <span class="bound">Q</span> <span class="main">‚âÖ</span> <span class="bound">R</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?Prop</span> <span class="free">P</span> <span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakCongISym<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSym <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> symmetric<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="var">?Prop</span> <span class="skolem">P</span> <span class="skolem">R</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Q</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">‚âÖ</span> <span class="skolem">R</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongruenceE<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Q</span> <span class="main">‚âÖ</span> <span class="skolem">R</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongruenceE<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> Weak_Bisim.transitive <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"weakBisimulation <span class="keyword1">O</span> weakBisimulation <span class="main">‚äÜ</span> weakBisimulation"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> weakBisimulationE<span class="main">(</span>1<span class="main">)</span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Cong_Sim.transitive<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong-bisimWeakCongruence"><span class="command">lemma</span></span> bisimWeakCongruence<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚àº</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakCongISym<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSym <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bisimE<span class="main">)</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚àº</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù[</span>bisim<span class="main">]</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bisimE<span class="main">)</span>
  <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù[</span>weakBisimulation<span class="main">]</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bisimWeakBisimulation 
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> monotonic<span class="main">)</span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> simWeakSim<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong-structCongWeakCongruence"><span class="command">lemma</span></span> structCongWeakCongruence<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="keyword1">‚â°<span class="hidden">‚á©</span><sub>s</sub></span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> bisimWeakCongruence bisimStructCong<span class="main">)</span>

<span class="keyword1" id="Weak_Cong-weakCongruenceWeakBisimulation"><span class="command">lemma</span></span> weakCongruenceWeakBisimulation<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚âÖ</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimulationCoinduct<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Cong.weakCongruenceE<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù&lt;</span><span class="main">(</span><span class="var">?X</span> <span class="main">‚à™</span> weakBisimulation<span class="main">)</span><span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Weak_Cong_Sim.weakMonotonic<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongSimWeakSim<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSym <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> symmetric<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>


<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Weak_Sim_Pres">
<div class="head">
<h1>Theory Weak_Sim_Pres</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Sim_Pres
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Sim">Weak_Sim</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Weak_Sim_Pres-actPres"><span class="command">lemma</span></span> actPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">a</span>    <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakSimulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> actCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakAction<span class="main">)</span>

<span class="keyword1" id="Weak_Sim_Pres-sumPres"><span class="command">lemma</span></span> sumPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Rel</span> <span class="main">‚äÜ</span> <span class="free">Rel'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">S</span> <span class="bound">T</span> <span class="bound">U</span><span class="main">.</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">S</span> <span class="main">‚äï</span> <span class="bound">U</span><span class="main">,</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakSimI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">Œ±</span> <span class="skolem">QR</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">QR</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> sumCases<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSum1 <span class="skolem">Q'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> 
    <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakSimE<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakTransCases<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span> Base
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span> Step
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongSum1<span class="main">)</span>
      <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>
      <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Rel</span> <span class="main">‚äÜ</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSum2 <span class="skolem">R'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> transitionWeakCongTransition<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongSum2<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚ÄπId <span class="main">‚äÜ</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Sim_Pres-parPresAux"><span class="command">lemma</span></span> parPresAux<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">T</span>     <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>   <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel''</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">T</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">R</span><span class="main">,</span> <span class="free">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P'</span> <span class="bound">Q'</span> <span class="bound">R'</span> <span class="bound">T'</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="bound">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span><span class="main">;</span> <span class="main">(</span><span class="bound">R'</span><span class="main">,</span> <span class="bound">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">P'</span> <span class="main">‚à•</span> <span class="bound">R'</span><span class="main">,</span> <span class="bound">Q'</span> <span class="main">‚à•</span> <span class="bound">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel''</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel''</span><span class="main">&gt;</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">T</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakSimI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">Œ±</span> <span class="skolem">QT</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚à•</span> <span class="free">T</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">QT</span>‚Ä∫</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> parCases<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar1 <span class="skolem">Q'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakPar1<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">R</span><span class="main">,</span> <span class="free">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="free">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar2 <span class="skolem">T'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">T</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">T</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">T'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakPar2<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cComm <span class="skolem">Q'</span> <span class="skolem">T'</span> <span class="skolem">Œ±</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">T</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">T</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="skolem">Œ±</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">T'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="main">(</span>coAction <span class="skolem">Œ±</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="main">(</span>coAction <span class="skolem">Œ±</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Œ±</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üπ</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongSync <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="skolem">T'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel''</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Sim_Pres-parPres"><span class="command">lemma</span></span> parPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">S</span> <span class="bound">T</span> <span class="bound">U</span><span class="main">.</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">S</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">,</span> <span class="bound">T</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> parPresAux<span class="main"><span class="main">[</span></span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Rel'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="quoted">Id</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> Rel''<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free">Rel'</span></span></span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> reflexive<span class="main">)</span>

<span class="keyword1" id="Weak_Sim_Pres-resPres"><span class="command">lemma</span></span> resPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span>   <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span> <span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">R</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakSimulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> resCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakRes<span class="main">)</span>

<span class="keyword1" id="Weak_Sim_Pres-bangPres"><span class="command">lemma</span></span> bangPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="bound">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     Par<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span> <span class="bound">T</span> <span class="bound">U</span><span class="main">.</span> <span class="main">‚ü¶</span><span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span><span class="main">;</span> <span class="main">(</span><span class="bound">T</span><span class="main">,</span> <span class="bound">U</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span><span class="main">‚üß</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">R</span> <span class="main">‚à•</span> <span class="bound">T</span><span class="main">,</span> <span class="bound">S</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C2<span class="main">:</span> <span class="quoted"><span class="quoted">"bangRel <span class="free">Rel</span> <span class="main">‚äÜ</span> <span class="free">Rel'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C3<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span> <span class="main">‚à•</span> <span class="main">!</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="main">!</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="main">!</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakSimI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Pa</span> <span class="skolem">Œ±</span> <span class="skolem">Q'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="skolem">Pa</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">Pa</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bangInduct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar1 <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> 
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakSimE<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakPar1<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> C2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Par<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar2 <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cPar2
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakPar2<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Par<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cComm <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">Q''</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakSimE<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cComm
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">a</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongSync <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Par<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cBang <span class="skolem">Œ±</span> <span class="skolem">Q'</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRBangCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRBang <span class="skolem">P</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRBang<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cBang
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> 
        <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
        <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakTransCases<span class="main">)</span>
          <span class="keyword3"><span class="command">case</span></span> Base
          <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="main">!</span><span class="skolem">P</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
          <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span> <span class="main">=</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> C3<span class="main">)</span>
          <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">next</span></span>
          <span class="keyword3"><span class="command">case</span></span> Step
          <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongRepl<span class="main">)</span>
          <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ<span class="hidden">‚áß</span><sup>^</sup></span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakTrans_def<span class="main">)</span>
          <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">qed</span></span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> BRBang<span class="main">)</span> 
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">!</span><span class="free">Q</span> <span class="main">‚üº</span> <span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Weak_Bisim_Pres">
<div class="head">
<h1>Theory Weak_Bisim_Pres</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Bisim_Pres
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Bisim">Weak_Bisim</a> <a href="#Weak_Sim_Pres">Weak_Sim_Pres</a> <a href="#Strong_Bisim_SC">Strong_Bisim_SC</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Weak_Bisim_Pres-actPres"><span class="command">lemma</span></span> actPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span> <span class="main">::</span> <span class="quoted">act</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚âà</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="bound">P</span><span class="main">)</span><span class="main">,</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="bound">Q</span><span class="main">)</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚âà</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span><span class="main">,</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span> 
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimulationCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakBisimulationE <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> actPres<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim_Pres-parPres"><span class="command">lemma</span></span> parPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚âà</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="bound">P</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">,</span> <span class="bound">Q</span> <span class="main">‚à•</span> <span class="bound">R</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span> <span class="bound">R</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚âà</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimulationCoinduct<span class="main"><span class="keyword3">,</span></span> <span class="operator">auto</span><span class="main">)</span> 
      <span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> parPres <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakBisimulationE<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim_Pres-resPres"><span class="command">lemma</span></span> resPres<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚âà</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">P</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">x</span><span class="main">‚¶à</span><span class="bound">Q</span><span class="main">)</span> <span class="main">|</span> <span class="bound">x</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚âà</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimulationCoinduct<span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> resPres <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakBisimulationE<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Bisim_Pres-bangPres"><span class="command">lemma</span></span> bangPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âà</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚âà</span> <span class="main">!</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"bangRel weakBisimulation"</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?Y</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"weakBisimulation <span class="keyword1">O</span> <span class="var">?X</span> <span class="keyword1">O</span> bisim"</span></span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">R</span> <span class="skolem">T</span> <span class="skolem">P</span> <span class="skolem">Q</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚âà</span> <span class="skolem">T</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?Y</span>"</span></span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?Y</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="skolem"><span class="skolem">Q'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">Q'</span> <span class="main">‚àº</span> <span class="skolem">Q</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚à•</span> <span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">R</span> <span class="main">‚à•</span> <span class="skolem">P'</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">metis</span> parPres bisimWeakBisimulation transitive parComm<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚âà</span> <span class="skolem">T</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R</span> <span class="main">‚à•</span> <span class="skolem">P'</span><span class="main">,</span> <span class="skolem">T</span> <span class="main">‚à•</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> BRPar<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Q'</span> <span class="main">‚àº</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span> <span class="main">‚à•</span> <span class="skolem">Q'</span> <span class="main">‚àº</span> <span class="skolem">T</span> <span class="main">‚à•</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">metis</span> Strong_Bisim_Pres.parPres Strong_Bisim.transitive parComm<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R</span> <span class="main">‚à•</span> <span class="skolem">P</span><span class="main">,</span> <span class="skolem">T</span> <span class="main">‚à•</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">}</span></span> <span class="keyword1"><span class="command">note</span></span> BRParAux <span class="main">=</span> this

  <span class="keyword1"><span class="command">from</span></span> assms <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> BRBang<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">coinduct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakBisimWeakUpto<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel weakBisimulation‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span><span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRBang <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
      <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">Q</span>‚Ä∫</span></span> weakBisimulationE<span class="main">(</span>1<span class="main">)</span> BRParAux
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?X</span> <span class="main">‚äÜ</span> <span class="var">?Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Strong_Bisim.reflexive reflexive<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">{</span></span>
        <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">P</span> <span class="skolem">Q</span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?Y</span>"</span></span>
        <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?Y</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> bangUnfold
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> Strong_Bisim.transitive transitive bisimWeakBisimulation<span class="main">)</span>
      <span class="keyword1"><span class="command">}</span></span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangPres<span class="main">)</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">R</span> <span class="skolem">T</span> <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚âà</span> <span class="skolem">T</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakBisimulationE<span class="main">)</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">note</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚âà</span> <span class="skolem">T</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚Üù<span class="hidden">‚áß</span><sup>^</sup>&lt;</span><span class="var">?Y</span><span class="main">&gt;</span> <span class="skolem">Q</span>‚Ä∫</span></span> 
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?Y</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> Strong_Bisim.reflexive reflexive<span class="main">)</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> BRParAux <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Sim_Pres.parPresAux<span class="main">)</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSym <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">induct</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakBisimulationE <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> BRPar BRBang<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>

</pre>
</div><div id="Weak_Cong_Sim_Pres">
<div class="head">
<h1>Theory Weak_Cong_Sim_Pres</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Cong_Sim_Pres
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Cong_Sim">Weak_Cong_Sim</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Weak_Cong_Sim_Pres-actPres"><span class="command">lemma</span></span> actPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">a</span>    <span class="main">::</span> <span class="quoted">name</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongSimulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> actCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongAction<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Sim_Pres-sumPres"><span class="command">lemma</span></span> sumPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="free">Rel</span> <span class="main">‚äÜ</span> <span class="free">Rel'</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"Id <span class="main">‚äÜ</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚Üù&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">force</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongSimulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> sumCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongSum1 weakCongSum2 transitionWeakCongTransition<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Sim_Pres-parPres"><span class="command">lemma</span></span> parPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">S</span> <span class="bound">T</span> <span class="bound">U</span><span class="main">.</span> <span class="main">(</span><span class="bound">S</span><span class="main">,</span> <span class="bound">T</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="bound">S</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">,</span> <span class="bound">T</span> <span class="main">‚à•</span> <span class="bound">U</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚Üù&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakSimI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">Œ±</span> <span class="skolem">QR</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">QR</span>‚Ä∫</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> parCases<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar1 <span class="skolem">Q'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongPar1<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="free">R</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar2 <span class="skolem">R'</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> transitionWeakCongTransition<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="free">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongPar2<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cComm <span class="skolem">Q'</span> <span class="skolem">R'</span> <span class="skolem">Œ±</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakSimE<span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">R</span> <span class="main">‚üº</span><span class="main">(</span>coAction <span class="skolem">Œ±</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">R</span> <span class="main">‚üπ</span><span class="main">(</span>coAction <span class="skolem">Œ±</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span>
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> transitionWeakCongTransition<span class="main">)</span>
    <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚üπ</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">Œ±</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span>‚Ä∫</span></span> 
      <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongSync<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong_Sim_Pres-resPres"><span class="command">lemma</span></span> resPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>   <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span>   <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span> <span class="bound">y</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="main">(</span><span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">R</span><span class="main">,</span> <span class="keyword1">‚¶áŒΩ</span><span class="bound">y</span><span class="main">‚¶à</span><span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">fastforce</span> <span class="quasi_keyword">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> weakCongSimulation_def <span class="quasi_keyword">elim</span><span class="main"><span class="main">:</span></span> resCases <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongRes<span class="main">)</span>

<span class="keyword1" id="Weak_Cong_Sim_Pres-bangPres"><span class="command">lemma</span></span> bangPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span>    <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel</span>  <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Rel'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"<span class="main">(</span>ccs <span class="main">√ó</span> ccs<span class="main">)</span> set"</span></span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">R</span> <span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">R</span><span class="main">,</span> <span class="bound">S</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span> <span class="main">‚üπ</span> <span class="bound">R</span> <span class="main">‚Üù&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="bound">S</span>"</span></span>
  <span class="keyword2"><span class="keyword">and</span></span>     C2<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="free">Rel</span> <span class="main">‚äÜ</span> <span class="free">Rel'</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚Üù&lt;</span>bangRel <span class="free">Rel'</span><span class="main">&gt;</span> <span class="main">!</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakSimI<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>Sim <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
  <span class="keyword1"><span class="command">{</span></span>
    <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Pa</span> <span class="skolem">Œ±</span> <span class="skolem">Q'</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚àÉ</span><span class="bound">P'</span><span class="main">.</span> <span class="skolem">Pa</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="bound">P'</span> <span class="main">‚àß</span> <span class="main">(</span><span class="bound">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span>
    <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">nominal_induct</span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">Pa</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bangInduct<span class="main">)</span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar1 <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> 
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakSimE<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongPar1<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> C2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">induct</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> bangRel.BRPar bangRel.BRBang<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cPar2 <span class="skolem">Œ±</span> <span class="skolem">Q'</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cPar2
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongPar2<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>‚Ä∫</span></span> C2 <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span> 
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cComm <span class="skolem">a</span> <span class="skolem">Q'</span> <span class="skolem">Q''</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRParCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">P</span> <span class="skolem">R</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù&lt;</span><span class="free">Rel'</span><span class="main">&gt;</span> <span class="free">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> C1<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="free">Q</span> <span class="main">‚üº</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">blast</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakSimE<span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">R'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚üπ</span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cComm
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">a</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚üπ</span><span class="main">(</span>coAction <span class="skolem">a</span><span class="main">)</span> <span class="main">‚â∫</span> <span class="skolem">R'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">a</span> <span class="main">‚â†</span> <span class="keyword1">œÑ</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">R</span> <span class="main">‚üπ</span><span class="keyword1">œÑ</span> <span class="main">‚â∫</span> <span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongSync<span class="main">)</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel'</span>‚Ä∫</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span> <span class="main">‚à•</span> <span class="skolem">R'</span><span class="main">,</span> <span class="skolem">Q'</span> <span class="main">‚à•</span> <span class="skolem">Q''</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span>
          <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cBang <span class="skolem">Œ±</span> <span class="skolem">Q'</span> <span class="skolem">Pa</span><span class="main">)</span>
      <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">Pa</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>‚Ä∫</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> BRBangCases<span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRBang <span class="skolem">P</span><span class="main">)</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRBang<span class="main">)</span>
        <span class="keyword1"><span class="command">with</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span><span class="main">,</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangRel.BRPar<span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">P'</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>"</span></span> <span class="keyword1"><span class="command">using</span></span> cBang
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚à•</span> <span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="skolem">P</span> <span class="main">‚üπ</span><span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">P'</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongRepl<span class="main">)</span>
        <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="skolem">P'</span><span class="main">,</span> <span class="skolem">Q'</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">(</span><span class="free">P</span><span class="main">,</span> <span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="free">Rel</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="main">!</span><span class="free">P</span><span class="main">,</span> <span class="main">!</span><span class="free">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel <span class="free">Rel</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> BRBang<span class="main">)</span> 
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="main">!</span><span class="free">Q</span> <span class="main">‚üº</span> <span class="skolem">Œ±</span> <span class="main">‚â∫</span> <span class="skolem">Q'</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div><div id="Weak_Cong_Pres">
<div class="head">
<h1>Theory Weak_Cong_Pres</h1>
</div>
<pre class="source"><span class="comment1">(* 
   Title: The Calculus of Communicating Systems   
   Author/Maintainer: Jesper Bengtson (jebe@itu.dk), 2012
*)</span>
<span class="keyword1"><span class="command">theory</span></span> Weak_Cong_Pres
  <span class="keyword2"><span class="keyword">imports</span></span> <a href="#Weak_Cong">Weak_Cong</a> <a href="#Weak_Bisim_Pres">Weak_Bisim_Pres</a> <a href="#Weak_Cong_Sim_Pres">Weak_Cong_Sim_Pres</a>
<span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1" id="Weak_Cong_Pres-actPres"><span class="command">lemma</span></span> actPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Œ±</span> <span class="main">::</span> <span class="quoted">act</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">P</span><span class="main">)</span> <span class="main">‚âÖ</span> <span class="free">Œ±</span><span class="main">.</span><span class="main">(</span><span class="free">Q</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakCongISym2<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongruenceWeakBisimulation<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> actPres<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong_Pres-sumPres"><span class="command">lemma</span></span> sumPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚äï</span> <span class="free">R</span> <span class="main">‚âÖ</span> <span class="free">Q</span> <span class="main">‚äï</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakCongISym2<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongruenceE<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> Weak_Bisim.reflexive
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule_tac</span> sumPres<span class="main">)</span> <span class="operator">auto</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong_Pres-parPres"><span class="command">lemma</span></span> parPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">R</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚à•</span> <span class="free">R</span> <span class="main">‚âÖ</span> <span class="free">Q</span> <span class="main">‚à•</span> <span class="free">R</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakCongISym2<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongruenceE<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongruenceWeakBisimulation<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> Weak_Bisim_Pres.parPres
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> parPres<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong_Pres-resPres"><span class="command">lemma</span></span> resPres<span class="main">:</span> 
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">x</span> <span class="main">::</span> <span class="quoted">name</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">P</span> <span class="main">‚âÖ</span> <span class="keyword1">‚¶áŒΩ</span><span class="free">x</span><span class="main">‚¶à</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakCongISym2<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> weakCongruenceE<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> Weak_Bisim_Pres.resPres
    <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> resPres<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong_Pres-weakBisimBangRel"><span class="command">lemma</span></span> weakBisimBangRel<span class="main">:</span> <span class="quoted"><span class="quoted">"bangRel weakBisimulation <span class="main">‚äÜ</span> weakBisimulation"</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">auto</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">P</span> <span class="skolem">Q</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> bangRel weakBisimulation"</span></span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">Q</span>"</span></span>
  <span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> bangRel.induct<span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRBang <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="skolem">P</span> <span class="main">‚âà</span> <span class="main">!</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Bisim_Pres.bangPres<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>BRPar <span class="skolem">R</span> <span class="skolem">T</span> <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">R</span> <span class="main">‚âà</span> <span class="skolem">T</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚à•</span> <span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">T</span> <span class="main">‚à•</span> <span class="skolem">P</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Bisim_Pres.parPres<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">P</span> <span class="main">‚à•</span> <span class="skolem">T</span> <span class="main">‚âà</span> <span class="skolem">Q</span> <span class="main">‚à•</span> <span class="skolem">T</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Bisim_Pres.parPres<span class="main">)</span>
    <span class="keyword1"><span class="command">hence</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">T</span> <span class="main">‚à•</span> <span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">T</span> <span class="main">‚à•</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">metis</span> bisimWeakBisimulation Weak_Bisim.transitive parComm<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">"<span class="skolem">R</span> <span class="main">‚à•</span> <span class="skolem">P</span> <span class="main">‚âà</span> <span class="skolem">T</span> <span class="main">‚à•</span> <span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Bisim.transitive<span class="main">)</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Weak_Cong_Pres-bangPres"><span class="command">lemma</span></span> bangPres<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">P</span> <span class="main">::</span> <span class="quoted">ccs</span>
  <span class="keyword2"><span class="keyword">and</span></span>   <span class="free">Q</span> <span class="main">::</span> <span class="quoted">ccs</span>

  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">"<span class="free">P</span> <span class="main">‚âÖ</span> <span class="free">Q</span>"</span></span>

  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="free">P</span> <span class="main">‚âÖ</span> <span class="main">!</span><span class="free">Q</span>"</span></span>
<span class="keyword1"><span class="command">using</span></span> assms
<span class="keyword1"><span class="command">proof</span></span><span class="main">(</span><span class="operator">induct</span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> weakCongISym2<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span><span class="main">(</span>cSim <span class="skolem">P</span> <span class="skolem">Q</span><span class="main">)</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?X</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">"<span class="main">{</span><span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">|</span> <span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="bound">P</span> <span class="main">‚âÖ</span> <span class="bound">Q</span><span class="main">}</span>"</span></span>
  <span class="keyword1"><span class="command">from</span></span> <span class="quoted"><span class="quoted">‚Äπ<span class="skolem">P</span> <span class="main">‚âÖ</span> <span class="skolem">Q</span>‚Ä∫</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">(</span><span class="skolem">P</span><span class="main">,</span> <span class="skolem">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span>"</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">‚ãÄ</span><span class="bound">P</span> <span class="bound">Q</span><span class="main">.</span> <span class="main">(</span><span class="bound">P</span><span class="main">,</span> <span class="bound">Q</span><span class="main">)</span> <span class="main">‚àà</span> <span class="var">?X</span> <span class="main">‚üπ</span> <span class="bound">P</span> <span class="main">‚Üù&lt;</span>weakBisimulation<span class="main">&gt;</span> <span class="bound">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">dest</span><span class="main"><span class="main">:</span></span> weakCongruenceE<span class="main">)</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="var">?X</span> <span class="main">‚äÜ</span> weakBisimulation"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">intro</span><span class="main"><span class="main">:</span></span> weakCongruenceWeakBisimulation<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">"<span class="main">!</span><span class="skolem">P</span> <span class="main">‚Üù&lt;</span>bangRel weakBisimulation<span class="main">&gt;</span> <span class="main">!</span><span class="skolem">Q</span>"</span></span> <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> bangPres<span class="main">)</span>
  <span class="keyword3"><span class="command">thus</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span> <span class="keyword1"><span class="command">using</span></span> weakBisimBangRel <span class="keyword1"><span class="command">by</span></span><span class="main">(</span><span class="operator">rule</span> Weak_Cong_Sim.weakMonotonic<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div>