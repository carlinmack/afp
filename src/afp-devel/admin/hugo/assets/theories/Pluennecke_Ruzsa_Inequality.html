<div id='Pluennecke_Ruzsa_Inequality'>>
</head>


<body>
<div class="head">
<h1>Theory Pluennecke_Ruzsa_Inequality</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The Pl\"{u}nnecke-Ruzsa Inequality</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Authors: Angeliki Koutsoukou-Argyraki and Lawrence C. Paulson, University of Cambridge.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>We formalise Pl\"{u}nnecke's inequality and the Pl\"{u}nnecke-Ruzsa inequality, 
</span><span>following the notes by Timothy Gowers: "Introduction to Additive
</span><span>Combinatorics" (2022) for the University of Cambridge. To this end, we first introduce basic definitions
</span><span>and prove elementary facts on sumsets and difference sets. Then, we show (two versions of)
</span><span>the Ruzsa triangle inequality. We follow with a proof due to Petridis.</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Pluennecke_Ruzsa_Inequality</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
    </span><span class="quoted"><span>"</span><a href="../Jacobson_Basic_Algebra/Ring_Theory.html"><span>Jacobson_Basic_Algebra.Ring_Theory</span></a><span>"</span></span><span>
    </span><a href="../../HOL/HOL/Complex_Main.html"><span>Complex_Main</span></a><span>

</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span>plus</span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>+</span></span><span>"</span></span><span> 65</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span>minus</span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>-</span></span><span>"</span></span><span> 65</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span>uminus</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>-</span></span><span> </span><span>_</span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>81</span><span class="main"><span>]</span></span><span> 80</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Key definitions (sumset, difference set) and basic lemmas</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Working in an arbitrary Abelian group, with additive syntax</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.axioms|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.intro|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.axioms|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.intro|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group_def|axiom"><span class="entity_def" id="offset_908..914">locale</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group|locale"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group|const"><span>additive_abelian_group</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Jacobson_Basic_Algebra/Group_Theory.html#Group_Theory.abelian_group|locale"><span>abelian_group</span></a><span> </span><span class="quoted"><span class="free"><span>G</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="free"><span>(â)</span></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="main"><span class="free"><span>ð¬</span></span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>addition</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>â</span></span><span>"</span></span><span> 65</span><span class="main"><span>)</span></span><span>  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>zero</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>ð¬</span></span><span>"</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.G_minus|const"><span class="entity_def" id="offset_1039..1046">G_minus</span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>â</span></span><span>"</span></span><span> 70</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span class="free"><span>â</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span class="free"><span>â</span></span></span><span> </span><span>inverse</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.inverse_closed|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.inverse_closed|thm"><span class="entity_def" id="offset_1120..1134">inverse_closed</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>inverse</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Sumsets</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.inducts|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.simps|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.induct|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.cases|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.intros|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp_sumset_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.inducts|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.simps|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.induct|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.cases|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.intros|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.inducts|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.simps|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.induct|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.cases|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.intros|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp_sumset_eq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.inducts|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.simps|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.induct|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.cases|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.intros|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_def|axiom"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp_def|axiom"><span class="entity_def" id="offset_1198..1211">inductive_set</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.cong|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.cong|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.cong|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.cong|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp|const"><span class="entity_def" id="offset_1212..1218">sumset</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="entity"><span>A</span></span><span> </span><span class="entity"><span>B</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.sumsetI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.sumsetI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset.sumsetI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetp.sumsetI|thm"><span>sumsetI</span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span class="free"><span>â</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>sumset</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_eq|thm"><span class="entity_def" id="offset_1344..1353">sumset_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>c</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span class="free"><span>â</span></span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1198..1211"><span>sumset.simps</span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1198..1211"><span>sumset.cases</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset|thm"><span class="entity_def" id="offset_1467..1473">sumset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span> </span><span class="main"><span class="free"><span>â</span></span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_carrier|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_carrier|thm"><span class="entity_def" id="offset_1559..1580">sumset_subset_carrier</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_Int_carrier|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_Int_carrier|thm"><span>sumset_Int_carrier</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Int_absorb2</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1559..1580"><span>sumset_subset_carrier</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_mono|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_mono|thm"><span class="entity_def" id="offset_1749..1760">sumset_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span class="free"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>B'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A'</span></span><span> </span><span class="free"><span>B'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_insert1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_insert1|thm"><span>sumset_insert1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>NO_MATCH</span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_insert2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_insert2|thm"><span class="entity_def" id="offset_1963..1977">sumset_insert2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>NO_MATCH</span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_Un1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_Un1|thm"><span>sumset_subset_Un1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="free"><span>A'</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_Un2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_Un2|thm"><span class="entity_def" id="offset_2183..2200">sumset_subset_Un2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="free"><span>B'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_insert|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_insert(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_insert(1)|thm"><span>sumset_subset_insert</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_Un|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_Un(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_subset_Un(1)|thm"><span>sumset_subset_Un</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span class="main"><span>âª</span></span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>âª</span></span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_empty|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_empty(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_empty(1)|thm"><span>sumset_empty</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>{}</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2616..2621">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_empty&apos;|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_empty&apos;(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_empty&apos;(1)|thm"><span class="entity_def" id="offset_2622..2635">sumset_empty'</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_2616..2621"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_is_empty_iff|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_is_empty_iff|thm"><span>sumset_is_empty_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_D|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_D(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_D(1)|thm"><span>sumset_D</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span class="free"><span>ð¬</span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span class="free"><span>ð¬</span></span></span><span class="main"><span>}</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_Int_carrier_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_Int_carrier_eq(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_Int_carrier_eq(1)|thm"><span class="entity_def" id="offset_2956..2977">sumset_Int_carrier_eq</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_assoc|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_assoc|thm"><span class="entity_def" id="offset_3085..3097">sumset_assoc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span> </span><span>associative</span><span> </span><span>Bex_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_commute|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_commute|thm"><span class="entity_def" id="offset_3219..3233">sumset_commute</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>meson</span></span><span> </span><span>Int_iff</span><span> </span><span>commutative</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3325..3330">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.finite_sumset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.finite_sumset|thm"><span class="entity_def" id="offset_3331..3344">finite_sumset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3325..3330"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3448..3453">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.finite_sumset&apos;|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.finite_sumset&apos;|thm"><span class="entity_def" id="offset_3454..3468">finite_sumset'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3448..3453"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetdiff_sing|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumsetdiff_sing|thm"><span>sumsetdiff_sing</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>-</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_singleton_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_singleton_eq|thm"><span class="entity_def" id="offset_3696..3720">card_sumset_singleton_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_3838..3842">True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span>â</span></span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span>â</span></span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>inj_on_def</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3838..3842"><span>True</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3838..3842"><span>True</span></a><span> </span><span>card_image</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4090..4095">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_le|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_le|thm"><span class="entity_def" id="offset_4096..4110">card_sumset_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4090..4095"><span>assms</span></a><span> </span><span>card_mono</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3696..3720"><span>card_sumset_singleton_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4229..4234">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.infinite_sumset_aux|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.infinite_sumset_aux|thm"><span class="entity_def" id="offset_4235..4254">infinite_sumset_aux</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>infinite</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>infinite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_4364..4369">False</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_4392..4393">b</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4229..4234"><span>assms</span></a><span> </span><span>commutative</span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span class="free"><span>(â)</span></span></span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1467..1473"><span>sumset</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="free"><span>(â)</span></span></span><span class="skolem"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>IntD2</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4392..4393"><span>b</span></a><span> </span><span>inj_onI</span><span> </span><span>invertible</span><span> </span><span>invertible_left_cancel</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4364..4369"><span>False</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4229..4234"><span>assms</span></a><span> </span><span>inj_on_finite</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.infinite_sumset_iff|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.infinite_sumset_iff|thm"><span class="entity_def" id="offset_4715..4734">infinite_sumset_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>infinite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>infinite</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span>infinite</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3454..3468"><span>finite_sumset'</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4235..4254"><span>infinite_sumset_aux</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3219..3233"><span>sumset_commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_le_sumset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_le_sumset|thm"><span class="entity_def" id="offset_4923..4937">card_le_sumset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_4949..4950">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_4989..4990">B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span class="free"><span>(â)</span></span></span><span> </span><span class="main"><span>(</span></span><span>inverse</span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4949..4950"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4989..4990"><span>B</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>clarsimp</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1467..1473"><span>sumset</span></a><span> </span><span>image_iff</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_absorb2</span><span> </span><span>Int_iff</span><span> </span><span>invertible</span><span> </span><span>invertible_left_inverse2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4949..4950"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4989..4990"><span>B</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span>  </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3331..3344"><span>finite_sumset</span></a><span> </span><span>surj_card_le</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_0_iff&apos;|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_0_iff&apos;|thm"><span class="entity_def" id="offset_5305..5323">card_sumset_0_iff'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>infinite</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span>infinite</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>card_eq_0_iff</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4715..4734"><span>infinite_sumset_iff</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_2622..2635"><span>sumset_empty'</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5562..5567">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_0_iff|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_0_iff|thm"><span class="entity_def" id="offset_5568..5585">card_sumset_0_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span>card</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span>card</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5562..5567"><span>assms</span></a><span> </span><span>le_iff_inf</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5305..5323"><span>card_sumset_0_iff'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5721..5726">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_leq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_leq|thm"><span>card_sumset_leq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>Suc</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>choose</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5721..5726"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5568..5585"><span>card_sumset_0_iff</span></a><span> </span><span>zero_le</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_5947..5950">Suc</span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_5981..5982">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Zero_neq_Suc</span><span> </span><span>card_eq_0_iff</span><span> </span><span>subset_empty</span><span> </span><span>subset_eq</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6092..6093">n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5947..5950"><span>Suc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>card_Diff_singleton</span><span> </span><span>diff_Suc_Suc</span><span> </span><span>minus_nat.diff_0</span><span> </span><span>One_nat_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5947..5950"><span>Suc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Zero_neq_Suc</span><span> </span><span>card.infinite</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5981..5982"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span> </span><span>commutative</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5981..5982"><span>a</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4096..4110"><span>card_sumset_le</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>order_trans</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>card_Un_le</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>choose</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5947..5950"><span>Suc</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5981..5982"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add_le_mono1</span><span> </span><span>insert_Diff_single</span><span> </span><span>insert_absorb</span><span> </span><span>insert_subset</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6092..6093"><span>n</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>choose</span></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>numeral_2_eq_2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Iterated sumsets</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_def_raw|axiom"><span class="entity_def" id="offset_6857..6867">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated.cong|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated.cong|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated|const"><span class="entity_def" id="offset_6868..6883">sumset_iterated</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sumset_iterated</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>Finite_Set.fold</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span class="free"><span>ð¬</span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_0|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_0|thm"><span class="entity_def" id="offset_6996..7013">sumset_iterated_0</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span class="free"><span>ð¬</span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6857..6867"><span>sumset_iterated_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_Suc|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_Suc|thm"><span>sumset_iterated_Suc</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><span>comp_fun_commute_on</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{..</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3085..3097"><span>sumset_assoc</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3219..3233"><span>sumset_commute</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7309..7311">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>comp_fun_commute_on_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span>Finite_Set.fold</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span class="free"><span>ð¬</span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>{..&lt;</span></span><span class="free"><span>k</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6857..6867"><span>sumset_iterated_def</span></a><span> </span><span>lessThan_Suc</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7309..7311"><span>fold_insert</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6857..6867"><span>sumset_iterated_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_2|thm"><span>sumset_iterated_2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>eval_nat_numeral</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_r|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_r|thm"><span class="entity_def" id="offset_7715..7732">sumset_iterated_r</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span class="main"><span>-</span></span><span class="main"><span>1</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>gr0_conv_Suc</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_subset_carrier|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_subset_carrier|thm"><span class="entity_def" id="offset_7838..7868">sumset_iterated_subset_carrier</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1559..1580"><span>sumset_subset_carrier</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.finite_sumset_iterated|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.finite_sumset_iterated|thm"><span class="entity_def" id="offset_7951..7973">finite_sumset_iterated</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3331..3344"><span>finite_sumset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_empty|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.sumset_iterated_empty|thm"><span class="entity_def" id="offset_8069..8090">sumset_iterated_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span class="main"><span>&gt;</span></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="main"><span>{}</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>r</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Difference sets</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.inducts|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.simps|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.induct|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.cases|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.intros|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp_minusset_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.inducts|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.simps|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.induct|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.cases|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.intros|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.inducts|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.simps|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.induct|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.cases|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.intros|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp_minusset_eq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.inducts|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.simps|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.induct|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.cases|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.intros|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_def|axiom"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp_def|axiom"><span class="entity_def" id="offset_8184..8197">inductive_set</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.cong|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.cong|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.cong|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.cong|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp|const"><span class="entity_def" id="offset_8198..8206">minusset</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="entity"><span>A</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.minussetI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.minussetI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset.minussetI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minussetp.minussetI|thm"><span class="entity_def" id="offset_8246..8255">minussetI</span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>inverse</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>minusset</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_eq|thm"><span class="entity_def" id="offset_8313..8324">minusset_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>inverse</span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8184..8197"><span>minusset.simps</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.differenceset|const"><span class="entity_def" id="offset_8408..8421">differenceset</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_is_empty_iff|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_is_empty_iff|thm"><span>minusset_is_empty_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_triv|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_triv|thm"><span>minusset_triv</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span class="free"><span>ð¬</span></span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span class="free"><span>ð¬</span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_subset_carrier|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_subset_carrier|thm"><span class="entity_def" id="offset_8636..8659">minusset_subset_carrier</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minus_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minus_minusset|thm"><span class="entity_def" id="offset_8715..8729">minus_minusset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>inverse_equality</span><span> </span><span>invertible</span><span> </span><span>invertibleE</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8246..8255"><span>minusset.minussetI</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_minusset|thm"><span class="entity_def" id="offset_8894..8907">card_minusset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>bij_betw_same_card</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bij_betw</span><span> </span><span class="main"><span>(</span></span><span>inverse</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>bij_betwI</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_minusset&apos;|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_minusset&apos;|thm"><span class="entity_def" id="offset_9097..9111">card_minusset'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Int_absorb2</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.diff_minus_set|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.diff_minus_set|thm"><span class="entity_def" id="offset_9186..9200">diff_minus_set</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Set.set_eqI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>u</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><span>â·</span></span><span>
          </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>inverse</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1467..1473"><span>sumset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>inverse</span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span class="free"><span>â</span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>inverse_composition_commute</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1467..1473"><span>sumset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span> </span><span>commutative</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.differenceset_commute|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.differenceset_commute|thm"><span class="entity_def" id="offset_9662..9683">differenceset_commute</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9186..9200"><span>diff_minus_set</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8715..8729"><span>minus_minusset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_2956..2977"><span>sumset_Int_carrier_eq</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3219..3233"><span>sumset_commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_distrib_sum|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_distrib_sum|thm"><span class="entity_def" id="offset_9842..9862">minusset_distrib_sum</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9186..9200"><span>diff_minus_set</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_iterated_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.minusset_iterated_minusset|thm"><span class="entity_def" id="offset_9970..9996">minusset_iterated_minusset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9186..9200"><span>diff_minus_set</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_iterated_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.card_sumset_iterated_minusset|thm"><span class="entity_def" id="offset_10118..10147">card_sumset_iterated_minusset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9097..9111"><span>card_minusset'</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9970..9996"><span>minusset_iterated_minusset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7838..7868"><span>sumset_iterated_subset_carrier</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.finite_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.finite_minusset|thm"><span class="entity_def" id="offset_10313..10328">finite_minusset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The Ruzsa triangle inequality</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_triangle_ineq1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_triangle_ineq1|thm"><span class="entity_def" id="offset_10443..10463">Ruzsa_triangle_ineq1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_10475..10476">U</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>U</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>U</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_10507..10508">V</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>V</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>V</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_10539..10540">W</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>W</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10675..10678">fin</span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10475..10476"><span>U</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10507..10508"><span>V</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10539..10540"><span>W</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10313..10328"><span>finite_minusset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3331..3344"><span>finite_sumset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10795..10799">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>w</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>V</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="bound"><span>w</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>W</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="bound"><span>w</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10795..10799"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8313..8324"><span>minusset_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>w</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_10944..10948">vinV</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>V</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_10964..10968">winW</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_10984..10989">vw_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11060..11064">have</span></span></span><span> </span><span class="entity_def" id="offset_11065..11069">vinG</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11085..11089">winG</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10507..10508"><span>V</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10539..10540"><span>W</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11060..11064"><span>that</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10944..10948"><span>vinV</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10964..10968"><span>winW</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_11173..11179">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Ï</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Ï</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>Î»</span></span><span class="main"><span>(</span></span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>v</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>w</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="skolem"><span>Ï</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>U</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>clarsimp</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11173..11179"><span>Ï_def</span></a><span> </span><span>inj_on_def</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>x2</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>U</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>U</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11408..11410">x1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11447..11449">x2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11486..11487">v</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x2</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11523..11524">w</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>U</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span>subset_iff</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1559..1580"><span>sumset_subset_carrier</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x1</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span>associative</span><span> </span><span>commutative</span><span> </span><span>composition_closed</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1120..1134"><span>inverse_closed</span></a><span> 
            </span><span>invertible</span><span> </span><span>invertible_right_inverse2</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11065..11069"><span>vinG</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11085..11089"><span>winG</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11408..11410"><span>x1</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11486..11487"><span>v</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11523..11524"><span>w</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
      </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x2</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x2</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span>associative</span><span> </span><span>commutative</span><span> </span><span>composition_closed</span><span> </span><span>inverse_equality</span><span> 
            </span><span>invertible</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_908..914"><span>invertible_def</span></a><span> </span><span>invertible_right_inverse2</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11065..11069"><span>vinG</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11085..11089"><span>winG</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11447..11449"><span>x2</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>x2</span></span><span> </span><span class="main"><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1039..1046"><span>â</span></a></span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x1</span></span><span class="main"><span>=</span></span><span class="skolem"><span>x2</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11408..11410"><span>x1</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11447..11449"><span>x2</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10984..10989"><span>vw_eq</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u1</span></span><span class="main"><span>=</span></span><span class="skolem"><span>u2</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>u1</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>u2</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11523..11524"><span>w</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11085..11089"><span>winG</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11408..11410"><span>x1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Ï</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>U</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>U</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>V</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>W</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fastforce</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_11173..11179"><span>Ï_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10944..10948"><span>vinV</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10964..10968"><span>winW</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>U</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>V</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>card_inj</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10675..10678"><span>fin</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>card_cartesian_product</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>



</span><span class="keyword1"><span class="command"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_distance_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_distance_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_distance_def_raw|axiom"><span class="entity_def" id="offset_12782..12792">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_distance.cong|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_distance.cong|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_distance|const"><span class="entity_def" id="offset_12793..12807">Ruzsa_distance</span></span></span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>set</span><span> </span><span class="main"><span>â</span></span><span> </span><span>real</span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Ruzsa_distance</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="main"><span>(</span></span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12923..12928">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_triangle_ineq2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Ruzsa_triangle_ineq2|thm"><span>Ruzsa_triangle_ineq2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>U</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>U</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>U</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>U</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span>V</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>V</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>V</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span>W</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>W</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>W</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12793..12807"><span>Ruzsa_distance</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12793..12807"><span>Ruzsa_distance</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12793..12807"><span>Ruzsa_distance</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12923..12928"><span>assms</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10443..10463"><span>Ruzsa_triangle_ineq1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="comment1"><span>ââ¹</span><span>now divide both sides with the same quantity</span><span>âº</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
         </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12923..12928"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>divide_right_mono</span><span> </span><span>mult_eq_0_iff</span><span> </span><span>mult_left_mono</span><span> </span><span>of_nat_0_le_iff</span><span> </span><span>of_nat_mono</span><span> </span><span>real_sqrt_ge_0_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13667..13668">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span>
                </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span>
                </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12923..12928"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>/</span></span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                  </span><span class="main"><span>=</span></span><span> </span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>*</span></span><span>
                    </span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12923..12928"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>divide_simps</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8894..8907"><span>card_minusset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9662..9683"><span>differenceset_commute</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8715..8729"><span>minus_minusset</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
     </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span>
       </span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span>
       </span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>U</span></span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span class="main"><span>(</span></span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>U</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>sqrt</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>W</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_13667..13668"><span>*</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12923..12928"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_12782..12792"><span>Ruzsa_distance_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>divide_divide_eq_left</span><span> </span><span>divide_divide_eq_left'</span><span> </span><span>times_divide_eq_right</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Petridis's proof of the Pl\"{u}nnecke-Ruzsa inequality</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14677..14682">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Plu_2_2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Plu_2_2|thm"><span class="entity_def" id="offset_14683..14690">Plu_2_2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_14702..14704">K0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A0</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K0</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_14759..14761">A0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A0</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A0</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_14804..14805">B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>K</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K0</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>C</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>C</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>finite</span><span> </span><span class="bound"><span>C</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_14996..15002">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>KS</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>KS</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span>Pow</span><span> </span><span class="free"><span>A0</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>{}</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_15079..15085">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span>Min</span><span> </span><span class="skolem"><span>KS</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_15109..15115">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="main"><span>@</span></span><span class="bound"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>Pow</span><span> </span><span class="free"><span>A0</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>{}</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="entity_def" id="offset_15201..15203">KS</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>KS</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>KS</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14996..15002"><span>KS_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14759..14761"><span>A0</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>KS</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15079..15085"><span>K_def</span></a><span> </span><span>Min_in</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>Pow</span><span> </span><span class="free"><span>A0</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>{}</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14996..15002"><span>KS_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>Pow</span><span> </span><span class="free"><span>A0</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>{}</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_15449..15452">Keq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15109..15115"><span>A_def</span></a><span> </span><span>someI_ex</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="entity_def" id="offset_15557..15558">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14759..14761"><span>A0</span></a><span> </span><span>finite_subset</span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15654..15658">have</span></span></span><span> </span><span>gt0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15654..15658"><span>that</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14677..14682"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>order_trans</span><span> </span><span>card_0_eq</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_5568..5585"><span>card_sumset_0_iff</span></a><span> </span><span>divide_pos_pos</span><span> </span><span>of_nat_le_0_iff</span><span> </span><span>finite_subset</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15557..15558"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15449..15452"><span>Keq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15932..15939">K_cardA</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15449..15452"><span>Keq</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15449..15452"><span>Keq</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>K</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16023..16027">have</span></span></span><span> </span><span class="entity_def" id="offset_16028..16032">K_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A'</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15201..15203"><span>KS</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15079..15085"><span>K_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14996..15002"><span>KS_def</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A0</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16023..16027"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14759..14761"><span>A0</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A0</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>/</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>KS</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14996..15002"><span>KS_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14759..14761"><span>A0</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15201..15203"><span>KS</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15079..15085"><span>K_def</span></a><span> </span><span>Min_le_iff</span><span> </span><span>card_gt_0_iff</span><span> </span><span>mult_imp_div_pos_le</span><span> </span><span>of_nat_0_less_iff</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14702..14704"><span>K0</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_16355..16359">show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>C</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16355..16359"><span>that</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>C</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="comment1"><span>â â¹</span><span>This is actually trivial: it does not follow from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> 
</span><span>         as claimed in the notes.</span><span>âº</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_16686..16692">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_16757..16763">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span class="free"><span>â</span></span></span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span>card_mono</span><span> </span><span>of_nat_diff</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17002..17003">0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>clarsimp</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16757..16763"><span>A'_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span> </span><span>disjoint_iff</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>IntI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17127..17128">1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16757..16763"><span>A'_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_17002..17003"><span>0</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_17127..17128"><span>1</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span>card_Un_disjoint</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3331..3344"><span>finite_sumset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16686..16692"><span>local.insert</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>G</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3696..3720"><span>card_sumset_singleton_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span>  </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span>Int_absorb2</span><span> </span><span>Int_Diff</span><span> </span><span>Int_commute</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16757..16763"><span>A'_def</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span>card_Diff_subset</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17773..17774">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>clarsimp</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16757..16763"><span>A'_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1344..1353"><span>sumset_eq</span></a><span> </span><span>Bex_def</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>associative</span><span> </span><span>commutative</span><span> </span><span>composition_closed</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                 </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1963..1977"><span>sumset_insert2</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_2183..2200"><span>sumset_subset_Un2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                           </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14804..14805"><span>B</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>C</span></span><span>âº</span></span></span><span> </span><span>order_trans</span><span> </span><span>card_Un_le</span><span> </span><span>card_mono</span><span> </span><span>finite.emptyI</span><span>
              </span><span>finite.insertI</span><span> </span><span>finite_Diff</span><span> </span><span>finite_Un</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3331..3344"><span>finite_sumset</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A'</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>âº</span></span></span><span> </span><span>card_Diff_subset</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3331..3344"><span>finite_sumset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1749..1760"><span>sumset_mono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A'</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3696..3720"><span>card_sumset_singleton_eq</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3331..3344"><span>finite_sumset</span></a><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3085..3097"><span>sumset_assoc</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16686..16692"><span>local.insert</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15932..15939"><span>K_cardA</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16028..16032"><span>K_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>divide_simps</span></span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>if_split_asm</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14804..14805"><span>B</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_15932..15939"><span>K_cardA</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span>card_mono</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_3331..3344"><span>finite_sumset</span></a><span> </span><span>of_nat_diff</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1749..1760"><span>sumset_mono</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_16686..16692"><span>local.insert</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_17773..17774"><span>*</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>of_nat_mono</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_19768..19773">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Cor_Plu_2_3|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Cor_Plu_2_3|thm"><span class="entity_def" id="offset_19774..19785">Cor_Plu_2_3</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_19797..19798">K</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_19850..19851">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_19891..19892">B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
                   </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_20069..20073">True</span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19768..19773"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_20069..20073"><span>True</span></a><span> </span><span>zero_le_mult_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20158..20159">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>=</span></span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span class="free"><span>ð¬</span></span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_20069..20073"><span>True</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6996..7013"><span>sumset_iterated_0</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8069..8090"><span>sumset_iterated_empty</span></a><span> </span><span>zero_less_iff_neq_zero</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_20158..20159"><span>*</span></a><span>"</span></span><span> </span><span>Int_commute</span><span>  </span><span>Int_absorb2</span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19768..19773"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_20516..20521">False</span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K'</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_20547..20549">A'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K'</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_20598..20605">A'_card</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>C</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>C</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>finite</span><span> </span><span class="bound"><span>C</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>K'</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="bound"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19850..19851"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19891..19892"><span>B</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14683..14690"><span>Plu_2_2</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19797..19798"><span>K</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_20516..20521"><span>False</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19850..19851"><span>A</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20768..20769">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>K'</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
          </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19768..19773"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7715..7732"><span>sumset_iterated_r</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_20598..20605"><span>A'_card</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19891..19892"><span>B</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7951..7973"><span>finite_sumset_iterated</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7838..7868"><span>sumset_iterated_subset_carrier</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21182..21184">**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="skolem"><span>K'</span></span><span class="main"><span>^</span></span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="skolem"><span>r</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>âº</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>Int_absorb2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_20768..20769"><span>*</span></a><span>"</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="skolem"><span>K'</span></span><span>âº</span></span></span><span> </span><span>mult.commute</span><span> </span><span>mult.left_commute</span><span> </span><span>mult_le_cancel_left_pos</span><span> </span><span>power_Suc</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="free"><span>thesis</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_21182..21184"><span>**</span></a><span>"</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_20547..20549"><span>A'</span></a><span> </span><span>order_trans</span><span> </span><span>less_eq_real_def</span><span> </span><span>mult_right_mono</span><span> </span><span>of_nat_0_le_iff</span><span> </span><span>power_mono</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_20547..20549"><span>A'</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The following Corollary of the above is an important special case,
</span><span>also referred to as the original version of Pl\"{u}nnecke's inequality first shown by Pl\"{u}nnecke.</span><span> </span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21915..21920">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Cor_Plu_2_3_Pluennecke_ineq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Cor_Plu_2_3_Pluennecke_ineq|thm"><span>Cor_Plu_2_3_Pluennecke_ineq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_21960..21961">K</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_22013..22014">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span>B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_22169..22170">*</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_21915..21920"><span>assms</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19774..19785"><span>Cor_Plu_2_3</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_21915..21920"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>  </span><span>**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4923..4937"><span>card_le_sumset</span></a><span> </span><span>finite_subset</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7951..7973"><span>finite_sumset_iterated</span></a><span> </span><span>subset_empty</span><span> </span><span>subset_iff</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7838..7868"><span>sumset_iterated_subset_carrier</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22169..22170"><span>*</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22013..22014"><span>A</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_21960..21961"><span>K</span></a><span> </span><span>card_mono</span><span> </span><span>mult_left_mono</span><span> </span><span>of_nat_0_le_iff</span><span> </span><span>of_nat_le_iff</span><span> </span><span>zero_le_mult_iff</span><span> </span><span>zero_le_power</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Special case where </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span class="main"><span>=</span></span><span class="free"><span>A</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Cor_Plu_2_3_1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Cor_Plu_2_3_1|thm"><span>Cor_Plu_2_3_1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_22728..22729">K</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_22781..22782">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22781..22782"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22728..22729"><span>K</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_14683..14690"><span>Plu_2_2</span></a><span> </span><span>less_le_trans</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>A'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_22984..22991">A'_card</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22781..22782"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19774..19785"><span>Cor_Plu_2_3</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22728..22729"><span>K</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22781..22782"><span>A</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>ex_in_conv</span><span> </span><span>finite_subset</span><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22781..22782"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4923..4937"><span>card_le_sumset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7951..7973"><span>finite_sumset_iterated</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7838..7868"><span>sumset_iterated_subset_carrier</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_22984..22991"><span>A'_card</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>K</span></span><span>âº</span></span></span><span> </span><span>card_mono</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Special case where </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span class="main"><span>=</span></span><span class="main"><span>-</span></span><span class="free"><span>A</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_23615..23620">lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Cor_Plu_2_3_2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Cor_Plu_2_3_2|thm"><span>Cor_Plu_2_3_2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_23646..23647">K</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_23706..23707">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_23706..23707"><span>A</span></a><span> </span><span>card_gt_0_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_23646..23647"><span>K</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>of_nat_0_less_iff</span><span> </span><span>of_nat_less_0_iff</span><span> </span><span>zero_le_mult_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>A'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_24015..24022">A'_card</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_23706..23707"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19774..19785"><span>Cor_Plu_2_3</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_23615..23620"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>card_eq_0_iff</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9097..9111"><span>card_minusset'</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8636..8659"><span>minusset_subset_carrier</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_23706..23707"><span>A</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>ex_in_conv</span><span> </span><span>finite_subset</span><span> </span><span>subset_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_23706..23707"><span>A</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_4923..4937"><span>card_le_sumset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10118..10147"><span>card_sumset_iterated_minusset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10313..10328"><span>finite_minusset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7951..7973"><span>finite_sumset_iterated</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7838..7868"><span>sumset_iterated_subset_carrier</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_24015..24022"><span>A'_card</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span>âº</span></span></span><span> </span><span>card_mono</span><span> </span><span>mult_left_mono</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The following result is known as the Pl\"{u}nnecke-Ruzsa inequality (Theorem 2.5
</span><span>in Gowers's notes). The proof will make use of the Ruzsa triangle inequality.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24913..24920">theorem</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Pluennecke_Ruzsa_ineq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Pluennecke_Ruzsa_ineq|thm"><span class="entity_def" id="offset_24921..24942">Pluennecke_Ruzsa_ineq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_24954..24955">K</span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_25008..25009">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="offset_25049..25050">B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span class="main"><span>+</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25008..25009"><span>A</span></a><span> </span><span>card_gt_0_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_24954..24955"><span>K</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>of_nat_0_less_iff</span><span> </span><span>of_nat_less_0_iff</span><span> </span><span>zero_le_mult_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_25384..25386">A'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_25415..25420">A'_le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_19774..19785"><span>Cor_Plu_2_3</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_24913..24920"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_25530..25536">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>C</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8198..8206"><span>minusset</span></a><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â </span></span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_25604..25609">cardA</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_25634..25639">cardC</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25384..25386"><span>A'</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25008..25009"><span>A</span></a><span> </span><span>card_mono</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25530..25536"><span>C_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9097..9111"><span>card_minusset'</span></a><span> </span><span>Int_absorb2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>cardCA</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25415..25420"><span>A'_le</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25530..25536"><span>C_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9097..9111"><span>card_minusset'</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9186..9200"><span>diff_minus_set</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1559..1580"><span>sumset_subset_carrier</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_25965..25966">r</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>r</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>  </span><span class="entity_def" id="offset_26046..26047">s</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="free"><span>s</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25634..25639"><span>cardC</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25384..25386"><span>A'</span></a><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25634..25639"><span>cardC</span></a><span> </span><span>card_gt_0_iff</span><span> </span><span>finite_subset</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25530..25536"><span>C_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8636..8659"><span>minusset_subset_carrier</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span>
           </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10443..10463"><span>Ruzsa_triangle_ineq1</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25049..25050"><span>B</span></a><span> </span><span>card_gt_0_iff</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7951..7973"><span>finite_sumset_iterated</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_7838..7868"><span>sumset_iterated_subset_carrier</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span class="main"><span>+</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>mult_mono</span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25965..25966"><span>r</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_26046..26047"><span>s</span></a><span class="main"><span>]</span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>power_add</span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span class="main"><span>+</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>card</span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>âº</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="dynamic"><span class="dynamic"><span>field_simps</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span class="main"><span>0</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span>âº</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25604..25609"><span>cardA</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_25634..25639"><span>cardC</span></a><span> </span><span>mult_left_mono</span><span> </span><span>of_nat_mono</span><span> </span><span>zero_le_power</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The following is an alternative version of the Pl\"{u}nnecke-Ruzsa inequality (Theorem 2.1
</span><span>in Gowers's notes).</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27123..27130">theorem</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Pluennecke_Ruzsa_ineq_alt|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Pluennecke_Ruzsa_ineq_alt|thm"><span>Pluennecke_Ruzsa_ineq_alt</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_1212..1218"><span>sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span class="main"><span>+</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_27381..27385">True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27393..27397">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>r</span></span><span class="main"><span>&gt;</span></span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8069..8090"><span>sumset_iterated_empty</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_27393..27397"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_27123..27130"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_27381..27385"><span>True</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_27123..27130"><span>assms</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_24921..24942"><span>Pluennecke_Ruzsa_ineq</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27622..27629">theorem</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Pluennecke_Ruzsa_ineq_alt_2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.additive_abelian_group.Pluennecke_Ruzsa_ineq_alt_2|thm"><span>Pluennecke_Ruzsa_ineq_alt_2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>G</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8408..8421"><span>differenceset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>^</span></span><span class="main"><span>(</span></span><span class="free"><span>r</span></span><span class="main"><span>+</span></span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span>real</span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_27889..27893">True</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27901..27905">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_6868..6883"><span>sumset_iterated</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>r</span></span><span class="main"><span>&gt;</span></span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8069..8090"><span>sumset_iterated_empty</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_27901..27905"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_27622..27629"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_27889..27893"><span>True</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_27622..27629"><span>assms</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_24921..24942"><span>Pluennecke_Ruzsa_ineq</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9097..9111"><span>card_minusset'</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9662..9683"><span>differenceset_commute</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_10313..10328"><span>finite_minusset</span></a><span> 
        </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9842..9862"><span>minusset_distrib_sum</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_9970..9996"><span>minusset_iterated_minusset</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_8636..8659"><span>minusset_subset_carrier</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Supplementary material on sumsets for sets of integers: basic inequalities</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.moninv_int|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.moninv_int|thm"><span>moninv_int</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Jacobson_Basic_Algebra/Group_Theory.html#Group_Theory.monoid.invertible|const"><span>monoid.invertible</span></a><span> </span><span>UNIV</span><span> </span><span class="main"><span>(+)</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="free"><span>u</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>::</span></span><span class="quoted"><span>int</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Jacobson_Basic_Algebra/Group_Theory.html#Group_Theory.monoid.invertibleI|fact"><span>monoid.invertibleI</span></a><span> </span><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> v </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>-</span></span><span class="free"><span>u</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Jacobson_Basic_Algebra/Group_Theory.html#Group_Theory.monoid_def|fact"><span>Group_Theory.monoid_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Pluennecke_Ruzsa_ineq_alt_2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Pluennecke_Ruzsa_ineq_alt|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Pluennecke_Ruzsa_ineq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Cor_Plu_2_3_2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Cor_Plu_2_3_1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Cor_Plu_2_3_Pluennecke_ineq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Cor_Plu_2_3|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Plu_2_2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Ruzsa_triangle_ineq2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Ruzsa_distance_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Ruzsa_triangle_ineq1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.finite_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_iterated_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_iterated_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_distrib_sum|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.differenceset_commute|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.diff_minus_set|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_minusset&apos;|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minus_minusset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_subset_carrier|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_triv|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_is_empty_iff|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.inducts|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.simps|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.induct|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.cases|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.intros|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.minussetI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp_minusset_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.inducts|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.simps|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.induct|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.cases|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.intros|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.minussetI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_empty|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.finite_sumset_iterated|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_subset_carrier|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_r|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_Suc|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_0|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_leq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_0_iff|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_0_iff&apos;|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_le_sumset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.infinite_sumset_iff|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.infinite_sumset_aux|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_le|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_singleton_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetdiff_sing|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.finite_sumset&apos;|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.finite_sumset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_commute|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_assoc|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_Int_carrier_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_D|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_is_empty_iff|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_empty&apos;|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_empty|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_Un|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_insert|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_Un2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_Un1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_insert2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_insert1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_mono|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_Int_carrier|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_carrier|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.inducts|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.simps|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.induct|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.cases|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.intros|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.sumsetI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp_sumset_eq|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.inducts|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.simps|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.induct|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.cases|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.intros|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.sumsetI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_closed|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.additive_abelian_group_axioms|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.abelian_group_axioms|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.commutative|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.commutative_monoid_axioms|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_subgroupD|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_subgroupI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.cayley_group|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.group_axioms|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.cayley_monoid|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_composition_commute|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_left_inverse2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_right_inverse2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.unit_invertible|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.composition_invertible|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.group_of_Units|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.mem_UnitsD|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.mem_UnitsI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Units_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.subgroupI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_inverse_inverse|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_inverse_invertible|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_unit|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_right_cancel|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_left_cancel|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_right_inverse|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_left_inverse|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_undefined|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_inverse_closed|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_equality|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_unique|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertibleE|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertibleI|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_def|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.right_unit|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.left_unit|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.associative|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.unit_closed|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.composition_closed|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.monoid_axioms|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Pluennecke_Ruzsa_ineq_alt_2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Pluennecke_Ruzsa_ineq_alt|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Pluennecke_Ruzsa_ineq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Cor_Plu_2_3_2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Cor_Plu_2_3_1|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Cor_Plu_2_3_Pluennecke_ineq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Ruzsa_triangle_ineq2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Ruzsa_distance_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Ruzsa_triangle_ineq1|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.finite_minusset|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_iterated_minusset|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_iterated_minusset|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_distrib_sum|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.diff_minus_set|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_minusset&apos;|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_subset_carrier|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_eq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.intros|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.intros|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_empty|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.finite_sumset_iterated|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_subset_carrier|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_r|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_leq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_0_iff|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_0_iff&apos;|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_le_sumset|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.infinite_sumset_iff|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.infinite_sumset_aux|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_le|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetdiff_sing|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.finite_sumset&apos;|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_assoc|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_empty&apos;(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_empty&apos;(1)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_Un(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_Un(1)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_insert(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_insert(1)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_Un2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_Un1|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_insert2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_insert1|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_mono|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_subset_carrier|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_eq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.intros|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.intros|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_closed|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.commutative|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_subgroupD|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_subgroupI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.cayley_group|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.cayley_monoid|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_composition_commute|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_left_inverse2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_right_inverse2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.unit_invertible|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.mem_UnitsD|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.mem_UnitsI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Units_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.subgroupI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_equality|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_unique|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_def|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.finite_sumset|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_commute|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_sumset_singleton_eq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Cor_Plu_2_3|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Plu_2_2|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.differenceset_commute|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.card_minusset|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minus_minusset|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_triv|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset_is_empty_iff|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.inducts|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.simps|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.induct|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.cases|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset.minussetI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp_minusset_eq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.inducts|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.simps|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.induct|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.cases|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp.minussetI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_Suc|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated_0|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_Int_carrier_eq(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_Int_carrier_eq(1)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_D(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_D(1)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_is_empty_iff|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_empty(2)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_empty(1)|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_Int_carrier|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.inducts|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.simps|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.induct|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.cases|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset.sumsetI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp_sumset_eq|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.inducts|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.simps|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.induct|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.cases|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp.sumsetI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.additive_abelian_group_axioms|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.abelian_group_axioms|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.commutative_monoid_axioms|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.group_axioms|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.composition_invertible|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.group_of_Units|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_inverse_inverse|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_inverse_invertible|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_unit|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_right_cancel|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_left_cancel|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_right_inverse|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_left_inverse|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse_undefined|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible_inverse_closed|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertibleE|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertibleI|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.right_unit|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.left_unit|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.associative|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.unit_closed|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.composition_closed|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.monoid_axioms|thm"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Ruzsa_distance|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.differenceset|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minusset|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.minussetp|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset_iterated|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumset|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.sumsetp|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.G_minus|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Factor_Group|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.Units|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.inverse|const"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.int.invertible|const"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> int</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.additive_abelian_group|locale"><span>additive_abelian_group</span></a><span> </span><span class="quoted"><span>UNIV</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(+)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span class="main"><span>::</span></span><span>int</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.moninv_int|fact"><span>moninv_int</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.card_sumset_geq1|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.card_sumset_geq1|thm"><span>card_sumset_geq1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_28672..28673">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_28699..28700">B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28672..28673"><span>A</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induction</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_28837..28840">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_28846..28852">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Max</span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>â¡</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="entity_def" id="offset_28920..28921">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_28971..28972">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>insert</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>A'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Max_in</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28837..28840"><span>Suc</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28846..28852"><span>a_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28837..28840"><span>Suc</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>card_Diff_singleton</span><span> </span><span>diff_Suc_Suc</span><span> </span><span>minus_nat.diff_0</span><span> </span><span>One_nat_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28971..28972"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28699..28700"><span>B</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.card_sumset_singleton_eq|fact"><span>int.card_sumset_singleton_eq</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset_commute|fact"><span>int.sumset_commute</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_29305..29310">False</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>Max</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="skolem"><span>A</span></span><span>âº</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>â¹</span><span>finite</span><span> </span><span class="free"><span>B</span></span><span>âº</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>DiffE</span><span> </span><span>Max_ge</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28920..28921"><span>a</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28846..28852"><span>a_def</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset.cases|fact"><span>int.sumset.cases</span></a><span> </span><span>singleton_iff</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_29479..29480">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>(+)</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28699..28700"><span>B</span></a><span> </span><span>Max_in</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28837..28840"><span>Suc</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_29305..29310"><span>False</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28971..28972"><span>A</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28920..28921"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>le_diff_conv</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>(+)</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28920..28921"><span>a</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28699..28700"><span>B</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_29479..29480"><span>*</span></a><span>"</span></span><span> </span><span>card_seteq</span><span> </span><span>finite_Un</span><span> </span><span>finite_imageI</span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.finite_sumset|fact"><span>int.finite_sumset</span></a><span> </span><span>not_less_eq_eq</span><span> </span><span>sup_ge1</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â¦</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>card_mono</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28699..28700"><span>B</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28837..28840"><span>Suc.prems</span></a><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.finite_sumset|fact"><span>int.finite_sumset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>âª</span></span><span> </span><span class="main"><span>(+)</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#offset_28971..28972"><span>A</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>force</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|fact"><span>int.sumset</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.card_sumset_geq2|fact"><span class="entity_def" id="Pluennecke_Ruzsa_Inequality.card_sumset_geq2|thm"><span>card_sumset_geq2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.int.sumset|const"><span>int.sumset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="numeral"><span>2</span></span><span> </span><span class="main"><span>*</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Pluennecke_Ruzsa_Inequality.html#Pluennecke_Ruzsa_Inequality.card_sumset_geq1|fact"><span>card_sumset_geq1</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>mult.commute</span><span> </span><span>Nat.add_0_right</span><span> </span><span>card_eq_0_iff</span><span> </span><span>diff_0_eq_0</span><span> </span><span>le0</span><span> </span><span>mult_2_right</span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div>